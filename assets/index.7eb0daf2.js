const j5=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}};j5();const z5="modulepreload",sx={},V5="/",W=function(t,i){return!i||i.length===0?t():Promise.all(i.map(s=>{if(s=`${V5}${s}`,s in sx)return;sx[s]=!0;const n=s.endsWith(".css"),r=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${r}`))return;const o=document.createElement("link");if(o.rel=n?"stylesheet":z5,n||(o.as="script",o.crossOrigin=""),o.href=s,document.head.appendChild(o),n)return new Promise((a,l)=>{o.addEventListener("load",a),o.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())};function d(e,t,i,s){var n,r=arguments.length,o=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(r<3?n(o):r>3?n(t,i,o):n(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o}function Wle(e,t){return function(i,s){t(i,s,e)}}function Ble(e,t,i,s){function n(r){return r instanceof i?r:new i(function(o){o(r)})}return new(i||(i=Promise))(function(r,o){function a(h){try{c(s.next(h))}catch(p){o(p)}}function l(h){try{c(s.throw(h))}catch(p){o(p)}}function c(h){h.done?r(h.value):n(h.value).then(a,l)}c((s=s.apply(e,t||[])).next())})}let oo;function L(e){return typeof oo[e]=="function"?oo[e]=oo[e](globalThis):oo[e]}oo=globalThis.dojoConfig?.has||globalThis.esriConfig?.has?{...globalThis.dojoConfig?.has,...globalThis.esriConfig?.has}:{},L.add=(e,t,i,s)=>((s||oo[e]===void 0)&&(oo[e]=t),i&&L(e)),L.cache=oo,L.add("big-integer-warning-enabled",!0),L.add("esri-deprecation-warnings",!0),L.add("esri-tests-disable-screenshots",!1),L.add("esri-tests-use-full-window",!1),L.add("esri-tests-post-to-influx",!0),(()=>{L.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(L.add("host-browser",e),L.add("host-node",typeof globalThis.process=="object"&&globalThis.process.versions?.node&&globalThis.process.versions.v8),L.add("dom",e),L("host-browser")){const t=navigator,i=t.userAgent,s=t.appVersion,n=parseFloat(s);if(L.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),L.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),L.add("khtml",s.includes("Konqueror")?n:void 0),L.add("edge",parseFloat(i.split("Edge/")[1])||void 0),L.add("opr",parseFloat(i.split("OPR/")[1])||void 0),L.add("webkit",!L("wp")&&!L("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),L.add("chrome",!L("edge")&&!L("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),L.add("android",!L("wp")&&parseFloat(i.split("Android ")[1])||void 0),L.add("safari",!s.includes("Safari")||L("wp")||L("chrome")||L("android")||L("edge")||L("opr")?void 0:parseFloat(s.split("Version/")[1])),L.add("mac",s.includes("Macintosh")),!L("wp")&&/(iPhone|iPod|iPad)/.test(i)){const r=RegExp.$1.replace(/P/,"p"),o=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",a=parseFloat(o.replace(/_/,".").replaceAll("_",""));L.add(r,a),L.add("ios",a)}L("webkit")||(!i.includes("Gecko")||L("wp")||L("khtml")||L("edge")||L.add("mozilla",n),L("mozilla")&&L.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&L.add("esri-mobile",t),i&&L.add("esri-iPhone",i),L.add("esri-geolocation",!!navigator.geolocation)}L.add("esri-wasm","WebAssembly"in globalThis),L.add("esri-performance-mode-frames-between-render",20),L.add("esri-force-performance-mode",!1),L.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),L.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),L.add("esri-atomics","Atomics"in globalThis),L.add("esri-workers","Worker"in globalThis),L.add("web-feat:cache","caches"in globalThis),L.add("esri-workers-arraybuffer-transfer",!L("safari")||Number(L("safari"))>=12),L.add("workers-pool-size",8),L.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),L.add("featurelayer-simplify-payload-size-factors",[1,1,4]),L.add("featurelayer-fast-triangulation-enabled",!0),L.add("featurelayer-animation-enabled",!0),L.add("featurelayer-snapshot-enabled",!0),L.add("featurelayer-snapshot-point-min-threshold",8e4),L.add("featurelayer-snapshot-point-max-threshold",4e5),L.add("featurelayer-snapshot-point-coverage",.1),L.add("featurelayer-query-max-depth",4),L.add("featurelayer-query-pausing-enabled",!1),L.add("featurelayer-advanced-symbols",!1),L.add("featurelayer-pbf",!0),L.add("featurelayer-pbf-statistics",!1),L.add("feature-layers-workers",!0),L.add("feature-polyline-generalization-factor",1),L.add("mapview-transitions-duration",200),L.add("mapview-essential-goto-duration",200),L.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),L.add("mapserver-pbf-version-support",10.81),L.add("mapservice-popup-identify-max-tolerance",20),L("host-webworker")||L("host-browser")&&(L.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),L.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{L.add("esri-image-decode",!0,!0,!0)}).catch(()=>{L.add("esri-image-decode",!1,!0,!0)})}return!1}),L.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();class Ts{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Ts._m}getInt(){return this._seed=(Ts._a*this._seed+Ts._c)%Ts._m,this._seed}getFloat(){return this.getInt()/(Ts._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const s=i-t;return t+this.getInt()/Ts._m*s}}Ts._m=2147483647,Ts._a=48271,Ts._c=0;function Hle(e,t){return t?e.filter((i,s,n)=>n.findIndex(t.bind(null,i))===s):Array.from(new Set(e))}function ug(e,t,i){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(i){for(let s=0;s<e.length;s++)if(!i(e[s],t[s]))return!1}else for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}function Gle(e,t){let i=e.length!==t.length;i&&(e.length=t.length);for(let s=0;s<t.length;++s)e[s]!==t[s]&&(e[s]=t[s],i=!0);return i}function nx(e,t,i){let s,n;return i?(s=t.filter(r=>!e.some(o=>i(o,r))),n=e.filter(r=>!t.some(o=>i(o,r)))):(s=t.filter(r=>!e.includes(r)),n=e.filter(r=>!t.includes(r))),{added:s,removed:n}}function qle(e){return e&&typeof e.length=="number"}class e3{constructor(){this.last=0}}const t3=new e3;function X0(e,t,i,s){s=s||t3;const n=Math.max(0,s.last-10);for(let o=n;o<i;++o)if(e[o]===t)return s.last=o,o;const r=Math.min(n,i);for(let o=0;o<r;++o)if(e[o]===t)return s.last=o,o;return-1}function U5(e,t,i,s){const n=i??e.length,r=X0(e,t,n,s);if(r!==-1)return e[r]=e[n-1],i==null&&e.pop(),t}const hs=new Set;function W5(e,t,i=e.length,s=t.length,n,r){if(s===0||i===0)return i;hs.clear();for(let a=0;a<s;++a)hs.add(t[a]);n=n||t3;const o=Math.max(0,n.last-10);for(let a=o;a<i;++a)if(hs.has(e[a])&&(r?.push(e[a]),hs.delete(e[a]),e[a]=e[i-1],--i,--a,hs.size===0||i===0))return hs.clear(),i;for(let a=0;a<o;++a)if(hs.has(e[a])&&(r?.push(e[a]),hs.delete(e[a]),e[a]=e[i-1],--i,--a,hs.size===0||i===0))return hs.clear(),i;return hs.clear(),i}new Ts;function B5(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}function Ih(e,t){return e!=null}function i3(e){return 32+e.length}function u_(){return 16}function Yle(e){if(!e)return 0;let t=n3;for(const i in e)if(e.hasOwnProperty(i)){const s=e[i];switch(typeof s){case"string":t+=i3(s);break;case"number":t+=u_();break;case"boolean":t+=4}}return t}function H5(e){if(!e)return 0;if(Array.isArray(e))return G5(e);let t=n3;for(const i in e)e.hasOwnProperty(i)&&(t+=s3(e[i]));return t}function G5(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let i=r3;for(let s=0;s<t;s++)i+=s3(e[s]);return i}function s3(e){switch(typeof e){case"object":return H5(e);case"string":return i3(e);case"number":return u_();case"boolean":return 4;default:return 8}}function q5(e,t){return r3+e.length*t}const n3=32,r3=16;function Zle(e){return e instanceof ArrayBuffer}function h_(e){return e?.constructor?.name==="Int8Array"}function o3(e){return e?.constructor?.name==="Uint8Array"}function a3(e){return e?.constructor?.name==="Uint8ClampedArray"}function d_(e){return e?.constructor?.name==="Int16Array"}function l3(e){return e?.constructor?.name==="Uint16Array"}function p_(e){return e?.constructor?.name==="Int32Array"}function c3(e){return e?.constructor?.name==="Uint32Array"}function hg(e){return e?.constructor?.name==="Float32Array"}function dg(e){return e?.constructor?.name==="Float64Array"}function Y5(e){return!("buffer"in e)}function Jle(...e){return e.reduce((t,i)=>t+(i?Y5(i)?q5(i,u_()):i.byteLength+Z5:0),0)}const Z5=145,Xle=1024;function Kle(e){return dg(e)||hg(e)||p_(e)||d_(e)||h_(e)}function Qle(e){return dg(e)||hg(e)}function ece(e){return dg(e)?179769e303:hg(e)?3402823e32:c3(e)?4294967295:l3(e)?65535:o3(e)||a3(e)?255:p_(e)?2147483647:d_(e)?32767:h_(e)?127:256}function u3(e,t){let i;if(t)for(i in e)e.hasOwnProperty(i)&&(e[i]===void 0?delete e[i]:e[i]instanceof Object&&u3(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function F(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=p3(e);if(t!=null)return t;if(Zf(e))return e.clone();if(h3(e))return e.map(F);if(d3(e))return e.clone();const i={};for(const s of Object.getOwnPropertyNames(e))i[s]=F(e[s]);return i}function K0(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=p3(e);if(t!=null)return t;if(h3(e)){let i=!0;const s=e.map(n=>{const r=K0(n);return n!=null&&r==null&&(i=!1),r});return i?s:null}if(Zf(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(!d3(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const s of Object.getOwnPropertyNames(e)){const n=e[s],r=K0(n);if(n!=null&&r==null)return null;i[s]=r}return i}return null}function Zf(e){return typeof e.clone=="function"}function h3(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function d3(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function rx(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function p3(e){if(h_(e)||o3(e)||a3(e)||d_(e)||l3(e)||p_(e)||c3(e)||hg(e)||dg(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[i,s]of e)t.set(i,F(s));return t}if(e instanceof Set){const t=new Set;for(const i of e)t.add(F(i));return t}return null}function f_(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof e?.getTime=="function"&&typeof t?.getTime=="function"&&e.getTime()===t.getTime()||!1}function f3(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&ug(e,t):e instanceof Set?t instanceof Set&&X5(e,t):e instanceof Map?t instanceof Map&&K5(e,t):!!rx(e)&&rx(t)&&J5(e,t))}function J5(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const s of i)if(e[s]!==t[s]||!Object.prototype.hasOwnProperty.call(t,s))return!1;return!0}function X5(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function K5(e,t){if(e.size!==t.size)return!1;for(const[i,s]of e){const n=t.get(i);if(n!==s||n===void 0&&!t.has(i))return!1}return!0}function Q5(e,t,i=!1){return g3(e,t,i)}function pg(e,t){if(t!=null)return t[e]||m3(e.split("."),!1,t)}function sl(e,t,i){const s=e.split("."),n=s.pop(),r=m3(s,!0,i);r&&n&&(r[n]=t)}function ox(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const i=t;if(e.length!==i.length)return!0;for(let s=0;s<e.length;s++)if(ox(e[s],i[s]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const i in e)if(ox(e[i],t[i]))return!0;return!1}return e!==t}function m3(e,t,i){let s=i;for(const n of e){if(s==null)return;if(!(n in s)){if(!t)return;s[n]={}}s=s[n]}return s}function g3(e,t,i){return t?Object.keys(t).reduce((s,n)=>{let r=s[n],o=t[n];return r===o?s:r===void 0?(s[n]=F(o),s):(Array.isArray(o)||Array.isArray(s)?(r=r?Array.isArray(r)?s[n]=r.concat():s[n]=[r]:s[n]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(a=>{r.includes(a)||r.push(a)}):s[n]=o.concat())):o&&typeof o=="object"?s[n]=g3(r,o,i):s.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(s[n]=o),s)},e||{}):e}const Me={apiKey:void 0,applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(Q5(Me,globalThis.esriConfig,!0),delete Me.has),!Me.assetsPath){{const e="4.30";Me.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}Me.defaultAssetsPath=Me.assetsPath}const eN=/\{([^}]+)\}/g;function ax(e){return e??""}function y3(e,t){return t?e.replaceAll(eN,typeof t=="object"?(i,s)=>ax(pg(s,t)):(i,s)=>ax(t(s))):e}function tce(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>t?.includes(i)?i:`\\${i}`)}function v3(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}let lx;function ice(e){return lx??=new DOMParser,lx.parseFromString(e||"","text/html").body.innerText||""}function sce(e,t){return new RegExp(`{${t}}`,"ig").test(e)}const cx={info:0,warn:1,error:2,none:3};class B{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,B._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=B.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,B._loggers.get(t)||new B({module:t})}_log(t,i,...s){if(!!this._matchLevel(t)){if(i!=="always"&&!B._throttlingDisabled){const n=iN(s),r=this._loggedMessages[t].get(n);if(i==="once"&&r!=null||i==="oncePerTick"&&r&&r>=B._tickCounter)return;this._loggedMessages[t].set(n,B._tickCounter),B._scheduleTickCounterIncrement()}for(const n of Me.log.interceptors)if(n(t,this.module,...s))return;this._inheritedWriter()(t,this.module,...s)}}_parentWithMember(t,i){let s=this;for(;s!=null;){const n=s[t];if(n!=null)return n;s=s.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",tN)}_matchLevel(t){const i=Me.log.level||"warn";return cx[this._parentWithMember("level",i)]<=cx[t]}static _scheduleTickCounterIncrement(){B._tickCounterScheduled||(B._tickCounterScheduled=!0,Promise.resolve().then(()=>{B._tickCounter++,B._tickCounterScheduled=!1}))}}function tN(e,t,...i){console[e](`[${t}]`,...i)}function iN(...e){const t=(i,s)=>typeof s!="object"||Array.isArray(s)?s:"[Object]";return v3(JSON.stringify(e,t))}B._loggers=new Map,B._tickCounter=0,B._tickCounterScheduled=!1,B._throttlingDisabled=!1;function fg(e,t){for(const[i,s]of e)if(t(s,i))return!0;return!1}function b3(e,t,i){const s=e.get(t);if(s!==void 0)return s;const n=i();return e.set(t,n),n}function nce(e){const t=new Map;return i=>(t.has(i)||t.set(i,e(i)),t.get(i))}const Ql=()=>B.getLogger("esri.core.accessorSupport.ensureTypes");function sN(e){return e==null?e:new Date(e)}function nN(e){return e==null?e:!!e}function rN(e){return e==null?e:e.toString()}function ks(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function m_(e){return e==null?e:Math.round(parseFloat(e))}function oN(e){return null}function _3(e){return e?.constructor&&e.constructor.__accessorMetadata__!==void 0}function Jf(e,t){return t!=null&&e&&!(t instanceof e)}function w3(e){return e&&"isCollection"in e}function ux(e){return e?.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function aN(e,t){if(!t?.constructor||!w3(t.constructor))return Q0(e,t)?t:new e(t);const i=ux(e.prototype.itemType),s=ux(t.constructor.prototype.itemType);return i?s?i===s?t:i.prototype.isPrototypeOf(s.prototype)?new e(t):(Q0(e,t),t):new e(t):t}function Q0(e,t){return!!_3(t)&&(Ql().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+gg(e)+"'"),!0)}function mg(e,t){return t==null?t:w3(e)?aN(e,t):Jf(e,t)?Q0(e,t)?t:new e(t):t}function gg(e){return e?.prototype?.declaredClass||"unknown"}const lN=new WeakMap;function cN(e){switch(e){case Number:return ks;case rt:return m_;case Boolean:return nN;case String:return rN;case Date:return sN;case g_:return oN;default:return b3(lN,e,()=>mg.bind(null,e))}}function ui(e,t){const i=cN(e);return arguments.length===1?i:i(t)}function Lh(e,t,i){return arguments.length===1?Lh.bind(null,e):t&&(Array.isArray(t)?t.map(s=>e(s,i)):[e(t,i)])}function uN(e,t){return arguments.length===1?Lh(i=>ui(e,i)):Lh(i=>ui(e,i),t)}function x3(e,t,i){return t!==0&&Array.isArray(i)?i.map(s=>x3(e,t-1,s)):e(i)}function Xf(e,t,i){if(arguments.length===2)return r=>Xf(e,t,r);if(!i)return i;i=x3(e,t,i);let s=t,n=i;for(;s>0&&Array.isArray(n);)s--,n=n[0];if(n!==void 0)for(let r=0;r<s;r++)i=[i];return i}function hN(e,t,i){return arguments.length===2?Xf(s=>ui(e,s),t):Xf(s=>ui(e,s),t,i)}function S3(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function e1(e,t){if(arguments.length===2)return e1(e).call(null,t);const i=new Set,s=e.filter(a=>typeof a!="function"),n=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||i.add(a);let r=null,o=null;return(a,l)=>{if(a==null)return a;const c=typeof a,h=c==="string"||c==="number";return h&&(i.has(a)||n.some(p=>c==="string"&&p===String||c==="number"&&p===Number))||c==="object"&&n.some(p=>!Jf(a,p))?a:(h&&s.length?(r||(r=s.map(p=>typeof p=="string"?`'${p}'`:`${p}`).join(", ")),Ql().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${r}`)):typeof a=="object"&&n.length?(o||(o=n.map(p=>gg(p)).join(", ")),Ql().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):Ql().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function ar(e,t){if(arguments.length===2)return ar(e).call(null,t);const i={},s=[],n=[];for(const l in e.typeMap){const c=e.typeMap[l];i[l]=ui(c),s.push(gg(c)),n.push(l)}const r=()=>`'${s.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof e.key=="string"?l=>l[e.key]:e.key;return l=>{if(e.base&&!Jf(e.base,l)||l==null)return l;const c=a(l)||e.defaultKeyValue,h=i[c];if(!h)return Ql().error("Accessor#set",`Invalid property value, value needs to be one of ${r()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!Jf(e.typeMap[c],l))return l;if(typeof e.key=="string"&&!_3(l)){const p={};for(const m in l)m!==e.key&&(p[m]=l[m]);return h(p)}return h(l)}}class rt{}class g_{}const rce={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function dN(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function M3(e){switch(e.type){case"native":return ui(e.value);case"array":return Lh(M3(e.value));case"one-of":return pN(e);default:return null}}function pN(e){let t=null;return(i,s)=>i1(i,e)?i:(t==null&&(t=t1(e)),Ql().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),s&&(s.valid=!1),null)}function t1(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case rt:return"integer";case Date:return"date";case g_:return"null";default:return gg(e.value)}case"array":return`array of ${t1(e.value)}`;case"one-of":{const t=e.values.map(i=>t1(i));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function i1(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case rt:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case g_:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!i1(i,t.value));case"one-of":return t.values.some(i=>i1(e,i))}}const fN={remove:()=>{}};function Ee(e){return e?{remove(){e&&(e(),e=void 0)}}:fN}function mN(e){e.forEach(t=>t?.remove())}function ud(e){return Ee(()=>mN(e))}function yo(e){return e.__accessor__??null}function gN(e,t){return e?.metadata?.[t]!=null}function Xp(e,t,i){return i?Kf(e,t,{policy:i,path:""}):Kf(e,t,null)}function Kf(e,t,i){return t?Object.keys(t).reduce((s,n)=>{const r=n;let o=null,a="merge";if(i&&(o=i.path?`${i.path}.${n}`:n,a=i.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(s[r]))return s[r]=t[r],s;if(s[r]===void 0)return s[r]=F(t[r]),s;let l=s[r],c=t[r];if(l===c)return s;if(Array.isArray(c)||Array.isArray(s))l=l?Array.isArray(l)?s[r]=l.concat():s[r]=[l]:s[r]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach(h=>{l.includes(h)||l.push(h)}));else if(c&&typeof c=="object")if(i){const h=i.path;i.path=o,s[r]=Kf(l,c,i),i.path=h}else s[r]=Kf(l,c,null);else s.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(s[r]=c);return s},e||{}):e}function $3(e){return Array.isArray(e)?e:e.split(".")}function hx(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function yN(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...hx(i));return t}return hx(e)}function T3(e,t,i,s){const n=yN(t);if(n.length!==1){const r=n.map(o=>s(e,o,i));return ud(r)}return s(e,n[0],i)}function k3(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.at(n)}const s=yo(t);return gN(s,i)?s.get(i):t[i]}function P3(e,t,i){if(e==null)return e;const s=k3(t[i],e);return!s&&i<t.length-1?void 0:i===t.length-1?s:P3(s,t,i+1)}function hd(e,t,i=0){return typeof t!="string"||t.includes(".")?P3(e,$3(t),i):k3(t,e)}function an(e,t){return hd(e,t)}function dx(e,t){return hd(t,e)!==void 0}function dd(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){t=Object.create(t);for(const s in t)t[s]=F(t[s]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function yg(e,t){const i=dd(e);let s=i[t];return s||(s=i[t]={}),s}function vN(e,t){return Xp(e,t,_N)}const bN=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function _N(e){return bN.test(e)?"replace":"merge"}function wN(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,s)=>s===""?"$":(pg(s,t)??"").toString())}class O3{constructor(t,i,s=void 0){this.name=t,this.details=s,this.message=(i&&wN(i,s))??""}toString(){return"["+this.name+"]: "+this.message}}class V extends O3{constructor(t,i,s){super(t,i,s)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return F(i)}catch{return"[object]"}}))}}catch(t){throw B.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new V(t.name,t.message,t.details)}}V.prototype.type="error";function Qf(e,t,i){if(e&&t)if(typeof t=="object")for(const s of Object.getOwnPropertyNames(t))Qf(e,s,t[s]);else{if(t.includes(".")){const n=t.split("."),r=n.splice(-1,1)[0];return void Qf(an(e,n),r,i)}const s=e.__accessor__;s!=null&&xN(t,s),e[t]=i}}function xN(e,t){if(L("esri-unknown-property-errors")&&!SN(e,t))throw new V("set:unknown-property",MN(e,t))}function SN(e,t){return t.metadata[e]!=null}function MN(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}function f(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const s=Object.getOwnPropertyDescriptor(t,i),n=yg(t,i);s&&(s.get||s.set?(n.get=s.get||n.get,n.set=s.set||n.set):"value"in s&&("value"in e&&B.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),n.value=e.value=s.value)),e.readOnly!=null&&(n.readOnly=e.readOnly);const r=e.aliasOf;if(r){const l=typeof r=="string"?r:r.source,c=typeof r=="string"?null:r.overridable===!0;let h;n.dependsOn=[l],n.get=function(){let p=an(this,l);if(typeof p=="function"){h||(h=l.split(".").slice(0,-1).join("."));const m=an(this,h);m&&(p=p.bind(m))}return p},n.readOnly||(n.set=c?function(p){this._override(i,p)}:function(p){Qf(this,l,p)})}const o=e.type,a=e.types;n.cast||(o?n.cast=$N(o):a&&(Array.isArray(a)?n.cast=Lh(ar(a[0])):n.cast=ar(a))),vN(n,e),e.range&&(n.cast=TN(n.cast,e.range))}}function E3(e,t,i){const s=yg(e,i);s.json||(s.json={});let n=s.json;return t!==void 0&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function $N(e){let t=0,i=e;if(dN(e))return M3(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const s=i;if(S3(s))return t===0?e1(s):Xf(e1(s),t);if(t===1)return uN(s);if(t>1)return hN(s,t);const n=e;return n.from?n.from:ui(n)}function TN(e,t){return i=>{let s=+e(i);return t.step!=null&&(s=Math.round(s/t.step)*t.step),t.min!=null&&(s=Math.max(t.min,s)),t.max!=null&&(s=Math.min(t.max,s)),s}}const kN=Object.prototype.toString;function PN(e){const t="__accessorMetadata__"in e?ui(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return ON.apply(this,i)}}function ON(e,t,i,s){yg(e,t).cast=s}function EN(e){return(t,i)=>{yg(t,e).cast=t[i]}}function Mt(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&kN.call(e[0])==="[object Function]"?PN(e[0]):e.length===1&&typeof e[0]=="string"?EN(e[0]):void 0}const A3=Symbol("Accessor-beforeDestroy");var vi;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(vi||(vi={}));var Ce;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Ce||(Ce={}));const em={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},bu=[];let uh=em;function X(e){uh.onObservableAccessed(e)}let Kp=!1,Qp=!1;function lr(e,t,i){if(Kp)return y_(e,t,i);C3(e);const s=t.call(i);return I3(),s}function AN(e,t){return lr(em,e,t)}function y_(e,t,i){const s=Kp;Kp=!0,C3(e);let n=null;try{n=t.call(i)}catch(r){Qp&&B.getLogger("esri.core.accessorSupport.tracking").error(r)}return I3(),Kp=s,n}function C3(e){uh=e,bu.push(e)}function I3(){const e=bu.length;if(e>1){const t=bu.pop();uh=bu[e-2],t.onTrackingEnd()}else if(e===1){const t=bu.pop();uh=em,t.onTrackingEnd()}else uh=em}function L3(e,t){if(t.flags&Ce.DepTrackingInitialized)return;const i=Qp;Qp=!1,t.flags&Ce.AutoTracked?y_(t,t.metadata.get,e):R3(e,t),Qp=i}const CN=[];function R3(e,t){t.flags&Ce.ExplicitlyTracking||(t.flags|=Ce.ExplicitlyTracking,y_(t,()=>{const i=t.metadata.dependsOn||CN;for(const s of i)if(typeof s!="string"||s.includes(".")){const n=$3(s);for(let r=0,o=e;r<n.length&&o!=null&&typeof o=="object";++r)o=px(o,n[r],r!==n.length-1)}else px(e,s,!1)}),t.flags&=~Ce.ExplicitlyTracking)}function px(e,t,i){const s=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const r=parseInt(s,10);if(!isNaN(r))return Array.isArray(e)?e[r]:e.at(r)}const n=yo(e);if(n){const r=n.propertiesByName.get(s);r&&(X(r),L3(e,r))}return i?e[s]:void 0}function IN(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const s in i)if(t[s]){const n=t[s];i[s].forEach(r=>{t[r]=n}),delete t[s]}}}class cr extends O3{constructor(t,i,s){super(t,i,s)}}cr.prototype.type="warning";function D3(e){return!!e&&e.prototype?.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const s1=()=>B.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function fx(e,t,i){e&&(!i&&!t.read||t.read?.reader||t.read?.enabled===!1||DN(e)&&sl("read.reader",v_(e),t))}function v_(e){const t=e.ndimArray??0;if(t>1)return RN(e);if(t===1)return mx(e);if("type"in e&&F3(e.type)){const i=e.type.prototype?.itemType?.Type,s=mx(typeof i=="function"?{type:i}:{types:i});return(n,r,o)=>{const a=s(n,r,o);return a&&new e.type(a)}}return b_(e)}function b_(e){return"type"in e?LN(e.type):NN(e.types)}function LN(e){return e.prototype.read?(t,i,s)=>{if(t==null)return t;const n=typeof t;if(n!=="object")return void s1().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const r=new e;return r.read(t,s),r}:e.fromJSON}function N3(e,t,i,s){return s!==0&&Array.isArray(t)?t.map(n=>N3(e,n,i,s-1)):e(t,void 0,i)}function RN(e){const t=b_(e),i=N3.bind(null,t),s=e.ndimArray??0;return(n,r,o)=>{if(n==null)return n;n=i(n,o,s);let a=s,l=n;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let c=0;c<a;c++)n=[n];return n}}function mx(e){const t=b_(e);return(i,s,n)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const l=t(a,void 0,n);l!==void 0&&o.push(l)}return o}const r=t(i,void 0,n);return r!==void 0?[r]:void 0}}function F3(e){if(!D3(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?__(t.Type):j3(t.Type))}function DN(e){return"types"in e?j3(e.types):__(e.type)}function __(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||F3(e))}function j3(e){for(const t in e.typeMap)if(!__(e.typeMap[t]))return!1;return!0}function NN(e){let t=null;const i=e.errorContext??"type",s=e.validate;return(n,r,o)=>{if(n==null)return n;const a=typeof n;if(a!=="object")return void s1().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=FN(e));const l=e.key;if(typeof l!="string")return;const c=n[l],h=c?t[c]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const m=`Type '${c||"unknown"}' is not supported`;return o?.messages&&n&&o.messages.push(new cr(`${i}:unsupported`,m,{definition:n,context:o})),void s1().error(m)}const p=new h;return p.read(n,o),s?s(p):p}}function FN(e){const t={};for(const i in e.typeMap){const s=e.typeMap[i],n=dd(s.prototype);if(typeof e.key=="function")continue;const r=n[e.key];if(!r)continue;if(r.json?.type&&Array.isArray(r.json.type)&&r.json.type.length===1&&typeof r.json.type[0]=="string"){t[r.json.type[0]]=s;continue}const o=r.json?.write;if(!o?.writer){t[i]=s;continue}const a=o.target,l=typeof a=="string"?a:e.key,c={};o.writer(i,c,l),c[l]&&(t[c[l]]=s)}return t}function jN(e){if(e.json||(e.json={}),yx(e.json),vx(e.json),gx(e.json),e.json.origins)for(const t in e.json.origins)yx(e.json.origins[t]),vx(e.json.origins[t]),gx(e.json.origins[t]);return!0}function gx(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function yx(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function vx(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function bx(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=e?.ndimArray??0;e&&(i===1||"type"in e&&D3(e.type))?t.write.writer=UN:i>1?t.write.writer=WN(i):t.types?Array.isArray(t.types)?t.write.writer=VN(t.types[0]):t.write.writer=zN(t.types):t.write.writer=Rh}function zN(e){return(t,i,s,n)=>t?z3(t,e,n)?Rh(t,i,s,n):void 0:Rh(t,i,s,n)}function z3(e,t,i){for(const s in t.typeMap)if(e instanceof t.typeMap[s])return!0;if(i?.messages){const s=t.errorContext??"type",n=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new V(`${s}:unsupported`,n,{definition:e,context:i})),B.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function VN(e){return(t,i,s,n)=>!t||!Array.isArray(t)?Rh(t,i,s,n):Rh(t.filter(r=>z3(r,e,n)),i,s,n)}function Rh(e,t,i,s){sl(i,tm(e,s),t)}function tm(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?im(e):e}function im(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function UN(e,t,i,s){let n;e===null?n=null:e&&typeof e.map=="function"?(n=e.map(r=>tm(r,s)),typeof n.toArray=="function"&&(n=n.toArray())):n=[tm(e,s)],sl(i,n,t)}function V3(e,t,i){return i!==0&&Array.isArray(e)?e.map(s=>V3(s,t,i-1)):tm(e,t)}function WN(e){return(t,i,s,n)=>{let r;if(t===null)r=null;else{r=V3(t,n,e);let o=e,a=r;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)r=[r]}sl(s,r,i)}}function BN(e,t){return w_(e,"any",t?.origin)}function n1(e,t){return w_(e,"read",t?.origin)}function U3(e,t){return w_(e,"write",t?.origin)}function w_(e,t,i){let s=e?.json;if(s?.origins&&i){let n;n=i==="link-chart"?s.origins[i]&&(t==="any"||t in s.origins[i])?s.origins[i]:s.origins["web-map"]:s.origins[i],n&&(t==="any"||t in n)&&(s=n)}return s}function HN(e){const t=GN(e);if(e.json.origins)for(const i in e.json.origins){const s=e.json.origins[i],n=s.types?qN(s):t;fx(n,s,!1),s.types&&!s.write&&e.json.write?.enabled&&(s.write={...e.json.write}),bx(n,s)}fx(t,e.json,!0),bx(t,e.json)}function GN(e){return e.json.types?r1(e.json):e.type?W3(e):r1(e)}function qN(e){return e.type?W3(e):r1(e)}function W3(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!S3(i);)i=i[0],t++;return{type:i,ndimArray:t}}function r1(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function YN(e){jN(e)&&(IN(e),HN(e))}const Cy=new Set,Iy=new Set;function k(e){return t=>{e??="esri.core.Accessor",t.prototype.declaredClass=e,JN(t);const i=[],s=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!Cy.has(n.initialize)&&(Cy.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!Iy.has(n.destroy)&&(Iy.add(n.destroy),s.push(n.destroy)),n=Object.getPrototypeOf(n);Cy.clear(),Iy.clear();const r=class extends t{constructor(...a){if(super(...a),this.constructor===r&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),s.length){let l=!1;const c=this[A3];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,c.call(this);for(let h=0;h<s.length;h++)s[h].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};r.__accessorMetadata__=dd(t.prototype),r.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(r,"name",{value:o,configurable:!0}),r}}function ZN(e,t){return t.get==null?function(){const i=this.__accessor__,s=i.propertiesByName.get(e);if(s===void 0)return;X(s);const n=i.store;return n.has(e)?n.get(e):s.metadata.value}:function(){const i=this.__accessor__,s=i.propertiesByName.get(e);if(s!==void 0)return s.getComputed(i)}}function JN(e){const t=e.prototype,i=dd(t),s={};for(const n of Object.getOwnPropertyNames(i)){const r=i[n];YN(r),s[n]={enumerable:!0,configurable:!0,get:ZN(n,r),set(o){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this))return a.initialized&&r.readOnly?_x("read-only",n):a.lifecycle===vi.CONSTRUCTED&&r.constructOnly?_x("construct-only",n):void a.set(n,o)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,s)}const _x=(e,t)=>{B.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)},wx=new WeakMap;function XN(e,t,i=!1){const s=`\u{1F6D1} DEPRECATED - ${t}`;if(!i)return void e.warn(s);let n=wx.get(e);n||(n=new Set,wx.set(e,n)),n.has(t)||(n.add(t),e.warn(s))}function B3(e,t,i={}){if(L("esri-deprecation-warnings")){const{moduleName:s}=i;Ba(e,`Function: ${(s?s+"::":"")+t+"()"}`,i)}}function oce(e,t,i={}){if(L("esri-deprecation-warnings")){const{moduleName:s}=i;Ba(e,`Property: ${(s?s+"::":"")+t}`,i)}}function KN(e,t,i={}){L("esri-deprecation-warnings")&&Ba(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...i})}function Ba(e,t,i={}){if(L("esri-deprecation-warnings")){const{replacement:s,version:n,see:r,warnOnce:o}=i;let a=t;s&&(a+=`
	\u{1F6E0}\uFE0F Replacement: ${s}`),n&&(a+=`
	\u2699\uFE0F Version: ${n}`),r&&(a+=`
	\u{1F517} See ${r} for more details.`),XN(e,a,o)}}function ace(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function QN(e,t){for(const i of e)if(i!=null&&t(i))return i}function sm(e){return e!=null&&typeof e[Symbol.iterator]=="function"}class pd{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(i=>{t+=i.length}),t}add(t,i){if(sm(t)){const s=this._getOrCreateGroup(i);for(const n of t)Sx(n)&&s.push(n)}else Sx(t)&&this._getOrCreateGroup(i).push(t);return this}forEach(t,i){if(typeof t=="function")this._groups.forEach(s=>s.forEach(t));else{const s=this._getGroup(t);s&&i&&s.forEach(i)}}has(t){return this._groups.has(Gd(t))}remove(t){if(typeof t!="string"&&sm(t)){for(const i of t)this.remove(i);return this}return this.has(t)?(xx(this._getGroup(t)),this._groups.delete(Gd(t)),this):this}removeAll(){return this._groups.forEach(xx),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const i=[];return this._groups.set(Gd(t),i),i}_getGroup(t){return this._groups.get(Gd(t))}}function Gd(e){return e||"_default_"}function xx(e){for(const t of e)t instanceof pd?t.removeAll():t.remove()}function Sx(e){return e!=null&&(!!e.remove||e instanceof pd)}function H3(e,t){if(e==null)throw new Error(t??"value is None")}function Ke(e){return e?.destroy(),null}function lce(e){return e?.dispose(),null}function et(e){return e?.remove(),null}function Dh(e){return e?.abort(),null}function cce(e){return e?.release(),null}function e4(e,t,i){return e!=null&&t!=null?i!=null?i(e,t):e.equals(t):e===t}function G3(e,t){let i;return e.some((s,n)=>(i=t(s,n),i!=null)),i??void 0}function t4(e){return e?.release&&typeof e.release=="function"}function i4(e){return e?.acquire&&typeof e.acquire=="function"}class hn{constructor(t,i,s,n=1,r=0){if(this._ctor=t,this._acquireFunction=i,this._releaseFunction=s,this.allocationSize=n,this._pool=new Array(r),this._initialSize=r,this._ctor)for(let o=0;o<r;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let i;if(hn.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const s=this.allocationSize;for(let n=0;n<s;n++)this._pool[n]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...t):i4(i)&&i.acquire(...t),i}release(t){t&&!hn.test.disabled&&(this._releaseFunction?this._releaseFunction(t):t4(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const s=this._pool[i];this._dispose(s)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}hn.test={disabled:!1};class s4{constructor(t,i){this._observers=t,this._observer=i}remove(){B5(this._observers,this._observer)}}class q3{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return n4;this._observers==null&&(this._observers=[]);const i=this._observers;let s=!1,n=!1;const r=i.length;for(let o=0;o<r;++o){const a=i[o];if(a.destroyed)n=!0;else if(a===t){s=!0;break}}return s||(i.push(t),n&&this._removeDestroyedObservers()),new s4(i,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const i=t.length;let s=0;for(let n=0;n<i;++n){for(;n+s<i&&t[n+s].destroyed;)++s;if(s>0){if(!(n+s<i))break;t[n]=t[n+s]}}t.length=i-s}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const i of t)i.onCommitted();this._observers=null}}}const n4=Ee();var xe;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(xe||(xe={}));const uce=xe.USER+1;function Y3(e){switch(e){case"defaults":return xe.DEFAULTS;case"service":return xe.SERVICE;case"portal-item":return xe.PORTAL_ITEM;case"web-scene":return xe.WEB_SCENE;case"web-map":return xe.WEB_MAP;case"link-chart":return xe.LINK_CHART;case"user":return xe.USER;default:return null}}function o1(e){switch(e){case xe.DEFAULTS:return"defaults";case xe.SERVICE:return"service";case xe.PORTAL_ITEM:return"portal-item";case xe.WEB_SCENE:return"web-scene";case xe.WEB_MAP:return"web-map";case xe.LINK_CHART:return"link-chart";case xe.USER:return"user"}}function r4(e){return o1(e)}class Mx extends q3{constructor(t,i){super(),this.propertyName=t,this.metadata=i,this._accessed=null,this._handles=null,this.flags=0,this.flags=Ce.Dirty|(i.nonNullable?Ce.NonNullable:0)|(i.hasOwnProperty("value")?Ce.HasDefaultValue:0)|(i.get===void 0?Ce.DepTrackingInitialized:0)|(i.dependsOn===void 0?Ce.AutoTracked:0)}destroy(){this.flags&Ce.Dirty&&this.onCommitted(),super.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(t){X(this);const i=t.store,s=this.propertyName,n=this.flags,r=i.get(s);if(n&Ce.Computing||~n&Ce.Dirty&&i.has(s))return r;this.flags|=Ce.Computing;const o=t.host;let a;n&Ce.AutoTracked?a=lr(this,this.metadata.get,o):(R3(o,this),a=this.metadata.get.call(o)),i.set(s,a,xe.COMPUTED);const l=i.get(s);return l===r?this.flags&=~Ce.Dirty:AN(this.commit,this),this.flags&=~Ce.Computing,l}onObservableAccessed(t){t!==this&&(this._accessed??=new Set,this._accessed.add(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=Ce.DepTrackingInitialized,this._accessed!=null&&(this._handles??=[],this._accessed.forEach(t=>{this._handles.push(t.observe(this))}),this._accessed.clear())}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~Ce.Dirty,this.onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}onInvalidated(){~this.flags&Ce.Overridden&&(this.flags|=Ce.Dirty);const t=this._observers;if(t&&t.length>0)for(const i of t)i.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const s of i)s.onCommitted()}}}class x_{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new x_;return this._values.forEach((s,n)=>{t&&t.has(n)||i.set(n,F(s))}),i}get(t){return this._values.get(t)}originOf(){return xe.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}function qd(e,t,i){return e!==void 0}function $x(e,t,i,s){return e!==void 0&&(!(i==null&&e.flags&Ce.NonNullable)||(s.lifecycle,vi.INITIALIZING,!1))}class o4{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=vi.INITIALIZING,this.store=new x_,this._origin=xe.USER;const i=this.host.constructor.__accessorMetadata__;for(const s in i){const n=new Mx(s,i[s]);this.propertiesByName.set(s,n)}this.metadata=i}initialize(){this.lifecycle=vi.CONSTRUCTING}constructed(){this.lifecycle=vi.CONSTRUCTED}destroy(){this.lifecycle=vi.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==vi.INITIALIZING}get(t){const i=this.propertiesByName.get(t);if(i.metadata.get)return i.getComputed(this);X(i);const s=this.store;return s.has(t)?s.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const s=this.propertiesByName.get(t);if(s!==void 0&&s.flags&Ce.HasDefaultValue)return"defaults"}return o1(i)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const i=this.propertiesByName.get(t);if(qd(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const s=this.propertiesByName.get(t);qd(s)&&this._internalSet(s,i)}getDependsInfo(t,i,s){const n=this.propertiesByName.get(i);if(!qd(n))return"";const r=new Set,o=lr({onObservableAccessed:l=>r.add(l),onTrackingEnd:()=>{}},()=>n.metadata.get?.call(t));let a=`${s}${t.declaredClass.split(".").pop()}.${i}: ${o}
`;if(r.size===0)return a;s+="  ";for(const l of r)l instanceof Mx&&(a+=`${s}${l.propertyName}: undefined
`);return a}setAtOrigin(t,i,s){const n=this.propertiesByName.get(t);if(qd(n))return this._setAtOrigin(n,i,s)}isOverridden(t){const i=this.propertiesByName.get(t);return i!==void 0&&!!(i.flags&Ce.Overridden)}clearOverride(t){const i=this.propertiesByName.get(t);i&&i.flags&Ce.Overridden&&(i.flags&=~Ce.Overridden,i.notifyChange())}override(t,i){const s=this.propertiesByName.get(t);if(!$x(s,t,i,this))return;const n=s.metadata.cast;if(n){const r=this._cast(n,i),{valid:o,value:a}=r;if(Ly.release(r),!o)return;i=a}s.flags|=Ce.Overridden,this._internalSet(s,i)}set(t,i){const s=this.propertiesByName.get(t);if(!$x(s,t,i,this))return;const n=s.metadata.cast;if(n){const o=this._cast(n,i),{valid:a,value:l}=o;if(Ly.release(o),!a)return;i=l}const r=s.metadata.set;r?r.call(this.host,i):this._internalSet(s,i)}setDefaultOrigin(t){this._origin=Y3(t)}getDefaultOrigin(){return o1(this._origin)}notifyChange(t){const i=this.propertiesByName.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.propertiesByName.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.propertiesByName.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const s=this.lifecycle!==vi.INITIALIZING?this._origin:xe.DEFAULTS;this._setAtOrigin(t,i,s)}_setAtOrigin(t,i,s){const n=this.store,r=t.propertyName;n.has(r,s)&&f_(i,n.get(r))&&~t.flags&Ce.Overridden&&s===n.originOf(r)||(t.invalidate(),n.set(r,i,s),t.commit(),L3(this.host,t))}_cast(t,i){const s=Ly.acquire();return s.valid=!0,s.value=i,t&&(s.value=t.call(this.host,i,s)),s}}class a4{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const Ly=new hn(a4);let l4;function Tx(){return l4}var kx;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(kx||(kx={}));function c4(e){e.length=0}class li{constructor(t=50,i=50){this._pool=new hn(Array,void 0,c4,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return Ry.acquire()}static release(t){return Ry.release(t)}static prune(){Ry.prune()}}const Ry=new li(100);class Z3 extends hn{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}const Yd=[];function nm(e){Yd.push(e),Yd.length===1&&queueMicrotask(()=>{const t=Yd.slice();Yd.length=0;for(const i of t)i()})}class J3{constructor(t,i=30){this.name=t,this._counter=0,this._samples=new Array(i)}record(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,i)=>t-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,i)=>t+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}}var a1;(function(e){const t=(r,o,a,l)=>{let c=o,h=o;const p=a>>>1,m=r[c-1];for(;h<=p;){h=c<<1,h<a&&l(r[h-1],r[h])<0&&++h;const g=r[h-1];if(l(g,m)<=0)break;r[c-1]=g,c=h}r[c-1]=m},i=(r,o)=>r<o?-1:r>o?1:0;function s(r,o,a,l){o===void 0&&(o=0),a===void 0&&(a=r.length),l===void 0&&(l=i);for(let h=a>>>1;h>o;h--)t(r,h,a,l);const c=o+1;for(let h=a-1;h>o;h--){const p=r[o];r[o]=r[h],r[h]=p,t(r,c,h,l)}}function*n(r,o,a,l){o===void 0&&(o=0),a===void 0&&(a=r.length),l===void 0&&(l=i);for(let h=a>>>1;h>o;h--)t(r,h,a,l),yield;const c=o+1;for(let h=a-1;h>o;h--){const p=r[o];r[o]=r[h],r[h]=p,t(r,c,h,l),yield}}e.sort=s,e.iterableSort=n})(a1||(a1={}));const Px=a1,u4=1.5,h4=1.1;class X3{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new e3,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>Ox(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let s=0;s<this._length;s++){const n=this.data[s];t(n)&&i.push(n)}return i}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,i){const s=this.data.indexOf(t,i);return s!==-1&&s<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let s=0;s<i;s++)this.data[this._length++]=t[s]}fill(t,i){for(let s=0;s<i;s++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,Ox(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=X0(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(X0(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,s){this.length=W5(this.data,t,this.length,i,this._hint,s),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){if(t>=this.length||i>=this.length||t===i)return;const s=this.data[t];this.data[t]=this.data[i],this.data[i]=s}sort(t){Px.sort(this.data,0,this.length,t)}iterableSort(t){return Px.iterableSort(this.data,0,this.length,t)}some(t,i){for(let s=0;s<this.length;++s)if(t.call(i,this.data[s],s,this.data))return!0;return!1}find(t,i){for(let s=0;s<this.length;++s){const n=this.data[s];if(t.call(i,n,s))return n}}filterInPlace(t,i){let s=0;for(let n=0;n<this._length;++n){const r=this.data[n];t.call(i,r,n,this.data)&&(this.data[n]=this.data[s],this.data[s]=r,s++)}if(this._deallocator)for(let n=s;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=s,this._shrink(),this}forAll(t,i){const{data:s,length:n}=this;for(let r=0;r<n;++r)t.call(i,s[r],r,s)}forEach(t,i){this.data.slice(0,this.length).forEach(t,i)}map(t,i){const s=new Array(this.length);for(let n=0;n<this.length;++n)s[n]=t.call(i,this.data[n],n,this.data);return s}reduce(t,i){let s=i;for(let n=0;n<this.length;++n)s=t(s,this.data[n],n,this.data);return s}has(t){const i=this.length,s=this.data;for(let n=0;n<i;++n)if(s[n]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}}function Ox(e){e.data.length>u4*e.length&&(e.data.length=Math.floor(e.length*h4))}function d4(e){return{setTimeout:(t,i)=>{const s=e.setTimeout(t,i);return Ee(()=>e.clearTimeout(s))}}}const Rc=d4(globalThis);function vg(e){return p4(e)||K3(e)}function p4(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function K3(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function fd(e,t,i){if(!vg(e))throw new TypeError("target is not a Evented or EventTarget object");return K3(e)?f4(e,t,i):e.on(t,i)}function f4(e,t,i,s){if(Array.isArray(t)){const n=t.slice();for(const r of n)e.addEventListener(r,i,s);return Ee(()=>{for(const r of n)e.removeEventListener(r,i,s)})}return e.addEventListener(t,i,s),Ee(()=>e.removeEventListener(t,i,s))}function Q3(e,t,i){if(!vg(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const s=fd(e,t,n=>{s.remove(),i.call(e,n)});return s}function _t(e="Aborted"){return new V("AbortError",e)}function pt(e,t="Aborted"){if(ur(e))throw _t(t)}function bg(e){return e instanceof AbortSignal?e:e?.signal}function ur(e){const t=bg(e);return t!=null&&t.aborted}function eP(e){if(us(e))throw e}function Ex(e){if(!us(e))throw e}function ns(e,t){const i=bg(e);if(i!=null){if(!i.aborted)return Q3(i,"abort",()=>t());t()}}function S_(e,t){const i=bg(e);if(i!=null)return pt(i),Q3(i,"abort",()=>t(_t()))}function m4(e,t){return bg(t)==null?e:new Promise((i,s)=>{let n=ns(t,()=>s(_t()));const r=()=>{n=et(n)};e.then(r,r),e.then(i,s)})}function us(e){return e?.name==="AbortError"}async function Ax(e){try{return await e}catch(t){if(!us(t))throw t;return}}async function M_(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),s=i.map(o=>e[o]),n=await M_(s),r={};return i.map((o,a)=>r[o]=n[a]),r}const t=e;return Promise.allSettled(t).then(i=>Array.from(t,(s,n)=>{const r=i[n];return r.status==="fulfilled"?{promise:s,value:r.value}:{promise:s,error:r.reason}}))}async function g4(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function hce(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function tP(e,t=void 0,i){const s=new AbortController;return ns(i,()=>s.abort()),new Promise((n,r)=>{let o=setTimeout(()=>{o=0,n(t)},e);ns(s,()=>{o&&(clearTimeout(o),r(_t()))})})}function y4(e,t){const i=new AbortController,s=setTimeout(()=>i.abort(),t);return ns(e,()=>{i.abort(),clearTimeout(s)}),{...e,signal:i.signal}}function Oo(e){return e&&typeof e.then=="function"}function Cx(e){return Oo(e)?e:Promise.resolve(e)}function v4(e,t=-1){let i,s,n,r,o=null;const a=(...l)=>{if(i){s=l,r&&r.reject(_t()),r=cs();const m=r.promise;if(o){const g=o;o=null,g.abort()}return m}if(n=r||cs(),r=null,t>0){const m=new AbortController;i=Cx(e(...l,m.signal));const g=i;tP(t).then(()=>{i===g&&(r?m.abort():o=m)})}else i=1,i=Cx(e(...l));const c=()=>{const m=s;s=n=i=o=null,m!=null&&a(...m)},h=i,p=n;return h.then(c,c),h.then(p.resolve,p.reject),p.promise};return a}function cs(){let e,t;const i=new Promise((n,r)=>{e=n,t=r}),s=n=>{e(n)};return s.resolve=n=>e(n),s.reject=n=>t(n),s.timeout=(n,r)=>Rc.setTimeout(()=>s.reject(r),n),s.promise=i,s}async function Ix(e){await Promise.resolve(),pt(e)}function dce(e){return e}function b4(e){return 1e3*e}function pce(e){return e}class _4{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}}class w4{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let l1=0;const Gc={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},c1=["prepare","preRender","render","postRender","update","finish"],u1=[],Ha=new X3;class x4{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}function S4(){La!=null&&(cancelAnimationFrame(La),La=requestAnimationFrame($_))}const rm={frameTasks:Ha,willDispatch:!1,clearFrameTasks:M4,dispatch:sP,executeFrameTasks:$4,reschedule:S4};function md(e){const t=new w4(e);return u1.push(t),rm.willDispatch||(rm.willDispatch=!0,nm(sP)),t}function gc(e){const t=new _4(e);return Ha.push(t),La==null&&(l1=performance.now(),La=requestAnimationFrame($_)),new x4(t)}let La=null;function M4(e=!1){Ha.forAll(t=>{t.removed=!0}),e&&iP()}function $_(){const e=performance.now();La=null,La=Ha.length>0?requestAnimationFrame($_):null,rm.executeFrameTasks(e)}function $4(e){const t=e-l1;l1=e;const i=1e3/60,s=Math.max(0,t-i);Gc.time=e,Gc.frameDuration=i-s;for(let n=0;n<c1.length;n++){const r=performance.now(),o=c1[n];Ha.forAll(a=>{a.paused||a.removed||(n===0&&a.ticks++,a.phases[o]&&(Gc.elapsedFrameTime=performance.now()-e,Gc.deltaTime=a.ticks===0?0:t,a.phases[o]?.call(a,Gc)))}),T4[n].record(performance.now()-r)}iP(),k4.record(performance.now()-e)}const Zd=new X3;function iP(){Ha.forAll(e=>{e.removed&&Zd.push(e)}),Ha.removeUnorderedMany(Zd.data,Zd.length),Zd.clear()}function sP(){for(;u1.length;){const e=u1.shift();e.isActive&&e.callback()}rm.willDispatch=!1}function fce(e=1,t){const i=cs(),s=()=>{ur(t)?i.reject(_t()):e===0?i():(--e,nm(()=>s()))};return s(),i.promise}const T4=c1.map(e=>new J3(e)),k4=new J3("total");function P4(e,t){for(const i of e.entries())if(t(i[0]))return!0;return!1}function Lx(e,t){if(!t)return e;for(const i of t)i!=null&&e.add(i);return e}function mce(e,t){return t!=null&&e.add(t),e}function nP(e,t){const i=new Set;return Lx(i,e),Lx(i,t),i}function O4(e,t){const i=new Set;for(const s of t)e.has(s)&&i.add(s);return i}function gce(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const i of e)if(!t.has(i))return!1;return!0}function yce(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function E4(e,t){const i=new Set(e);for(const s of t)i.delete(s);return i}function A4(e,t){return E4(nP(e,t),O4(e,t))}let C4=0;function hh(){return++C4}class _g{constructor(t){this._accessed=new Set,this._handles=[],this._observerObject=new I4(t),Rx.register(this,new WeakRef(this._observerObject),this)}destroy(){Rx.unregister(this._observerObject),this._accessed.clear(),this._observerObject?.destroy(),this.clear()}onObservableAccessed(t){this._accessed.add(t)}onTrackingEnd(){const t=this._handles,i=this._observerObject;this._accessed.forEach(s=>{t.push(s.observe(i))}),this._accessed.clear()}clear(){const t=this._handles;for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}class I4{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=L4}}const Rx=new FinalizationRegistry(e=>{e.deref()?.destroy()});function L4(){}let ec=!1;const om=[];function rP(e,t){let i=new _g(r),s=null,n=!1;function r(){if(!i||n)return;if(ec)return void aP(r);const a=s;i.clear(),ec=!0,n=!0,s=lr(i,e),n=!1,ec=!1,t(s,a),lP()}function o(){i&&(i.destroy(),i=null,s=null)}return n=!0,s=lr(i,e),n=!1,Ee(o)}function oP(e,t){let i=new _g(n),s=null;function n(){t(s,o)}function r(){i&&(i.destroy(),i=null),s=null}function o(){return i?(i.clear(),s=lr(i,e),s):null}return o(),Ee(r)}function R4(e){let t=new _g(s),i=!1;function s(){t&&!i&&(ec?aP(s):(t.clear(),ec=!0,i=!0,lr(t,e),i=!1,ec=!1,lP()))}function n(){t&&(t.destroy(),t=null)}return i=!0,lr(t,e),i=!1,Ee(n)}function aP(e){om.includes(e)||om.unshift(e)}function lP(){for(;om.length;)om.pop()()}var dh;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(dh||(dh={}));class Nh{constructor(){this.uid=hh(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,s,n,r){return this.pool.acquire(dh.Untracked,t,i,s,n,r,f_)}static acquireTracked(t,i,s,n){return this.pool.acquire(dh.Tracked,t,i,s,null,null,n)}notify(t,i){this.type===dh.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i,void 0,void 0)}acquire(t,i,s,n,r,o,a){this.uid=hh(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=s,this.getValue=n,this.target=r,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=hh(),this.removed=!0}}Nh.pool=new Z3(Nh);const ef=new li,nr=new Set;let am;function lm(e){nr.delete(e),nr.add(e),am||(am=md(F4))}function D4(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function N4(e){for(const t of nr.values())t.target===e&&(t.removed=!0)}function F4(){let e=10;for(;am&&e--;){am=null;const t=j4(),i=ef.acquire();for(const s of t){const n=s.uid;D4(s),n===s.uid&&s.removed&&i.push(s)}for(const s of nr)s.removed&&(i.push(s),nr.delete(s));for(const s of i)Nh.pool.release(s);ef.release(i),ef.release(t),h1.forEach(s=>s())}}function j4(){const e=ef.acquire();e.length=nr.size;let t=0;for(const i of nr)e[t]=i,++t;return nr.clear(),e}const h1=new Set;function z4(e){return h1.add(e),Ee(()=>h1.delete(e))}function V4(e,t,i){let s=T3(e,t,i,(n,r,o)=>{let a,l,c=oP(()=>hd(n,r),(h,p)=>{n.__accessor__?.lifecycle===vi.DESTROYED||a&&a.uid!==l?s.remove():(a||(a=Nh.acquireUntracked(h,o,p,n,r),l=a.uid),lm(a))});return Ee(()=>{c.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,lm(a)),a=null),s=c=null})});return s}function U4(e,t,i){const s=T3(e,t,i,(n,r,o)=>{let a=!1;return rP(()=>hd(n,r),(l,c)=>{n.__accessor__.lifecycle!==vi.DESTROYED?a||(a=!0,f_(c,l)||o.call(n,l,c,r,n),a=!1):s.remove()})});return s}function W4(e,t,i,s=!1){return e.__accessor__&&e.__accessor__.lifecycle!==vi.DESTROYED?s?U4(e,t,i):V4(e,t,i):Ee()}function B4(e,t,i){let s,n,r=oP(e,(o,a)=>{s&&s.uid!==n?r.remove():(s||(s=Nh.acquireTracked(o,t,a,i),n=s.uid),lm(s))});return Ee(()=>{r.remove(),s&&(s.uid!==n||s.removed||(s.removed=!0,lm(s)),s=null),r=null})}function H4(e,t,i){let s=!1;return rP(e,(n,r)=>{s||(s=!0,i(r,n)||t(n,r),s=!1)})}function G4(e,t,i=!1,s=f3){return i?H4(e,t,s):B4(e,t,s)}function Dx(e){return P4(nr,t=>t.oldValue===e)}var cP,uP;function q4(e){if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor?.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const Er=Symbol("Accessor-Handles"),d1=Symbol("Accessor-Initialized");class Q{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:s,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const r=this;class o extends r{constructor(...l){super(...l),this.inherited=null,n&&n.apply(this,l)}}dd(o.prototype);for(const a in t){const l=t[a];o.prototype[a]=typeof l=="function"?function(...c){const h=this.inherited;let p;this.inherited=function(...m){if(r.prototype[a])return r.prototype[a].apply(this,m)};try{p=l.apply(this,c)}catch(m){throw this.inherited=h,m}return this.inherited=h,p}:t[a]}for(const a in i){const l=q4(i[a]);f(l)(o.prototype,a)}return k(s)(o)}constructor(...t){if(this[cP]=null,this[uP]=!1,this.constructor===Q)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new o4(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),t.length>0&&(i.ctorArgs=this.normalizeCtorArgs?.apply(this,t)??t[0]),Tx()?.onInstanceConstruct(this)}postscript(){const t=this.__accessor__,i=t.ctorArgs;t.initialize(),i&&(this.set(i),t.ctorArgs=null),t.constructed(),this.initialize(),this[d1]=!0}initialize(){}[A3](){this[Er]=Ke(this[Er])}destroy(){this.destroyed||(N4(this),this.__accessor__.destroy(),Tx()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[d1]}get destroyed(){return this.__accessor__?.lifecycle===vi.DESTROYED||!1}commitProperty(t){an(this,t)}get(t){return B3(B.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),an(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return Qf(this,t,i),this}watch(t,i,s){return W4(this,t,i,s)}addHandles(t,i){if(this.destroyed){const s=Array.isArray(t)?t:[t];for(const n of s)n.remove();return}(this[Er]??=new pd).add(t,i)}removeHandles(t){this[Er]?.remove(t)}removeAllHandles(){this[Er]?.removeAll()}removeHandlesReference(t){this[Er]?.removeReference(t)}hasHandles(t){return this[Er]?.has(t)===!0}_override(t,i){i===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,i){i==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}}cP=Er,uP=d1;class T_{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new T_;return this._values.forEach((s,n)=>{t&&t.has(n)||i.set(n,F(s.value),s.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const s=this._values.get(t);return i==null||s?.origin===i?s?.value:void 0}originOf(t){return this._values.get(t)?.origin??xe.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(s=>this._values.get(s)?.origin===t)}set(t,i,s){if((s=this._normalizeOrigin(s))===xe.DEFAULTS){const n=this._values.get(t);if(n?.origin!=null&&n.origin>s)return}this._values.set(t,new Y4(i,s))}delete(t,i){(i=this._normalizeOrigin(i))!=null&&this._values.get(t)?.origin!==i||this._values.delete(t)}has(t,i){return(i=this._normalizeOrigin(i))!=null?this._values.get(t)?.origin===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},s)=>t(i,s))}_normalizeOrigin(t){if(t!=null)return t===xe.DEFAULTS?t:xe.USER}}class Y4{constructor(t,i){this.value=t,this.origin=i}}function Z4(e,t,i){t.keys().forEach(n=>{i.set(n,t.get(n),xe.DEFAULTS)});const s=e.metadata;Object.keys(s).forEach(n=>{e.internalGet(n)&&i.set(n,e.internalGet(n),xe.DEFAULTS)})}function J4(e,t,i){if(!e?.read||e.read.enabled===!1||!e.read.source)return!1;const s=e.read.source;if(typeof s=="string"){if(s===t||s.includes(".")&&s.indexOf(t)===0&&dx(s,i))return!0}else for(const n of s)if(n===t||n.includes(".")&&n.indexOf(t)===0&&dx(n,i))return!0;return!1}function X4(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function K4(e,t,i,s,n){let r=n1(t[i],n);X4(r)&&(e[i]=!0);for(const o of Object.getOwnPropertyNames(t))r=n1(t[o],n),J4(r,i,s)&&(e[o]=!0)}function Q4(e,t,i,s){const n=i.metadata,r=BN(n[t],s),o=r?.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,s):o;a!==void 0&&i.set(t,a)}const hP={origin:"service"};function e6(e,t,i=hP){if(!t||typeof t!="object")return;const s=yo(e),n=s.metadata,r={};for(const o of Object.getOwnPropertyNames(t))K4(r,n,o,t,i);s.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(r)){const a=n1(n[o],i).read,l=a?.source;let c;c=l&&typeof l=="string"?hd(t,l):t[o],a?.reader&&(c=a.reader.call(e,c,t,i)),c!==void 0&&s.set(o,c)}if(!i||!i.ignoreDefaults){s.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))r[o]||Q4(e,o,s,i)}s.setDefaultOrigin("user")}function vce(e,t,i,s=hP){const n={...s,messages:[]};i(n),n.messages?.forEach(r=>{r.type!=="warning"||e.loaded?s?.messages&&s.messages.push(r):e.loadWarnings.push(r)})}function t6(e,t,i,s,n){const r={};return t.write?.writer?.call(e,s,r,i,n),r}function dP(e,t,i,s,n,r){if(!s?.write)return!1;const o=an(e,i);if(!n&&s.write.overridePolicy){const a=s.write.overridePolicy.call(e,o,i,r??void 0);a!==void 0&&(n=a)}if(n||(n=s.write),!n||n.enabled===!1||n.layerContainerTypes&&r?.layerContainerType&&!n.layerContainerTypes.includes(r.layerContainerType))return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new V("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return a&&r?.messages?r.messages.push(a):a&&!r&&B.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(i)===xe.DEFAULTS)&&i6(e,i,r,s,o)||!n.ignoreOrigin&&r?.origin&&t.store.multipleOriginsSupported&&t.store.originOf(i)<Y3(r.origin))}function i6(e,t,i,s,n){const r=s.default;if(r===void 0)return!1;if(s.defaultEquals!=null)return s.defaultEquals(n);if(typeof r=="function"){if(Array.isArray(n)){const o=r.call(e,t,i??void 0);return ug(o,n)}return!1}return r===n}function bce(e,t,i,s){const n=yo(e),r=n.metadata,o=U3(r[t],s);return!!o&&dP(e,n,t,o,i,s)}function s6(e,t,i){if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return Xp(t,e.toJSON(i));const s=yo(e),n=s.metadata;for(const r in n){const o=U3(n[r],i);if(!dP(e,s,r,o,void 0,i))continue;const a=an(e,r),l=t6(e,o,o.write&&typeof o.write.target=="string"?o.write.target:r,a,i);Object.keys(l).length>0&&(t=Xp(t,l),i?.resources?.pendingOperations?.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>Xp(t,l,()=>"replace-arrays"))),i?.writtenProperties&&i.writtenProperties.push({target:e,propName:r,oldOrigin:r4(s.store.originOf(r)),newOrigin:i.origin}))}return t}const gd=e=>{let t=class extends e{constructor(...i){super(...i);const s=yo(this),n=s.store,r=new T_;s.store=r,Z4(s,n,r)}read(i,s){e6(this,i,s)}write(i,s){return s6(this,i??{},s)}toJSON(i){return this.write({},i)}static fromJSON(i,s){return n6.call(this,i,s)}};return t=d([k("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function n6(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}function p1(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}let Z=class extends gd(Q){};Z=d([k("esri.core.JSONSupport")],Z);const r6=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,o6={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function Nx(e){const t=e?.match(r6);if(!t)return null;const[,i,s,n]=t;if(!i)return null;let r=null,o=null,a=null;const{devext:l,qaext:c,www:h}=o6;if(s)if(r=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=h);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:r}}function a6(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function pP(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,s=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):i.test(e)?e=e.replace(i,"https://devext.arcgis.com"):s.test(e)&&(e=e.replace(s,"https://qaext.arcgis.com")),e}function l6(e){const t=atob(e),i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i.buffer}function c6(e){const t=new Uint8Array(e);let i="";for(let s=0;s<t.length;s++)i+=String.fromCharCode(t[s]);return btoa(i)}const u6=()=>B.getLogger("esri.core.urlUtils"),Dc=Me.request,Fx="esri/config: esriConfig.request.proxyUrl is not set.",fP=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,mP=/^\s*http:/i,h6=/^\s*https:/i,d6=/^\s*file:/i,p6=/:\d+$/,f6=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,m6=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),g6=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");class tc{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(m6);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(g6),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}}const Jd={},y6=new tc(Me.applicationUrl);let qt=y6;const v6=b6();let k_=v6;const P_=()=>qt,_ce=()=>k_;function b6(){const e=qt.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${qt.scheme}://${qt.host}${qt.port!=null?`:${qt.port}`:""}`}${t}`}function hi(e){if(!e)return null;const t={path:null,query:null},i=new tc(e),s=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.substring(0,s),t.query=O_(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.substring(0,t.path.length-(i.fragment.length+1)))),t}function O_(e){const t=e.split("&"),i={};for(const s of t){if(!s)continue;const n=s.indexOf("=");let r,o;n<0?(r=decodeURIComponent(s),o=""):(r=decodeURIComponent(s.slice(0,n)),o=decodeURIComponent(s.slice(n+1)));let a=i[r];typeof a=="string"&&(a=i[r]=[a]),Array.isArray(a)?a.push(o):i[r]=o}return i}function Fh(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i]))).join("&"):Object.keys(e).map(i=>{const s=e[i];if(s==null)return"";const n=encodeURIComponent(i)+"=",r=t?.[i];return r?n+encodeURIComponent(r(s)):Array.isArray(s)?s.map(o=>p1(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):p1(s)?n+encodeURIComponent(JSON.stringify(s)):n+encodeURIComponent(s)}).filter(i=>i).join("&"):""}function _6(e=!1){let t,i=Dc.proxyUrl;if(typeof e=="string"){t=T6(e);const s=wg(e);s&&(i=s.proxyUrl)}else t=!!e;if(!i)throw u6().warn(Fx),new V("urlUtils:proxy-not-set",Fx);return t&&m1()&&(i=R_(i)),hi(i)}function wce(e){const t=wg(e);let i,s;if(t){const n=E_(t.proxyUrl);i=n.path,s=n.query?O_(n.query):null}if(i){const n=hi(e);e=i+"?"+n.path;const r=Fh({...s,...n.query});r&&(e=`${e}?${r}`)}return e}const qc={path:"",query:""};function E_(e){const t=e.indexOf("?");return t!==-1?(qc.path=e.slice(0,t),qc.query=e.slice(t+1)):(qc.path=e,qc.query=null),qc}function gP(e){return e=(e=um(e=A6(e=E_(e).path),!0)).toLowerCase()}function w6(e){const t={proxyUrl:e.proxyUrl,urlPrefix:gP(e.urlPrefix)},i=Dc.proxyRules,s=t.urlPrefix;let n=i.length;for(let r=0;r<i.length;r++){const o=i[r].urlPrefix;if(s.indexOf(o)===0){if(s.length===o.length)return-1;n=r;break}o.indexOf(s)===0&&(n=r+1)}return i.splice(n,0,t),n}function wg(e){const t=Dc.proxyRules,i=gP(e);for(let s=0;s<t.length;s++)if(i.indexOf(t[s].urlPrefix)===0)return t[s]}function xce(e,t){if(!e||!t)return!1;e=cm(e),t=cm(t);const i=Nx(e),s=Nx(t);return i!=null&&s!=null?i.portalHostname===s.portalHostname:i==null&&s==null&&yc(e,t,!0)}function x6(e,t){return e=cm(e),t=cm(t),um(e)===um(t)}function cm(e){const t=(e=rr(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function f1(e,t=Dc.interceptors){const i=s=>s==null||s instanceof RegExp&&s.test(e)||typeof s=="string"&&e.startsWith(s);if(t){for(const s of t)if(Array.isArray(s.urls)){if(s.urls.some(i))return s}else if(i(s.urls))return s}return null}function yc(e,t,i=!1){if(!e||!t)return!1;const s=y1(e),n=y1(t);return!(!i&&s.scheme!==n.scheme)&&s.host!=null&&n.host!=null&&s.host.toLowerCase()===n.host.toLowerCase()&&s.port===n.port}function A_(e){if(typeof e=="string"){if(!Ri(e))return!0;e=y1(e)}if(yc(e,qt))return!0;const t=Dc.trustedServers||[];for(let i=0;i<t.length;i++){const s=S6(t[i]);for(let n=0;n<s.length;n++)if(yc(e,s[n]))return!0}return!1}function S6(e){return Jd[e]||(L_(e)||dn(e)?Jd[e]=[new tc(ts(e))]:Jd[e]=[new tc(`http://${e}`),new tc(`https://${e}`)]),Jd[e]}function ts(e,t=k_,i){return dn(e)?i?.preserveProtocolRelative?e:qt.scheme==="http"&&qt.authority===rs(e).slice(2)?`http:${e}`:`https:${e}`:L_(e)?e:xg(e[0]==="/"?E6(t):t,e)}function C_(e,t=k_,i){if(e==null||!Ri(e))return e;const s=rr(e),n=s.toLowerCase(),r=rr(t).toLowerCase().replace(/\/+$/,""),o=i?rr(i).toLowerCase().replace(/\/+$/,""):null;if(o&&r.indexOf(o)!==0)return e;const a=(p,m,g)=>(g=p.indexOf(m,g))===-1?p.length:g;let l=a(n,"/",n.indexOf("//")+2),c=-1;for(;n.slice(0,l+1)===r.slice(0,l)+"/"&&(c=l+1,l!==n.length);)l=a(n,"/",l+1);if(c===-1||o&&c<o.length)return e;e=s.slice(c);const h=r.slice(c-1).replaceAll(/[^/]+/g,"").length;if(h>0)for(let p=0;p<h;p++)e=`../${e}`;else e=`./${e}`;return e}function rr(e){return e=L6(e=I6(e=C6(e=ts(e=e.trim()))))}function xg(...e){const t=e.filter(Ih);if(!t?.length)return;const i=[];if(Ri(t[0])){const n=t[0],r=n.indexOf("//");r!==-1&&(i.push(n.slice(0,r+1)),P6(t[0])&&(i[0]+="/"),t[0]=n.slice(r+2))}else t[0][0]==="/"&&i.push("");const s=t.reduce((n,r)=>r?n.concat(r.split("/")):n,[]);for(let n=0;n<s.length;n++){const r=s[n];r===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!r&&n===s.length-1||r&&(r!=="."||i.length===0))&&i.push(r)}return i.join("/")}function rs(e,t=!1){if(e==null||I_(e)||nl(e))return null;let i=e.indexOf("://");if(i===-1&&dn(e))i=2;else{if(i===-1)return null;i+=3}const s=e.indexOf("/",i);return s!==-1&&(e=e.slice(0,s)),t&&(e=um(e,!0)),e}function Ri(e){return dn(e)||L_(e)}function I_(e){return e!=null&&e.slice(0,5)==="blob:"}function nl(e){return e!=null&&e.slice(0,5)==="data:"}function M6(e){const t=jh(e);return t?.isBase64?l6(t.data):null}function Sce(e){return c6(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const $6=/^data:(.*?)(;base64)?,(.*)$/;function jh(e){const t=e.match($6);if(!t)return null;const[,i,s,n]=t;return{mediaType:i,isBase64:!!s,data:n}}function yP(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function Mce(e){return(await fetch(e)).blob()}function $ce(e){const t=M6(e);if(!t)return null;const i=jh(e);return new Blob([t],{type:i.mediaType})}function dn(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function L_(e){return e!=null&&fP.test(e)}function T6(e){return e!=null&&h6.test(e)||qt.scheme==="https"&&dn(e)}function k6(e){return e!=null&&mP.test(e)||qt.scheme==="http"&&dn(e)}function P6(e){return e!=null&&d6.test(e)}function R_(e){return dn(e)?`https:${e}`:e.replace(mP,"https:")}function O6(){return qt.scheme==="http"}function m1(){return qt.scheme==="https"}function um(e,t=!1){return dn(e)?e.slice(2):(e=e.replace(fP,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function E6(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function Tce(e){let t=0;if(Ri(e)){const s=e.indexOf("//");s!==-1&&(t=s+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function kce(e,t){if(!e)return"";const i=hi(e).path.replace(/\/+$/,""),s=i.substring(i.lastIndexOf("/")+1);if(!t?.length)return s;const n=new RegExp(`\\.(${t.join("|")})$`,"i");return s.replace(n,"")}function A6(e){return e.endsWith("/")?e:`${e}/`}function vP(e){return e.replace(/\/+$/,"")}function C6(e){if(/^https?:\/\//i.test(e)){const t=E_(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function I6(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function L6(e){const t=Dc.httpsDomains;if(!k6(e))return e;const i=e.indexOf("/",7);let s;if(s=i===-1?e:e.slice(0,i),s=s.toLowerCase().slice(7),p6.test(s)){if(!s.endsWith(":80"))return e;s=s.slice(0,-3),e=e.replace(":80","")}return O6()&&s===qt.authority&&!f6.test(e)||(m1()&&s===qt.authority||t&&t.some(n=>s===n||s.endsWith(`.${n}`))||m1()&&!wg(e))&&(e=R_(e)),e}function g1(e,t,i){if(!(t&&i&&e&&Ri(e)))return e;const s=e.indexOf("//"),n=e.indexOf("/",s+2),r=e.indexOf(":",s+2),o=Math.min(n<0?e.length:n,r<0?e.length:r);return e.slice(s+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,s+2)}${i}${e.slice(o)}`}function y1(e){return typeof e=="string"?new tc(ts(e)):(e.scheme||(e.scheme=qt.scheme),e)}function Pce(e){return D6.test(e)}function bP(e,t){const i=hi(e),s=Object.keys(i.query||{});return s.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${s.join(", ")}.`),i.path}function R6(e,t,i){const s=hi(e),n=s.query||{};return n[t]=String(i),`${s.path}?${Fh(n)}`}function Dy(e,t){if(!t)return e;const i=hi(e),s=i.query||{};for(const[r,o]of Object.entries(t))o!=null&&(s[r]=o);const n=Fh(s);return n?`${i.path}?${n}`:i.path}function Oce(e){if(e==null)return null;const t=e.match(_P);return t?t[2]:null}function jx(e){if(e==null)return null;const t=e.match(_P);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function Ece(e){return typeof e=="string"?jh(e)??{data:e}:new Promise((t,i)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(jh(s.result)),s.onerror=n=>i(n)})}const _P=/([^.]*)\.([^/]*)$/,D6=/(^data:image\/svg|\.svg$)/i,wP="20240709",xP="4e2e659f53c3b60cdade3d91a30466cbe90b86f9";Symbol.dispose??=Symbol("Symbol.dispose"),Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");const N6="4.30";let qe,D_=N6;D_="4.30.8";function Ace(e){qe=e}function Cce(e){const t=qe?.findCredential(e);return t?.token?R6(e,"token",t.token):e}L("host-webworker");const F6=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function SP(e){const t=rs(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!F6.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function j6(e,t,i=!1,s){return new Promise((n,r)=>{if(ur(s))return void r(zx());let o=()=>{c(),r(new Error(`Unable to load ${t}`))},a=()=>{const h=e;c(),n(h)},l=()=>{if(!e)return;const h=e;c(),h.src="",r(zx())};const c=()=>{L("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,s?.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(t)};s?.addEventListener("abort",l),L("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function zx(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const MP="Timeout exceeded";function z6(){return new Error(MP)}function Ice(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===MP}function V6(e){Me.request.crossOriginNoCorsDomains||(Me.request.crossOriginNoCorsDomains={});const t=Me.request.crossOriginNoCorsDomains;for(let i of e)i=i.toLowerCase(),/^https?:\/\//.test(i)?t[rs(i)??""]=0:(t[rs("http://"+i)??""]=0,t[rs("https://"+i)??""]=0)}function U6(e){const t=Me.request.crossOriginNoCorsDomains;if(t){let i=rs(e);if(i)return i=i.toLowerCase(),!yc(i,P_())&&t[i]<Date.now()-36e5}return!1}async function W6(e){const t=Me.request.crossOriginNoCorsDomains,i=rs(e);t&&i&&(t[i.toLowerCase()]=Date.now());const s=hi(e);e=s.path,s.query?.f==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function Dt(e,t){e instanceof URL&&(e=e.toString()),t?.query instanceof URLSearchParams&&(t.query=O_(t.query.toString().replaceAll("+"," ")));const i=nl(e),s=I_(e);s||i||(e=rr(e));const n={url:e,requestOptions:{...t}},r=m=>({data:m,getAllHeaders:vc,getHeader:vc,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),o=f1(e,Qi.internalInterceptors);if(o){const m=await Ux(o,n);if(m!=null)return r(m)}let a=f1(e);if(a){const m=await Ux(a,n);if(m!=null)return r(m);a.after||a.error||(a=null)}if(e=n.url,(t=n.requestOptions).responseType==="image"&&(L("host-webworker")||L("host-node")))throw ln("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(t.method==="head"){if(t.body)throw ln("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||s)throw ln("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await Y6(),hm)return hm.execute(e,t);const l=new AbortController,c=ns(t,()=>l.abort()),h={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:n,redoRequest:!1,useIdentity:Qi.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},p=await K6(h).finally(()=>c?.remove());return a?.after?.(p),p}let hm;const Qi=Me.request,$P="FormData"in globalThis,B6=new Set([499,498,403,401]),H6=new Set(["COM_0056","COM_0057","SB_0008"]),G6=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],vc=()=>null,dm=Symbol();function q6(e){const t=rs(e);t&&!Dt._corsServers.includes(t)&&Dt._corsServers.push(t)}function Vx(e){const t=rs(e);return!t||t.endsWith(".arcgis.com")||Dt._corsServers.includes(t)||A_(t)}function ln(e,t,i,s){let n="Error";const r={url:i.url,requestOptions:i.requestOptions,getAllHeaders:vc,getHeader:vc,ssl:!1};if(t instanceof V)return t.details?(t.details=F(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=r,t;if(t){const o=s&&(()=>Array.from(s.headers)),a=s&&(h=>s.headers.get(h)),l=s?.status,c=t.message;c&&(n=c),o&&a&&(r.getAllHeaders=o,r.getHeader=a),r.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||l||0,r.subCode=t.subcode,r.messageCode=t.messageCode,typeof t.details=="string"?r.messages=[t.details]:r.messages=t.details,r.raw=dm in t?t[dm]:t}return us(t)?_t():new V(e,n,r)}async function Y6(){L("host-webworker")&&!hm&&(hm=await W(()=>import("./request.3f52a3dc.js"),[]))}async function v1(){qe||await W(()=>import("./IdentityManager.5a7576a7.js"),["assets/IdentityManager.5a7576a7.js","assets/substitute.d70135f2.js"])}async function Z6(e){const t=e.params.url,i=e.params.requestOptions,s=e.controller.signal,n=i.body;let r=null,o=null;if($P&&"HTMLFormElement"in globalThis&&(n instanceof FormData?r=n:n instanceof HTMLFormElement&&(r=new FormData(n))),typeof n=="string"&&(o=n),e.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Qi.priority,redirect:"follow",signal:s},(r||o)&&(e.fetchOptions.body=r||o),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||i.query?.token||r?.get("token")),!e.hasToken&&Me.apiKey&&SP(t)&&(i.query||(i.query={}),i.query.token=Me.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!TP(t)&&!ur(s)){let a;i.authMode==="immediate"?(await v1(),a=await qe.getCredential(t,{signal:s}),e.credential=a):i.authMode==="no-prompt"?(await v1(),a=await qe.getCredential(t,{prompt:!1,signal:s}).catch(()=>{}),e.credential=a):qe&&(a=qe.findCredential(t)),a&&(e.credentialToken=a.token,e.useSSL=!!a.ssl)}}function TP(e){return G6.some(t=>t.test(e))}async function J6(e){let t=e.params.url;const i=e.params.requestOptions,s=e.fetchOptions??{},n=I_(t)||nl(t),r=i.responseType||"json",o=n?0:i.timeout!=null?i.timeout:Qi.timeout;let a=!1;if(!n){e.useSSL&&(t=R_(t));let m={...i.query};e.credentialToken&&(m.token=e.credentialToken);let g=Fh(m);L("esri-url-encodes-apostrophe")&&(g=g.replaceAll("'","%27"));const y=t.length+1+g.length;let v;a=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||y>Qi.maxUrlLength;const b=i.useProxy||!!wg(t);if(b){const w=_6(t);v=w.path,!a&&v.length+1+y>Qi.maxUrlLength&&(a=!0),w.query&&(m={...w.query,...m})}if(s.method==="HEAD"&&(a||b)){if(a)throw y>Qi.maxUrlLength?ln("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):ln("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(b)throw ln("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}a?(s.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=Dy(t,m):(s.body=Fh(m),s.headers||(s.headers={}),s.headers["Content-Type"]="application/x-www-form-urlencoded")):t=Dy(t,m),b&&(e.useProxy=!0,t=`${v}?${t}`),m.token&&$P&&s.body instanceof FormData&&!a6(t)&&s.body.set("token",m.token),i.hasOwnProperty("withCredentials")?e.withCredentials=i.withCredentials:yc(t,P_())||(A_(t)||qe&&qe.findServerInfo(t)?.webTierAuth)&&(e.withCredentials=!0),e.withCredentials&&(s.credentials="include",U6(t)&&await W6(a?Dy(t,m):t))}let l,c,h=0,p=!1;o>0&&(h=setTimeout(()=>{p=!0,e.controller.abort()},o));try{if(i.responseType==="native-request-init")c=s,c.url=t;else if(i.responseType!=="image"||s.cache!=="default"||s.method!=="GET"||a||X6(i.headers)||!n&&!e.useProxy&&Qi.proxyUrl&&!Vx(t)){if(Dt._beforeFetch&&await Dt._beforeFetch(t,s),l=await fetch(t,s),Dt._afterFetch&&await Dt._afterFetch(l),e.useProxy||q6(t),i.responseType==="native")c=l;else if(s.method!=="HEAD")if(l.ok){switch(r){case"array-buffer":c=await l.arrayBuffer();break;case"blob":case"image":c=await l.blob();break;default:c=await l.text()}if(h&&(clearTimeout(h),h=0),r==="json"||r==="xml"||r==="document")if(c)switch(r){case"json":c=JSON.parse(c);break;case"xml":c=Wx(c,"application/xml");break;case"document":c=Wx(c,"text/html")}else c=null;if(c){if(r==="array-buffer"||r==="blob"){const m=l.headers.get("Content-Type");if(m&&/application\/json|text\/plain/i.test(m)&&c[r==="blob"?"size":"byteLength"]<=750)try{const g=await new Response(c).json();g.error&&(c=g)}catch{}}r==="image"&&c instanceof Blob&&(c=await Bx(URL.createObjectURL(c),e,!0))}}else{c=await l.text();try{c=JSON.parse(c)}catch{}}}else c=await Bx(t,e)}catch(m){if(m.name==="AbortError")throw p?z6():_t("Request canceled");if(!(!l&&m instanceof TypeError&&Qi.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||Vx(t))throw m;e.redoRequest=!0,w6({proxyUrl:Qi.proxyUrl,urlPrefix:rs(t)??""})}finally{h&&clearTimeout(h)}return[l,c]}async function Ux(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,s;try{s=await e.before(t)}catch(n){i=ln("request:interceptor",n,t)}if((s instanceof Error||s instanceof V)&&(i=ln("request:interceptor",s,t)),i)throw e.error&&e.error(i),i;return s}}function X6(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function Wx(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function K6(e){let t,i;await Z6(e);try{do[t,i]=await J6(e);while(!await Q6(e,t,i))}catch(r){const o=ln("request:server",r,e.params,t);throw o.details.ssl=e.useSSL,e.interceptor?.error&&e.interceptor.error(o),o}const s=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(s)){if(!e.hasToken&&!e.credentialToken&&i.user?.username&&!A_(s)){const r=rs(s,!0);r&&Qi.trustedServers.push(r)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&V6(i.authorizedCrossOriginNoCorsDomains)}const n=e.credential;if(n&&qe){let o=qe.findServerInfo(n.server)?.owningSystemUrl;if(o){o=o.replace(/\/?$/,"/sharing");const a=qe.findCredential(o,n.userId);a&&qe._getIdenticalSvcIdx(o,a)===-1&&a.resources.unshift(o)}}return{data:i,getAllHeaders:t?()=>Array.from(t.headers):vc,getHeader:t?r=>t.headers.get(r):vc,httpStatus:t?.status??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function Q6(e,t,i){if(e.redoRequest)return e.redoRequest=!1,!1;const s=e.params.requestOptions;if(!t||s.responseType==="native"||s.responseType==="native-request-init")return!0;let n,r;if(i&&(i.error&&typeof i.error=="object"?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[dm]=i,n.details=i.messages)),!n&&!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[dm]=i,n;let o,a=null;n&&(r=Number(n.code),a=n.hasOwnProperty("subcode")?Number(n.subcode):null,o=n.messageCode,o=o?.toUpperCase());const l=s.authMode;if(r===403&&(a===4||n.message?.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||r===498)&&r!==void 0&&B6.has(r)&&!TP(e.params.url)&&(r!==403||(!o||!H6.has(o))&&(a==null||a===2&&e.credentialToken))){await v1();try{const c=await qe.getCredential(e.params.url,{error:ln("request:server",n,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=c,e.credentialToken=c.token,e.useSSL=e.useSSL||c.ssl,!1}catch(c){if(l==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;n=c}}if(n)throw n;return!0}function Bx(e,t,i=!1){const s=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=Qi.priority,n.src=e,j6(n,e,i,s)}Dt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Dt._beforeFetch=void 0,Dt._afterFetch=void 0;class ic{constructor(){this._emitter=new ic.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}}(function(e){class t{constructor(n=null){this._target=n,this._listenersMap=null}clear(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,r){let o=this._listenersMap?.get(n);if(!o)return!1;const a=this._target||this;let l=!1;for(const c of o.slice()){const h="deref"in c?c.deref():c;h?h?.call(a,r):l=!0}return l&&(o=o.filter(c=>!("deref"in c)||c.deref()!=null),this._listenersMap.set(n,o)),o.length>0}on(n,r){if(Array.isArray(n)){const a=n.map(l=>this.on(l,r));return ud(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const o=this._listenersMap.get(n)||[];return o.push(r),this._listenersMap.set(n,o),Ee(()=>{const a=this._listenersMap?.get(n),l=a?.indexOf(r)??-1;l>=0&&a.splice(l,1)})}once(n,r){const o=this.on(n,a=>{o.remove(),("deref"in r?r.deref():r)?.call(null,a)});return o}hasEventListener(n){const r=this._listenersMap?.get(n);return r!=null&&r.length>0}}e.EventEmitter=t,e.EventedMixin=s=>{let n=class extends s{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(r,o){return this._emitter.emit(r,o)}on(r,o){return this._emitter.on(r,o)}once(r,o){return this._emitter.once(r,o)}hasEventListener(r){return this._emitter.hasEventListener(r)}};return n=d([k("esri.core.Evented")],n),n};let i=class extends Q{constructor(){super(...arguments),this._emitter=new ic.EventEmitter(this)}destroy(){this._emitter.clear()}emit(s,n){return this._emitter.emit(s,n)}on(s,n){return this._emitter.on(s,n)}once(s,n){return this._emitter.once(s,n)}hasEventListener(s){return this._emitter.hasEventListener(s)}};i=d([k("esri.core.Evented.EventedAccessor")],i),e.EventedAccessor=i})(ic||(ic={}));const Eo=ic;var ke;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(ke||(ke={}));function kP(e){return(t,i)=>{t[i]=e}}class yd extends q3{notify(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const s of i)s.onInvalidated(),s.onCommitted()}}}var Zn;class eF{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}}class tF{constructor(t,i,s,n,r){this.target=t,this.added=i,this.removed=s,this.start=n,this.deleteCount=r}}const zi=new hn(eF,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function Hx(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function Ny(e){return e?e instanceof qn?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function Fy(e){if(e?.length)return e[0]}function iF(e,t,i,s){const n=Math.min(e.length-i,t.length-s);let r=0;for(;r<n&&e[i+r]===t[s+r];)r++;return r}function PP(e,t,i,s){t&&t.forEach((n,r,o)=>{e.push(n),PP(e,i.call(s,n,r,o),i,s)})}const _r=new Set,wr=new Set,xr=new Set,jy=new Map;let sF=0,qn=Zn=class extends Eo.EventedAccessor{static isCollection(e){return e!=null&&e instanceof Zn}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new yd,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:sF++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Zn?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return X(this._observable),this._items}set items(e){this._emitBeforeChanges(ke.ADD)||(this._splice(0,this.length,Ny(e)),this._emitAfterChanges(ke.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return Ee();if(e==="change"){const i=this._chgListeners,s={removed:!1,callback:t};return i.push(s),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),Ee(()=>{s.removed=!0,i.splice(i.indexOf(s),1)})}return this._emitter.on(e,t)}once(e,t){const i="deref"in t?()=>t.deref():()=>t,s=this.on(e,n=>{i()?.call(null,n),s.remove()});return s}add(e,t){if(X(this._observable),this._emitBeforeChanges(ke.ADD))return this;const i=this.getNextIndex(t??null);return this._splice(i,0,[e]),this._emitAfterChanges(ke.ADD),this}addMany(e,t=this._items.length){if(X(this._observable),!e?.length)return this;if(this._emitBeforeChanges(ke.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,Ny(e)),this._emitAfterChanges(ke.ADD),this}at(e){if(X(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(X(this._observable),!this.length||this._emitBeforeChanges(ke.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(ke.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return X(this._observable),this._createNewInstance({items:this._items.map(F)})}concat(...e){X(this._observable);const t=e.map(Ny);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(X(this._observable),!this.length||this._emitBeforeChanges(ke.REMOVE))return;const i=this._splice(0,this.length),s=i.length;for(let n=0;n<s;n++)e.call(t,i[n],n,i);this._emitAfterChanges(ke.REMOVE)}destroyAll(){this.drain(Hx)}destroyMany(e){const t=this.removeMany(e);return t.forEach(Hx),t}every(e,t){return X(this._observable),this._items.every(e,t)}filter(e,t){let i;return X(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return X(this._observable),this._items.find(e,t)}findIndex(e,t){return X(this._observable),this._items.findIndex(e,t)}flatten(e,t){X(this._observable);const i=[];return PP(i,this,e,t),new Zn(i)}forEach(e,t){return X(this._observable),this._items.forEach(e,t)}getItemAt(e){return X(this._observable),this._items[e]}getNextIndex(e){X(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return X(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return X(this._observable),this._items.indexOf(e,t)}join(e=","){return X(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return X(this._observable),this._items.lastIndexOf(e,t)}map(e,t){X(this._observable);const i=this._items.map(e,t);return new Zn({items:i})}reorder(e,t=this.length-1){X(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(ke.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(ke.MOVE)}return e}}pop(){if(X(this._observable),!this.length||this._emitBeforeChanges(ke.REMOVE))return;const e=Fy(this._splice(this.length-1,1));return this._emitAfterChanges(ke.REMOVE),e}push(...e){return X(this._observable),this._emitBeforeChanges(ke.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(ke.ADD)),this.length}reduce(e,t){X(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){X(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return X(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(X(this._observable),e<0||e>=this.length||this._emitBeforeChanges(ke.REMOVE))return;const t=Fy(this._splice(e,1));return this._emitAfterChanges(ke.REMOVE),t}removeMany(e){if(X(this._observable),!e?.length||this._emitBeforeChanges(ke.REMOVE))return[];const t=e instanceof Zn?e.toArray():e,i=this._items,s=[],n=t.length;for(let r=0;r<n;r++){const o=t[r],a=i.indexOf(o);if(a>-1){const l=1+iF(t,i,r+1,a+1),c=this._splice(a,l);c&&c.length>0&&s.push.apply(s,c),r+=l-1}}return this._emitAfterChanges(ke.REMOVE),s}reverse(){if(X(this._observable),this._emitBeforeChanges(ke.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(ke.MOVE),this}shift(){if(X(this._observable),!this.length||this._emitBeforeChanges(ke.REMOVE))return;const e=Fy(this._splice(0,1));return this._emitAfterChanges(ke.REMOVE),e}slice(e=0,t=this.length){return X(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return X(this._observable),this._items.some(e,t)}sort(e){if(X(this._observable),!this.length||this._emitBeforeChanges(ke.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(ke.MOVE),this}splice(e,t,...i){X(this._observable);const s=(t?ke.REMOVE:0)|(i.length?ke.ADD:0);if(this._emitBeforeChanges(s))return[];const n=this._splice(e,t,i)||[];return this._emitAfterChanges(s),n}toArray(){return X(this._observable),this._items.slice()}toJSON(){return X(this._observable),this.toArray()}toLocaleString(){return X(this._observable),this._items.toLocaleString()}toString(){return X(this._observable),this._items.toString()}unshift(...e){return X(this._observable),!e.length||this._emitBeforeChanges(ke.ADD)||(this._splice(0,0,e),this._emitAfterChanges(ke.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const s=this._items,n=this.itemType;let r,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=md(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=s.splice(e,t),this.hasEventListener("before-remove")){const a=zi.acquire();a.target=this,a.cancellable=!0;for(let l=0,c=o.length;l<c;l++)r=o[l],a.reset(r),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),s.splice(e,0,r),e+=1,l-=1,c-=1);zi.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=zi.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let c=0;c<l;c++)a.reset(o[c]),this.emit("after-remove",a);zi.release(a)}}if(i?.length){if(n){const h=[];for(const p of i){const m=n.ensureType(p);m==null&&p!=null||h.push(m)}i=h}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),c=e===this.length;if(a||l){const h=zi.acquire();h.target=this,h.cancellable=!0;const p=zi.acquire();p.target=this,p.cancellable=!1;for(const m of i)a?(h.reset(m),this.emit("before-add",h),h.defaultPrevented||(c?s.push(m):s.splice(e++,0,m),this._set("length",s.length),l&&(p.reset(m),this.emit("after-add",p)))):(c?s.push(m):s.splice(e++,0,m),this._set("length",s.length),p.reset(m),this.emit("after-add",p));zi.release(p),zi.release(h)}else{if(c)for(const h of i)s.push(h);else s.splice(e,0,...i);this._set("length",s.length)}}if((i?.length||o?.length)&&this._notifyChangeEvent(i,o),this.hasEventListener("after-splice")){const a=new tF(this,i,o,e,t);this.emit("after-splice",a)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=zi.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,zi.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=zi.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),zi.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;_r.clear(),wr.clear(),xr.clear();for(const{added:l,removed:c}of i){if(l)if(xr.size===0&&wr.size===0)for(const h of l)_r.add(h);else for(const h of l)wr.has(h)?(xr.add(h),wr.delete(h)):xr.has(h)||_r.add(h);if(c)if(xr.size===0&&_r.size===0)for(const h of c)wr.add(h);else for(const h of c)_r.has(h)?_r.delete(h):(xr.delete(h),wr.add(h))}const s=li.acquire();_r.forEach(l=>{s.push(l)});const n=li.acquire();wr.forEach(l=>{n.push(l)});const r=this._items,o=t.items,a=li.acquire();if(xr.forEach(l=>{o.indexOf(l)!==r.indexOf(l)&&a.push(l)}),t.listeners&&(s.length||n.length||a.length)){const l={target:this,added:s,removed:n,moved:a},c=t.listeners.length;for(let h=0;h<c;h++){const p=t.listeners[h];p.removed||p.callback.call(this,l)}}li.release(s),li.release(n),li.release(a)}_r.clear(),wr.clear(),xr.clear()}};qn.ofType=e=>{if(!e)return Zn;if(jy.has(e))return jy.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const s in e.typeMap){const n=e.typeMap[s].prototype.declaredClass;t?t+=` | ${n}`:t=n}let i=class extends Zn{};return d([kP({Type:e,ensureType:typeof e=="function"?ui(e):ar(e)})],i.prototype,"itemType",void 0),i=d([k(`esri.core.Collection<${t}>`)],i),jy.set(e,i),i},d([f()],qn.prototype,"_updating",void 0),d([f()],qn.prototype,"length",void 0),d([f()],qn.prototype,"items",null),d([f({readOnly:!0})],qn.prototype,"updating",null),qn=Zn=d([k("esri.core.Collection")],qn);const ee=qn;function vo(e,t,i=ee){return t||(t=new i),t===e||(t.removeAll(),nF(e)?t.addMany(e):e&&t.add(e)),t}function OP(e){return e}function nF(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var Kr;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Kr||(Kr={}));class rF{constructor(){this._resolver=cs(),this._status=Kr.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Kr.RESOLVED,this._cleanUp()},()=>{this._status=Kr.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Kr.RESOLVED}isRejected(){return this._status===Kr.REJECTED}isFulfilled(){return this._status!==Kr.PENDING}abort(){this._resolver.reject(_t())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=cs(),i=[...this._resolvingPromises,t.promise],s=this._allPromise=Promise.all(i);s.then(()=>{this.isFulfilled()||this._allPromise!==s||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==s||us(n)||this._resolver.reject(n)}),t.resolve()}}const N_=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new rF,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,s){return this._promiseProps.promise.then(()=>this).then(i,s)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=d([k("esri.core.Promise")],t),t};let pm=class extends N_(Q){};pm=d([k("esri.core.Promise")],pm);const oF="not-loaded",aF="loading",lF="failed",Gx="loaded",EP=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(s=>{const n=this.load.bind(this);this.load=r=>{const o=new Promise((a,l)=>{const c=S_(r,l);this.destroyed&&l(new V("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally(()=>{c&&c.remove()})});if(this.loadStatus===oF){this._set("loadStatus",aF);const a=this._loadController=new AbortController;n({signal:a.signal})}return s(),o}})),this.when(()=>{this._set("loadStatus",Gx),this._loadController=null},s=>{this._set("loadStatus",lF),this._set("loadError",s),this._loadController=null})}destroy(){this._loadController&&(this._loadController=Dh(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===Gx}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new V("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return d([f({readOnly:!0})],t.prototype,"loaded",null),d([f({readOnly:!0})],t.prototype,"loadError",void 0),d([f({clonable:!1})],t.prototype,"loadStatus",void 0),d([f({type:[cr],readOnly:!0})],t.prototype,"loadWarnings",null),t=d([k("esri.core.Loadable")],t),t};let _u=class extends EP(pm){};_u=d([k("esri.core.Loadable")],_u),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=EP,e.isLoadable=t}(_u||(_u={}));const bo=_u;function Lce(e,t,i){return M_(e.map((s,n)=>t.apply(i,[s,n])))}async function cF(e,t,i){return(await M_(e.map((s,n)=>t.apply(i,[s,n])))).map(s=>s.value)}function F_(e){return{ok:!0,value:e}}function j_(e){return{ok:!1,error:e}}function uF(e){return e!=null&&e.ok===!0?e.value:null}function hF(e){return e!=null&&e.ok===!1?e.error:null}async function AP(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return F_(await e)}catch(t){return j_(t)}}async function Rce(e){try{return F_(await e)}catch(t){return eP(t),j_(t)}}function z_(e,t){return new Ar(e,t)}let Ar=class extends Q{get value(){return uF(this._result)}get error(){return hF(this._result)}get finished(){return this._result!=null}constructor(e,t){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Dh(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=e(i),this.promise.then(s=>{this._result=F_(s),this._cleanup()},s=>{this._result=j_(s),this._cleanup()}),this._abortHandle=ns(t,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=et(this._abortHandle),this._abortController=null}};d([f()],Ar.prototype,"value",null),d([f()],Ar.prototype,"error",null),d([f()],Ar.prototype,"finished",null),d([f()],Ar.prototype,"promise",void 0),d([f()],Ar.prototype,"_result",void 0),Ar=d([k("esri.core.asyncUtils.ReactiveTask")],Ar);async function CP(e,t){return await e.load(),dF(e,t)}async function dF(e,t){const i=[],s=(...r)=>{for(const o of r)o!=null&&(Array.isArray(o)?s(...o):ee.isCollection(o)?o.forEach(a=>s(a)):bo.isLoadable(o)&&i.push(o))};t(s);let n=null;if(await cF(i,async r=>{const o=await AP(pF(r)?r.loadAll():r.load());o.ok!==!1||n||(n=o)}),n)throw n.error;return e}function pF(e){return"loadAll"in e&&typeof e.loadAll=="function"}function ve(e,t,i){let s,n;return t===void 0?(n=e,s=[void 0]):typeof t!="string"?(n=e,s=[void 0],i=t):(n=t,s=Array.isArray(e)?e:[e]),(r,o)=>{const a=r.constructor.prototype;for(const l of s){const c=E3(r,l,n);c.write&&typeof c.write=="object"||(c.write={}),i&&(c.write.target=i),c.write.writer=a[o]}}}class Ft{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=fF(t),this.apiValues=qx(this._apiToJSON),this.jsonValues=qx(this._jsonToAPI),this.read=s=>this.fromJSON(s),this.write=(s,n,r)=>{const o=this.toJSON(s);o!==void 0&&sl(r,o,n)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const i=this._apiToJSON[t];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}}function fF(e){const t={};for(const i in e)t[e[i]]=i;return t}function qx(e){const t=[];for(const i in e)t.push(i);return t.sort(),t}function di(){return function(e,t){return new Ft(e,{ignoreUnknown:!0,...t})}}class V_{constructor(t,i,s,n){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=s;const r=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*r,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=n||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const at=new V_(6378137,1/298.257223563,3e5,.006694379990137799),cn=new V_(3396190,1/169.8944472236118,23e4),_o=new V_(1737400,0,0);function Pe(e){if(!Me.assetsPath)throw B.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new V("assets:path-not-set","config.assetsPath is not set");return xg(Me.assetsPath,e)}let zy,O=null;function U_(){return!!O}function mF(){return!!L("esri-wasm")}function IP(){return zy||(zy=W(()=>import("./pe-wasm.abed4f1d.js"),[]).then(e=>e.p).then(({default:e})=>e({locateFile:t=>Pe(`esri/geometry/support/${t}`)})).then(e=>{RP(e)}),zy)}var b1,He,_1;(function(e){function t(r,o,a){O.ensureCache.prepare();const l=Ta(a),c=a===l,h=O.ensureFloat64(l),p=O._pe_geog_to_proj(O.getPointer(r),o,h);return p&&no(a,o,h,c),p}function i(r,o,a,l){switch(l){case He.PE_TRANSFORM_P_TO_G:return s(r,o,a);case He.PE_TRANSFORM_G_TO_P:return t(r,o,a)}return 0}function s(r,o,a){return n(r,o,a,0)}function n(r,o,a,l){O.ensureCache.prepare();const c=Ta(a),h=a===c,p=O.ensureFloat64(c),m=O._pe_proj_to_geog_center(O.getPointer(r),o,p,l);return m&&no(a,o,p,h),m}e.geogToProj=t,e.projGeog=i,e.projToGeog=s,e.projToGeogCenter=n})(b1||(b1={})),function(e){function t(){e.PE_BUFFER_MAX=O.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=O.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=O.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=O.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=O.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=O.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=O.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=O.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=O.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=O.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=O.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=O.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=O.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=O.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=O.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=O.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=O.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=O.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=O.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=O.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=O.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=O.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=O.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=O.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=O.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=O.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=O.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=O.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=O.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=O.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=O.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=O.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(He||(He={})),function(e){const t={},i={},s=g=>{if(g){const y=g.getType();switch(y){case He.PE_TYPE_GEOGCS:g=O.castObject(g,O.PeGeogcs);break;case He.PE_TYPE_PROJCS:g=O.castObject(g,O.PeProjcs);break;case He.PE_TYPE_GEOGTRAN:g=O.castObject(g,O.PeGeogtran);break;default:y&He.PE_TYPE_UNIT&&(g=O.castObject(g,O.PeUnit))}}return g};function n(){O.PeFactory.prototype.initialize(null)}function r(g){return o(He.PE_TYPE_COORDSYS,g)}function o(g,y){let v=null,b=t[g];if(b||(b={},t[g]=b),b.hasOwnProperty(String(y)))v=b[y];else{const w=O.PeFactory.prototype.factoryByType(g,y);O.compare(w,O.NULL)||(v=w,b[y]=v)}return v=s(v),v}function a(g,y){let v=null,b=i[g];if(b||(b={},i[g]=b),b.hasOwnProperty(y))v=b[y];else{const w=O.PeFactory.prototype.fromString(g,y);O.compare(w,O.NULL)||(v=w,b[y]=v)}return v=s(v),v}function l(g){return o(He.PE_TYPE_GEOGCS,g)}function c(g){return o(He.PE_TYPE_GEOGTRAN,g)}function h(g){return O.PeFactory.prototype.getCode(g)}function p(g){return o(He.PE_TYPE_PROJCS,g)}function m(g){return o(He.PE_TYPE_UNIT,g)}e.initialize=n,e.coordsys=r,e.factoryByType=o,e.fromString=a,e.geogcs=l,e.geogtran=c,e.getCode=h,e.projcs=p,e.unit=m}(_1||(_1={}));let LP=null;var fm,w1,x1,S1,mm,M1,gm,ym,$1;function RP(e){function t(r,o,a){r[o]=a(r[o])}O=e,He.init(),fm.init(),mm.init(),gm.init(),ym.init(),LP=class extends O.PeGCSExtent{destroy(){O.destroy(this)}};const i=[O.PeDatum,O.PeGeogcs,O.PeGeogtran,O.PeObject,O.PeParameter,O.PePrimem,O.PeProjcs,O.PeSpheroid,O.PeUnit];for(const r of i)t(r.prototype,"getName",o=>function(){return o.call(this,new Array(He.PE_NAME_MAX))});for(const r of[O.PeGeogtran,O.PeProjcs])t(r.prototype,"getParameters",o=>function(){const a=new Array(He.PE_PARM_MAX);let l=o.call(this);for(let c=0;c<a.length;c++){const h=O.getValue(l,"*");a[c]=h?O.wrapPointer(h,O.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});t(O.PeHorizon.prototype,"getCoord",r=>function(){const o=this.getSize();if(!o)return null;const a=[];return no(a,o,r.call(this)),a}),t(O.PeGTlistExtendedEntry.prototype,"getEntries",r=>{const o=O._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=r.call(this);if(!O.compare(l,O.NULL)){a=[l];const c=this.getSteps();if(c>1){const h=O.getPointer(l);for(let p=1;p<c;p++)a.push(O.wrapPointer(h+o*p,O.PeGTlistExtendedGTs))}}return a}});const s=O._pe_getPeHorizonSize(),n=r=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(r))return o.get(r);let a=null;const l=r.call(this);if(!O.compare(l,O.NULL)){a=[l];const c=l.getNump();if(c>1){const h=O.getPointer(l);for(let p=1;p<c;p++)a.push(O.wrapPointer(h+s*p,O.PeHorizon))}}return o.set(r,a),a};t(O.PeProjcs.prototype,"horizonGcsGenerate",n),t(O.PeProjcs.prototype,"horizonPcsGenerate",n),O.PeObject.prototype.toString=function(r=He.PE_STR_OPTS_NONE){O.ensureCache.prepare();const o=O.getPointer(this),a=O.ensureInt8(new Array(He.PE_BUFFER_MAX));return O.UTF8ToString(O._pe_object_to_string_ext(o,r,a))}}function Sn(e){if(!e)return;const t=O.getClass(e);if(!t)return;const i=O.getCache(t);if(!i)return;const s=O.getPointer(e);s&&delete i[s]}function Xd(e,t){const i=[],s=new Array(t);for(let n=0;n<e;n++)i.push(O.ensureInt8(s));return i}function Ta(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(i=>{t.push(i[0],i[1])})):t=e,t}function no(e,t,i,s=!1){if(s)for(let n=0;n<2*t;n++)e[n]=O.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=e.length===0;for(let r=0;r<t;r++)n&&(e[r]=new Array(2)),e[r][0]=O.getValue(i,"double"),e[r][1]=O.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=O.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=O._pe_getPeGTlistExtendedEntrySize()}function s(n,r,o,a,l,c){let h=null;const p=new O.PeInteger(c);try{const m=O.PeGTlistExtended.prototype.getGTlist(n,r,o,a,l,p);if((c=p.val)&&(h=[m],c>1)){const g=O.getPointer(m);for(let y=1;y<c;y++)h.push(O.wrapPointer(g+t*y,O.PeGTlistExtendedEntry))}}finally{O.destroy(p)}return h}e.init=i,e.getGTlist=s})(fm||(fm={})),function(e){function t(i){if(i?.length){for(const s of i)Sn(s),s.getEntries().forEach(n=>{Sn(n);const r=n.getGeogtran();Sn(r),r.getParameters().forEach(Sn),[r.getGeogcs1(),r.getGeogcs2()].forEach(o=>{Sn(o);const a=o.getDatum();Sn(a),Sn(a.getSpheroid()),Sn(o.getPrimem()),Sn(o.getUnit())})});O.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(w1||(w1={})),function(e){function t(i,s,n,r,o){O.ensureCache.prepare();const a=Ta(n),l=n===a,c=O.ensureFloat64(a);let h=0;r&&(h=O.ensureFloat64(r));const p=O._pe_geog_to_geog(O.getPointer(i),s,c,h,o);return p&&no(n,s,c,l),p}e.geogToGeog=t}(x1||(x1={})),function(e){const t=(c,h,p,m,g,y)=>{let v,b;switch(O.ensureCache.prepare(),c){case"dd":v=O._pe_geog_to_dd,b=He.PE_DD_MAX;break;case"ddm":v=O._pe_geog_to_ddm,b=He.PE_DDM_MAX;break;case"dms":v=O._pe_geog_to_dms,b=He.PE_DMS_MAX}let w=0;h&&(w=O.getPointer(h));const x=Ta(m),$=O.ensureFloat64(x),S=Xd(p,b),M=v(w,p,$,g,O.ensureInt32(S));if(M)for(let P=0;P<p;P++)y[P]=O.UTF8ToString(S[P]);return M},i=(c,h,p,m,g)=>{let y;switch(O.ensureCache.prepare(),c){case"dd":y=O._pe_dd_to_geog;break;case"ddm":y=O._pe_ddm_to_geog;break;case"dms":y=O._pe_dms_to_geog}let v=0;h&&(v=O.getPointer(h));const b=m.map(S=>O.ensureString(S)),w=O.ensureInt32(b),x=O.ensureFloat64(new Array(2*p)),$=y(v,p,w,x);return $&&no(g,p,x),$};function s(c,h,p,m,g){return t("dms",c,h,p,m,g)}function n(c,h,p,m){return i("dms",c,h,p,m)}function r(c,h,p,m,g){return t("ddm",c,h,p,m,g)}function o(c,h,p,m){return i("ddm",c,h,p,m)}function a(c,h,p,m,g){return t("dd",c,h,p,m,g)}function l(c,h,p,m){return i("dd",c,h,p,m)}e.geogToDms=s,e.dmsToGeog=n,e.geogToDdm=r,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=l}(S1||(S1={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=O.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=O.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=O.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=O.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=O.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(n,r,o,a,l,c,h){O.ensureCache.prepare();let p=0;n&&(p=O.getPointer(n));const m=Ta(o),g=O.ensureFloat64(m),y=Xd(r,He.PE_MGRS_MAX),v=O.ensureInt32(y),b=O._pe_geog_to_mgrs_extended(p,r,g,a,l,c,v);if(b)for(let w=0;w<r;w++)h[w]=O.UTF8ToString(y[w]);return b}function s(n,r,o,a,l){O.ensureCache.prepare();let c=0;n&&(c=O.getPointer(n));const h=o.map(y=>O.ensureString(y)),p=O.ensureInt32(h),m=O.ensureFloat64(new Array(2*r)),g=O._pe_mgrs_to_geog_extended(c,r,p,a,m);return g&&no(l,r,m),g}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=s}(mm||(mm={})),function(e){function t(s,n,r,o,a,l,c){O.ensureCache.prepare();let h=0;s&&(h=O.getPointer(s));const p=Ta(r),m=O.ensureFloat64(p),g=Xd(n,He.PE_MGRS_MAX),y=O.ensureInt32(g),v=O._pe_geog_to_usng(h,n,m,o,a,l,y);if(v)for(let b=0;b<n;b++)c[b]=O.UTF8ToString(g[b]);return v}function i(s,n,r,o){O.ensureCache.prepare();let a=0;s&&(a=O.getPointer(s));const l=r.map(m=>O.ensureString(m)),c=O.ensureInt32(l),h=O.ensureFloat64(new Array(2*n)),p=O._pe_usng_to_geog(a,n,c,h);return p&&no(o,n,h),p}e.geogToUsng=t,e.usngToGeog=i}(M1||(M1={})),function(e){function t(){e.PE_UTM_OPTS_NONE=O.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=O.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=O.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(n,r,o,a,l){O.ensureCache.prepare();let c=0;n&&(c=O.getPointer(n));const h=Ta(o),p=O.ensureFloat64(h),m=Xd(r,He.PE_UTM_MAX),g=O.ensureInt32(m),y=O._pe_geog_to_utm(c,r,p,a,g);if(y)for(let v=0;v<r;v++)l[v]=O.UTF8ToString(m[v]);return y}function s(n,r,o,a,l){O.ensureCache.prepare();let c=0;n&&(c=O.getPointer(n));const h=o.map(y=>O.ensureString(y)),p=O.ensureInt32(h),m=O.ensureFloat64(new Array(2*r)),g=O._pe_utm_to_geog(c,r,p,a,m);return g&&no(l,r,m),g}e.init=t,e.geogToUtm=i,e.utmToGeog=s}(gm||(gm={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=O.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=O.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=O.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=O.PePCSInfo.prototype.PE_POLE_POINT}function s(n,r=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return t.has(n)&&(a=t.get(n),a[r]&&(o=a[r])),o||(o=O.PePCSInfo.prototype.generate(n,r),a||(a=[],t.set(n,a)),a[r]=o),o}e.init=i,e.generate=s}(ym||(ym={})),function(e){function t(){return O.PeVersion.prototype.version_string()}e.versionString=t}($1||($1={}));const gF=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return b1},get PeDefs(){return He},get PeFactory(){return _1},get PeGCSExtent(){return LP},get PeGTTransformations(){return x1},get PeGTlistExtended(){return fm},get PeGTlistExtendedEntry(){return w1},get PeNotationDms(){return S1},get PeNotationMgrs(){return mm},get PeNotationUsng(){return M1},get PeNotationUtm(){return gm},get PePCSInfo(){return ym},get PeVersion(){return $1},_init:RP,get _pe(){return O},isLoaded:U_,isSupported:mF,load:IP},Symbol.toStringTag,{value:"Module"}));var Ga;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(Ga||(Ga={}));let u;const _={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(u=2e3;u<=2045;u++)_[u]=0;for(u=2056;u<=2065;u++)_[u]=0;for(u=2067;u<=2135;u++)_[u]=0;for(u=2137;u<=2154;u++)_[u]=0;for(u=2161;u<=2170;u++)_[u]=0;for(u=2172;u<=2193;u++)_[u]=0;for(u=2195;u<=2198;u++)_[u]=0;for(u=2200;u<=2203;u++)_[u]=0;for(u=2205;u<=2217;u++)_[u]=0;for(u=2222;u<=2224;u++)_[u]=1;for(u=2225;u<=2250;u++)_[u]=2;for(u=2251;u<=2253;u++)_[u]=1;for(u=2257;u<=2264;u++)_[u]=2;for(u=2274;u<=2279;u++)_[u]=2;for(u=2280;u<=2282;u++)_[u]=1;for(u=2283;u<=2289;u++)_[u]=2;for(u=2290;u<=2292;u++)_[u]=0;for(u=2308;u<=2313;u++)_[u]=0;for(u=2315;u<=2491;u++)_[u]=0;for(u=2494;u<=2866;u++)_[u]=0;for(u=2867;u<=2869;u++)_[u]=1;for(u=2870;u<=2888;u++)_[u]=2;for(u=2891;u<=2895;u++)_[u]=2;for(u=2896;u<=2898;u++)_[u]=1;for(u=2902;u<=2908;u++)_[u]=2;for(u=2915;u<=2920;u++)_[u]=2;for(u=2921;u<=2923;u++)_[u]=1;for(u=2924;u<=2930;u++)_[u]=2;for(u=2931;u<=2962;u++)_[u]=0;for(u=2964;u<=2968;u++)_[u]=2;for(u=2969;u<=2973;u++)_[u]=0;for(u=2975;u<=2991;u++)_[u]=0;for(u=2995;u<=3051;u++)_[u]=0;for(u=3054;u<=3079;u++)_[u]=0;for(u=3081;u<=3088;u++)_[u]=0;for(u=3092;u<=3101;u++)_[u]=0;for(u=3106;u<=3138;u++)_[u]=0;for(u=3146;u<=3151;u++)_[u]=0;for(u=3153;u<=3166;u++)_[u]=0;for(u=3168;u<=3172;u++)_[u]=0;for(u=3174;u<=3203;u++)_[u]=0;for(u=3294;u<=3358;u++)_[u]=0;for(u=3367;u<=3403;u++)_[u]=0;for(u=3408;u<=3416;u++)_[u]=0;for(u=3417;u<=3438;u++)_[u]=2;for(u=3441;u<=3446;u++)_[u]=2;for(u=3447;u<=3450;u++)_[u]=0;for(u=3451;u<=3459;u++)_[u]=2;for(u=3460;u<=3478;u++)_[u]=0;for(u=3554;u<=3559;u++)_[u]=0;for(u=3560;u<=3570;u++)_[u]=2;for(u=3571;u<=3581;u++)_[u]=0;for(u=3594;u<=3597;u++)_[u]=0;for(u=3601;u<=3604;u++)_[u]=0;for(u=3637;u<=3639;u++)_[u]=0;for(u=3665;u<=3667;u++)_[u]=0;for(u=3693;u<=3695;u++)_[u]=0;for(u=3701;u<=3727;u++)_[u]=0;for(u=3728;u<=3739;u++)_[u]=2;for(u=3740;u<=3751;u++)_[u]=0;for(u=3753;u<=3760;u++)_[u]=2;for(u=3761;u<=3773;u++)_[u]=0;for(u=3775;u<=3777;u++)_[u]=0;for(u=3779;u<=3781;u++)_[u]=0;for(u=3783;u<=3785;u++)_[u]=0;for(u=3788;u<=3791;u++)_[u]=0;for(u=3797;u<=3802;u++)_[u]=0;for(u=3814;u<=3816;u++)_[u]=0;for(u=3825;u<=3829;u++)_[u]=0;for(u=3832;u<=3841;u++)_[u]=0;for(u=3844;u<=3852;u++)_[u]=0;for(u=3873;u<=3885;u++)_[u]=0;for(u=3890;u<=3893;u++)_[u]=0;for(u=3907;u<=3912;u++)_[u]=0;for(u=3942;u<=3950;u++)_[u]=0;for(u=3968;u<=3970;u++)_[u]=0;for(u=3973;u<=3976;u++)_[u]=0;for(u=3986;u<=3989;u++)_[u]=0;for(u=3994;u<=3997;u++)_[u]=0;for(u=4048;u<=4051;u++)_[u]=0;for(u=4056;u<=4063;u++)_[u]=0;for(u=4093;u<=4096;u++)_[u]=0;for(u=4390;u<=4398;u++)_[u]=0;for(u=4399;u<=4413;u++)_[u]=2;for(u=4418;u<=4433;u++)_[u]=2;for(u=4455;u<=4457;u++)_[u]=2;for(u=4484;u<=4489;u++)_[u]=0;for(u=4491;u<=4554;u++)_[u]=0;for(u=4568;u<=4589;u++)_[u]=0;for(u=4652;u<=4656;u++)_[u]=0;for(u=4766;u<=4800;u++)_[u]=0;for(u=5014;u<=5016;u++)_[u]=0;for(u=5069;u<=5072;u++)_[u]=0;for(u=5105;u<=5130;u++)_[u]=0;for(u=5167;u<=5188;u++)_[u]=0;for(u=5253;u<=5259;u++)_[u]=0;for(u=5269;u<=5275;u++)_[u]=0;for(u=5292;u<=5311;u++)_[u]=0;for(u=5329;u<=5331;u++)_[u]=0;for(u=5343;u<=5349;u++)_[u]=0;for(u=5355;u<=5357;u++)_[u]=0;for(u=5387;u<=5389;u++)_[u]=0;for(u=5459;u<=5463;u++)_[u]=0;for(u=5479;u<=5482;u++)_[u]=0;for(u=5518;u<=5520;u++)_[u]=0;for(u=5530;u<=5539;u++)_[u]=0;for(u=5550;u<=5552;u++)_[u]=0;for(u=5562;u<=5583;u++)_[u]=0;for(u=5623;u<=5625;u++)_[u]=2;for(u=5631;u<=5639;u++)_[u]=0;for(u=5649;u<=5653;u++)_[u]=0;for(u=5663;u<=5680;u++)_[u]=0;for(u=5682;u<=5685;u++)_[u]=0;for(u=5875;u<=5877;u++)_[u]=0;for(u=5896;u<=5899;u++)_[u]=0;for(u=5921;u<=5940;u++)_[u]=0;for(u=6050;u<=6125;u++)_[u]=0;for(u=6244;u<=6275;u++)_[u]=0;for(u=6328;u<=6348;u++)_[u]=0;for(u=6350;u<=6356;u++)_[u]=0;for(u=6366;u<=6372;u++)_[u]=0;for(u=6381;u<=6387;u++)_[u]=0;for(u=6393;u<=6404;u++)_[u]=0;for(u=6480;u<=6483;u++)_[u]=0;for(u=6511;u<=6514;u++)_[u]=0;for(u=6579;u<=6581;u++)_[u]=0;for(u=6619;u<=6624;u++)_[u]=0;for(u=6625;u<=6627;u++)_[u]=2;for(u=6628;u<=6632;u++)_[u]=0;for(u=6634;u<=6637;u++)_[u]=0;for(u=6669;u<=6692;u++)_[u]=0;for(u=6707;u<=6709;u++)_[u]=0;for(u=6720;u<=6723;u++)_[u]=0;for(u=6732;u<=6738;u++)_[u]=0;for(u=6931;u<=6933;u++)_[u]=0;for(u=6956;u<=6959;u++)_[u]=0;for(u=7005;u<=7007;u++)_[u]=0;for(u=7057;u<=7070;u++)_[u]=2;for(u=7074;u<=7082;u++)_[u]=0;for(u=7109;u<=7118;u++)_[u]=0;for(u=7119;u<=7127;u++)_[u]=1;for(u=7374;u<=7376;u++)_[u]=0;for(u=7528;u<=7586;u++)_[u]=0;for(u=7587;u<=7645;u++)_[u]=2;for(u=7692;u<=7696;u++)_[u]=0;for(u=7755;u<=7787;u++)_[u]=0;for(u=7791;u<=7795;u++)_[u]=0;for(u=7799;u<=7801;u++)_[u]=0;for(u=7803;u<=7805;u++)_[u]=0;for(u=7825;u<=7831;u++)_[u]=0;for(u=7845;u<=7859;u++)_[u]=0;for(u=8013;u<=8032;u++)_[u]=0;for(u=8065;u<=8068;u++)_[u]=1;for(u=8518;u<=8529;u++)_[u]=2;for(u=8533;u<=8536;u++)_[u]=2;for(u=8538;u<=8540;u++)_[u]=2;for(u=8677;u<=8679;u++)_[u]=0;for(u=8836;u<=8840;u++)_[u]=0;for(u=8857;u<=8859;u++)_[u]=0;for(u=8908;u<=8910;u++)_[u]=0;for(u=9154;u<=9159;u++)_[u]=0;for(u=9205;u<=9218;u++)_[u]=0;for(u=9271;u<=9273;u++)_[u]=0;for(u=9295;u<=9297;u++)_[u]=0;for(u=9356;u<=9360;u++)_[u]=0;for(u=9404;u<=9407;u++)_[u]=0;for(u=9476;u<=9482;u++)_[u]=0;for(u=9487;u<=9494;u++)_[u]=0;for(u=9697;u<=9699;u++)_[u]=0;for(u=9821;u<=9865;u++)_[u]=0;for(u=10285;u<=10291;u++)_[u]=0;for(u=10314;u<=10317;u++)_[u]=0;for(u=10448;u<=10465;u++)_[u]=0;for(u=10731;u<=10733;u++)_[u]=0;for(u=11114;u<=11118;u++)_[u]=0;for(u=20004;u<=20032;u++)_[u]=0;for(u=20047;u<=20049;u++)_[u]=0;for(u=20062;u<=20092;u++)_[u]=0;for(u=20135;u<=20138;u++)_[u]=0;for(u=20248;u<=20258;u++)_[u]=0;for(u=20348;u<=20358;u++)_[u]=0;for(u=20436;u<=20440;u++)_[u]=0;for(u=20822;u<=20824;u++)_[u]=0;for(u=20904;u<=20932;u++)_[u]=0;for(u=20934;u<=20936;u++)_[u]=0;for(u=21004;u<=21032;u++)_[u]=0;for(u=21035;u<=21037;u++)_[u]=0;for(u=21095;u<=21097;u++)_[u]=0;for(u=21148;u<=21150;u++)_[u]=0;for(u=21207;u<=21264;u++)_[u]=0;for(u=21307;u<=21364;u++)_[u]=0;for(u=21413;u<=21423;u++)_[u]=0;for(u=21453;u<=21463;u++)_[u]=0;for(u=21473;u<=21483;u++)_[u]=0;for(u=21780;u<=21782;u++)_[u]=0;for(u=21891;u<=21894;u++)_[u]=0;for(u=21896;u<=21899;u++)_[u]=0;for(u=22171;u<=22177;u++)_[u]=0;for(u=22181;u<=22187;u++)_[u]=0;for(u=22191;u<=22197;u++)_[u]=0;for(u=22207;u<=22222;u++)_[u]=0;for(u=22229;u<=22232;u++)_[u]=0;for(u=22234;u<=22236;u++)_[u]=0;for(u=22243;u<=22250;u++)_[u]=0;for(u=22262;u<=22265;u++)_[u]=0;for(u=22307;u<=22322;u++)_[u]=0;for(u=22348;u<=22357;u++)_[u]=0;for(u=22407;u<=22422;u++)_[u]=0;for(u=22462;u<=22465;u++)_[u]=0;for(u=22521;u<=22525;u++)_[u]=0;for(u=22607;u<=22622;u++)_[u]=0;for(u=22641;u<=22646;u++)_[u]=0;for(u=22648;u<=22657;u++)_[u]=0;for(u=22707;u<=22722;u++)_[u]=0;for(u=22762;u<=22765;u++)_[u]=0;for(u=22807;u<=22822;u++)_[u]=0;for(u=22991;u<=22994;u++)_[u]=0;for(u=23028;u<=23038;u++)_[u]=0;for(u=23301;u<=23333;u++)_[u]=2;for(u=23830;u<=23853;u++)_[u]=0;for(u=23866;u<=23872;u++)_[u]=0;for(u=23877;u<=23884;u++)_[u]=0;for(u=23886;u<=23894;u++)_[u]=0;for(u=23946;u<=23948;u++)_[u]=0;for(u=24311;u<=24313;u++)_[u]=0;for(u=24342;u<=24347;u++)_[u]=0;for(u=24370;u<=24374;u++)_[u]=10;for(u=24375;u<=24381;u++)_[u]=0;for(u=24718;u<=24721;u++)_[u]=0;for(u=24817;u<=24821;u++)_[u]=0;for(u=24877;u<=24882;u++)_[u]=0;for(u=24891;u<=24893;u++)_[u]=0;for(u=25391;u<=25395;u++)_[u]=0;for(u=25828;u<=25838;u++)_[u]=0;for(u=26191;u<=26195;u++)_[u]=0;for(u=26391;u<=26393;u++)_[u]=0;for(u=26701;u<=26722;u++)_[u]=0;for(u=26729;u<=26799;u++)_[u]=2;for(u=26801;u<=26803;u++)_[u]=2;for(u=26811;u<=26813;u++)_[u]=2;for(u=26847;u<=26870;u++)_[u]=2;for(u=26891;u<=26899;u++)_[u]=0;for(u=26901;u<=26923;u++)_[u]=0;for(u=26929;u<=26946;u++)_[u]=0;for(u=26948;u<=26998;u++)_[u]=0;for(u=27037;u<=27040;u++)_[u]=0;for(u=27205;u<=27232;u++)_[u]=0;for(u=27258;u<=27260;u++)_[u]=0;for(u=27391;u<=27398;u++)_[u]=0;for(u=27561;u<=27564;u++)_[u]=0;for(u=27571;u<=27574;u++)_[u]=0;for(u=27581;u<=27584;u++)_[u]=0;for(u=27591;u<=27594;u++)_[u]=0;for(u=27700;u<=27707;u++)_[u]=0;for(u=28191;u<=28193;u++)_[u]=0;for(u=28348;u<=28358;u++)_[u]=0;for(u=28402;u<=28432;u++)_[u]=0;for(u=28462;u<=28492;u++)_[u]=0;for(u=29118;u<=29122;u++)_[u]=0;for(u=29168;u<=29172;u++)_[u]=0;for(u=29177;u<=29185;u++)_[u]=0;for(u=29187;u<=29195;u++)_[u]=0;for(u=29900;u<=29903;u++)_[u]=0;for(u=30161;u<=30179;u++)_[u]=0;for(u=30491;u<=30494;u++)_[u]=0;for(u=30729;u<=30732;u++)_[u]=0;for(u=31251;u<=31259;u++)_[u]=0;for(u=31265;u<=31268;u++)_[u]=0;for(u=31275;u<=31279;u++)_[u]=0;for(u=31281;u<=31297;u++)_[u]=0;for(u=31461;u<=31469;u++)_[u]=0;for(u=31491;u<=31495;u++)_[u]=0;for(u=31917;u<=31922;u++)_[u]=0;for(u=31965;u<=32e3;u++)_[u]=0;for(u=32001;u<=32003;u++)_[u]=2;for(u=32005;u<=32031;u++)_[u]=2;for(u=32033;u<=32060;u++)_[u]=2;for(u=32064;u<=32067;u++)_[u]=2;for(u=32074;u<=32077;u++)_[u]=2;for(u=32081;u<=32086;u++)_[u]=0;for(u=32107;u<=32130;u++)_[u]=0;for(u=32133;u<=32159;u++)_[u]=0;for(u=32164;u<=32167;u++)_[u]=2;for(u=32180;u<=32199;u++)_[u]=0;for(u=32201;u<=32260;u++)_[u]=0;for(u=32301;u<=32360;u++)_[u]=0;for(u=32401;u<=32460;u++)_[u]=0;for(u=32501;u<=32560;u++)_[u]=0;for(u=32601;u<=32662;u++)_[u]=0;for(u=32664;u<=32667;u++)_[u]=2;for(u=32701;u<=32761;u++)_[u]=0;for(u=53001;u<=53004;u++)_[u]=0;for(u=53008;u<=53019;u++)_[u]=0;for(u=53021;u<=53032;u++)_[u]=0;for(u=53034;u<=53037;u++)_[u]=0;for(u=53042;u<=53046;u++)_[u]=0;for(u=53074;u<=53080;u++)_[u]=0;for(u=54001;u<=54004;u++)_[u]=0;for(u=54008;u<=54019;u++)_[u]=0;for(u=54021;u<=54032;u++)_[u]=0;for(u=54034;u<=54037;u++)_[u]=0;for(u=54042;u<=54046;u++)_[u]=0;for(u=54048;u<=54053;u++)_[u]=0;for(u=54074;u<=54080;u++)_[u]=0;for(u=54098;u<=54101;u++)_[u]=0;for(u=102001;u<=102040;u++)_[u]=0;for(u=102042;u<=102063;u++)_[u]=0;for(u=102065;u<=102067;u++)_[u]=0;for(u=102070;u<=102117;u++)_[u]=0;for(u=102122;u<=102216;u++)_[u]=0;for(u=102221;u<=102377;u++)_[u]=0;for(u=102382;u<=102388;u++)_[u]=0;for(u=102389;u<=102398;u++)_[u]=2;for(u=102399;u<=102444;u++)_[u]=0;for(u=102445;u<=102447;u++)_[u]=2;for(u=102448;u<=102458;u++)_[u]=0;for(u=102459;u<=102468;u++)_[u]=2;for(u=102469;u<=102499;u++)_[u]=0;for(u=102500;u<=102519;u++)_[u]=1;for(u=102520;u<=102524;u++)_[u]=0;for(u=102525;u<=102529;u++)_[u]=2;for(u=102530;u<=102588;u++)_[u]=0;for(u=102590;u<=102598;u++)_[u]=0;for(u=102601;u<=102603;u++)_[u]=0;for(u=102605;u<=102628;u++)_[u]=0;for(u=102629;u<=102646;u++)_[u]=2;for(u=102648;u<=102700;u++)_[u]=2;for(u=102701;u<=102703;u++)_[u]=0;for(u=102707;u<=102730;u++)_[u]=2;for(u=102733;u<=102758;u++)_[u]=2;for(u=102767;u<=102900;u++)_[u]=0;for(u=102901;u<=102933;u++)_[u]=2;for(u=102934;u<=102950;u++)_[u]=13;for(u=102951;u<=102963;u++)_[u]=0;for(u=102965;u<=102969;u++)_[u]=0;for(u=102971;u<=102973;u++)_[u]=0;for(u=102975;u<=102989;u++)_[u]=0;for(u=102990;u<=102992;u++)_[u]=1;for(u=102997;u<=103002;u++)_[u]=0;for(u=103003;u<=103008;u++)_[u]=2;for(u=103009;u<=103011;u++)_[u]=0;for(u=103012;u<=103014;u++)_[u]=2;for(u=103019;u<=103021;u++)_[u]=0;for(u=103022;u<=103024;u++)_[u]=2;for(u=103029;u<=103031;u++)_[u]=0;for(u=103032;u<=103034;u++)_[u]=2;for(u=103065;u<=103068;u++)_[u]=0;for(u=103074;u<=103076;u++)_[u]=0;for(u=103077;u<=103079;u++)_[u]=1;for(u=103080;u<=103082;u++)_[u]=0;for(u=103083;u<=103085;u++)_[u]=2;for(u=103090;u<=103093;u++)_[u]=0;for(u=103097;u<=103099;u++)_[u]=0;for(u=103100;u<=103102;u++)_[u]=2;for(u=103107;u<=103109;u++)_[u]=0;for(u=103110;u<=103112;u++)_[u]=2;for(u=103113;u<=103116;u++)_[u]=0;for(u=103117;u<=103120;u++)_[u]=2;for(u=103153;u<=103157;u++)_[u]=0;for(u=103158;u<=103162;u++)_[u]=2;for(u=103163;u<=103165;u++)_[u]=0;for(u=103166;u<=103168;u++)_[u]=1;for(u=103169;u<=103171;u++)_[u]=2;for(u=103186;u<=103188;u++)_[u]=0;for(u=103189;u<=103191;u++)_[u]=2;for(u=103192;u<=103195;u++)_[u]=0;for(u=103196;u<=103199;u++)_[u]=2;for(u=103200;u<=103224;u++)_[u]=0;for(u=103225;u<=103227;u++)_[u]=1;for(u=103232;u<=103237;u++)_[u]=0;for(u=103238;u<=103243;u++)_[u]=2;for(u=103244;u<=103246;u++)_[u]=0;for(u=103247;u<=103249;u++)_[u]=2;for(u=103254;u<=103256;u++)_[u]=0;for(u=103257;u<=103259;u++)_[u]=2;for(u=103264;u<=103266;u++)_[u]=0;for(u=103267;u<=103269;u++)_[u]=2;for(u=103300;u<=103375;u++)_[u]=0;for(u=103381;u<=103383;u++)_[u]=0;for(u=103384;u<=103386;u++)_[u]=1;for(u=103387;u<=103389;u++)_[u]=0;for(u=103390;u<=103392;u++)_[u]=2;for(u=103397;u<=103399;u++)_[u]=0;for(u=103400;u<=103471;u++)_[u]=2;for(u=103476;u<=103478;u++)_[u]=0;for(u=103479;u<=103481;u++)_[u]=2;for(u=103486;u<=103488;u++)_[u]=0;for(u=103489;u<=103491;u++)_[u]=2;for(u=103492;u<=103495;u++)_[u]=0;for(u=103496;u<=103499;u++)_[u]=2;for(u=103528;u<=103543;u++)_[u]=0;for(u=103544;u<=103548;u++)_[u]=2;for(u=103549;u<=103551;u++)_[u]=0;for(u=103552;u<=103554;u++)_[u]=1;for(u=103555;u<=103557;u++)_[u]=2;for(u=103558;u<=103560;u++)_[u]=0;for(u=103571;u<=103573;u++)_[u]=0;for(u=103574;u<=103576;u++)_[u]=2;for(u=103577;u<=103580;u++)_[u]=0;for(u=103581;u<=103583;u++)_[u]=2;for(u=103595;u<=103694;u++)_[u]=0;for(u=103696;u<=103699;u++)_[u]=0;for(u=103700;u<=103793;u++)_[u]=2;for(u=103794;u<=103890;u++)_[u]=0;for(u=103891;u<=103896;u++)_[u]=2;for(u=103900;u<=103971;u++)_[u]=2;for(u=103972;u<=103977;u++)_[u]=0;for(u=112e3;u<=112101;u++)_[u]=0;const DP=[102100,102113,3857,3785],yF=[104905,104971],vF=[4326,...DP,...yF],Yx='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',Kd=[-20037508342788905e-9,20037508342788905e-9],Qd=[-20037508342787e-6,20037508342787e-6],NP={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Kd,origin:Qd,dx:1e-5},102100:{wkTemplate:Yx,valid:Kd,origin:Qd,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Kd,origin:Qd,dx:1e-5},3857:{wkTemplate:Yx,valid:Kd,origin:Qd,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function $t(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const i=e.wkid,s=t.wkid;if(i!=null||s!=null){if(i===s||pn(e)&&pn(t))return!0;const o=e.latestWkid;if(o!=null&&s===o)return!0;const a=t.latestWkid;return a!=null&&i===a}let n,r;return e.wkt2&&t.wkt2?(n=e.wkt2,r=t.wkt2):e.wkt&&t.wkt&&(n=e.wkt,r=t.wkt),!(!n||!r)&&n.toUpperCase()===r.toUpperCase()}function Si(e){const t=e?.wkid;return t!=null&&t>=2e3&&NP[t]||null}function FP(e){if(!e)return;const{wkid:t,vcsWkid:i}=e;if(t)return i?JSON.stringify({wkid:t,vcsWkid:i}):String(t);const s=e.wkt||e.wkt2;return JSON.stringify(s?i?{wkt:s,vcsWkid:i}:{wkt:s}:{})}function Sg(e){if(!Li(e))return!1;const{wkid:t}=e;if(t)return _[t]==null;const i=e.wkt2||e.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function bF(e){return!(jP(e)||zP(e))}function qa(e){return e?.wkid===4326}function Dce(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function Zx(e){return e?.wkid===Ga.CGCS2000}function pn(e){const t=e?.wkid;return t!=null&&t>=2e3&&DP.includes(t)}function _F(e){return e?.wkid===32662}function Mg(e){return e===Ga.GCSMARS2000||e===Ga.GCSMARS2000_SPHERE}function jP(e){return Mg(e?.wkid)}function $g(e){return e===Ga.GCSMOON2000}function zP(e){return $g(e?.wkid)}function wF(e){const t=e?.wkid;return t!=null&&t>=2e3&&vF.includes(t)}function Li(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const VP={wkid:4326,wkt:y3(NP[4326].wkTemplate,{Central_Meridian:"0.0"})},UP={wkid:102100,latestWkid:3857},xF={wkid:32662};function W_(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const SF=W_(at),B_=W_(cn),H_=W_(_o),MF={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${at.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},$F=B_.wkt.toUpperCase(),TF=H_.wkt.toUpperCase();function kF(e){if(e!=null&&Li(e)){const t=e.wkid,i=e.wkt2??e.wkt;if(Mg(t))return cn;const s=i?.toUpperCase();if(i&&s===$F)return cn;if($g(t)||s&&s===TF)return _o}return at}function Nce(e){return Mg(e)?cn:$g(e)?_o:at}function vm(e){return $t(e,SF)}function wo(e){return vm(e)||$t(e,B_)||$t(e,H_)}const Fce=39.37,PF=at.radius*Math.PI/200,WP=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Ra=_,BP=/UNIT\[([^\]]+)]/i,OF=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),EF=di()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Ns=e=>e*e,Sr=e=>e*e*e,zh={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Ns(.001)},"square-centimeters":{inBaseUnits:Ns(.01)},"square-decimeters":{inBaseUnits:Ns(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Ns(1e3)},"square-inches":{inBaseUnits:Ns(.0254)},"square-feet":{inBaseUnits:Ns(.3048)},"square-yards":{inBaseUnits:Ns(.9144)},"square-miles":{inBaseUnits:Ns(1609.344)},"square-us-feet":{inBaseUnits:Ns(1200/3937)},acres:{inBaseUnits:.0015625*Ns(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Sr(.001)},"cubic-centimeters":{inBaseUnits:1e3*Sr(.01)},"cubic-decimeters":{inBaseUnits:1e3*Sr(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Sr(1e3)},"cubic-inches":{inBaseUnits:1e3*Sr(.0254)},"cubic-feet":{inBaseUnits:1e3*Sr(.3048)},"cubic-yards":{inBaseUnits:1e3*Sr(.9144)},"cubic-miles":{inBaseUnits:1e3*Sr(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},AF=(()=>{const e={};for(const t in zh)for(const i in zh[t].units)e[i]=t;return e})();function CF(e,t,i){return e*zh[i].units[t].inBaseUnits}function IF(e,t,i){return e/zh[i].units[t].inBaseUnits}function T1(e){const t=AF[e];if(!t)throw new Error("unknown type");return t}function Jx(e,t=null){return t=t||T1(e),zh[t].baseUnit===e}function Wi(e,t,i){if(t===i)return e;const s=T1(t);if(s!==T1(i))throw new Error("incompatible units");const n=Jx(t,s)?e:CF(e,t,s);return Jx(i,s)?n:IF(n,i,s)}function LF(e,t,i){return Wi(e,t,"meters")/(i*Math.PI/180)}function HP(e){return EF.fromJSON(e.toLowerCase())||null}function Xx(e){if(e!=null&&!bF(e))return 1;const t=rl(e);return t>1e5?1:t}function RF(e){return rl(e)>=kF(e).metersPerDegree?"meters":qP(e)}function rl(e,t=at.metersPerDegree){return DF(e,!0)??t}function DF(e,t=!1){const i=e?.wkid??null,s=e?.wkt2??e?.wkt??null;let n=null;if(i){if(Mg(i))return cn.metersPerDegree;if($g(i))return _o.metersPerDegree;n=Ra.values[Ra[i]],!n&&t&&OF.has(i)&&(n=PF)}else s&&(ZP(s)?n=Kx(WP.exec(s),n):YP(s)&&(n=Kx(BP.exec(s),n)));return n}function jce(e){return Sg(e)?1:rl(e)}function Kx(e,t){return e?.[1]?GP(e[1]):t}function GP(e){return parseFloat(e.split(",")[1])}function qP(e){const t=e?.wkid??null,i=e?.wkt2??e?.wkt??null;let s=null;if(t)s=Ra.units[Ra[t]];else if(i){const n=ZP(i)?WP:YP(i)?BP:null;if(n){const r=n.exec(i);r?.[1]&&(s=FF(r[1]))}}return s!=null?HP(s):null}function YP(e){return/^GEOCCS/i.test(e)}function ZP(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const NF=1e-7;function FF(e){let i=/[\\"']{1}([^\\"']+)/.exec(e)?.[1];if(!i||!Ra.units.includes(i)){const s=GP(e);i=null;const n=Ra.values;for(let r=0;r<n.length;++r)if(Math.abs(s-n[r])<NF){i=Ra.units[r];break}}return i}const jF={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},zF={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},VF={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},zce=di()(jF),Vce=di()(zF),Uce=di()(VF);var zs;let we=zs=class extends Z{static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return zs.WebMercator;if(e.wkid===4326)return zs.WGS84}const t=new zs;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return qa(this)}get isWebMercator(){return pn(this)}get isGeographic(){return Sg(this)}get isWrappable(){return wF(this)}get metersPerUnit(){return rl(this)}get unit(){return qP(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===zs.WGS84)return new zs(VP);if(this===zs.WebMercator)return new zs(UP);const e=new zs;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=F(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:s}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return t==null||s?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):i?n.id===t&&n.referenceServiceName===i:n.id===t}return $t(this,e)}toJSON(e){return this.write(void 0,e)}};we.GCS_NAD_1927=null,we.WGS84=null,we.WebMercator=null,we.PlateCarree=null,d([f({readOnly:!0})],we.prototype,"isWGS84",null),d([f({readOnly:!0})],we.prototype,"isWebMercator",null),d([f({readOnly:!0})],we.prototype,"isGeographic",null),d([f({readOnly:!0})],we.prototype,"isWrappable",null),d([f({type:rt,json:{write:!0}})],we.prototype,"latestWkid",void 0),d([f({readOnly:!0})],we.prototype,"metersPerUnit",null),d([f({readOnly:!0})],we.prototype,"unit",null),d([f({type:rt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],we.prototype,"wkid",void 0),d([f({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],we.prototype,"wkt",void 0),d([ve("wkt"),ve("web-scene","wkt")],we.prototype,"writeWkt",null),d([f({type:String,json:{write:!1}})],we.prototype,"wkt2",void 0),d([f({type:rt,json:{write:!0}})],we.prototype,"vcsWkid",void 0),d([f({type:rt,json:{write:!0}})],we.prototype,"latestVcsWkid",void 0),d([f()],we.prototype,"imageCoordinateSystem",void 0),we=zs=d([k("esri.geometry.SpatialReference")],we),we.prototype.toJSON.isDefaultToJSON=!0,we.GCS_NAD_1927=new we({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),we.WGS84=new we(VP),we.WebMercator=new we(UP),we.PlateCarree=new we(xF),Object.freeze&&(Object.freeze(we.GCS_NAD_1927),Object.freeze(we.WGS84),Object.freeze(we.WebMercator),Object.freeze(we.PlateCarree));const ge=we;function $e(e,t,i){let s,n;return t===void 0||Array.isArray(t)?(n=e,i=t,s=[void 0]):(n=t,s=Array.isArray(e)?e:[e]),(r,o)=>{const a=r.constructor.prototype;s.forEach(l=>{const c=E3(r,l,n);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],i&&(c.read.source=(c.read.source||[]).concat(i))})}}let Vs=class extends Z{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=ge.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof ge)return e;if(e!=null){const i=new ge;return i.read(e,t),i}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};d([f()],Vs.prototype,"type",void 0),d([f({readOnly:!0})],Vs.prototype,"cache",null),d([f({readOnly:!0})],Vs.prototype,"extent",null),d([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Vs.prototype,"hasM",void 0),d([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Vs.prototype,"hasZ",void 0),d([f({type:ge,json:{write:!0},value:ge.WGS84})],Vs.prototype,"spatialReference",void 0),d([$e("spatialReference")],Vs.prototype,"readSpatialReference",null),Vs=d([k("esri.geometry.Geometry")],Vs);const pr=Vs,UF=57.29577951308232,WF=.017453292519943;function Qx(e){return e*UF}function eS(e){return e*WF}function Wce(e){return Math.PI/2-2*Math.atan(Math.exp(-e/at.radius))}function k1(e){return e.wkid!=null||e.wkt!=null}const Vy=[0,0];function bm(e,t,i,s,n){const r=e,o=n;if(o.spatialReference=i,"x"in r&&"x"in o)[o.x,o.y]=t(r.x,r.y,Vy,s);else if("xmin"in r&&"xmin"in o)[o.xmin,o.ymin]=t(r.xmin,r.ymin,Vy,s),[o.xmax,o.ymax]=t(r.xmax,r.ymax,Vy,s);else if("paths"in r&&"paths"in o||"rings"in r&&"rings"in o){const a="paths"in r?r.paths:r.rings,l=[];let c;for(let h=0;h<a.length;h++){const p=a[h];c=[],l.push(c);for(let m=0;m<p.length;m++)c.push(t(p[m][0],p[m][1],[0,0],s)),p[m].length>2&&c[m].push(p[m][2]),p[m].length>3&&c[m].push(p[m][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in r&&"points"in o){const a=r.points,l=[];for(let c=0;c<a.length;c++)l[c]=t(a[c][0],a[c][1],[0,0],s),a[c].length>2&&l[c].push(a[c][2]),a[c].length>3&&l[c].push(a[c][3]);o.points=l}return n}function tf(e,t){const i=e&&(k1(e)?e:e.spatialReference),s=t&&(k1(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!s)&&(!!$t(s,i)||pn(s)&&qa(i)||pn(i)&&qa(s))}function Tg(e,t){if(e==null)return null;const i=e.spatialReference,s=t&&(k1(t)?t:t.spatialReference);return tf(i,s)?$t(i,s)?F(e):pn(s)?bm(e,ql,ge.WebMercator,!1,F(e)):qa(s)?bm(e,kg,ge.WGS84,!1,F(e)):null:null}function ql(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const s=eS(t);return i[0]=eS(e)*at.radius,i[1]=at.halfSemiMajorAxis*Math.log((1+Math.sin(s))/(1-Math.sin(s))),i}function kg(e,t,i=[0,0],s=!1){const n=Qx(e/at.radius);return i[0]=s?n:n-360*Math.floor((n+180)/360),i[1]=Qx(Math.PI/2-2*Math.atan(Math.exp(-t/at.radius))),i}function Da(e,t=!1,i=F(e)){return bm(e,ql,ge.WebMercator,t,i)}function wu(e,t=!1,i=F(e)){return bm(e,kg,ge.WGS84,t,i)}function JP(e,t){const i=e.x-t.x,s=e.y-t.y,n=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(i*i+s*s+n*n)}function BF(e){return XP(e,KP)?.[0]??null}function HF(e){return XP(e,KP)?.[1]??null}function XP({x:e,y:t,spatialReference:i},s=[0,0]){if(i){if(pn(i))return kg(e,t,s);if(Sg(i))return s[0]=e,s[1]=t,s}return null}const KP=[0,0];var sf;const Uy=[0,0];function tS(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let ii=sf=class extends pr{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,i,s,n){let r;if(Array.isArray(e))r=e,n=t,e=r[0],t=r[1],i=r[2],s=r[3];else if(e&&typeof e=="object"){if(r=e,e=r.x!=null?r.x:r.longitude,t=r.y!=null?r.y:r.latitude,i=r.z,s=r.m,(n=r.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new ge(n)),r.longitude!=null||r.latitude!=null){if(r.longitude==null)B.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(r.latitude==null)B.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!r.declaredClass&&n?.isWebMercator){const a=ql(r.longitude,r.latitude,Uy);e=a[0],t=a[1]}}}else tS(i)?(n=i,i=null):tS(s)&&(n=s,s=null);const o={x:e,y:t};return o.x==null&&o.y!=null?B.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&B.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),i!=null&&(o.z=i),s!=null&&(o.m=s),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return HF(this)}set latitude(e){const{spatialReference:t,x:i}=this;e!=null&&t&&(t.isWebMercator?this._set("y",ql(i,e,Uy)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return BF(this)}set longitude(e){const{y:t,spatialReference:i}=this;e!=null&&i&&(i.isWebMercator?this._set("x",ql(e,t,Uy)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new sf;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return sf.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:i,z:s,m:n,spatialReference:r}=this,{z:o,m:a}=e;let{x:l,y:c,spatialReference:h}=e;if(!r.equals(h))if(r.isWebMercator&&h.isWGS84)[l,c]=ql(l,c),h=r;else{if(!r.isWGS84||!h.isWebMercator)return!1;[l,c]=kg(l,c),h=r}return t===l&&i===c&&s===o&&n===a&&r.wkid===h.wkid}offset(e,t,i){return this.x+=e,this.y+=t,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const e=Si(this.spatialReference);if(!e)return this;let t=this.x;const[i,s]=e.valid,n=2*s;let r;return t>s?(r=Math.ceil(Math.abs(t-s)/n),t-=r*n):t<i&&(r=Math.ceil(Math.abs(t-i)/n),t+=r*n),this._set("x",t),this}distance(e){return JP(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};d([f({readOnly:!0})],ii.prototype,"cache",null),d([f({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ii.prototype,"hasM",null),d([f({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ii.prototype,"hasZ",null),d([f({type:Number})],ii.prototype,"latitude",null),d([f({type:Number})],ii.prototype,"longitude",null),d([f({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Mt(e=>isNaN(e)?e:ks(e))],ii.prototype,"x",void 0),d([ve("x")],ii.prototype,"writeX",null),d([$e("x")],ii.prototype,"readX",null),d([f({type:Number,json:{write:!0}})],ii.prototype,"y",void 0),d([f({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ii.prototype,"z",void 0),d([f({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],ii.prototype,"m",void 0),ii=sf=d([k("esri.geometry.Point")],ii),ii.prototype.toJSON.isDefaultToJSON=!0;const ae=ii,Wy=[0,0];function vd(e,t){return t!=null&&ai(e,t.x,t.y,t.z)}function Bce(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!bc(e,i))return!1;return!0}function GF(e,t){const{xmin:i,ymin:s,zmin:n,xmax:r,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?ai(e,i,s,n)&&ai(e,i,o,n)&&ai(e,r,o,n)&&ai(e,r,s,n)&&ai(e,i,s,a)&&ai(e,i,o,a)&&ai(e,r,o,a)&&ai(e,r,s,a):ai(e,i,s)&&ai(e,i,o)&&ai(e,r,o)&&ai(e,r,s)}function bc(e,t){return ai(e,t[0],t[1])}function qF(e,t){return ai(e,t[0],t[1],t[2])}function ai(e,t,i,s){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(s==null||!e.hasZ||s>=e.zmin&&s<=e.zmax)}function G_(e,t){return Wy[1]=t.y,Wy[0]=t.x,YF(e,Wy)}function YF(e,t){return q_(e.rings,t)}function q_(e,t){if(!e)return!1;if(ZF(e))return iS(!1,e,t);let i=!1;for(let s=0,n=e.length;s<n;s++)i=iS(i,e[s],t);return i}function ZF(e){return!Array.isArray(e[0][0])}function iS(e,t,i){const[s,n]=i;let r=e,o=0;for(let a=0,l=t.length;a<l;a++){o++,o===l&&(o=0);const[c,h]=t[a],[p,m]=t[o];(h<n&&m>=n||m<n&&h>=n)&&c+(n-h)/(m-h)*(p-c)<s&&(r=!r)}return r}function JF(e,t){return vd(e,t)}function XF(e,t){const i=e.hasZ&&t.hasZ;let s,n,r;if(e.xmin<=t.xmin){if(s=t.xmin,e.xmax<s)return!1}else if(s=e.xmin,t.xmax<s)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(r=t.zmin,e.zmax<r)return!1}else if(r=e.zmin,t.zmax<r)return!1}return!0}function KF(e,t){const{points:i,hasZ:s}=t,n=s?qF:bc;for(const r of i)if(n(e,r))return!0;return!1}const Ya=[0,0],Za=[0,0],Ja=[0,0],Xa=[0,0],QF=[Ya,Za,Ja,Xa],QP=[[Ja,Ya],[Ya,Za],[Za,Xa],[Xa,Ja]];function e8(e,t){return t8(e,t.rings)}function t8(e,t){Ya[0]=e.xmin,Ya[1]=e.ymax,Za[0]=e.xmax,Za[1]=e.ymax,Ja[0]=e.xmin,Ja[1]=e.ymin,Xa[0]=e.xmax,Xa[1]=e.ymin;for(const i of QF)if(q_(t,i))return!0;for(const i of t){if(!i.length)continue;let s=i[0];if(bc(e,s))return!0;for(let n=1;n<i.length;n++){const r=i[n];if(bc(e,r)||eO(s,r,QP))return!0;s=r}}return!1}function i8(e,t){Ya[0]=e.xmin,Ya[1]=e.ymax,Za[0]=e.xmax,Za[1]=e.ymax,Ja[0]=e.xmin,Ja[1]=e.ymin,Xa[0]=e.xmax,Xa[1]=e.ymin;const i=t.paths;for(const s of i){if(!i.length)continue;let n=s[0];if(bc(e,n))return!0;for(let r=1;r<s.length;r++){const o=s[r];if(bc(e,o)||eO(n,o,QP))return!0;n=o}}return!1}const It=[0,0];function s8(e){for(let t=0;t<e.length;t++){const i=e[t];for(let n=0;n<i.length-1;n++){const r=i[n],o=i[n+1];for(let a=t+1;a<e.length;a++)for(let l=0;l<e[a].length-1;l++){const c=e[a][l],h=e[a][l+1];if(P1(r,o,c,h,It)&&!(It[0]===r[0]&&It[1]===r[1]||It[0]===c[0]&&It[1]===c[1]||It[0]===o[0]&&It[1]===o[1]||It[0]===h[0]&&It[1]===h[1]))return!0}}const s=i.length;if(!(s<=4))for(let n=0;n<s-3;n++){let r=s-1;n===0&&(r=s-2);const o=i[n],a=i[n+1];for(let l=n+2;l<r;l++){const c=i[l],h=i[l+1];if(P1(o,a,c,h,It)&&!(It[0]===o[0]&&It[1]===o[1]||It[0]===c[0]&&It[1]===c[1]||It[0]===a[0]&&It[1]===a[1]||It[0]===h[0]&&It[1]===h[1]))return!0}}}return!1}function eO(e,t,i){for(let s=0;s<i.length;s++)if(P1(e,t,i[s][0],i[s][1]))return!0;return!1}function P1(e,t,i,s,n){const[r,o]=e,[a,l]=t,[c,h]=i,[p,m]=s,g=p-c,y=r-c,v=a-r,b=m-h,w=o-h,x=l-o,$=b*v-g*x;if($===0)return!1;const S=(g*w-b*y)/$,M=(v*w-x*y)/$;return S>=0&&S<=1&&M>=0&&M<=1&&(n&&(n[0]=r+S*(a-r),n[1]=o+S*(l-o)),!0)}function n8(e){switch(e){case"esriGeometryEnvelope":case"extent":return XF;case"esriGeometryMultipoint":case"multipoint":return KF;case"esriGeometryPoint":case"point":return JF;case"esriGeometryPolygon":case"polygon":return e8;case"esriGeometryPolyline":case"polyline":return i8}}var Bi;function r8(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Mr(e,t,i){return t==null?i:i==null?t:e(t,i)}let Tt=Bi=class extends pr{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,s,n){return r8(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?ge.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:s,spatialReference:n??ge.WGS84}}static fromBounds(e,t){return new Bi({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new Bi({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new ae({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Bi;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&tf(t,i)&&(e=t.isWebMercator?Da(e):wu(e,!0)),e.type==="point"?vd(this,e):e.type==="extent"&&GF(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&tf(t,i)&&(e=t.isWebMercator?Da(e):wu(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,s=this.height*t;if(this.xmin+=i,this.ymin+=s,this.xmax-=i,this.ymax-=s,this.hasZ){const n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*t;this.mmin+=n,this.mmax-=n}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!$t(t,i)&&tf(t,i)&&(e=t.isWebMercator?Da(e):wu(e,!0)),n8(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Mr(Math.min,this.zmin,e.zmin),this.zmax=Mr(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Mr(Math.min,this.mmin,e.mmin),this.mmax=Mr(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Mr(Math.max,this.zmin,e.zmin),this.zmax=Mr(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Mr(Math.max,this.mmin,e.mmin),this.mmax=Mr(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=Si(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const s=t.isWebMercator?wu(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(s.x=By(s.x,e).x),this.spatialReference=new ge(y3((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(e){let t=null;const[i,s]=e.valid,n=this.xmin,r=this.xmax;return n>=i&&n<=s&&r>=i&&r<=s||(t=this.center),t}_normalize(e,t,i){const s=this.spatialReference;if(!s)return this;const n=i??Si(s);if(n==null)return this;const r=this._getParts(n).map(l=>l.extent);if(r.length<2)return r[0]||this;if(r.length>2)return e?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(e)return this._shiftCM(n);if(t)return r;let o=!0,a=!0;return r.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:r.map(l=>{const c=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const h=(l.zmax-l.zmin)/2;for(let p=0;p<c.length;p++)c[p].push(h)}if(a){const h=(l.mmax-l.mmin)/2;for(let p=0;p<c.length;p++)c[p].push(h)}return c}),hasZ:o,hasM:a,spatialReference:s}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:n,ymax:r,spatialReference:o}=this,a=this.width,l=this.xmin,c=this.xmax;let h;e=e||Si(o);const[p,m]=e.valid;h=By(this.xmin,e);const g=h.x,y=h.frameId;h=By(this.xmax,e);const v=h.x,b=h.frameId,w=g===v&&a>0;if(a>2*m){const x=new Bi(l<c?g:v,n,m,r,o),$=new Bi(p,n,l<c?v:g,r,o),S=new Bi(0,n,m,r,o),M=new Bi(p,n,0,r,o),P=[],C=[];x.contains(S)&&P.push(y),x.contains(M)&&C.push(y),$.contains(S)&&P.push(b),$.contains(M)&&C.push(b);for(let I=y+1;I<b;I++)P.push(I),C.push(I);t.push({extent:x,frameIds:[y]},{extent:$,frameIds:[b]},{extent:S,frameIds:P},{extent:M,frameIds:C})}else g>v||w?t.push({extent:new Bi(g,n,m,r,o),frameIds:[y]},{extent:new Bi(p,n,v,r,o),frameIds:[b]}):t.push({extent:new Bi(g,n,v,r,o),frameIds:[y]});this.cache._parts=t}const i=this.hasZ,s=this.hasM;if(i||s){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),s&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let r=0;r<t.length;r++)t[r].extent.set(n)}return t}};function By(e,t){const[i,s]=t.valid,n=2*s;let r,o=0;return e>s?(r=Math.ceil(Math.abs(e-s)/n),e-=r*n,o=r):e<i&&(r=Math.ceil(Math.abs(e-i)/n),e+=r*n,o=-r),{x:e,frameId:o}}d([f({readOnly:!0})],Tt.prototype,"cache",null),d([f({readOnly:!0})],Tt.prototype,"center",null),d([f({readOnly:!0})],Tt.prototype,"extent",null),d([f({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Tt.prototype,"hasM",null),d([f({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Tt.prototype,"hasZ",null),d([f({readOnly:!0})],Tt.prototype,"height",null),d([f({readOnly:!0})],Tt.prototype,"width",null),d([f({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Tt.prototype,"xmin",void 0),d([f({type:Number,json:{write:!0}})],Tt.prototype,"ymin",void 0),d([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Tt.prototype,"mmin",void 0),d([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Tt.prototype,"zmin",void 0),d([f({type:Number,json:{write:!0}})],Tt.prototype,"xmax",void 0),d([f({type:Number,json:{write:!0}})],Tt.prototype,"ymax",void 0),d([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Tt.prototype,"mmax",void 0),d([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Tt.prototype,"zmax",void 0),Tt=Bi=d([k("esri.geometry.Extent")],Tt),Tt.prototype.toJSON.isDefaultToJSON=!0;const tt=Tt;let ph;const o8=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale;function tO(){return o8??globalThis.navigator?.language??"en"}function Di(){return ph===void 0&&(ph=tO()),ph}function a8(e=Di()){return/^([a-zA-Z]{2,3})(?:[_-]\w+)*$/.exec(e)?.[1].toLowerCase()}const nf=[];function iO(e){return nf.push(e),Ee(()=>nf.splice(nf.indexOf(e),1))}const rf=[];function Y_(e){return rf.push(e),Ee(()=>rf.splice(rf.indexOf(e),1))}function l8(){const e=tO();ph!==e&&([...rf].forEach(t=>t(e)),ph=e,[...nf].forEach(t=>t(e)))}globalThis.addEventListener?.("languagechange",l8);let ep;function c8(e){return ep&&!ep.destroyed||(ep=e()),ep}var O1;const u8=new Ft({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Hi=O1=class extends Q{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new O1({categories:this.categories?F(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let s="";if(this.extent){const o=Tg(this.extent,ge.WGS84);o!=null&&(s=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const r={categories:i,bbox:s,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(r.sortField=this.sortField.split(",").map(o=>u8.toJSON(o.trim())).join(","),r.sortOrder=this.sortOrder),{query:{...t,...r}}}};d([f()],Hi.prototype,"categories",void 0),d([f()],Hi.prototype,"disableExtraQuery",void 0),d([f({type:tt})],Hi.prototype,"extent",void 0),d([f()],Hi.prototype,"filter",void 0),d([f()],Hi.prototype,"num",void 0),d([f()],Hi.prototype,"query",void 0),d([f()],Hi.prototype,"sortField",void 0),d([f()],Hi.prototype,"sortOrder",null),d([f()],Hi.prototype,"start",void 0),Hi=O1=d([k("esri.portal.PortalQueryParams")],Hi);const Qn=Hi;var E1;let xt=E1=class extends Z{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t&&this.portal?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.portal?.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(s=>s.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new V("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new E1({sourceJSON:e});return t.read(e),t}queryItems(e,t){let i=ui(Qn,e);const s=this.portal;return parseFloat(s.currentVersion)>5?(i=i||new Qn,s.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new Qn,i.query="group:"+this.id+(i.query?" "+i.query:""),s.queryItems(i,t))}_fetchCategorySchemaSet(e,t){const i=this.portal;return i.fetchSelf(i.authMode,!0,t).then(s=>{const n=s.contentCategorySetsGroupQuery;if(n){const r=new Qn({disableExtraQuery:!0,num:1,query:n});return i.queryGroups(r,t)}throw new V("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(s=>{if(s.total){const n=s.results[0],r=new Qn({num:1,query:`typekeywords:"${e}"`});return n.queryItems(r,t)}throw new V("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(s=>s.total?s.results[0].fetchData("json",t).then(n=>{const r=n?.categorySchema;return r?.length?r:[]}):[])}};d([f()],xt.prototype,"access",void 0),d([f({type:Date})],xt.prototype,"created",void 0),d([f()],xt.prototype,"description",void 0),d([f()],xt.prototype,"id",void 0),d([f()],xt.prototype,"isInvitationOnly",void 0),d([f({type:Date})],xt.prototype,"modified",void 0),d([f()],xt.prototype,"owner",void 0),d([f()],xt.prototype,"portal",void 0),d([f()],xt.prototype,"snippet",void 0),d([f()],xt.prototype,"sortField",void 0),d([f()],xt.prototype,"sortOrder",void 0),d([f()],xt.prototype,"sourceJSON",void 0),d([f()],xt.prototype,"tags",void 0),d([f()],xt.prototype,"thumbnail",void 0),d([f({readOnly:!0})],xt.prototype,"thumbnailUrl",null),d([f()],xt.prototype,"title",void 0),d([f({readOnly:!0})],xt.prototype,"url",null),xt=E1=d([k("esri.portal.PortalGroup")],xt);const A1=xt;let Xo=class extends Q{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};d([f()],Xo.prototype,"nextQueryParams",void 0),d([f()],Xo.prototype,"queryParams",void 0),d([f()],Xo.prototype,"results",void 0),d([f()],Xo.prototype,"total",void 0),Xo=d([k("esri.portal.PortalQueryResult")],Xo);const h8=Xo;let An=class extends Z{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new V("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};d([f({type:Date})],An.prototype,"created",void 0),d([f()],An.prototype,"id",void 0),d([f()],An.prototype,"portal",void 0),d([f()],An.prototype,"title",void 0),d([f({readOnly:!0})],An.prototype,"url",null),d([f()],An.prototype,"username",void 0),An=d([k("esri.portal.PortalFolder")],An);const d8=An;var C1;let Fe=C1=class extends Z{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.portal?.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e?.data,s=e?.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let r=this.userContentUrl;return s&&(r+="/"+(typeof s=="string"?s:s.id)),this.portal.request(r+"/addItem",n).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let i=this.userContentUrl;e.ownerFolder&&(i+="/"+e.ownerFolder);const s=t?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${e.id}/delete`,{method:"post",query:s}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.concat();const i=this.userContentUrl+"/deleteItems",s=[],n=e.map(r=>r.id);if(n.length){const r={method:"post",query:{items:n.join(","),permanentDelete:t}},o=await this.portal.request(i,r);for(const a of o.results){const l=e.find(p=>a.itemId===p.id),c=a.success;let h=null;c?(l.id=null,l.portal=null):a.error&&(h=new V("portal:delete-item-failed",a.error.message,a.error)),s.push({item:l,success:c,error:h})}}return s}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let i;return i=t&&t.folders?t.folders.map(s=>{const n=d8.fromJSON(s);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const s=A1.fromJSON(i);return s.portal=this.portal,s}):[],t})}async fetchItems(e){e??={};let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:i}=await W(()=>Promise.resolve().then(function(){return aO}),void 0),s={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},n=await this.portal.request(t,{query:s});let r;return n?.items?(r=n.items.map(o=>{const a=i.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(r.map(o=>o.load())),{items:r,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new A1({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new V("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const i=this.userContentUrl,s=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(i+`/items/${e.id}/restore`,{method:"post",query:s})}toJSON(){throw new V("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new C1({sourceJSON:e});return t.read(e),t}};d([f()],Fe.prototype,"access",void 0),d([f({type:Date})],Fe.prototype,"created",void 0),d([f()],Fe.prototype,"culture",void 0),d([f()],Fe.prototype,"description",void 0),d([f()],Fe.prototype,"email",void 0),d([f()],Fe.prototype,"favGroupId",void 0),d([f()],Fe.prototype,"fullName",void 0),d([f({type:Date})],Fe.prototype,"modified",void 0),d([f()],Fe.prototype,"orgId",void 0),d([f()],Fe.prototype,"portal",void 0),d([f()],Fe.prototype,"preferredView",void 0),d([f()],Fe.prototype,"privileges",void 0),d([f()],Fe.prototype,"region",void 0),d([f()],Fe.prototype,"role",void 0),d([f()],Fe.prototype,"roleId",void 0),d([f()],Fe.prototype,"sourceJSON",void 0),d([f()],Fe.prototype,"thumbnail",void 0),d([f({readOnly:!0})],Fe.prototype,"thumbnailUrl",null),d([f()],Fe.prototype,"units",void 0),d([f({readOnly:!0})],Fe.prototype,"userContentUrl",null),d([f({readOnly:!0})],Fe.prototype,"url",null),d([f()],Fe.prototype,"username",void 0),d([f()],Fe.prototype,"userLicenseTypeId",void 0),d([f()],Fe.prototype,"userType",void 0),Fe=C1=d([k("esri.portal.PortalUser")],Fe);const sO=Fe;var Ti;let tp;const sS={PortalGroup:()=>Promise.resolve({default:A1}),PortalItem:()=>W(()=>Promise.resolve().then(function(){return aO}),void 0),PortalUser:()=>Promise.resolve({default:sO})};let z=Ti=class extends gd(bo){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Me.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){nS.unregister(this),this.defaultBasemap=Ke(this.defaultBasemap),this.defaultDevBasemap=Ke(this.defaultDevBasemap),this.defaultVectorBasemap=Ke(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=et(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Me.request.trustedServers.includes(t)||Me.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=sO.fromJSON(e),t.portal=this),t}load(e){const t=W(()=>Promise.resolve().then(function(){return U8}),void 0).then(({default:i})=>{pt(e),tp=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(i=>{if(qe){const s=qe;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==Ti.AUTH_MODE_AUTO&&this.authMode!==Ti.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",p8(new WeakRef(this))),nS.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await W(()=>import("./ElevationLayer.35412815.js"),["assets/ElevationLayer.35412815.js","assets/MultiOriginJSONSupport.b5976a45.js","assets/ArcGISCachedService.8b9428e7.js","assets/TileInfoTilemapCache.9374e756.js","assets/TilemapCache.a367d9db.js","assets/ByteSizeUnit.e7dc4350.js","assets/LRUCache.6f8863ed.js","assets/ArcGISService.c7559039.js","assets/OperationalLayer.33897364.js","assets/commonProperties.a37169f8.js","assets/PortalLayer.5cf51695.js","assets/portalItemUtils.761d02ba.js"])).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}async fetchBasemaps(e,t){const i=await this._fetchBasemaps(e,t);if(t?.include3d===!0&&this.use3dBasemaps!==!1){const s=await this._fetchBasemaps3D(e,t);i.unshift(...s)}return i}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):ur(e)?Promise.reject(_t()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new Qn({num:100,sortField:"title"});if(t?.length){const s=[];for(const n of t)s.push(`(title:"${n.title}" AND owner:${n.owner})`);return i.query=s.join(" OR "),this.queryGroups(i,e).then(n=>n.results)}return ur(e)?Promise.reject(_t()):Promise.resolve([])}fetchRegions(e){const t=this.user?.culture||this.culture||Di();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){const t=this.user?.culture||this.culture||Di();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return c8(()=>new Ti)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,i){const s=this.restUrl+"/portals/self",n={authMode:e,query:{culture:Di().toLowerCase()},withCredentials:!0,...i};return n.authMode==="auto"&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this.request(s,n)}queryPortal(e,t,i,s){const n=ui(Qn,t),r=o=>this.request(this.restUrl+e,{...n.toRequestOptions(this),...s}).then(a=>{const l=n.clone();return l.start=a.nextStart,new h8({nextQueryParams:l,queryParams:n,total:a.total,results:Ti._resultsToTypedArray(o,{portal:this},a,s)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(eP(l),a)));return i&&sS[i]?sS[i]().then(({default:o})=>(pt(s),r(o))):r()}signIn(){if(this.authMode===Ti.AUTH_MODE_ANONYMOUS||this.authMode===Ti.AUTH_MODE_NO_PROMPT&&!qe)return Promise.reject(new V("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return qe?qe.getCredential(this.restUrl,{prompt:this.authMode!==Ti.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){const t=this.credential?.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,i){return this.request(e,t).then(s=>{const n=Ti._resultsToTypedArray(i,{portal:this},s);return Promise.all(n.map(r=>typeof r.when=="function"?r.when():s)).then(()=>n,()=>n)})}request(e,t={}){const i={f:"json",...t.query},{authMode:s=this.authMode===Ti.AUTH_MODE_ANONYMOUS||this.authMode===Ti.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:r=!1,method:o="auto",responseType:a="json",signal:l}=t,c={authMode:s,body:n,cacheBust:r,method:o,query:i,responseType:a,timeout:0,signal:l};return t.withCredentials&&(c.withCredentials=!0),Dt(this._normalizeSSL(e),c).then(h=>h.data)}toJSON(){throw new V("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Ti({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new V("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const i=new Qn;i.query=e||(Me.apiKey&&SP(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const s=await this.queryGroups(i,t);if(!s.total)return[];const n=s.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const r=await n.queryItems(i,t);return r.total?r.results.filter(o=>o.type==="Web Map").map(o=>new tp({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const i=e||this.basemapGalleryGroupQuery3D;if(!i)return[];const s=new Qn({query:i,disableExtraQuery:!0}),n=await this.queryGroups(s,t);if(!n.total)return[];const r=n.results[0];s.num=100,s.query='type:"Web Scene"',s.sortField=r.sortField||"name",s.sortOrder=r.sortOrder||"desc";const o=await r.queryItems(s,t);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new tp({portalItem:a})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=tp.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,i,s){let n;if(i){const r=s!=null?s.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(n=n.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(r),a}))}else n=[];return n}};z.AUTH_MODE_ANONYMOUS="anonymous",z.AUTH_MODE_AUTO="auto",z.AUTH_MODE_IMMEDIATE="immediate",z.AUTH_MODE_NO_PROMPT="no-prompt",d([f()],z.prototype,"access",void 0),d([f()],z.prototype,"allSSL",void 0),d([f()],z.prototype,"authMode",void 0),d([f()],z.prototype,"authorizedCrossOriginDomains",void 0),d([$e("authorizedCrossOriginDomains")],z.prototype,"readAuthorizedCrossOriginDomains",null),d([f()],z.prototype,"basemapGalleryGroupQuery",void 0),d([f({json:{name:"3DBasemapGalleryGroupQuery"}})],z.prototype,"basemapGalleryGroupQuery3D",void 0),d([f()],z.prototype,"bingKey",void 0),d([f()],z.prototype,"canListApps",void 0),d([f()],z.prototype,"canListData",void 0),d([f()],z.prototype,"canListPreProvisionedItems",void 0),d([f()],z.prototype,"canProvisionDirectPurchase",void 0),d([f()],z.prototype,"canSearchPublic",void 0),d([f()],z.prototype,"canShareBingPublic",void 0),d([f()],z.prototype,"canSharePublic",void 0),d([f()],z.prototype,"canSignInArcGIS",void 0),d([f()],z.prototype,"canSignInIDP",void 0),d([f()],z.prototype,"colorSetsGroupQuery",void 0),d([f()],z.prototype,"commentsEnabled",void 0),d([f({type:Date})],z.prototype,"created",void 0),d([f()],z.prototype,"credential",void 0),d([f()],z.prototype,"culture",void 0),d([f()],z.prototype,"currentVersion",void 0),d([f()],z.prototype,"customBaseUrl",void 0),d([f()],z.prototype,"defaultBasemap",void 0),d([$e("defaultBasemap")],z.prototype,"readDefaultBasemap",null),d([f()],z.prototype,"defaultDevBasemap",void 0),d([$e("defaultDevBasemap")],z.prototype,"readDefaultDevBasemap",null),d([f({type:tt})],z.prototype,"defaultExtent",void 0),d([f()],z.prototype,"defaultVectorBasemap",void 0),d([$e("defaultVectorBasemap")],z.prototype,"readDefaultVectorBasemap",null),d([f()],z.prototype,"description",void 0),d([f()],z.prototype,"devBasemapGalleryGroupQuery",void 0),d([f()],z.prototype,"eueiEnabled",void 0),d([f({readOnly:!0})],z.prototype,"extraQuery",null),d([f()],z.prototype,"featuredGroups",void 0),d([f()],z.prototype,"featuredItemsGroupQuery",void 0),d([f()],z.prototype,"galleryTemplatesGroupQuery",void 0),d([f()],z.prototype,"layoutGroupQuery",void 0),d([f()],z.prototype,"livingAtlasGroupQuery",void 0),d([f()],z.prototype,"hasCategorySchema",void 0),d([f()],z.prototype,"helpBase",void 0),d([f()],z.prototype,"helperServices",void 0),d([f()],z.prototype,"helpMap",void 0),d([f()],z.prototype,"homePageFeaturedContent",void 0),d([f()],z.prototype,"homePageFeaturedContentCount",void 0),d([f()],z.prototype,"httpPort",void 0),d([f()],z.prototype,"httpsPort",void 0),d([f()],z.prototype,"id",void 0),d([f()],z.prototype,"ipCntryCode",void 0),d([f({readOnly:!0})],z.prototype,"isOrganization",null),d([f()],z.prototype,"isPortal",void 0),d([f()],z.prototype,"isReadOnly",void 0),d([f({readOnly:!0})],z.prototype,"itemPageUrl",null),d([f()],z.prototype,"layerTemplatesGroupQuery",void 0),d([f()],z.prototype,"maxTokenExpirationMinutes",void 0),d([f({type:Date})],z.prototype,"modified",void 0),d([f()],z.prototype,"name",void 0),d([f()],z.prototype,"portalHostname",void 0),d([f()],z.prototype,"portalMode",void 0),d([f()],z.prototype,"portalProperties",void 0),d([f()],z.prototype,"region",void 0),d([f()],z.prototype,"recycleBinEnabled",void 0),d([f({readOnly:!0})],z.prototype,"restUrl",null),d([f()],z.prototype,"rotatorPanels",void 0),d([f()],z.prototype,"showHomePageDescription",void 0),d([f()],z.prototype,"sourceJSON",void 0),d([f()],z.prototype,"staticImagesUrl",void 0),d([f({json:{name:"2DStylesGroupQuery"}})],z.prototype,"stylesGroupQuery2d",void 0),d([f({json:{name:"stylesGroupQuery"}})],z.prototype,"stylesGroupQuery3d",void 0),d([f()],z.prototype,"supportsHostedServices",void 0),d([f()],z.prototype,"symbolSetsGroupQuery",void 0),d([f()],z.prototype,"templatesGroupQuery",void 0),d([f()],z.prototype,"thumbnail",void 0),d([f({readOnly:!0})],z.prototype,"thumbnailUrl",null),d([f()],z.prototype,"units",void 0),d([f()],z.prototype,"url",void 0),d([f()],z.prototype,"urlKey",void 0),d([$e("urlKey")],z.prototype,"readUrlKey",null),d([f()],z.prototype,"user",void 0),d([$e("user")],z.prototype,"readUser",null),d([f()],z.prototype,"use3dBasemaps",void 0),d([f()],z.prototype,"useStandardizedQuery",void 0),d([f()],z.prototype,"useVectorBasemaps",void 0),d([f()],z.prototype,"vectorBasemapGalleryGroupQuery",void 0),z=Ti=d([k("esri.portal.Portal")],z);const xo=z,nS=new FinalizationRegistry(e=>{e.remove()});function p8(e){const t=qe;return()=>{const i=e.deref();i&&t.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let Cn=class extends Q{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:rS(e.path,e.portalItem)}:e}set path(e){e!=null&&Ri(e)?B.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return rS(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const i=this.cdnUrl;if(i==null)throw new V("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:e,query:{token:this.portalItem.apiKey},signal:t?.signal})}async update(e,t){const{addOrUpdateResources:i}=await W(()=>import("./resourceUtils.e46436d7.js"),[]);return await i(this.portalItem,[{resource:this,content:e,compress:t?.compress,access:t?.access}],"update",t),this}hasPath(){return this.path!=null}};function rS(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&Ri(e)&&(e=C_(e,t.itemUrl)),e?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}d([f()],Cn.prototype,"portalItem",void 0),d([f({type:String,value:null})],Cn.prototype,"path",null),d([Mt("path")],Cn.prototype,"_castPath",null),d([f({type:String,readOnly:!0})],Cn.prototype,"url",null),d([f({type:String,readOnly:!0})],Cn.prototype,"cdnUrl",null),d([f({type:String,readOnly:!0})],Cn.prototype,"itemRelativeUrl",null),Cn=d([k("esri.portal.PortalItemResource")],Cn);const f8=Cn;let xu=class extends Q{constructor(e){super(e),this.created=null,this.rating=null}};d([f()],xu.prototype,"created",void 0),d([f()],xu.prototype,"rating",void 0),xu=d([k("esri.portal.PortalRating")],xu);const Hy=xu;function bd(e,t){const i=t?.url?.path;if(e&&i&&(e=ts(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const s=C_(e,t.portalItem.itemUrl);s!=null&&m8.test(s)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(s).path)}return(e=I1(e,t?.portal))&&Og.test(e)?J_(e):e}function Pg(e,t,i=Vh.YES){if((e=e&&Og.test(e)?rO(e):e)==null)return e;!Ri(e)&&t?.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let s=ts(e);if(t){const n=t.verifyItemRelativeUrls?.rootPath||t.url?.path;if(n){const r=I1(n,t.portal),o=I1(s,t.portal);s=C_(o,r,r),s!=null&&s!==o&&s!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(s)}}return s=nO(s,t?.portal),Ri(s)&&(s=rr(s)),t?.resources&&t?.portalItem&&!Ri(s)&&!nl(s)&&i===Vh.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(s),compress:!1}),s}function Z_(e,t,i){return bd(e,i)}function _c(e,t,i,s){const n=Pg(e,s);n!==void 0&&(t[i]=n)}const Og=/\/items\/([^/]+)\/resources\/(.*)/,m8=/^\.\/resources\//;function g8(e){return(e?.match(Og)??null)?.[1]??null}function y8(e){const t=e?.match(Og)??null;if(t==null)return null;const i=t[2],s=i.lastIndexOf("/");if(s===-1){const{path:o,extension:a}=jx(i);return{prefix:null,filename:o,extension:a}}const{path:n,extension:r}=jx(i.slice(s+1));return{prefix:i.slice(0,s),filename:n,extension:r}}function nO(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?g1(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function I1(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,s=P_();return yc(s,`${s.scheme}://${i}`)?g1(e,t.portalHostname,i):g1(e,i,t.portalHostname)}function J_(e){if(!e)return e||null;let t=e;return t&&qe&&!qe.findCredential(t)&&(t=pP(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function rO(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&qe&&!qe.findCredential(t)&&(t=pP(t)),t}var Vh;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(Vh||(Vh={}));const Hce=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Vh},ensureMainOnlineDomain:nO,fromCDNUrl:rO,fromJSON:bd,itemIdFromResourceUrl:g8,prefixAndFilenameFromResourceUrl:y8,read:Z_,toCDNUrl:J_,toJSON:Pg,write:_c},Symbol.toStringTag,{value:"Module"}));var Ko;const v8=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),b8=new Set(["KML","GeoJson","CSV"]);let ce=Ko=class extends gd(bo){static from(e){return mg(Ko,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Geocoding Service"?i="Locator":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e?.toLowerCase().includes("add in")?i=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="Raster function template"?i="Raster Function Template":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?i="Instant App":e==="Insights Page"?i="Insights Report":e==="Excalibur Imagery Project"?i="Excalibur Project":e==="3DTiles Service"?i="3D tiles layer":e==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(e){return e&&e.length?new tt(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type?.toLowerCase()||"",t=this.typeKeywords||[],i="esri/images/portal/",s="16";let n,r=!1,o=!1,a=!1,l=!1,c=!1,h=!1,p=!1,m=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(r=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),l=t.includes("Markup"),c=t.includes("Spatiotemporal"),h=t.includes("UtilityNetwork"),n=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":c?"spatiotemporal":h?"utilitynetwork":r?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(c=t.includes("Spatiotemporal"),p=t.includes("Relational"),n=c||p?"mapimages":r||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):n=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?n="maps":e==="web scene"?n=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?n="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?n="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?n="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?n="datafiles":e==="360 vr experience"?n="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?n="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?n="addindesktop":e==="pdf"?n="pdf":e==="microsoft word"?n="word":e==="microsoft excel"?n="excel":e==="microsoft powerpoint"?n="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?n="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?n="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?n="layersgray":e==="analysis model"?n="analysismodel":e==="scene package"?n="scenepackage":e==="3dtiles package"?n="3dtileslayerpackage":e==="3dtiles service"?n="3dtileslayer":e==="mobile scene package"?n="mobilescenepackage":e==="tile package"||e==="compact tile package"?n="tilepackage":e==="task file"?n="taskfile":e==="report template"?n="report-template":e==="statistical data collection"?n="statisticaldatacollection":e==="insights workbook"?n="workbook":e==="insights model"?n="insightsmodel":e==="insights page"?n="insightspage":e==="insights theme"?n="insightstheme":e==="hub initiative"?n="hubinitiative":e==="hub page"?n="hubpage":e==="hub site application"?n="hubsite":e==="hub event"?n="hubevent":e==="hub project"?n="hubproject":e==="relational database connection"?n="relationaldatabaseconnection":e==="big data file share"?n="datastorecollection":e==="image collection"?n="imagecollection":e==="desktop style"?n="desktopstyle":e==="style"?n=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?n="dashboard":e==="raster function template"?n="rasterprocessingtemplate":e==="vector tile package"?n="vectortilepackage":e==="ortho mapping project"?n="orthomappingproject":e==="ortho mapping template"?n="orthomappingtemplate":e==="solution"?n="solutions":e==="geopackage"?n="geopackage":e==="deep learning package"?n="deeplearningpackage":e==="real time analytic"?n="realtimeanalytics":e==="big data analytic"?n="bigdataanalytics":e==="feed"?n="feed":e==="excalibur imagery project"?n="excaliburimageryproject":e==="notebook"?n="notebook":e==="storymap"?n="storymap":e==="survey123 add in"?n="survey123addin":e==="mission"?n="mission":e==="mission report"?n="missionreport":e==="mission template"?n="missiontemplate":e==="quickcapture project"?n="quickcaptureproject":e==="pro report"?n="proreport":e==="pro report template"?n="proreporttemplate":e==="urban model"?n="urbanmodel":e==="web experience"?n="experiencebuilder":e==="web experience template"?n="webexperiencetemplate":e==="experience builder widget"?n="experiencebuilderwidget":e==="experience builder widget package"?n="experiencebuilderwidgetpackage":e==="workflow"?n="workflow":e==="kernel gateway connection"?n="kernelgatewayconnection":e==="insights script"?n="insightsscript":e==="hub initiative template"?n="hubinitiativetemplate":e==="storymap theme"?n="storymaptheme":e==="knowledge graph"?n="knowledgegraph":e==="knowledge graph layer"?n="knowledgegraphlayer":e==="knowledge studio project"?n="knowledgestudio":e==="native application"?n="nativeapp":e==="native application installer"?n="nativeappinstaller":e==="web link chart"?n="linkchart":e==="knowledge graph web investigation"?n="investigation":e==="ogcfeatureserver"?n="features":e==="pro project"?n="proproject":e==="insights workbook package"?n="insightsworkbookpackage":e==="apache parquet"?n="apacheparquet":e==="notebook code snippet library"?n="notebookcodesnippets":e==="suitability model"?n="suitabilitymodel":e==="esri classifier definition"?n="classifierdefinition":e==="esri classification schema"?n="classificationschema":e==="insights data engineering workbook"?n="dataengineeringworkbook":e==="insights data engineering model"?n="dataengineeringmodel":e==="deep learning studio project"?n="deeplearningproject":e==="discussion"?n="discussion":e==="allsource project"?n="allsourceproject":e==="api key"?n="apikey":e==="data pipeline"?n="datapipelines":e==="group layer"?(m=t.includes("Map"),n=m?"layergroup2d":"layergroup"):n=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",n?Pe(i+n+s+".png"):null}get isLayer(){return this.type!=null&&v8.has(this.type)}get itemCdnUrl(){return J_(this.itemUrl)}get itemPageUrl(){const e=this.portal?.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){const e=this.portal?.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`)??null:null}get userItemUrl(){const e=this.portal?.restUrl;if(!e)return null;const t=this.owner||this.portal?.user?.username;return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=xo.getDefault()),i=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(s=>{this.sourceJSON=s,this.read(s)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof Hy&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new Hy({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:F(this.applicationProxies),avgRating:this.avgRating,categories:F(this.categories),created:F(this.created),culture:this.culture,description:this.description,extent:F(this.extent),groupCategories:F(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:F(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:F(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:F(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:F(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new Ko({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]=e[i]?.join(", ");const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new Hy(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Ko)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e?.data,i={method:"post"};i.query=this.createPostQuery();for(const s in i.query)i.query[s]===null&&(i.query[s]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new V("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new V("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:i}=this;await t.signIn();const{copyResources:s,folder:n,tags:r,title:o}=e||{},a={method:"post",query:{copyPrivateResources:s==="all",folder:typeof n=="string"?n:n?.id,includeResources:!!s,tags:r?.join(","),title:o}},{itemId:l}=await t.request(`${i}/copy`,a);return new Ko({id:l,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,i=e.filename,s={method:"post"};if(typeof t=="string")nl(t)?s.query={data:t}:s.query={url:ts(t)},i!=null&&(s.query.filename=i);else{const n=new FormData;i!=null?n.append("file",t,i):n.append("file",t),s.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,s).then(()=>this.reload())}):Promise.reject(new V("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:i}=await W(()=>import("./resourceUtils.e46436d7.js"),[]);return i(this,e,t)}async addResource(e,t,i){const{addOrUpdateResources:s}=await W(()=>import("./resourceUtils.e46436d7.js"),[]);return e.portalItem=this,await s(this,[{resource:e,content:t,compress:i?.compress,access:i?.access}],"add",i),e}async removeResource(e,t){const{removeResource:i}=await W(()=>import("./resourceUtils.e46436d7.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new V("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await W(()=>import("./resourceUtils.e46436d7.js"),[]);return t(this,e)}resourceFromPath(e){return new f8({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:F(this.categories),created:this.created?.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:F(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:F(this.typeKeywords),url:this.url};return u3(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Ko({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};d([f({type:["private","shared","org","public"]})],ce.prototype,"access",void 0),d([f()],ce.prototype,"accessInformation",void 0),d([f({type:String})],ce.prototype,"apiKey",void 0),d([f({json:{read:{source:"appProxies"}}})],ce.prototype,"applicationProxies",void 0),d([f()],ce.prototype,"avgRating",void 0),d([f()],ce.prototype,"categories",void 0),d([f({type:Date})],ce.prototype,"created",void 0),d([f()],ce.prototype,"culture",void 0),d([f()],ce.prototype,"description",void 0),d([f({readOnly:!0})],ce.prototype,"displayName",null),d([f({type:tt})],ce.prototype,"extent",void 0),d([$e("extent")],ce.prototype,"readExtent",null),d([f()],ce.prototype,"groupCategories",void 0),d([f({readOnly:!0})],ce.prototype,"iconUrl",null),d([f()],ce.prototype,"id",void 0),d([f({readOnly:!0})],ce.prototype,"isLayer",null),d([f({type:Boolean,readOnly:!0})],ce.prototype,"isOrgItem",void 0),d([f()],ce.prototype,"itemControl",void 0),d([f({readOnly:!0})],ce.prototype,"itemPageUrl",null),d([f({readOnly:!0})],ce.prototype,"itemUrl",null),d([f()],ce.prototype,"licenseInfo",void 0),d([f({type:Date})],ce.prototype,"modified",void 0),d([f()],ce.prototype,"name",void 0),d([f()],ce.prototype,"numComments",void 0),d([f()],ce.prototype,"numRatings",void 0),d([f()],ce.prototype,"numViews",void 0),d([f()],ce.prototype,"owner",void 0),d([f()],ce.prototype,"ownerFolder",void 0),d([f({type:xo})],ce.prototype,"portal",void 0),d([f()],ce.prototype,"screenshots",void 0),d([f()],ce.prototype,"size",void 0),d([f()],ce.prototype,"snippet",void 0),d([f()],ce.prototype,"sourceJSON",void 0),d([f({type:String})],ce.prototype,"sourceUrl",void 0),d([f({type:String})],ce.prototype,"spatialReference",void 0),d([f()],ce.prototype,"tags",void 0),d([f()],ce.prototype,"thumbnail",void 0),d([f({readOnly:!0})],ce.prototype,"thumbnailUrl",null),d([f()],ce.prototype,"title",void 0),d([f()],ce.prototype,"type",void 0),d([f()],ce.prototype,"typeKeywords",void 0),d([f({type:String,json:{read(e,t){if(b8.has(t.type)){const i=this.portal?.restUrl;e||=i&&this.id?`${i}/content/items/${this.id}/data`:null}return e}}})],ce.prototype,"url",void 0),d([f({readOnly:!0})],ce.prototype,"userItemUrl",null),ce=Ko=d([k("esri.portal.PortalItem")],ce);const oO=ce;var aO=Object.freeze(Object.defineProperty({__proto__:null,default:oO},Symbol.toStringTag,{value:"Module"}));const oS=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,_8={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function aS(e){return e in _8}const Su=[],sc=new Map;function lS(e){for(const t of sc.keys())cO(e.pattern,t)&&sc.delete(t)}function w8(e){return Su.includes(e)||(lS(e),Su.unshift(e)),Ee(()=>{const t=Su.indexOf(e);t>-1&&(Su.splice(t,1),lS(e))})}async function lO(e){const t=Di();sc.has(e)||sc.set(e,S8(e,t));const i=sc.get(e);return i&&await M8.add(i),i}function x8(e){if(!oS.test(e))return null;const t=oS.exec(e);if(t===null)return null;const[,i,s]=t,n=i+(s?"-"+s.toUpperCase():"");return aS(n)?n:aS(i)?i:null}async function S8(e,t){const i=[];for(const s of Su)if(cO(s.pattern,e))try{return await s.fetchMessageBundle(e,t)}catch(n){i.push(n)}throw i.length?new V("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new V("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function cO(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}Y_(()=>{sc.clear()});const M8=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=cs())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function $8(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,i=await lO("esri/t9n/basemaps");return i[e]||i[t]}const wc={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Pe("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Pe("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Pe("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Pe("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Pe("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Pe("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Pe("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Pe("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Pe("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Pe("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Pe("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Pe("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Pe("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Pe("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Pe("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Pe("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Pe("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return Pe("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Pe("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Pe("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Pe("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Pe("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Pe("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Pe("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Pe("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Pe("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Pe("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},T8=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let Cr=class extends Q{constructor(e){super(e),this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps",this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;const e=Di().toLowerCase();switch(e){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const t=a8(e);return t==="pt"?"pt-BR":t&&T8.has(t)?t:"global"}};d([f()],Cr.prototype,"id",void 0),d([f()],Cr.prototype,"language",void 0),d([f()],Cr.prototype,"places",void 0),d([f()],Cr.prototype,"serviceUrl",void 0),d([f()],Cr.prototype,"worldview",void 0),Cr=d([k("esri.support.BasemapStyle")],Cr);const k8=Cr;function P8(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function Qo(e){return e?.type==="subtype-sublayer"}const Gce={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function qce(e){const t=e?.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function Eg(e){return e?.type==="feature"&&!e.url&&e.source?.type==="memory"}function Yce(e){return(e?.type==="feature"||e?.type==="subtype-group")&&e.source?.type==="feature-layer"}async function Zce(e,t){const i=qe?.findServerInfo(e);if(i?.currentVersion!=null)return i.owningSystemUrl||null;const s=e.toLowerCase().indexOf("/rest/services");if(s===-1)return null;const n=`${e.substring(0,s)}/rest/info`,r=t!=null?t.signal:null,{data:o}=await Dt(n,{query:{f:"json"},responseType:"json",signal:r});return o?.owningSystemUrl||null}function O8(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function E8(e){return O8(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function A8(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function C8(e){return!!A8(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const I8=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),L8=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function R8(e){return e.layerContainerType==="basemap"?I8:e.layerContainerType==="operational-layers"?L8:null}function D8(e,t){if(t.restrictedWebMapWriting){const i=R8(t);return i==null||i.has(e.type)&&!Eg(e)}return!0}function N8(e,t){if(t)if(Eg(e)){const i=pg("featureCollection.layers",t),s=i?.[0]?.layerDefinition;s&&cS(e,s)}else e.type!=="group"&&cS(e,t)}function cS(e,t){"maxScale"in e&&(t.maxScale=im(e.maxScale)??void 0),"minScale"in e&&(t.minScale=im(e.minScale)??void 0)}function F8(e,t){if(N8(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=im(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(Eg(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function uS(e,t,i){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return i?.messages&&i.messages.push(new V("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(Eg(e)&&!e.isTable)t=e.resourceInfo;else if(D8(e,i)){const s={};return e.write(s,i)?s:null}return t!=null&&F8(e,t=F(t)),t}var Mu;let j8=0,ki=Mu=class extends gd(bo){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+j8++,this.baseLayers=new ee,this.referenceLayers=new ee;const t=s=>{s.parent&&s.parent!==this&&"remove"in s.parent&&s.parent.remove(s),s.parent=this,s.type==="elevation"&&B.getLogger(this).error(`Layer '${s.title}, id:${s.id}' of type '${s.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=s=>{s.parent=null};this.addHandles([this.baseLayers.on("after-add",s=>t(s.item)),this.referenceLayers.on("after-add",s=>t(s.item)),this.baseLayers.on("after-remove",s=>i(s.item)),this.referenceLayers.on("after-remove",s=>i(s.item))])}initialize(){this.when().catch(e=>{B.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const i of e)i.destroy();const t=this.referenceLayers.toArray();for(const i of t)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Ke(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",vo(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const s=[];e&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const r=uS(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);r!=null&&s.push(r)}),this.referenceLayers.forEach(n=>{const r=uS(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);r!=null&&(n.type!=="scene"&&(r.isReference=!0),s.push(r))})),t.baseMapLayers=s}set referenceLayers(e){this._set("referenceLayers",vo(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return CP(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>Zf(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>Zf(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new Mu({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t?.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const s=F(i);return s.url&&dn(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&dn(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i,style:s}=this;pt(e);const n=[];if(t){const r=t.context?t.context.url:null;if(n.push(this._loadLayersFromJSON(t.data,r,e)),t.data.id&&!t.data.title){const o=t.data.id;n.push($8(o).then(a=>{a&&this.read({title:a},t.context)}))}}else i?n.push(this._loadFromItem(i,e)):s&&n.push(this._loadFromStylesService(s,e));await Promise.all(n)}async _loadLayersFromJSON(e,t,i){const s=this.resourceInfo?.context,n=this.portalItem?.portal||s?.portal||null,r=V8[s?.origin||""]??"web-map",{populateOperationalLayers:o}=await W(()=>import("./layersCreator.44f6b1c8.js"),["assets/layersCreator.44f6b1c8.js","assets/portalLayers.6c8950b8.js","assets/associatedFeatureServiceUtils.f808dfcb.js","assets/fetchService.e99559bf.js","assets/portalItemUtils.761d02ba.js","assets/styleUtils.f0558e3a.js"]),a=[];if(pt(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const l={context:{...s,origin:r,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},c=m=>r==="web-scene"&&m.layerType==="ArcGISSceneServiceLayer"||m.isReference,h=o(this.baseLayers,e.baseMapLayers.filter(m=>!c(m)),l);a.push(h);const p=o(this.referenceLayers,e.baseMapLayers.filter(c),l);a.push(p)}await Promise.allSettled(a)}async _loadFromItem(e,t){const i=await e.load(t),s=await i.fetchData("json",t),n=hi(e.itemUrl??"");return this._set("resourceInfo",{data:s.baseMap??{},context:{origin:z8[e.type||""]??"web-map",portal:e.portal||xo.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||xo.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}async _loadFromStylesService(e,t){const i=`${e.serviceUrl}/${e.id}`,s=(await Dt(i,{query:{language:e.getLanguageParamValue(),places:e.places,worldview:e.worldview},signal:t?.signal})).data,n=hi(i);return this._set("resourceInfo",{data:s.baseMap??{},context:{origin:"web-map",url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}static fromId(e){const t=wc[e];return t?t.itemId?new Mu({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):Mu.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};d([f({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,s){this._writeBaseLayers(e,t,s)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:ee}},writer(e,t,i,s){this._writeBaseLayers(e,t,s)}}}}}})],ki.prototype,"baseLayers",null),d([f({type:String,json:{origins:{"web-scene":{write:!0}}}})],ki.prototype,"id",void 0),d([f({type:oO})],ki.prototype,"portalItem",void 0),d([f()],ki.prototype,"referenceLayers",null),d([f({readOnly:!0})],ki.prototype,"resourceInfo",void 0),d([f({type:ge})],ki.prototype,"spatialReference",void 0),d([f({type:k8})],ki.prototype,"style",void 0),d([f()],ki.prototype,"thumbnailUrl",void 0),d([f({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],ki.prototype,"title",void 0),d([ve("title")],ki.prototype,"writeTitle",null),ki=Mu=d([k("esri.Basemap")],ki);const z8={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},V8={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},fh=ki;var U8=Object.freeze(Object.defineProperty({__proto__:null,default:fh},Symbol.toStringTag,{value:"Module"}));const _m={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function uO(e){return!!_m[e]||!!_m[e.toLowerCase()]}function X_(e){return _m[e]??_m[e.toLowerCase()]}function W8(e){return[...X_(e)]}function Gy(e,t,i){i<0&&++i,i>1&&--i;const s=6*i;return s<1?e+(t-e)*s:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function hO(e,t,i,s=1){const n=(e%360+360)%360/360,r=i<=.5?i*(t+1):i+t-i*t,o=2*i-r;return[Math.round(255*Gy(o,r,n+1/3)),Math.round(255*Gy(o,r,n)),Math.round(255*Gy(o,r,n-1/3)),s]}function B8(e){const t=e.length>5,i=t?8:4,s=(1<<i)-1,n=t?1:17,r=t?e.length===9:e.length===5;let o=Number("0x"+e.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return r&&(l=o&s,o>>=i,a[3]=n*l/255),l=o&s,o>>=i,a[2]=n*l,l=o&s,o>>=i,a[1]=n*l,l=o&s,o>>=i,a[0]=n*l,a}const H8=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,G8="screenUtils.toPt: input not recognized!",dO=96;function Jce(e){return e?e/72*dO:0}function So(e){return e?72*e/dO:0}function Qe(e){if(typeof e=="string"){const t=e.match(H8);if(t){const i=Number(t[1]),s=t[3]&&t[3].toLowerCase(),n=e.charAt(0)==="-",r=s==="px"?So(i):i;return n?-r:r}return console.warn(G8),null}return e}function Ut(e=0,t=0){return{x:e,y:t}}function Xce(e=0,t=0){return[e,t]}function Ag(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function q8(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Y8(e,t,i,s,n,r,o,a,l,c,h,p,m,g,y,v){const b=new Float32Array(16);return b[0]=e,b[1]=t,b[2]=i,b[3]=s,b[4]=n,b[5]=r,b[6]=o,b[7]=a,b[8]=l,b[9]=c,b[10]=h,b[11]=p,b[12]=m,b[13]=g,b[14]=y,b[15]=v,b}function Z8(e,t){return new Float32Array(e,t,16)}const J8=Ag();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:J8,clone:q8,create:Ag,createView:Z8,fromValues:Y8},Symbol.toStringTag,{value:"Module"}));function Ao(){return[0,0,0]}function X8(e){return[e[0],e[1],e[2]]}function _d(e,t,i){return[e,t,i]}function K8(e,t=Ao()){const i=Math.min(3,e.length);for(let s=0;s<i;++s)t[s]=e[s];return t}function Q8(e,t){return new Float64Array(e,t,3)}function pO(){return Ao()}function fO(){return _d(1,1,1)}function mO(){return _d(1,0,0)}function gO(){return _d(0,1,0)}function yO(){return _d(0,0,1)}const e9=pO(),t9=fO(),i9=mO(),s9=gO(),n9=yO();Object.freeze(Object.defineProperty({__proto__:null,ONES:t9,UNIT_X:i9,UNIT_Y:s9,UNIT_Z:n9,ZEROS:e9,clone:X8,create:Ao,createView:Q8,fromArray:K8,fromValues:_d,ones:fO,unitX:mO,unitY:gO,unitZ:yO,zeros:pO},Symbol.toStringTag,{value:"Module"}));let K_=1e-6;function Mi(){return K_}function r9(e){K_=e}const Q_=Math.random,o9=Math.PI/180,a9=180/Math.PI;function ew(e){return e*o9}function l9(e){return e*a9}function c9(e,t){return Math.abs(e-t)<=K_*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:Q_,equals:c9,getEpsilon:Mi,setEpsilon:r9,toDegree:l9,toRadian:ew},Symbol.toStringTag,{value:"Module"}));function u9(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Co(e,t,i,s,n,r,o,a,l,c,h,p,m,g,y,v,b){return e[0]=t,e[1]=i,e[2]=s,e[3]=n,e[4]=r,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e[9]=h,e[10]=p,e[11]=m,e[12]=g,e[13]=y,e[14]=v,e[15]=b,e}function Cg(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Io(e,t){if(e===t){const i=t[1],s=t[2],n=t[3],r=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=s,e[9]=r,e[11]=t[14],e[12]=n,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function h9(e,t){return vO(e,t)||Cg(e),e}function vO(e,t){const i=t[0],s=t[1],n=t[2],r=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],p=t[9],m=t[10],g=t[11],y=t[12],v=t[13],b=t[14],w=t[15],x=i*a-s*o,$=i*l-n*o,S=i*c-r*o,M=s*l-n*a,P=s*c-r*a,C=n*c-r*l,I=h*v-p*y,D=h*b-m*y,N=h*w-g*y,U=p*b-m*v,H=p*w-g*v,te=m*w-g*b;let q=x*te-$*H+S*U+M*N-P*D+C*I;return q?(q=1/q,e[0]=(a*te-l*H+c*U)*q,e[1]=(n*H-s*te-r*U)*q,e[2]=(v*C-b*P+w*M)*q,e[3]=(m*P-p*C-g*M)*q,e[4]=(l*N-o*te-c*D)*q,e[5]=(i*te-n*N+r*D)*q,e[6]=(b*S-y*C-w*$)*q,e[7]=(h*C-m*S+g*$)*q,e[8]=(o*H-a*N+c*I)*q,e[9]=(s*N-i*H-r*I)*q,e[10]=(y*P-v*S+w*x)*q,e[11]=(p*S-h*P-g*x)*q,e[12]=(a*D-o*U-l*I)*q,e[13]=(i*U-s*D+n*I)*q,e[14]=(v*$-y*M-b*x)*q,e[15]=(h*M-p*$+m*x)*q,e):null}function d9(e,t){const i=t[0],s=t[1],n=t[2],r=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],p=t[9],m=t[10],g=t[11],y=t[12],v=t[13],b=t[14],w=t[15];return e[0]=a*(m*w-g*b)-p*(l*w-c*b)+v*(l*g-c*m),e[1]=-(s*(m*w-g*b)-p*(n*w-r*b)+v*(n*g-r*m)),e[2]=s*(l*w-c*b)-a*(n*w-r*b)+v*(n*c-r*l),e[3]=-(s*(l*g-c*m)-a*(n*g-r*m)+p*(n*c-r*l)),e[4]=-(o*(m*w-g*b)-h*(l*w-c*b)+y*(l*g-c*m)),e[5]=i*(m*w-g*b)-h*(n*w-r*b)+y*(n*g-r*m),e[6]=-(i*(l*w-c*b)-o*(n*w-r*b)+y*(n*c-r*l)),e[7]=i*(l*g-c*m)-o*(n*g-r*m)+h*(n*c-r*l),e[8]=o*(p*w-g*v)-h*(a*w-c*v)+y*(a*g-c*p),e[9]=-(i*(p*w-g*v)-h*(s*w-r*v)+y*(s*g-r*p)),e[10]=i*(a*w-c*v)-o*(s*w-r*v)+y*(s*c-r*a),e[11]=-(i*(a*g-c*p)-o*(s*g-r*p)+h*(s*c-r*a)),e[12]=-(o*(p*b-m*v)-h*(a*b-l*v)+y*(a*m-l*p)),e[13]=i*(p*b-m*v)-h*(s*b-n*v)+y*(s*m-n*p),e[14]=-(i*(a*b-l*v)-o*(s*b-n*v)+y*(s*l-n*a)),e[15]=i*(a*m-l*p)-o*(s*m-n*p)+h*(s*l-n*a),e}function p9(e){const t=e[0],i=e[1],s=e[2],n=e[3],r=e[4],o=e[5],a=e[6],l=e[7],c=e[8],h=e[9],p=e[10],m=e[11],g=e[12],y=e[13],v=e[14],b=e[15];return(t*o-i*r)*(p*b-m*v)-(t*a-s*r)*(h*b-m*y)+(t*l-n*r)*(h*v-p*y)+(i*a-s*o)*(c*b-m*g)-(i*l-n*o)*(c*v-p*g)+(s*l-n*a)*(c*y-h*g)}function bO(e,t,i){const s=t[0],n=t[1],r=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],p=t[8],m=t[9],g=t[10],y=t[11],v=t[12],b=t[13],w=t[14],x=t[15];let $=i[0],S=i[1],M=i[2],P=i[3];return e[0]=$*s+S*a+M*p+P*v,e[1]=$*n+S*l+M*m+P*b,e[2]=$*r+S*c+M*g+P*w,e[3]=$*o+S*h+M*y+P*x,$=i[4],S=i[5],M=i[6],P=i[7],e[4]=$*s+S*a+M*p+P*v,e[5]=$*n+S*l+M*m+P*b,e[6]=$*r+S*c+M*g+P*w,e[7]=$*o+S*h+M*y+P*x,$=i[8],S=i[9],M=i[10],P=i[11],e[8]=$*s+S*a+M*p+P*v,e[9]=$*n+S*l+M*m+P*b,e[10]=$*r+S*c+M*g+P*w,e[11]=$*o+S*h+M*y+P*x,$=i[12],S=i[13],M=i[14],P=i[15],e[12]=$*s+S*a+M*p+P*v,e[13]=$*n+S*l+M*m+P*b,e[14]=$*r+S*c+M*g+P*w,e[15]=$*o+S*h+M*y+P*x,e}function f9(e,t,i){const s=i[0],n=i[1],r=i[2];if(t===e)e[12]=t[0]*s+t[4]*n+t[8]*r+t[12],e[13]=t[1]*s+t[5]*n+t[9]*r+t[13],e[14]=t[2]*s+t[6]*n+t[10]*r+t[14],e[15]=t[3]*s+t[7]*n+t[11]*r+t[15];else{const o=t[0],a=t[1],l=t[2],c=t[3],h=t[4],p=t[5],m=t[6],g=t[7],y=t[8],v=t[9],b=t[10],w=t[11];e[0]=o,e[1]=a,e[2]=l,e[3]=c,e[4]=h,e[5]=p,e[6]=m,e[7]=g,e[8]=y,e[9]=v,e[10]=b,e[11]=w,e[12]=o*s+h*n+y*r+t[12],e[13]=a*s+p*n+v*r+t[13],e[14]=l*s+m*n+b*r+t[14],e[15]=c*s+g*n+w*r+t[15]}return e}function m9(e,t,i){const s=i[0],n=i[1],r=i[2];return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function g9(e,t,i,s){let n,r,o,a,l,c,h,p,m,g,y,v,b,w,x,$,S,M,P,C,I,D,N,U,H=s[0],te=s[1],q=s[2],ne=Math.sqrt(H*H+te*te+q*q);return ne<Mi()?null:(ne=1/ne,H*=ne,te*=ne,q*=ne,n=Math.sin(i),r=Math.cos(i),o=1-r,a=t[0],l=t[1],c=t[2],h=t[3],p=t[4],m=t[5],g=t[6],y=t[7],v=t[8],b=t[9],w=t[10],x=t[11],$=H*H*o+r,S=te*H*o+q*n,M=q*H*o-te*n,P=H*te*o-q*n,C=te*te*o+r,I=q*te*o+H*n,D=H*q*o+te*n,N=te*q*o-H*n,U=q*q*o+r,e[0]=a*$+p*S+v*M,e[1]=l*$+m*S+b*M,e[2]=c*$+g*S+w*M,e[3]=h*$+y*S+x*M,e[4]=a*P+p*C+v*I,e[5]=l*P+m*C+b*I,e[6]=c*P+g*C+w*I,e[7]=h*P+y*C+x*I,e[8]=a*D+p*N+v*U,e[9]=l*D+m*N+b*U,e[10]=c*D+g*N+w*U,e[11]=h*D+y*N+x*U,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function y9(e,t,i){const s=Math.sin(i),n=Math.cos(i),r=t[4],o=t[5],a=t[6],l=t[7],c=t[8],h=t[9],p=t[10],m=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=r*n+c*s,e[5]=o*n+h*s,e[6]=a*n+p*s,e[7]=l*n+m*s,e[8]=c*n-r*s,e[9]=h*n-o*s,e[10]=p*n-a*s,e[11]=m*n-l*s,e}function v9(e,t,i){const s=Math.sin(i),n=Math.cos(i),r=t[0],o=t[1],a=t[2],l=t[3],c=t[8],h=t[9],p=t[10],m=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*n-c*s,e[1]=o*n-h*s,e[2]=a*n-p*s,e[3]=l*n-m*s,e[8]=r*s+c*n,e[9]=o*s+h*n,e[10]=a*s+p*n,e[11]=l*s+m*n,e}function b9(e,t,i){const s=Math.sin(i),n=Math.cos(i),r=t[0],o=t[1],a=t[2],l=t[3],c=t[4],h=t[5],p=t[6],m=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*n+c*s,e[1]=o*n+h*s,e[2]=a*n+p*s,e[3]=l*n+m*s,e[4]=c*n-r*s,e[5]=h*n-o*s,e[6]=p*n-a*s,e[7]=m*n-l*s,e}function _9(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function w9(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function x9(e,t,i){if(t===0)return Cg(e);let s,n,r,o=i[0],a=i[1],l=i[2],c=Math.sqrt(o*o+a*a+l*l);return c<Mi()?null:(c=1/c,o*=c,a*=c,l*=c,s=Math.sin(t),n=Math.cos(t),r=1-n,e[0]=o*o*r+n,e[1]=a*o*r+l*s,e[2]=l*o*r-a*s,e[3]=0,e[4]=o*a*r-l*s,e[5]=a*a*r+n,e[6]=l*a*r+o*s,e[7]=0,e[8]=o*l*r+a*s,e[9]=a*l*r-o*s,e[10]=l*l*r+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function S9(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function M9(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function $9(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _O(e,t,i){const s=t[0],n=t[1],r=t[2],o=t[3],a=s+s,l=n+n,c=r+r,h=s*a,p=s*l,m=s*c,g=n*l,y=n*c,v=r*c,b=o*a,w=o*l,x=o*c;return e[0]=1-(g+v),e[1]=p+x,e[2]=m-w,e[3]=0,e[4]=p-x,e[5]=1-(h+v),e[6]=y+b,e[7]=0,e[8]=m+w,e[9]=y-b,e[10]=1-(h+g),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function T9(e,t){const i=k9,s=-t[0],n=-t[1],r=-t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],p=s*s+n*n+r*r+o*o;return p>0?(i[0]=2*(a*o+h*s+l*r-c*n)/p,i[1]=2*(l*o+h*n+c*s-a*r)/p,i[2]=2*(c*o+h*r+a*n-l*s)/p):(i[0]=2*(a*o+h*s+l*r-c*n),i[1]=2*(l*o+h*n+c*s-a*r),i[2]=2*(c*o+h*r+a*n-l*s)),_O(e,t,i),e}const k9=Ao();function P9(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function O9(e,t){const i=t[0],s=t[1],n=t[2],r=t[4],o=t[5],a=t[6],l=t[8],c=t[9],h=t[10];return e[0]=Math.sqrt(i*i+s*s+n*n),e[1]=Math.sqrt(r*r+o*o+a*a),e[2]=Math.sqrt(l*l+c*c+h*h),e}function E9(e,t){const i=t[0]+t[5]+t[10];let s=0;return i>0?(s=2*Math.sqrt(i+1),e[3]=.25*s,e[0]=(t[6]-t[9])/s,e[1]=(t[8]-t[2])/s,e[2]=(t[1]-t[4])/s):t[0]>t[5]&&t[0]>t[10]?(s=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/s,e[0]=.25*s,e[1]=(t[1]+t[4])/s,e[2]=(t[8]+t[2])/s):t[5]>t[10]?(s=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/s,e[0]=(t[1]+t[4])/s,e[1]=.25*s,e[2]=(t[6]+t[9])/s):(s=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/s,e[0]=(t[8]+t[2])/s,e[1]=(t[6]+t[9])/s,e[2]=.25*s),e}function A9(e,t,i,s){const n=t[0],r=t[1],o=t[2],a=t[3],l=n+n,c=r+r,h=o+o,p=n*l,m=n*c,g=n*h,y=r*c,v=r*h,b=o*h,w=a*l,x=a*c,$=a*h,S=s[0],M=s[1],P=s[2];return e[0]=(1-(y+b))*S,e[1]=(m+$)*S,e[2]=(g-x)*S,e[3]=0,e[4]=(m-$)*M,e[5]=(1-(p+b))*M,e[6]=(v+w)*M,e[7]=0,e[8]=(g+x)*P,e[9]=(v-w)*P,e[10]=(1-(p+y))*P,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function C9(e,t,i,s,n){const r=t[0],o=t[1],a=t[2],l=t[3],c=r+r,h=o+o,p=a+a,m=r*c,g=r*h,y=r*p,v=o*h,b=o*p,w=a*p,x=l*c,$=l*h,S=l*p,M=s[0],P=s[1],C=s[2],I=n[0],D=n[1],N=n[2],U=(1-(v+w))*M,H=(g+S)*M,te=(y-$)*M,q=(g-S)*P,ne=(1-(m+w))*P,ye=(b+x)*P,de=(y+$)*C,pe=(b-x)*C,De=(1-(m+v))*C;return e[0]=U,e[1]=H,e[2]=te,e[3]=0,e[4]=q,e[5]=ne,e[6]=ye,e[7]=0,e[8]=de,e[9]=pe,e[10]=De,e[11]=0,e[12]=i[0]+I-(U*I+q*D+de*N),e[13]=i[1]+D-(H*I+ne*D+pe*N),e[14]=i[2]+N-(te*I+ye*D+De*N),e[15]=1,e}function I9(e,t){const i=t[0],s=t[1],n=t[2],r=t[3],o=i+i,a=s+s,l=n+n,c=i*o,h=s*o,p=s*a,m=n*o,g=n*a,y=n*l,v=r*o,b=r*a,w=r*l;return e[0]=1-p-y,e[1]=h+w,e[2]=m-b,e[3]=0,e[4]=h-w,e[5]=1-c-y,e[6]=g+v,e[7]=0,e[8]=m+b,e[9]=g-v,e[10]=1-c-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function L9(e,t,i,s,n,r,o){const a=1/(i-t),l=1/(n-s),c=1/(r-o);return e[0]=2*r*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*r*l,e[6]=0,e[7]=0,e[8]=(i+t)*a,e[9]=(n+s)*l,e[10]=(o+r)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*r*2*c,e[15]=0,e}function R9(e,t,i,s,n){const r=1/Math.tan(t/2);let o;return e[0]=r/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(o=1/(s-n),e[10]=(n+s)*o,e[14]=2*n*s*o):(e[10]=-1,e[14]=-2*s),e}function D9(e,t,i,s){const n=Math.tan(t.upDegrees*Math.PI/180),r=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(n+r);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(n-r)*c*.5,e[10]=s/(i-s),e[11]=-1,e[12]=0,e[13]=0,e[14]=s*i/(i-s),e[15]=0,e}function N9(e,t,i,s,n,r,o){const a=1/(t-i),l=1/(s-n),c=1/(r-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*a,e[13]=(n+s)*l,e[14]=(o+r)*c,e[15]=1,e}function F9(e,t,i,s){const n=t[0],r=t[1],o=t[2];let a=n-i[0],l=r-i[1],c=o-i[2];const h=Mi();if(Math.abs(a)<h&&Math.abs(l)<h&&Math.abs(c)<h)return void Cg(e);let p=1/Math.sqrt(a*a+l*l+c*c);a*=p,l*=p,c*=p;const m=s[0],g=s[1],y=s[2];let v=g*c-y*l,b=y*a-m*c,w=m*l-g*a;p=Math.sqrt(v*v+b*b+w*w),p?(p=1/p,v*=p,b*=p,w*=p):(v=0,b=0,w=0);let x=l*w-c*b,$=c*v-a*w,S=a*b-l*v;p=Math.sqrt(x*x+$*$+S*S),p?(p=1/p,x*=p,$*=p,S*=p):(x=0,$=0,S=0),e[0]=v,e[1]=x,e[2]=a,e[3]=0,e[4]=b,e[5]=$,e[6]=l,e[7]=0,e[8]=w,e[9]=S,e[10]=c,e[11]=0,e[12]=-(v*n+b*r+w*o),e[13]=-(x*n+$*r+S*o),e[14]=-(a*n+l*r+c*o),e[15]=1}function j9(e,t,i,s){const n=t[0],r=t[1],o=t[2],a=s[0],l=s[1],c=s[2];let h=n-i[0],p=r-i[1],m=o-i[2],g=h*h+p*p+m*m;g>0&&(g=1/Math.sqrt(g),h*=g,p*=g,m*=g);let y=l*m-c*p,v=c*h-a*m,b=a*p-l*h;return g=y*y+v*v+b*b,g>0&&(g=1/Math.sqrt(g),y*=g,v*=g,b*=g),e[0]=y,e[1]=v,e[2]=b,e[3]=0,e[4]=p*b-m*v,e[5]=m*y-h*b,e[6]=h*v-p*y,e[7]=0,e[8]=h,e[9]=p,e[10]=m,e[11]=0,e[12]=n,e[13]=r,e[14]=o,e[15]=1,e}function z9(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function V9(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function U9(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function wO(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function W9(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function B9(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e[4]=t[4]+i[4]*s,e[5]=t[5]+i[5]*s,e[6]=t[6]+i[6]*s,e[7]=t[7]+i[7]*s,e[8]=t[8]+i[8]*s,e[9]=t[9]+i[9]*s,e[10]=t[10]+i[10]*s,e[11]=t[11]+i[11]*s,e[12]=t[12]+i[12]*s,e[13]=t[13]+i[13]*s,e[14]=t[14]+i[14]*s,e[15]=t[15]+i[15]*s,e}function H9(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function G9(e,t){if(e===t)return!0;const i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],p=e[9],m=e[10],g=e[11],y=e[12],v=e[13],b=e[14],w=e[15],x=t[0],$=t[1],S=t[2],M=t[3],P=t[4],C=t[5],I=t[6],D=t[7],N=t[8],U=t[9],H=t[10],te=t[11],q=t[12],ne=t[13],ye=t[14],de=t[15],pe=Mi();return Math.abs(i-x)<=pe*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(s-$)<=pe*Math.max(1,Math.abs(s),Math.abs($))&&Math.abs(n-S)<=pe*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(r-M)<=pe*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(o-P)<=pe*Math.max(1,Math.abs(o),Math.abs(P))&&Math.abs(a-C)<=pe*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(l-I)<=pe*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(c-D)<=pe*Math.max(1,Math.abs(c),Math.abs(D))&&Math.abs(h-N)<=pe*Math.max(1,Math.abs(h),Math.abs(N))&&Math.abs(p-U)<=pe*Math.max(1,Math.abs(p),Math.abs(U))&&Math.abs(m-H)<=pe*Math.max(1,Math.abs(m),Math.abs(H))&&Math.abs(g-te)<=pe*Math.max(1,Math.abs(g),Math.abs(te))&&Math.abs(y-q)<=pe*Math.max(1,Math.abs(y),Math.abs(q))&&Math.abs(v-ne)<=pe*Math.max(1,Math.abs(v),Math.abs(ne))&&Math.abs(b-ye)<=pe*Math.max(1,Math.abs(b),Math.abs(ye))&&Math.abs(w-de)<=pe*Math.max(1,Math.abs(w),Math.abs(de))}function q9(e){const t=Mi(),i=e[0],s=e[1],n=e[2],r=e[4],o=e[5],a=e[6],l=e[8],c=e[9],h=e[10];return Math.abs(1-(i*i+r*r+l*l))<=t&&Math.abs(1-(s*s+o*o+c*c))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}function Y9(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const Z9=bO,J9=wO;Object.freeze(Object.defineProperty({__proto__:null,add:U9,adjoint:d9,copy:u9,determinant:p9,equals:G9,exactEquals:H9,frob:V9,fromQuat:I9,fromQuat2:T9,fromRotation:x9,fromRotationTranslation:_O,fromRotationTranslationScale:A9,fromRotationTranslationScaleOrigin:C9,fromScaling:w9,fromTranslation:_9,fromXRotation:S9,fromYRotation:M9,fromZRotation:$9,frustum:L9,getRotation:E9,getScaling:O9,getTranslation:P9,hasIdentityRotation:Y9,identity:Cg,invert:vO,invertOrIdentity:h9,isOrthoNormal:q9,lookAt:F9,mul:Z9,multiply:bO,multiplyScalar:W9,multiplyScalarAndAdd:B9,ortho:N9,perspective:R9,perspectiveFromFieldOfView:D9,rotate:g9,rotateX:y9,rotateY:v9,rotateZ:b9,scale:m9,set:Co,str:z9,sub:J9,subtract:wO,targetTo:j9,translate:f9,transpose:Io},Symbol.toStringTag,{value:"Module"}));const X9=(e,t)=>{const i=Co(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return Io(i,i)},K9=(e,t)=>{const i=Co(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return Io(i,i)},Q9=(e,t)=>{const i=1-t,s=Co(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Io(s,s)},ej=(e,t)=>{const i=Math.sin(t*Math.PI/180),s=Math.cos(t*Math.PI/180),n=Co(e,.213+.787*s-.213*i,.715-.715*s-.715*i,.072-.072*s+.928*i,0,.213-.213*s+.143*i,.715+.285*s+.14*i,.072-.072*s-.283*i,0,.213-.213*s-.787*i,.715-.715*s+.715*i,.072+.928*s+.072*i,0,0,0,0,1);return Io(n,n)},tj=(e,t)=>{const i=1-2*t,s=Co(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return Io(s,s)},ij=(e,t)=>{const i=Co(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return Io(i,i)},sj=(e,t)=>{const i=1-t,s=Co(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Io(s,s)};class Ig{constructor(t,i,s){this.strength=t,this.radius=i,this.threshold=s,this.type="bloom"}interpolate(t,i,s){this.strength=yi(t.strength,i.strength,s),this.radius=yi(t.radius,i.radius,s),this.threshold=yi(t.threshold,i.threshold,s)}clone(){return new Ig(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:mh(this.radius),strength:this.strength,threshold:this.threshold}}}class Lg{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,s){this.radius=Math.round(yi(t.radius,i.radius,s))}clone(){return new Lg(this.radius)}toJSON(){return{type:"blur",radius:mh(this.radius)}}}class Uh{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,s){this.amount=yi(t.amount,i.amount,s),this._updateMatrix()}clone(){return new Uh(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||Ag();switch(this.type){case"brightness":this._colorMatrix=X9(t,this.amount);break;case"contrast":this._colorMatrix=K9(t,this.amount);break;case"grayscale":this._colorMatrix=Q9(t,this.amount);break;case"invert":this._colorMatrix=tj(t,this.amount);break;case"saturate":this._colorMatrix=ij(t,this.amount);break;case"sepia":this._colorMatrix=sj(t,this.amount)}}}class Rg{constructor(t,i,s,n){this.offsetX=t,this.offsetY=i,this.blurRadius=s,this.color=n,this.type="drop-shadow"}interpolate(t,i,s){this.offsetX=yi(t.offsetX,i.offsetX,s),this.offsetY=yi(t.offsetY,i.offsetY,s),this.blurRadius=yi(t.blurRadius,i.blurRadius,s),this.color[0]=Math.round(yi(t.color[0],i.color[0],s)),this.color[1]=Math.round(yi(t.color[1],i.color[1],s)),this.color[2]=Math.round(yi(t.color[2],i.color[2],s)),this.color[3]=yi(t.color[3],i.color[3],s)}clone(){return new Rg(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:mh(this.offsetX),yoffset:mh(this.offsetY),blurRadius:mh(this.blurRadius),color:t}}}class Dg{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,s){this.angle=yi(t.angle,i.angle,s),this._updateMatrix()}clone(){return new Dg(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||Ag();this._colorMatrix=ej(t,this.angle)}}class Ng{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,s){this.amount=yi(t.amount,i.amount,s)}clone(){return new Ng(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function yi(e,t,i){return e+(t-e)*i}function mh(e){return Math.round(1e3*So(e))/1e3}function nj(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new Uh(e.type,0);case"saturate":case"brightness":case"contrast":return new Uh(e.type,1);case"opacity":return new Ng(1);case"hue-rotate":return new Dg(0);case"blur":return new Lg(0);case"drop-shadow":return new Rg(0,0,0,[...X_("transparent")]);case"bloom":return new Ig(0,0,1)}}function rj(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((s,n)=>s.type===i[n].type)}function oj(e,t){const i=e.length>t.length?e:t,s=e.length>t.length?t:e;for(let n=s.length;n<i.length;n++)s.push(nj(i[n]))}function aj(e){const t=e[0];return!!t&&"type"in t}function lj(e,t){return JSON.stringify(e??null)===JSON.stringify(t??null)}const hS=()=>B.getLogger("esri.support.basemapUtils");function cj(){return{}}function xO(e){for(const t in e){const i=e[t];Ke(i),delete e[t]}}function of(e,t){let i;if(typeof e=="string"){const s=e in wc,n=!s&&e.includes("/");if(!s&&!n){const r=Object.entries(wc).filter(([o,a])=>Me.apiKey&&!a.classic||!Me.apiKey&&(a.classic||a.is3d)).map(([o])=>`"${o}"`).sort().join(", ");return hS().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${r}`),null}t&&(i=t[e]),i||(i=s?fh.fromId(e):new fh({style:{id:e}}),t&&(t[e]=i))}else i=ui(fh,e);return i?.destroyed&&(hS().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function uj(e){let t=null;const i=dj(e),s=!i?.baseLayers.length;for(const n in wc){const r=mj(i,SO(wc[n]),{mustMatchReferences:s});if(r==="equal"){t=n;break}r==="base-layers-equal"&&(t=n)}return t}function hj(e,t){if(t==null||e==null)return{spatialReference:null,updating:!1};if(t.loadStatus==="not-loaded")return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(t.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=t.baseLayers.at(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const s=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?i.tileInfo?.spatialReference:i.spatialReference]).filter(Boolean),n=e.spatialReference;return n?{spatialReference:s.find(r=>n.equals(r))??s[0]??null,updating:!1}:{spatialReference:s[0],updating:!1}}function dj(e){return e?!e.loaded&&e.resourceInfo?SO(e.resourceInfo.data):{baseLayers:dS(e.baseLayers),referenceLayers:dS(e.referenceLayers)}:null}function dS(e){return(ee.isCollection(e)?e.toArray():e).map(pj)}function pj(e){return{type:e.type,effect:"effect"in e?e.effect:void 0,url:MO("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl||""),minScale:"minScale"in e&&e.minScale!=null?e.minScale:0,maxScale:"maxScale"in e&&e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visible==null||!!e.visible,sublayers:e.type!=="map-image"&&e.type!=="wms"||e.sublayers==null?void 0:e.sublayers?.map(t=>({id:t.id,visible:t.visible})),activeLayerId:e.type==="wmts"?e.activeLayer?.id:void 0}}function pS(e){return e.isReference||e.layerType==="ArcGISSceneServiceLayer"}function SO(e){return e?{baseLayers:fS((e.baseMapLayers??[]).filter(t=>!pS(t))),referenceLayers:fS((e.baseMapLayers??[]).filter(t=>pS(t)))}:null}function fS(e){return e.map(t=>fj(t))}function fj(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;case"ArcGISSceneServiceLayer":t="scene";break;default:t="unknown"}return{type:t,effect:e.effect,url:MO(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale??0,maxScale:e.maxScale??0,opacity:e.opacity??1,visible:e.visibility==null||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}function mj(e,t,i){return e!=null!=(t!=null)?"not-equal":!e||!t?"equal":mS(e.baseLayers,t.baseLayers)?mS(e.referenceLayers,t.referenceLayers)?"equal":i.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal"}function mS(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!gj(e[i],t[i]))return!1;return!0}function gj(e,t){if(e.type!==t.type||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity||!lj(e.effect,t.effect))return!1;if(e.activeLayerId!=null||t.activeLayerId!=null)return e.activeLayerId===t.activeLayerId;if(e.sublayers!=null||t.sublayers!=null){if(e.sublayers==null||t.sublayers==null||e.sublayers.length!==t.sublayers.length)return!1;for(let i=0;i<e.sublayers.length;i++){const s=e.sublayers.at(i),n=t.sublayers.at(i);if(s?.id!==n?.id||s?.visible!==n?.visible)return!1}}return!0}function MO(e){return e?rr(e).replace(/^\s*https?:/i,"").toLowerCase():""}function $O(e){if(!e)return null;const{thumbnailUrl:t}=e;if(t)return t;const i=uj(e);return i?wc[i].thumbnailUrl:G3(e.baseLayers,yj)}function yj(e){return"portalItem"in e?e.portalItem?.thumbnailUrl:void 0}const gS=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class ol extends Error{}class vj extends ol{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class bj extends ol{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class _j extends ol{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class Yl extends ol{}class TO extends ol{constructor(t){super(`Invalid unit ${t}`)}}class bi extends ol{}class $r extends ol{constructor(){super("Zone is an abstract class")}}const G="numeric",Is="short",Ni="long",wm={year:G,month:G,day:G},kO={year:G,month:Is,day:G},wj={year:G,month:Is,day:G,weekday:Is},PO={year:G,month:Ni,day:G},OO={year:G,month:Ni,day:G,weekday:Ni},EO={hour:G,minute:G},AO={hour:G,minute:G,second:G},CO={hour:G,minute:G,second:G,timeZoneName:Is},IO={hour:G,minute:G,second:G,timeZoneName:Ni},LO={hour:G,minute:G,hourCycle:"h23"},RO={hour:G,minute:G,second:G,hourCycle:"h23"},DO={hour:G,minute:G,second:G,hourCycle:"h23",timeZoneName:Is},NO={hour:G,minute:G,second:G,hourCycle:"h23",timeZoneName:Ni},FO={year:G,month:G,day:G,hour:G,minute:G},jO={year:G,month:G,day:G,hour:G,minute:G,second:G},zO={year:G,month:Is,day:G,hour:G,minute:G},VO={year:G,month:Is,day:G,hour:G,minute:G,second:G},xj={year:G,month:Is,day:G,weekday:Is,hour:G,minute:G},UO={year:G,month:Ni,day:G,hour:G,minute:G,timeZoneName:Is},WO={year:G,month:Ni,day:G,hour:G,minute:G,second:G,timeZoneName:Is},BO={year:G,month:Ni,day:G,weekday:Ni,hour:G,minute:G,timeZoneName:Ni},HO={year:G,month:Ni,day:G,weekday:Ni,hour:G,minute:G,second:G,timeZoneName:Ni};class wd{get type(){throw new $r}get name(){throw new $r}get ianaName(){return this.name}get isUniversal(){throw new $r}offsetName(t,i){throw new $r}formatOffset(t,i){throw new $r}offset(t){throw new $r}equals(t){throw new $r}get isValid(){throw new $r}}let qy=null;class Fg extends wd{static get instance(){return qy===null&&(qy=new Fg),qy}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:i,locale:s}){return eE(t,i,s)}formatOffset(t,i){return gh(this.offset(t),i)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let af={};function Sj(e){return af[e]||(af[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),af[e]}const Mj={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function $j(e,t){const i=e.format(t).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,r,o,a,l,c,h]=s;return[o,n,r,a,l,c,h]}function Tj(e,t){const i=e.formatToParts(t),s=[];for(let n=0;n<i.length;n++){const{type:r,value:o}=i[n],a=Mj[r];r==="era"?s[a]=o:he(a)||(s[a]=parseInt(o,10))}return s}let ip={};class Ls extends wd{static create(t){return ip[t]||(ip[t]=new Ls(t)),ip[t]}static resetCache(){ip={},af={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Ls.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:i,locale:s}){return eE(t,i,s,this.name)}formatOffset(t,i){return gh(this.offset(t),i)}offset(t){const i=new Date(t);if(isNaN(i))return NaN;const s=Sj(this.name);let[n,r,o,a,l,c,h]=s.formatToParts?Tj(s,i):$j(s,i);a==="BC"&&(n=-Math.abs(n)+1);const m=zg({year:n,month:r,day:o,hour:l===24?0:l,minute:c,second:h,millisecond:0});let g=+i;const y=g%1e3;return g-=y>=0?y:1e3+y,(m-g)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let yS={};function kj(e,t={}){const i=JSON.stringify([e,t]);let s=yS[i];return s||(s=new Intl.ListFormat(e,t),yS[i]=s),s}let L1={};function R1(e,t={}){const i=JSON.stringify([e,t]);let s=L1[i];return s||(s=new Intl.DateTimeFormat(e,t),L1[i]=s),s}let D1={};function Pj(e,t={}){const i=JSON.stringify([e,t]);let s=D1[i];return s||(s=new Intl.NumberFormat(e,t),D1[i]=s),s}let N1={};function Oj(e,t={}){const{base:i,...s}=t,n=JSON.stringify([e,s]);let r=N1[n];return r||(r=new Intl.RelativeTimeFormat(e,t),N1[n]=r),r}let $u=null;function Ej(){return $u||($u=new Intl.DateTimeFormat().resolvedOptions().locale,$u)}let vS={};function Aj(e){let t=vS[e];if(!t){const i=new Intl.Locale(e);t="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,vS[e]=t}return t}function Cj(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const i=e.indexOf("-u-");if(i===-1)return[e];{let s,n;try{s=R1(e).resolvedOptions(),n=e}catch{const l=e.substring(0,i);s=R1(l).resolvedOptions(),n=l}const{numberingSystem:r,calendar:o}=s;return[n,r,o]}}function Ij(e,t,i){return(i||t)&&(e.includes("-u-")||(e+="-u"),i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`)),e}function Lj(e){const t=[];for(let i=1;i<=12;i++){const s=oe.utc(2009,i,1);t.push(e(s))}return t}function Rj(e){const t=[];for(let i=1;i<=7;i++){const s=oe.utc(2016,11,13+i);t.push(e(s))}return t}function sp(e,t,i,s){const n=e.listingMode();return n==="error"?null:n==="en"?i(t):s(t)}function Dj(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class Nj{constructor(t,i,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:n,floor:r,...o}=s;if(!i||Object.keys(o).length>0){const a={useGrouping:!1,...s};s.padTo>0&&(a.minimumIntegerDigits=s.padTo),this.inf=Pj(t,a)}}format(t){if(this.inf){const i=this.floor?Math.floor(t):t;return this.inf.format(i)}else{const i=this.floor?Math.floor(t):nw(t,3);return St(i,this.padTo)}}}class Fj{constructor(t,i,s){this.opts=s,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Ls.create(a).valid?(n=a,this.dt=t):(n="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,n=t.zone.name):(n="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const r={...this.opts};r.timeZone=r.timeZone||n,this.dtf=R1(i,r)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(i=>{if(i.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:s}}else return i}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class jj{constructor(t,i,s){this.opts={style:"long",...s},!i&&KO()&&(this.rtf=Oj(t,s))}format(t,i){return this.rtf?this.rtf.format(t,i):r7(i,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,i){return this.rtf?this.rtf.formatToParts(t,i):[]}}const zj={firstDay:1,minimalDays:4,weekend:[6,7]};class Ne{static fromOpts(t){return Ne.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,i,s,n,r=!1){const o=t||gt.defaultLocale,a=o||(r?"en-US":Ej()),l=i||gt.defaultNumberingSystem,c=s||gt.defaultOutputCalendar,h=F1(n)||gt.defaultWeekSettings;return new Ne(a,l,c,h,o)}static resetCache(){$u=null,L1={},D1={},N1={}}static fromObject({locale:t,numberingSystem:i,outputCalendar:s,weekSettings:n}={}){return Ne.create(t,i,s,n)}constructor(t,i,s,n,r){const[o,a,l]=Cj(t);this.locale=o,this.numberingSystem=i||a||null,this.outputCalendar=s||l||null,this.weekSettings=n,this.intl=Ij(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Dj(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Ne.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,F1(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,i=!1){return sp(this,t,sE,()=>{const s=i?{month:t,day:"numeric"}:{month:t},n=i?"format":"standalone";return this.monthsCache[n][t]||(this.monthsCache[n][t]=Lj(r=>this.extract(r,s,"month"))),this.monthsCache[n][t]})}weekdays(t,i=!1){return sp(this,t,oE,()=>{const s=i?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},n=i?"format":"standalone";return this.weekdaysCache[n][t]||(this.weekdaysCache[n][t]=Rj(r=>this.extract(r,s,"weekday"))),this.weekdaysCache[n][t]})}meridiems(){return sp(this,void 0,()=>aE,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[oe.utc(2016,11,13,9),oe.utc(2016,11,13,19)].map(i=>this.extract(i,t,"dayperiod"))}return this.meridiemCache})}eras(t){return sp(this,t,lE,()=>{const i={era:t};return this.eraCache[t]||(this.eraCache[t]=[oe.utc(-40,1,1),oe.utc(2017,1,1)].map(s=>this.extract(s,i,"era"))),this.eraCache[t]})}extract(t,i,s){const n=this.dtFormatter(t,i),r=n.formatToParts(),o=r.find(a=>a.type.toLowerCase()===s);return o?o.value:null}numberFormatter(t={}){return new Nj(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,i={}){return new Fj(t,this.intl,i)}relFormatter(t={}){return new jj(this.intl,this.isEnglish(),t)}listFormatter(t={}){return kj(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:QO()?Aj(this.locale):zj}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let Yy=null;class Jt extends wd{static get utcInstance(){return Yy===null&&(Yy=new Jt(0)),Yy}static instance(t){return t===0?Jt.utcInstance:new Jt(t)}static parseSpecifier(t){if(t){const i=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Jt(Vg(i[1],i[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${gh(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${gh(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,i){return gh(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class Vj extends wd{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function ro(e,t){if(he(e)||e===null)return t;if(e instanceof wd)return e;if(Bj(e)){const i=e.toLowerCase();return i==="default"?t:i==="local"||i==="system"?Fg.instance:i==="utc"||i==="gmt"?Jt.utcInstance:Jt.parseSpecifier(i)||Ls.create(e)}else return Na(e)?Jt.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new Vj(e)}let bS=()=>Date.now(),_S="system",wS=null,xS=null,SS=null,MS=60,$S,TS=null;class gt{static get now(){return bS}static set now(t){bS=t}static set defaultZone(t){_S=t}static get defaultZone(){return ro(_S,Fg.instance)}static get defaultLocale(){return wS}static set defaultLocale(t){wS=t}static get defaultNumberingSystem(){return xS}static set defaultNumberingSystem(t){xS=t}static get defaultOutputCalendar(){return SS}static set defaultOutputCalendar(t){SS=t}static get defaultWeekSettings(){return TS}static set defaultWeekSettings(t){TS=F1(t)}static get twoDigitCutoffYear(){return MS}static set twoDigitCutoffYear(t){MS=t%100}static get throwOnInvalid(){return $S}static set throwOnInvalid(t){$S=t}static resetCaches(){Ne.resetCache(),Ls.resetCache()}}class Ps{constructor(t,i){this.reason=t,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const GO=[0,31,59,90,120,151,181,212,243,273,304,334],qO=[0,31,60,91,121,152,182,213,244,274,305,335];function is(e,t){return new Ps("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function tw(e,t,i){const s=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const n=s.getUTCDay();return n===0?7:n}function YO(e,t,i){return i+(xd(e)?qO:GO)[t-1]}function ZO(e,t){const i=xd(e)?qO:GO,s=i.findIndex(r=>r<t),n=t-i[s];return{month:s+1,day:n}}function iw(e,t){return(e-t+7)%7+1}function xm(e,t=4,i=1){const{year:s,month:n,day:r}=e,o=YO(s,n,r),a=iw(tw(s,n,r),i);let l=Math.floor((o-a+14-t)/7),c;return l<1?(c=s-1,l=Wh(c,t,i)):l>Wh(s,t,i)?(c=s+1,l=1):c=s,{weekYear:c,weekNumber:l,weekday:a,...Ug(e)}}function kS(e,t=4,i=1){const{weekYear:s,weekNumber:n,weekday:r}=e,o=iw(tw(s,1,t),i),a=nc(s);let l=n*7+r-o-7+t,c;l<1?(c=s-1,l+=nc(c)):l>a?(c=s+1,l-=nc(s)):c=s;const{month:h,day:p}=ZO(c,l);return{year:c,month:h,day:p,...Ug(e)}}function Zy(e){const{year:t,month:i,day:s}=e,n=YO(t,i,s);return{year:t,ordinal:n,...Ug(e)}}function PS(e){const{year:t,ordinal:i}=e,{month:s,day:n}=ZO(t,i);return{year:t,month:s,day:n,...Ug(e)}}function OS(e,t){if(!he(e.localWeekday)||!he(e.localWeekNumber)||!he(e.localWeekYear)){if(!he(e.weekday)||!he(e.weekNumber)||!he(e.weekYear))throw new Yl("Cannot mix locale-based week fields with ISO-based week fields");return he(e.localWeekday)||(e.weekday=e.localWeekday),he(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),he(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Uj(e,t=4,i=1){const s=jg(e.weekYear),n=ss(e.weekNumber,1,Wh(e.weekYear,t,i)),r=ss(e.weekday,1,7);return s?n?r?!1:is("weekday",e.weekday):is("week",e.weekNumber):is("weekYear",e.weekYear)}function Wj(e){const t=jg(e.year),i=ss(e.ordinal,1,nc(e.year));return t?i?!1:is("ordinal",e.ordinal):is("year",e.year)}function JO(e){const t=jg(e.year),i=ss(e.month,1,12),s=ss(e.day,1,Sm(e.year,e.month));return t?i?s?!1:is("day",e.day):is("month",e.month):is("year",e.year)}function XO(e){const{hour:t,minute:i,second:s,millisecond:n}=e,r=ss(t,0,23)||t===24&&i===0&&s===0&&n===0,o=ss(i,0,59),a=ss(s,0,59),l=ss(n,0,999);return r?o?a?l?!1:is("millisecond",n):is("second",s):is("minute",i):is("hour",t)}function he(e){return typeof e>"u"}function Na(e){return typeof e=="number"}function jg(e){return typeof e=="number"&&e%1===0}function Bj(e){return typeof e=="string"}function Hj(e){return Object.prototype.toString.call(e)==="[object Date]"}function KO(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function QO(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Gj(e){return Array.isArray(e)?e:[e]}function ES(e,t,i){if(e.length!==0)return e.reduce((s,n)=>{const r=[t(n),n];return s&&i(s[0],r[0])===s[0]?s:r},null)[1]}function qj(e,t){return t.reduce((i,s)=>(i[s]=e[s],i),{})}function xc(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function F1(e){if(e==null)return null;if(typeof e!="object")throw new bi("Week settings must be an object");if(!ss(e.firstDay,1,7)||!ss(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!ss(t,1,7)))throw new bi("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function ss(e,t,i){return jg(e)&&e>=t&&e<=i}function Yj(e,t){return e-t*Math.floor(e/t)}function St(e,t=2){const i=e<0;let s;return i?s="-"+(""+-e).padStart(t,"0"):s=(""+e).padStart(t,"0"),s}function Qr(e){if(!(he(e)||e===null||e===""))return parseInt(e,10)}function zo(e){if(!(he(e)||e===null||e===""))return parseFloat(e)}function sw(e){if(!(he(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function nw(e,t,i=!1){const s=10**t;return(i?Math.trunc:Math.round)(e*s)/s}function xd(e){return e%4===0&&(e%100!==0||e%400===0)}function nc(e){return xd(e)?366:365}function Sm(e,t){const i=Yj(t-1,12)+1,s=e+(t-i)/12;return i===2?xd(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function zg(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function AS(e,t,i){return-iw(tw(e,1,t),i)+t-1}function Wh(e,t=4,i=1){const s=AS(e,t,i),n=AS(e+1,t,i);return(nc(e)-s+n)/7}function j1(e){return e>99?e:e>gt.twoDigitCutoffYear?1900+e:2e3+e}function eE(e,t,i,s=null){const n=new Date(e),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(r.timeZone=s);const o={timeZoneName:t,...r},a=new Intl.DateTimeFormat(i,o).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function Vg(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const s=parseInt(t,10)||0,n=i<0||Object.is(i,-0)?-s:s;return i*60+n}function tE(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new bi(`Invalid unit value ${e}`);return t}function Mm(e,t){const i={};for(const s in e)if(xc(e,s)){const n=e[s];if(n==null)continue;i[t(s)]=tE(n)}return i}function gh(e,t){const i=Math.trunc(Math.abs(e/60)),s=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return`${n}${St(i,2)}:${St(s,2)}`;case"narrow":return`${n}${i}${s>0?`:${s}`:""}`;case"techie":return`${n}${St(i,2)}${St(s,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Ug(e){return qj(e,["hour","minute","second","millisecond"])}const Zj=["January","February","March","April","May","June","July","August","September","October","November","December"],iE=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Jj=["J","F","M","A","M","J","J","A","S","O","N","D"];function sE(e){switch(e){case"narrow":return[...Jj];case"short":return[...iE];case"long":return[...Zj];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const nE=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],rE=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Xj=["M","T","W","T","F","S","S"];function oE(e){switch(e){case"narrow":return[...Xj];case"short":return[...rE];case"long":return[...nE];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const aE=["AM","PM"],Kj=["Before Christ","Anno Domini"],Qj=["BC","AD"],e7=["B","A"];function lE(e){switch(e){case"narrow":return[...e7];case"short":return[...Qj];case"long":return[...Kj];default:return null}}function t7(e){return aE[e.hour<12?0:1]}function i7(e,t){return oE(t)[e.weekday-1]}function s7(e,t){return sE(t)[e.month-1]}function n7(e,t){return lE(t)[e.year<0?0:1]}function r7(e,t,i="always",s=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&r){const p=e==="days";switch(t){case 1:return p?"tomorrow":`next ${n[e][0]}`;case-1:return p?"yesterday":`last ${n[e][0]}`;case 0:return p?"today":`this ${n[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=n[e],h=s?l?c[1]:c[2]||c[1]:l?n[e][0]:e;return o?`${a} ${h} ago`:`in ${a} ${h}`}function CS(e,t){let i="";for(const s of e)s.literal?i+=s.val:i+=t(s.val);return i}const o7={D:wm,DD:kO,DDD:PO,DDDD:OO,t:EO,tt:AO,ttt:CO,tttt:IO,T:LO,TT:RO,TTT:DO,TTTT:NO,f:FO,ff:zO,fff:UO,ffff:BO,F:jO,FF:VO,FFF:WO,FFFF:HO};class Yt{static create(t,i={}){return new Yt(t,i)}static parseFormat(t){let i=null,s="",n=!1;const r=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(s.length>0&&r.push({literal:n||/^\s+$/.test(s),val:s}),i=null,s="",n=!n):n||a===i?s+=a:(s.length>0&&r.push({literal:/^\s+$/.test(s),val:s}),s=a,i=a)}return s.length>0&&r.push({literal:n||/^\s+$/.test(s),val:s}),r}static macroTokenToFormatOpts(t){return o7[t]}constructor(t,i){this.opts=i,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...i}).format()}dtFormatter(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i})}formatDateTime(t,i){return this.dtFormatter(t,i).format()}formatDateTimeParts(t,i){return this.dtFormatter(t,i).formatToParts()}formatInterval(t,i){return this.dtFormatter(t.start,i).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,i){return this.dtFormatter(t,i).resolvedOptions()}num(t,i=0){if(this.opts.forceSimple)return St(t,i);const s={...this.opts};return i>0&&(s.padTo=i),this.loc.numberFormatter(s).format(t)}formatDateTimeFromString(t,i){const s=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",r=(g,y)=>this.loc.extract(t,g,y),o=g=>t.isOffsetFixed&&t.offset===0&&g.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,g.format):"",a=()=>s?t7(t):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(g,y)=>s?s7(t,g):r(y?{month:g}:{month:g,day:"numeric"},"month"),c=(g,y)=>s?i7(t,g):r(y?{weekday:g}:{weekday:g,month:"long",day:"numeric"},"weekday"),h=g=>{const y=Yt.macroTokenToFormatOpts(g);return y?this.formatWithSystemDefault(t,y):g},p=g=>s?n7(t,g):r({era:g},"era"),m=g=>{switch(g){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return n?r({day:"numeric"},"day"):this.num(t.day);case"dd":return n?r({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return n?r({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?r({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?r({month:"numeric"},"month"):this.num(t.month);case"MM":return n?r({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?r({year:"numeric"},"year"):this.num(t.year);case"yy":return n?r({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?r({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?r({year:"numeric"},"year"):this.num(t.year,6);case"G":return p("short");case"GG":return p("long");case"GGGGG":return p("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return h(g)}};return CS(Yt.parseFormat(i),m)}formatDurationFromString(t,i){const s=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=l=>c=>{const h=s(c);return h?this.num(l.get(h),c.length):c},r=Yt.parseFormat(i),o=r.reduce((l,{literal:c,val:h})=>c?l:l.concat(h),[]),a=t.shiftTo(...o.map(s).filter(l=>l));return CS(r,n(a))}}const cE=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Nc(...e){const t=e.reduce((i,s)=>i+s.source,"");return RegExp(`^${t}$`)}function Fc(...e){return t=>e.reduce(([i,s,n],r)=>{const[o,a,l]=r(t,n);return[{...i,...o},a||s,l]},[{},null,1]).slice(0,2)}function jc(e,...t){if(e==null)return[null,null];for(const[i,s]of t){const n=i.exec(e);if(n)return s(n)}return[null,null]}function uE(...e){return(t,i)=>{const s={};let n;for(n=0;n<e.length;n++)s[e[n]]=Qr(t[i+n]);return[s,null,i+n]}}const hE=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,a7=`(?:${hE.source}?(?:\\[(${cE.source})\\])?)?`,rw=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,dE=RegExp(`${rw.source}${a7}`),ow=RegExp(`(?:T${dE.source})?`),l7=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,c7=/(\d{4})-?W(\d\d)(?:-?(\d))?/,u7=/(\d{4})-?(\d{3})/,h7=uE("weekYear","weekNumber","weekDay"),d7=uE("year","ordinal"),p7=/(\d{4})-(\d\d)-(\d\d)/,pE=RegExp(`${rw.source} ?(?:${hE.source}|(${cE.source}))?`),f7=RegExp(`(?: ${pE.source})?`);function rc(e,t,i){const s=e[t];return he(s)?i:Qr(s)}function m7(e,t){return[{year:rc(e,t),month:rc(e,t+1,1),day:rc(e,t+2,1)},null,t+3]}function zc(e,t){return[{hours:rc(e,t,0),minutes:rc(e,t+1,0),seconds:rc(e,t+2,0),milliseconds:sw(e[t+3])},null,t+4]}function Sd(e,t){const i=!e[t]&&!e[t+1],s=Vg(e[t+1],e[t+2]),n=i?null:Jt.instance(s);return[{},n,t+3]}function Md(e,t){const i=e[t]?Ls.create(e[t]):null;return[{},i,t+1]}const g7=RegExp(`^T?${rw.source}$`),y7=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function v7(e){const[t,i,s,n,r,o,a,l,c]=e,h=t[0]==="-",p=l&&l[0]==="-",m=(g,y=!1)=>g!==void 0&&(y||g&&h)?-g:g;return[{years:m(zo(i)),months:m(zo(s)),weeks:m(zo(n)),days:m(zo(r)),hours:m(zo(o)),minutes:m(zo(a)),seconds:m(zo(l),l==="-0"),milliseconds:m(sw(c),p)}]}const b7={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function aw(e,t,i,s,n,r,o){const a={year:t.length===2?j1(Qr(t)):Qr(t),month:iE.indexOf(i)+1,day:Qr(s),hour:Qr(n),minute:Qr(r)};return o&&(a.second=Qr(o)),e&&(a.weekday=e.length>3?nE.indexOf(e)+1:rE.indexOf(e)+1),a}const _7=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function w7(e){const[,t,i,s,n,r,o,a,l,c,h,p]=e,m=aw(t,n,s,i,r,o,a);let g;return l?g=b7[l]:c?g=0:g=Vg(h,p),[m,new Jt(g)]}function x7(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const S7=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,M7=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,$7=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function IS(e){const[,t,i,s,n,r,o,a]=e;return[aw(t,n,s,i,r,o,a),Jt.utcInstance]}function T7(e){const[,t,i,s,n,r,o,a]=e;return[aw(t,a,i,s,n,r,o),Jt.utcInstance]}const k7=Nc(l7,ow),P7=Nc(c7,ow),O7=Nc(u7,ow),E7=Nc(dE),fE=Fc(m7,zc,Sd,Md),A7=Fc(h7,zc,Sd,Md),C7=Fc(d7,zc,Sd,Md),I7=Fc(zc,Sd,Md);function L7(e){return jc(e,[k7,fE],[P7,A7],[O7,C7],[E7,I7])}function R7(e){return jc(x7(e),[_7,w7])}function D7(e){return jc(e,[S7,IS],[M7,IS],[$7,T7])}function N7(e){return jc(e,[y7,v7])}const F7=Fc(zc);function j7(e){return jc(e,[g7,F7])}const z7=Nc(p7,f7),V7=Nc(pE),U7=Fc(zc,Sd,Md);function W7(e){return jc(e,[z7,fE],[V7,U7])}const LS="Invalid Duration",mE={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},B7={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...mE},Vi=146097/400,pl=146097/4800,H7={years:{quarters:4,months:12,weeks:Vi/7,days:Vi,hours:Vi*24,minutes:Vi*24*60,seconds:Vi*24*60*60,milliseconds:Vi*24*60*60*1e3},quarters:{months:3,weeks:Vi/28,days:Vi/4,hours:Vi*24/4,minutes:Vi*24*60/4,seconds:Vi*24*60*60/4,milliseconds:Vi*24*60*60*1e3/4},months:{weeks:pl/7,days:pl,hours:pl*24,minutes:pl*24*60,seconds:pl*24*60*60,milliseconds:pl*24*60*60*1e3},...mE},Ea=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],G7=Ea.slice(0).reverse();function Tr(e,t,i=!1){const s={values:i?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Se(s)}function gE(e,t){let i=t.milliseconds??0;for(const s of G7.slice(1))t[s]&&(i+=t[s]*e[s].milliseconds);return i}function RS(e,t){const i=gE(e,t)<0?-1:1;Ea.reduceRight((s,n)=>{if(he(t[n]))return s;if(s){const r=t[s]*i,o=e[n][s],a=Math.floor(r/o);t[n]+=a*i,t[s]-=a*o*i}return n},null),Ea.reduce((s,n)=>{if(he(t[n]))return s;if(s){const r=t[s]%1;t[s]-=r,t[n]+=r*e[s][n]}return n},null)}function q7(e){const t={};for(const[i,s]of Object.entries(e))s!==0&&(t[i]=s);return t}class Se{constructor(t){const i=t.conversionAccuracy==="longterm"||!1;let s=i?H7:B7;t.matrix&&(s=t.matrix),this.values=t.values,this.loc=t.loc||Ne.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(t,i){return Se.fromObject({milliseconds:t},i)}static fromObject(t,i={}){if(t==null||typeof t!="object")throw new bi(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Se({values:Mm(t,Se.normalizeUnit),loc:Ne.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(t){if(Na(t))return Se.fromMillis(t);if(Se.isDuration(t))return t;if(typeof t=="object")return Se.fromObject(t);throw new bi(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,i){const[s]=N7(t);return s?Se.fromObject(s,i):Se.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,i){const[s]=j7(t);return s?Se.fromObject(s,i):Se.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,i=null){if(!t)throw new bi("need to specify a reason the Duration is invalid");const s=t instanceof Ps?t:new Ps(t,i);if(gt.throwOnInvalid)throw new _j(s);return new Se({invalid:s})}static normalizeUnit(t){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!i)throw new TO(t);return i}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,i={}){const s={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Yt.create(this.loc,s).formatDurationFromString(this,t):LS}toHuman(t={}){if(!this.isValid)return LS;const i=Ea.map(s=>{const n=this.values[s];return he(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:s.slice(0,-1)}).format(n)}).filter(s=>s);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=nw(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},oe.fromMillis(i,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?gE(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const i=Se.fromDurationLike(t),s={};for(const n of Ea)(xc(i.values,n)||xc(this.values,n))&&(s[n]=i.get(n)+this.get(n));return Tr(this,{values:s},!0)}minus(t){if(!this.isValid)return this;const i=Se.fromDurationLike(t);return this.plus(i.negate())}mapUnits(t){if(!this.isValid)return this;const i={};for(const s of Object.keys(this.values))i[s]=tE(t(this.values[s],s));return Tr(this,{values:i},!0)}get(t){return this[Se.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const i={...this.values,...Mm(t,Se.normalizeUnit)};return Tr(this,{values:i})}reconfigure({locale:t,numberingSystem:i,conversionAccuracy:s,matrix:n}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:i}),matrix:n,conversionAccuracy:s};return Tr(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return RS(this.matrix,t),Tr(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=q7(this.normalize().shiftToAll().toObject());return Tr(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>Se.normalizeUnit(o));const i={},s={},n=this.toObject();let r;for(const o of Ea)if(t.indexOf(o)>=0){r=o;let a=0;for(const c in s)a+=this.matrix[c][o]*s[c],s[c]=0;Na(n[o])&&(a+=n[o]);const l=Math.trunc(a);i[o]=l,s[o]=(a*1e3-l*1e3)/1e3}else Na(n[o])&&(s[o]=n[o]);for(const o in s)s[o]!==0&&(i[r]+=o===r?s[o]:s[o]/this.matrix[r][o]);return RS(this.matrix,i),Tr(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=this.values[i]===0?0:-this.values[i];return Tr(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function i(s,n){return s===void 0||s===0?n===void 0||n===0:s===n}for(const s of Ea)if(!i(this.values[s],t.values[s]))return!1;return!0}}const fl="Invalid Interval";function Y7(e,t){return!e||!e.isValid?ut.invalid("missing or invalid start"):!t||!t.isValid?ut.invalid("missing or invalid end"):t<e?ut.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class ut{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,i=null){if(!t)throw new bi("need to specify a reason the Interval is invalid");const s=t instanceof Ps?t:new Ps(t,i);if(gt.throwOnInvalid)throw new bj(s);return new ut({invalid:s})}static fromDateTimes(t,i){const s=Zc(t),n=Zc(i),r=Y7(s,n);return r??new ut({start:s,end:n})}static after(t,i){const s=Se.fromDurationLike(i),n=Zc(t);return ut.fromDateTimes(n,n.plus(s))}static before(t,i){const s=Se.fromDurationLike(i),n=Zc(t);return ut.fromDateTimes(n.minus(s),n)}static fromISO(t,i){const[s,n]=(t||"").split("/",2);if(s&&n){let r,o;try{r=oe.fromISO(s,i),o=r.isValid}catch{o=!1}let a,l;try{a=oe.fromISO(n,i),l=a.isValid}catch{l=!1}if(o&&l)return ut.fromDateTimes(r,a);if(o){const c=Se.fromISO(n,i);if(c.isValid)return ut.after(r,c)}else if(l){const c=Se.fromISO(s,i);if(c.isValid)return ut.before(a,c)}}return ut.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",i){if(!this.isValid)return NaN;const s=this.start.startOf(t,i);let n;return i?.useLocaleWeeks?n=this.end.reconfigure({locale:s.locale}):n=this.end,n=n.startOf(t,i),Math.floor(n.diff(s,t).get(t))+(n.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:i}={}){return this.isValid?ut.fromDateTimes(t||this.s,i||this.e):this}splitAt(...t){if(!this.isValid)return[];const i=t.map(Zc).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),s=[];let{s:n}=this,r=0;for(;n<this.e;){const o=i[r]||this.e,a=+o>+this.e?this.e:o;s.push(ut.fromDateTimes(n,a)),n=a,r+=1}return s}splitBy(t){const i=Se.fromDurationLike(t);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s}=this,n=1,r;const o=[];for(;s<this.e;){const a=this.start.plus(i.mapUnits(l=>l*n));r=+a>+this.e?this.e:a,o.push(ut.fromDateTimes(s,r)),s=r,n+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const i=this.s>t.s?this.s:t.s,s=this.e<t.e?this.e:t.e;return i>=s?null:ut.fromDateTimes(i,s)}union(t){if(!this.isValid)return this;const i=this.s<t.s?this.s:t.s,s=this.e>t.e?this.e:t.e;return ut.fromDateTimes(i,s)}static merge(t){const[i,s]=t.sort((n,r)=>n.s-r.s).reduce(([n,r],o)=>r?r.overlaps(o)||r.abutsStart(o)?[n,r.union(o)]:[n.concat([r]),o]:[n,o],[[],null]);return s&&i.push(s),i}static xor(t){let i=null,s=0;const n=[],r=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...r),a=o.sort((l,c)=>l.time-c.time);for(const l of a)s+=l.type==="s"?1:-1,s===1?i=l.time:(i&&+i!=+l.time&&n.push(ut.fromDateTimes(i,l.time)),i=null);return ut.merge(n)}difference(...t){return ut.xor([this].concat(t)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:fl}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=wm,i={}){return this.isValid?Yt.create(this.s.loc.clone(i),t).formatInterval(this):fl}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:fl}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:fl}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:fl}toFormat(t,{separator:i=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(t)}${i}${this.e.toFormat(t)}`:fl}toDuration(t,i){return this.isValid?this.e.diff(this.s,t,i):Se.invalid(this.invalidReason)}mapEndpoints(t){return ut.fromDateTimes(t(this.s),t(this.e))}}class np{static hasDST(t=gt.defaultZone){const i=oe.now().setZone(t).set({month:12});return!t.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(t){return Ls.isValidZone(t)}static normalizeZone(t){return ro(t,gt.defaultZone)}static getStartOfWeek({locale:t=null,locObj:i=null}={}){return(i||Ne.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:i=null}={}){return(i||Ne.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:i=null}={}){return(i||Ne.create(t)).getWeekendDays().slice()}static months(t="long",{locale:i=null,numberingSystem:s=null,locObj:n=null,outputCalendar:r="gregory"}={}){return(n||Ne.create(i,s,r)).months(t)}static monthsFormat(t="long",{locale:i=null,numberingSystem:s=null,locObj:n=null,outputCalendar:r="gregory"}={}){return(n||Ne.create(i,s,r)).months(t,!0)}static weekdays(t="long",{locale:i=null,numberingSystem:s=null,locObj:n=null}={}){return(n||Ne.create(i,s,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:i=null,numberingSystem:s=null,locObj:n=null}={}){return(n||Ne.create(i,s,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Ne.create(t).meridiems()}static eras(t="short",{locale:i=null}={}){return Ne.create(i,null,"gregory").eras(t)}static features(){return{relative:KO(),localeWeek:QO()}}}function DS(e,t){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=i(t)-i(e);return Math.floor(Se.fromMillis(s).as("days"))}function Z7(e,t,i){const s=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const h=DS(l,c);return(h-h%7)/7}],["days",DS]],n={},r=e;let o,a;for(const[l,c]of s)i.indexOf(l)>=0&&(o=l,n[l]=c(e,t),a=r.plus(n),a>t?(n[l]--,e=r.plus(n),e>t&&(a=e,n[l]--,e=r.plus(n))):e=a);return[e,n,a,o]}function J7(e,t,i,s){let[n,r,o,a]=Z7(e,t,i);const l=t-n,c=i.filter(p=>["hours","minutes","seconds","milliseconds"].indexOf(p)>=0);c.length===0&&(o<t&&(o=n.plus({[a]:1})),o!==n&&(r[a]=(r[a]||0)+l/(o-n)));const h=Se.fromObject(r,s);return c.length>0?Se.fromMillis(l,s).shiftTo(...c).plus(h):h}const lw={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},NS={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},X7=lw.hanidec.replace(/[\[|\]]/g,"").split("");function K7(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);if(e[i].search(lw.hanidec)!==-1)t+=X7.indexOf(e[i]);else for(const n in NS){const[r,o]=NS[n];s>=r&&s<=o&&(t+=s-r)}}return parseInt(t,10)}else return t}function ds({numberingSystem:e},t=""){return new RegExp(`${lw[e||"latn"]}${t}`)}const Q7="missing Intl.DateTimeFormat.formatToParts support";function Oe(e,t=i=>i){return{regex:e,deser:([i])=>t(K7(i))}}const ez=String.fromCharCode(160),yE=`[ ${ez}]`,vE=new RegExp(yE,"g");function tz(e){return e.replace(/\./g,"\\.?").replace(vE,yE)}function FS(e){return e.replace(/\./g,"").replace(vE," ").toLowerCase()}function ps(e,t){return e===null?null:{regex:RegExp(e.map(tz).join("|")),deser:([i])=>e.findIndex(s=>FS(i)===FS(s))+t}}function jS(e,t){return{regex:e,deser:([,i,s])=>Vg(i,s),groups:t}}function rp(e){return{regex:e,deser:([t])=>t}}function iz(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function sz(e,t){const i=ds(t),s=ds(t,"{2}"),n=ds(t,"{3}"),r=ds(t,"{4}"),o=ds(t,"{6}"),a=ds(t,"{1,2}"),l=ds(t,"{1,3}"),c=ds(t,"{1,6}"),h=ds(t,"{1,9}"),p=ds(t,"{2,4}"),m=ds(t,"{4,6}"),g=b=>({regex:RegExp(iz(b.val)),deser:([w])=>w,literal:!0}),v=(b=>{if(e.literal)return g(b);switch(b.val){case"G":return ps(t.eras("short"),0);case"GG":return ps(t.eras("long"),0);case"y":return Oe(c);case"yy":return Oe(p,j1);case"yyyy":return Oe(r);case"yyyyy":return Oe(m);case"yyyyyy":return Oe(o);case"M":return Oe(a);case"MM":return Oe(s);case"MMM":return ps(t.months("short",!0),1);case"MMMM":return ps(t.months("long",!0),1);case"L":return Oe(a);case"LL":return Oe(s);case"LLL":return ps(t.months("short",!1),1);case"LLLL":return ps(t.months("long",!1),1);case"d":return Oe(a);case"dd":return Oe(s);case"o":return Oe(l);case"ooo":return Oe(n);case"HH":return Oe(s);case"H":return Oe(a);case"hh":return Oe(s);case"h":return Oe(a);case"mm":return Oe(s);case"m":return Oe(a);case"q":return Oe(a);case"qq":return Oe(s);case"s":return Oe(a);case"ss":return Oe(s);case"S":return Oe(l);case"SSS":return Oe(n);case"u":return rp(h);case"uu":return rp(a);case"uuu":return Oe(i);case"a":return ps(t.meridiems(),0);case"kkkk":return Oe(r);case"kk":return Oe(p,j1);case"W":return Oe(a);case"WW":return Oe(s);case"E":case"c":return Oe(i);case"EEE":return ps(t.weekdays("short",!1),1);case"EEEE":return ps(t.weekdays("long",!1),1);case"ccc":return ps(t.weekdays("short",!0),1);case"cccc":return ps(t.weekdays("long",!0),1);case"Z":case"ZZ":return jS(new RegExp(`([+-]${a.source})(?::(${s.source}))?`),2);case"ZZZ":return jS(new RegExp(`([+-]${a.source})(${s.source})?`),2);case"z":return rp(/[a-z_+-/]{1,256}?/i);case" ":return rp(/[^\S\n\r]/);default:return g(b)}})(e)||{invalidReason:Q7};return v.token=e,v}const nz={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function rz(e,t,i){const{type:s,value:n}=e;if(s==="literal"){const l=/^\s+$/.test(n);return{literal:!l,val:l?" ":n}}const r=t[s];let o=s;s==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let a=nz[o];if(typeof a=="object"&&(a=a[r]),a)return{literal:!1,val:a}}function oz(e){return[`^${e.map(i=>i.regex).reduce((i,s)=>`${i}(${s.source})`,"")}$`,e]}function az(e,t,i){const s=e.match(t);if(s){const n={};let r=1;for(const o in i)if(xc(i,o)){const a=i[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(s.slice(r,r+l))),r+=l}return[s,n]}else return[s,{}]}function lz(e){const t=r=>{switch(r){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,s;return he(e.z)||(i=Ls.create(e.z)),he(e.Z)||(i||(i=new Jt(e.Z)),s=e.Z),he(e.q)||(e.M=(e.q-1)*3+1),he(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),he(e.u)||(e.S=sw(e.u)),[Object.keys(e).reduce((r,o)=>{const a=t(o);return a&&(r[a]=e[o]),r},{}),i,s]}let Jy=null;function cz(){return Jy||(Jy=oe.fromMillis(1555555555555)),Jy}function uz(e,t){if(e.literal)return e;const i=Yt.macroTokenToFormatOpts(e.val),s=wE(i,t);return s==null||s.includes(void 0)?e:s}function bE(e,t){return Array.prototype.concat(...e.map(i=>uz(i,t)))}function _E(e,t,i){const s=bE(Yt.parseFormat(i),e),n=s.map(o=>sz(o,e)),r=n.find(o=>o.invalidReason);if(r)return{input:t,tokens:s,invalidReason:r.invalidReason};{const[o,a]=oz(n),l=RegExp(o,"i"),[c,h]=az(t,l,a),[p,m,g]=h?lz(h):[null,null,void 0];if(xc(h,"a")&&xc(h,"H"))throw new Yl("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:s,regex:l,rawMatches:c,matches:h,result:p,zone:m,specificOffset:g}}}function hz(e,t,i){const{result:s,zone:n,specificOffset:r,invalidReason:o}=_E(e,t,i);return[s,n,r,o]}function wE(e,t){if(!e)return null;const s=Yt.create(t,e).dtFormatter(cz()),n=s.formatToParts(),r=s.resolvedOptions();return n.map(o=>rz(o,e,r))}const Xy="Invalid DateTime",zS=864e13;function op(e){return new Ps("unsupported zone",`the zone "${e.name}" is not supported`)}function Ky(e){return e.weekData===null&&(e.weekData=xm(e.c)),e.weekData}function Qy(e){return e.localWeekData===null&&(e.localWeekData=xm(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Vo(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new oe({...i,...t,old:i})}function xE(e,t,i){let s=e-t*60*1e3;const n=i.offset(s);if(t===n)return[s,t];s-=(n-t)*60*1e3;const r=i.offset(s);return n===r?[s,n]:[e-Math.min(n,r)*60*1e3,Math.max(n,r)]}function ap(e,t){e+=t*60*1e3;const i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function lf(e,t,i){return xE(zg(e),t,i)}function VS(e,t){const i=e.o,s=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,r={...e.c,year:s,month:n,day:Math.min(e.c.day,Sm(s,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=Se.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=zg(r);let[l,c]=xE(a,i,e.zone);return o!==0&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function Yc(e,t,i,s,n,r){const{setZone:o,zone:a}=i;if(e&&Object.keys(e).length!==0||t){const l=t||a,c=oe.fromObject(e,{...i,zone:l,specificOffset:r});return o?c:c.setZone(a)}else return oe.invalid(new Ps("unparsable",`the input "${n}" can't be parsed as ${s}`))}function lp(e,t,i=!0){return e.isValid?Yt.create(Ne.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function e0(e,t){const i=e.c.year>9999||e.c.year<0;let s="";return i&&e.c.year>=0&&(s+="+"),s+=St(e.c.year,i?6:4),t?(s+="-",s+=St(e.c.month),s+="-",s+=St(e.c.day)):(s+=St(e.c.month),s+=St(e.c.day)),s}function US(e,t,i,s,n,r){let o=St(e.c.hour);return t?(o+=":",o+=St(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!i)&&(o+=":")):o+=St(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!i)&&(o+=St(e.c.second),(e.c.millisecond!==0||!s)&&(o+=".",o+=St(e.c.millisecond,3))),n&&(e.isOffsetFixed&&e.offset===0&&!r?o+="Z":e.o<0?(o+="-",o+=St(Math.trunc(-e.o/60)),o+=":",o+=St(Math.trunc(-e.o%60))):(o+="+",o+=St(Math.trunc(e.o/60)),o+=":",o+=St(Math.trunc(e.o%60)))),r&&(o+="["+e.zone.ianaName+"]"),o}const SE={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},dz={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},pz={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ME=["year","month","day","hour","minute","second","millisecond"],fz=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],mz=["year","ordinal","hour","minute","second","millisecond"];function gz(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new TO(e);return t}function WS(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return gz(e)}}function BS(e,t){const i=ro(t.zone,gt.defaultZone),s=Ne.fromObject(t),n=gt.now();let r,o;if(he(e.year))r=n;else{for(const c of ME)he(e[c])&&(e[c]=SE[c]);const a=JO(e)||XO(e);if(a)return oe.invalid(a);const l=i.offset(n);[r,o]=lf(e,l,i)}return new oe({ts:r,zone:i,loc:s,o})}function HS(e,t,i){const s=he(i.round)?!0:i.round,n=(o,a)=>(o=nw(o,s||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(o,a)),r=o=>i.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(i.unit)return n(r(i.unit),i.unit);for(const o of i.units){const a=r(o);if(Math.abs(a)>=1)return n(a,o)}return n(e>t?-0:0,i.units[i.units.length-1])}function GS(e){let t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}class oe{constructor(t){const i=t.zone||gt.defaultZone;let s=t.invalid||(Number.isNaN(t.ts)?new Ps("invalid input"):null)||(i.isValid?null:op(i));this.ts=he(t.ts)?gt.now():t.ts;let n=null,r=null;if(!s)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(i))[n,r]=[t.old.c,t.old.o];else{const a=i.offset(this.ts);n=ap(this.ts,a),s=Number.isNaN(n.year)?new Ps("invalid input"):null,n=s?null:n,r=s?null:a}this._zone=i,this.loc=t.loc||Ne.create(),this.invalid=s,this.weekData=null,this.localWeekData=null,this.c=n,this.o=r,this.isLuxonDateTime=!0}static now(){return new oe({})}static local(){const[t,i]=GS(arguments),[s,n,r,o,a,l,c]=i;return BS({year:s,month:n,day:r,hour:o,minute:a,second:l,millisecond:c},t)}static utc(){const[t,i]=GS(arguments),[s,n,r,o,a,l,c]=i;return t.zone=Jt.utcInstance,BS({year:s,month:n,day:r,hour:o,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,i={}){const s=Hj(t)?t.valueOf():NaN;if(Number.isNaN(s))return oe.invalid("invalid input");const n=ro(i.zone,gt.defaultZone);return n.isValid?new oe({ts:s,zone:n,loc:Ne.fromObject(i)}):oe.invalid(op(n))}static fromMillis(t,i={}){if(Na(t))return t<-zS||t>zS?oe.invalid("Timestamp out of range"):new oe({ts:t,zone:ro(i.zone,gt.defaultZone),loc:Ne.fromObject(i)});throw new bi(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,i={}){if(Na(t))return new oe({ts:t*1e3,zone:ro(i.zone,gt.defaultZone),loc:Ne.fromObject(i)});throw new bi("fromSeconds requires a numerical input")}static fromObject(t,i={}){t=t||{};const s=ro(i.zone,gt.defaultZone);if(!s.isValid)return oe.invalid(op(s));const n=Ne.fromObject(i),r=Mm(t,WS),{minDaysInFirstWeek:o,startOfWeek:a}=OS(r,n),l=gt.now(),c=he(i.specificOffset)?s.offset(l):i.specificOffset,h=!he(r.ordinal),p=!he(r.year),m=!he(r.month)||!he(r.day),g=p||m,y=r.weekYear||r.weekNumber;if((g||h)&&y)throw new Yl("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&h)throw new Yl("Can't mix ordinal dates with month/day");const v=y||r.weekday&&!g;let b,w,x=ap(l,c);v?(b=fz,w=dz,x=xm(x,o,a)):h?(b=mz,w=pz,x=Zy(x)):(b=ME,w=SE);let $=!1;for(const N of b){const U=r[N];he(U)?$?r[N]=w[N]:r[N]=x[N]:$=!0}const S=v?Uj(r,o,a):h?Wj(r):JO(r),M=S||XO(r);if(M)return oe.invalid(M);const P=v?kS(r,o,a):h?PS(r):r,[C,I]=lf(P,c,s),D=new oe({ts:C,zone:s,o:I,loc:n});return r.weekday&&g&&t.weekday!==D.weekday?oe.invalid("mismatched weekday",`you can't specify both a weekday of ${r.weekday} and a date of ${D.toISO()}`):D}static fromISO(t,i={}){const[s,n]=L7(t);return Yc(s,n,i,"ISO 8601",t)}static fromRFC2822(t,i={}){const[s,n]=R7(t);return Yc(s,n,i,"RFC 2822",t)}static fromHTTP(t,i={}){const[s,n]=D7(t);return Yc(s,n,i,"HTTP",i)}static fromFormat(t,i,s={}){if(he(t)||he(i))throw new bi("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:r=null}=s,o=Ne.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0}),[a,l,c,h]=hz(o,t,i);return h?oe.invalid(h):Yc(a,l,s,`format ${i}`,t,c)}static fromString(t,i,s={}){return oe.fromFormat(t,i,s)}static fromSQL(t,i={}){const[s,n]=W7(t);return Yc(s,n,i,"SQL",t)}static invalid(t,i=null){if(!t)throw new bi("need to specify a reason the DateTime is invalid");const s=t instanceof Ps?t:new Ps(t,i);if(gt.throwOnInvalid)throw new vj(s);return new oe({invalid:s})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,i={}){const s=wE(t,Ne.fromObject(i));return s?s.map(n=>n?n.val:null).join(""):null}static expandFormat(t,i={}){return bE(Yt.parseFormat(t),Ne.fromObject(i)).map(n=>n.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Ky(this).weekYear:NaN}get weekNumber(){return this.isValid?Ky(this).weekNumber:NaN}get weekday(){return this.isValid?Ky(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Qy(this).weekday:NaN}get localWeekNumber(){return this.isValid?Qy(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Qy(this).weekYear:NaN}get ordinal(){return this.isValid?Zy(this.c).ordinal:NaN}get monthShort(){return this.isValid?np.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?np.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?np.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?np.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,i=6e4,s=zg(this.c),n=this.zone.offset(s-t),r=this.zone.offset(s+t),o=this.zone.offset(s-n*i),a=this.zone.offset(s-r*i);if(o===a)return[this];const l=s-o*i,c=s-a*i,h=ap(l,o),p=ap(c,a);return h.hour===p.hour&&h.minute===p.minute&&h.second===p.second&&h.millisecond===p.millisecond?[Vo(this,{ts:l}),Vo(this,{ts:c})]:[this]}get isInLeapYear(){return xd(this.year)}get daysInMonth(){return Sm(this.year,this.month)}get daysInYear(){return this.isValid?nc(this.year):NaN}get weeksInWeekYear(){return this.isValid?Wh(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Wh(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:i,numberingSystem:s,calendar:n}=Yt.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:i,numberingSystem:s,outputCalendar:n}}toUTC(t=0,i={}){return this.setZone(Jt.instance(t),i)}toLocal(){return this.setZone(gt.defaultZone)}setZone(t,{keepLocalTime:i=!1,keepCalendarTime:s=!1}={}){if(t=ro(t,gt.defaultZone),t.equals(this.zone))return this;if(t.isValid){let n=this.ts;if(i||s){const r=t.offset(this.ts),o=this.toObject();[n]=lf(o,r,t)}return Vo(this,{ts:n,zone:t})}else return oe.invalid(op(t))}reconfigure({locale:t,numberingSystem:i,outputCalendar:s}={}){const n=this.loc.clone({locale:t,numberingSystem:i,outputCalendar:s});return Vo(this,{loc:n})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const i=Mm(t,WS),{minDaysInFirstWeek:s,startOfWeek:n}=OS(i,this.loc),r=!he(i.weekYear)||!he(i.weekNumber)||!he(i.weekday),o=!he(i.ordinal),a=!he(i.year),l=!he(i.month)||!he(i.day),c=a||l,h=i.weekYear||i.weekNumber;if((c||o)&&h)throw new Yl("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new Yl("Can't mix ordinal dates with month/day");let p;r?p=kS({...xm(this.c,s,n),...i},s,n):he(i.ordinal)?(p={...this.toObject(),...i},he(i.day)&&(p.day=Math.min(Sm(p.year,p.month),p.day))):p=PS({...Zy(this.c),...i});const[m,g]=lf(p,this.o,this.zone);return Vo(this,{ts:m,o:g})}plus(t){if(!this.isValid)return this;const i=Se.fromDurationLike(t);return Vo(this,VS(this,i))}minus(t){if(!this.isValid)return this;const i=Se.fromDurationLike(t).negate();return Vo(this,VS(this,i))}startOf(t,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const s={},n=Se.normalizeUnit(t);switch(n){case"years":s.month=1;case"quarters":case"months":s.day=1;case"weeks":case"days":s.hour=0;case"hours":s.minute=0;case"minutes":s.second=0;case"seconds":s.millisecond=0;break}if(n==="weeks")if(i){const r=this.loc.getStartOfWeek(),{weekday:o}=this;o<r&&(s.weekNumber=this.weekNumber-1),s.weekday=r}else s.weekday=1;if(n==="quarters"){const r=Math.ceil(this.month/3);s.month=(r-1)*3+1}return this.set(s)}endOf(t,i){return this.isValid?this.plus({[t]:1}).startOf(t,i).minus(1):this}toFormat(t,i={}){return this.isValid?Yt.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,t):Xy}toLocaleString(t=wm,i={}){return this.isValid?Yt.create(this.loc.clone(i),t).formatDateTime(this):Xy}toLocaleParts(t={}){return this.isValid?Yt.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:i=!1,suppressMilliseconds:s=!1,includeOffset:n=!0,extendedZone:r=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=e0(this,o);return a+="T",a+=US(this,o,i,s,n,r),a}toISODate({format:t="extended"}={}){return this.isValid?e0(this,t==="extended"):null}toISOWeekDate(){return lp(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:i=!1,includeOffset:s=!0,includePrefix:n=!1,extendedZone:r=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+US(this,o==="extended",i,t,s,r):null}toRFC2822(){return lp(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return lp(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?e0(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:i=!1,includeOffsetSpace:s=!0}={}){let n="HH:mm:ss.SSS";return(i||t)&&(s&&(n+=" "),i?n+="z":t&&(n+="ZZ")),lp(this,n,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Xy}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const i={...this.c};return t.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,i="milliseconds",s={}){if(!this.isValid||!t.isValid)return Se.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...s},r=Gj(i).map(Se.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,c=J7(a,l,r,n);return o?c.negate():c}diffNow(t="milliseconds",i={}){return this.diff(oe.now(),t,i)}until(t){return this.isValid?ut.fromDateTimes(this,t):this}hasSame(t,i,s){if(!this.isValid)return!1;const n=t.valueOf(),r=this.setZone(t.zone,{keepLocalTime:!0});return r.startOf(i,s)<=n&&n<=r.endOf(i,s)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const i=t.base||oe.fromObject({},{zone:this.zone}),s=t.padding?this<i?-t.padding:t.padding:0;let n=["years","months","days","hours","minutes","seconds"],r=t.unit;return Array.isArray(t.unit)&&(n=t.unit,r=void 0),HS(i,this.plus(s),{...t,numeric:"always",units:n,unit:r})}toRelativeCalendar(t={}){return this.isValid?HS(t.base||oe.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(oe.isDateTime))throw new bi("min requires all arguments be DateTimes");return ES(t,i=>i.valueOf(),Math.min)}static max(...t){if(!t.every(oe.isDateTime))throw new bi("max requires all arguments be DateTimes");return ES(t,i=>i.valueOf(),Math.max)}static fromFormatExplain(t,i,s={}){const{locale:n=null,numberingSystem:r=null}=s,o=Ne.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0});return _E(o,t,i)}static fromStringExplain(t,i,s={}){return oe.fromFormatExplain(t,i,s)}static get DATE_SHORT(){return wm}static get DATE_MED(){return kO}static get DATE_MED_WITH_WEEKDAY(){return wj}static get DATE_FULL(){return PO}static get DATE_HUGE(){return OO}static get TIME_SIMPLE(){return EO}static get TIME_WITH_SECONDS(){return AO}static get TIME_WITH_SHORT_OFFSET(){return CO}static get TIME_WITH_LONG_OFFSET(){return IO}static get TIME_24_SIMPLE(){return LO}static get TIME_24_WITH_SECONDS(){return RO}static get TIME_24_WITH_SHORT_OFFSET(){return DO}static get TIME_24_WITH_LONG_OFFSET(){return NO}static get DATETIME_SHORT(){return FO}static get DATETIME_SHORT_WITH_SECONDS(){return jO}static get DATETIME_MED(){return zO}static get DATETIME_MED_WITH_SECONDS(){return VO}static get DATETIME_MED_WITH_WEEKDAY(){return xj}static get DATETIME_FULL(){return UO}static get DATETIME_FULL_WITH_SECONDS(){return WO}static get DATETIME_HUGE(){return BO}static get DATETIME_HUGE_WITH_SECONDS(){return HO}}function Zc(e){if(oe.isDateTime(e))return e;if(e&&e.valueOf&&Na(e.valueOf()))return oe.fromJSDate(e);if(e&&typeof e=="object")return oe.fromObject(e);throw new bi(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const fn="system",cw="unknown",Bh="UTC",yz=Intl.DateTimeFormat().resolvedOptions().timeZone,vz="shortOffset";function bz(e){return"timeZoneIANA"in e}function _z(e){return e.startsWith("UTC")}function Kce(e,t=!1){return{json:{read:{source:e,reader:(i,s)=>s[e]?wz(s[e]):null},write:!!t&&{allowNull:!0,writer(i,s){s[e]=i?xz(i):null}}}}}function wz(e,t=fn){return e?bz(e)?e.timeZoneIANA:Sz(e,t):t}function xz(e){return{timeZoneIANA:e}}function Sz(e,t=fn){if(!e||!gS.has(e.timeZone))return t;const i=gS.get(e.timeZone);return _z(e.timeZone)||e.respectsDaylightSaving?i:Mz(i)}function Mz(e){const t=oe.local().setZone(e),i=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Jt.instance(-i).formatOffset(0,"narrow")}`}function Qce(e,t,i,s,n){if(t&&n==="date")return{timeZone:Bh,timeZoneName:void 0};const r=s.timeStyle||s.hour,o=i===cw;return{timeZone:o?n==="timestamp-offset"?void 0:e??Bh:i,timeZoneName:o&&r?vz:void 0}}const $z={year:void 0,month:void 0,day:void 0,weekday:void 0},Tz={hour:void 0,minute:void 0,second:void 0},$E={timeZone:Bh},Fs={year:"numeric",month:"numeric",day:"numeric"},Jc={year:"numeric",month:"long",day:"numeric"},Xc={year:"numeric",month:"short",day:"numeric"},Kc={year:"numeric",month:"long",weekday:"long",day:"numeric"},eo={hour:"numeric",minute:"numeric"},ea={...eo,second:"numeric"},TE={hourCycle:"h23"},Qc={...eo,...TE},eu={...ea,...TE},kE={"short-date":Fs,"short-date-short-time":{...Fs,...eo},"short-date-short-time-24":{...Fs,...Qc},"short-date-long-time":{...Fs,...ea},"short-date-long-time-24":{...Fs,...eu},"short-date-le":Fs,"short-date-le-short-time":{...Fs,...eo},"short-date-le-short-time-24":{...Fs,...Qc},"short-date-le-long-time":{...Fs,...ea},"short-date-le-long-time-24":{...Fs,...eu},"long-month-day-year":Jc,"long-month-day-year-short-time":{...Jc,...eo},"long-month-day-year-short-time-24":{...Jc,...Qc},"long-month-day-year-long-time":{...Jc,...ea},"long-month-day-year-long-time-24":{...Jc,...eu},"day-short-month-year":Xc,"day-short-month-year-short-time":{...Xc,...eo},"day-short-month-year-short-time-24":{...Xc,...Qc},"day-short-month-year-long-time":{...Xc,...ea},"day-short-month-year-long-time-24":{...Xc,...eu},"long-date":Kc,"long-date-short-time":{...Kc,...eo},"long-date-short-time-24":{...Kc,...Qc},"long-date-long-time":{...Kc,...ea},"long-date-long-time-24":{...Kc,...eu},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":eo,"long-time":ea},kz=di()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),PE={ar:"ar-u-nu-latn-ca-gregory"};let z1=new WeakMap;const Wg=kE["short-date-short-time"];function Pz(e){let t=z1.get(e);if(!t){const i=Di(),s=PE[i]||i,n=hw(e.timeZone??fn),r={...e,timeZone:n};t=new Intl.DateTimeFormat(s,r),z1.set(e,t)}return t}function eue(e){return kE[e]}function uw(e,t=Wg){return Pz(t).format(e)}function tue(e,t=Wg){return uw(new Date(e),{...t,...$E,...Tz})}function iue(e,t=Wg){return uw(new Date(`1970-01-01T${e}Z`),{...t,...$E,...$z})}function sue(e,t=Wg){if(t.timeZone)return uw(new Date(e),t);const i=oe.fromISO(e,{setZone:!0}),s=Di(),n=PE[s]??s,r=i.offset===0?Bh:t.timeZone,o={...t,timeZone:r};return i.toLocaleString(o,{locale:n})}function hw(e){switch(e){case fn:return yz;case cw:return Bh;default:return e}}Y_(()=>{z1=new WeakMap});const Oz={ar:"ar-u-nu-latn"};let cf=new WeakMap,OE={};function Ez(e){const t=e||OE;if(!cf.has(t)){const i=Di(),s=Oz[Di()]||i;cf.set(t,new Intl.NumberFormat(s,e))}return cf.get(t)}function nue(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function rue(e,t){return Object.is(e,-0)&&(e=0),Ez(t).format(e)}Y_(()=>{cf=new WeakMap,OE={}});async function Az(e,t,i,s){const n=t.exec(i);if(!n)throw new V("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const r=n[1]?`${n[1]}/`:"",o=n[2],a=x8(s),l=`${r}${o}.json`,c=a?`${r}${o}_${a}.json`:l;let h;try{h=await qS(e(c))}catch(p){if(c===l)throw new V("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:p});try{h=await qS(e(l))}catch(m){throw new V("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:m})}}return h}async function qS(e){if(YS.fetchBundleAsset!=null)return YS.fetchBundleAsset(e);const t=await Dt(e,{responseType:"text"});return JSON.parse(t.data)}class Cz{constructor({base:t="",pattern:i,location:s=new URL(window.location.href)}){let n;n=typeof s=="string"?r=>new URL(r,new URL(s,window.location.href)).href:s instanceof URL?r=>new URL(r,s).href:s,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,i){return Az(this.getAssetUrl,this.matcher,t,i)}}function Iz(e){return new Cz(e)}const YS={};w8(Iz({pattern:"esri/",location:Pe}));function dw(e){return typeof e=="string"?document.getElementById(e):e??null}function EE(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function ZS(e,t){const i=t.parentNode;i&&i.insertBefore(e,t)}function JS(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}function le(e,t,i={}){return pw(e,t,i,AE)}function hr(e,t,i={}){return pw(e,t,i,CE)}function pw(e,t,i={},s){let n=null;const r=i.once?(o,a)=>{s(o)&&(et(n),t(o,a))}:(o,a)=>{s(o)&&t(o,a)};if(n=G4(e,r,i.sync,i.equals),i.initial){const o=e();r(o,o)}return n}function Ka(e,t,i,s={}){let n=null,r=null,o=null;function a(){n&&r&&(r.remove(),s.onListenerRemove?.(n),n=null,r=null)}function l(h){s.once&&s.once&&et(o),i(h)}const c=le(e,(h,p)=>{a(),vg(h)&&(n=h,r=fd(h,t,l),s.onListenerAdd?.(h))},{sync:s.sync,initial:!0});return o=Ee(()=>{c.remove(),a()}),o}function Bg(e,t){return Lz(e,CE,t)}function Lz(e,t,i){if(ur(i))return Promise.reject(_t());const s=e();if(t?.(s))return Promise.resolve(s);let n=null;function r(){n=et(n)}return new Promise((o,a)=>{n=ud([ns(i,()=>{r(),a(_t())}),pw(e,l=>{r(),o(l)},{sync:!1,once:!0},t??AE)])})}function AE(e){return!0}function CE(e){return!!e}const Qa={sync:!0},Qt={initial:!0},es={sync:!0,initial:!0},Rz="randomUUID"in crypto;function fw(){if(Rz)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function oue(){return`{${fw().toUpperCase()}}`}function aue(){return`{${fw()}}`}/*!
 * @esri/arcgis-html-sanitizer - v4.0.3 - Wed Jul 03 2024 17:50:35 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $m=function(){return $m=Object.assign||function(t){for(var i,s=1,n=arguments.length;s<n;s++){i=arguments[s];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},$m.apply(this,arguments)},V1={exports:{}},lt={},U1={exports:{}},al={};function IE(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Dz(e,t,i){}function Nz(e,t,i){}var Fz=/javascript\s*\:/img;function jz(e,t){return Fz.test(t)?"":t}al.whiteList=IE();al.getDefaultWhiteList=IE;al.onAttr=Dz;al.onIgnoreAttr=Nz;al.safeAttrValue=jz;var zz={indexOf:function(e,t){var i,s;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var s,n;if(Array.prototype.forEach)return e.forEach(t,i);for(s=0,n=e.length;s<n;s++)t.call(i,e[s],s,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},tu=zz;function Vz(e,t){e=tu.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,s=!1,n=0,r=0,o="";function a(){if(!s){var h=tu.trim(e.slice(n,r)),p=h.indexOf(":");if(p!==-1){var m=tu.trim(h.slice(0,p)),g=tu.trim(h.slice(p+1));if(m){var y=t(n,o.length,m,g,h);y&&(o+=y+"; ")}}}n=r+1}for(;r<i;r++){var l=e[r];if(l==="/"&&e[r+1]==="*"){var c=e.indexOf("*/",r+2);if(c===-1)break;r=c+1,n=r+1,s=!1}else l==="("?s=!0:l===")"?s=!1:l===";"?s||a():l===`
`&&a()}return tu.trim(o)}var Uz=Vz,cp=al,Wz=Uz;function XS(e){return e==null}function Bz(e){var t={};for(var i in e)t[i]=e[i];return t}function LE(e){e=Bz(e||{}),e.whiteList=e.whiteList||cp.whiteList,e.onAttr=e.onAttr||cp.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||cp.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||cp.safeAttrValue,this.options=e}LE.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,s=i.whiteList,n=i.onAttr,r=i.onIgnoreAttr,o=i.safeAttrValue,a=Wz(e,function(l,c,h,p,m){var g=s[h],y=!1;if(g===!0?y=g:typeof g=="function"?y=g(p):g instanceof RegExp&&(y=g.test(p)),y!==!0&&(y=!1),p=o(h,p),!!p){var v={position:c,sourcePosition:l,source:m,isWhite:y};if(y){var b=n(h,p,v);return XS(b)?h+":"+p:b}else{var b=r(h,p,v);if(!XS(b))return b}}});return a};var Hz=LE;(function(e,t){var i=al,s=Hz;function n(o,a){var l=new s(a);return l.process(o)}t=e.exports=n,t.FilterCSS=s;for(var r in i)t[r]=i[r]})(U1,U1.exports);var mw=U1.exports,gw={indexOf:function(e,t){var i,s;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var s,n;if(Array.prototype.forEach)return e.forEach(t,i);for(s=0,n=e.length;s<n;s++)t.call(i,e[s],s,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},Gz=mw.FilterCSS,qz=mw.getDefaultWhiteList,Tm=gw;function RE(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var DE=new Gz;function Yz(e,t,i){}function Zz(e,t,i){}function Jz(e,t,i){}function Xz(e,t,i){}function NE(e){return e.replace(Qz,"&lt;").replace(eV,"&gt;")}function Kz(e,t,i,s){if(i=WE(i),t==="href"||t==="src"){if(i=Tm.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(up.lastIndex=0,up.test(i))return""}else if(t==="style"){if(KS.lastIndex=0,KS.test(i)||(QS.lastIndex=0,QS.test(i)&&(up.lastIndex=0,up.test(i))))return"";s!==!1&&(s=s||DE,i=s.process(i))}return i=BE(i),i}var Qz=/</g,eV=/>/g,tV=/"/g,iV=/&quot;/g,sV=/&#([a-zA-Z0-9]*);?/gim,nV=/&colon;?/gim,rV=/&newline;?/gim,up=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,KS=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,QS=/u\s*r\s*l\s*\(.*/gi;function FE(e){return e.replace(tV,"&quot;")}function jE(e){return e.replace(iV,'"')}function zE(e){return e.replace(sV,function(i,s){return s[0]==="x"||s[0]==="X"?String.fromCharCode(parseInt(s.substr(1),16)):String.fromCharCode(parseInt(s,10))})}function VE(e){return e.replace(nV,":").replace(rV," ")}function UE(e){for(var t="",i=0,s=e.length;i<s;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return Tm.trim(t)}function WE(e){return e=jE(e),e=zE(e),e=VE(e),e=UE(e),e}function BE(e){return e=FE(e),e=NE(e),e}function oV(){return""}function aV(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function s(o){return i?!0:Tm.indexOf(e,o)!==-1}var n=[],r=!1;return{onIgnoreTag:function(o,a,l){if(s(o))if(l.isClosing){var c="[/removed]",h=l.position+c.length;return n.push([r!==!1?r:l.position,h]),r=!1,c}else return r||(r=l.position),"[removed]";else return t(o,a,l)},remove:function(o){var a="",l=0;return Tm.forEach(n,function(c){a+=o.slice(l,c[0]),l=c[1]}),a+=o.slice(l),a}}}function lV(e){for(var t="",i=0;i<e.length;){var s=e.indexOf("<!--",i);if(s===-1){t+=e.slice(i);break}t+=e.slice(i,s);var n=e.indexOf("-->",s);if(n===-1)break;i=n+3}return t}function cV(e){var t=e.split("");return t=t.filter(function(i){var s=i.charCodeAt(0);return s===127?!1:s<=31?s===10||s===13:!0}),t.join("")}lt.whiteList=RE();lt.getDefaultWhiteList=RE;lt.onTag=Yz;lt.onIgnoreTag=Zz;lt.onTagAttr=Jz;lt.onIgnoreTagAttr=Xz;lt.safeAttrValue=Kz;lt.escapeHtml=NE;lt.escapeQuote=FE;lt.unescapeQuote=jE;lt.escapeHtmlEntities=zE;lt.escapeDangerHtml5Entities=VE;lt.clearNonPrintableCharacter=UE;lt.friendlyAttrValue=WE;lt.escapeAttrValue=BE;lt.onIgnoreTagStripAll=oV;lt.StripTagBody=aV;lt.stripCommentTag=lV;lt.stripBlankChar=cV;lt.cssFilter=DE;lt.getDefaultCSSWhiteList=qz;var Hg={},to=gw;function uV(e){var t=to.spaceIndex(e),i;return t===-1?i=e.slice(1,-1):i=e.slice(1,t+1),i=to.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function hV(e){return e.slice(0,2)==="</"}function dV(e,t,i){var s="",n=0,r=!1,o=!1,a=0,l=e.length,c="",h="";e:for(a=0;a<l;a++){var p=e.charAt(a);if(r===!1){if(p==="<"){r=a;continue}}else if(o===!1){if(p==="<"){s+=i(e.slice(n,a)),r=a,n=a;continue}if(p===">"){s+=i(e.slice(n,r)),h=e.slice(r,a+1),c=uV(h),s+=t(r,s.length,c,h,hV(h)),n=a+1,r=!1;continue}if(p==='"'||p==="'")for(var m=1,g=e.charAt(a-m);g.trim()===""||g==="=";){if(g==="="){o=p;continue e}g=e.charAt(a-++m)}}else if(p===o){o=!1;continue}}return n<e.length&&(s+=i(e.substr(n))),s}var pV=/[^a-zA-Z0-9\\_:.-]/gim;function fV(e,t){var i=0,s=0,n=[],r=!1,o=e.length;function a(m,g){if(m=to.trim(m),m=m.replace(pV,"").toLowerCase(),!(m.length<1)){var y=t(m,g||"");y&&n.push(y)}}for(var l=0;l<o;l++){var c=e.charAt(l),h,p;if(r===!1&&c==="="){r=e.slice(i,l),i=l+1,s=e.charAt(i)==='"'||e.charAt(i)==="'"?i:gV(e,l+1);continue}if(r!==!1&&l===s){if(p=e.indexOf(c,l+1),p===-1)break;h=to.trim(e.slice(s+1,p)),a(r,h),r=!1,l=p,i=l+1;continue}if(/\s|\n|\t/.test(c))if(e=e.replace(/\s|\n|\t/g," "),r===!1)if(p=mV(e,l),p===-1){h=to.trim(e.slice(i,l)),a(h),r=!1,i=l+1;continue}else{l=p-1;continue}else if(p=yV(e,l-1),p===-1){h=to.trim(e.slice(i,l)),h=eM(h),a(r,h),r=!1,i=l+1;continue}else continue}return i<e.length&&(r===!1?a(e.slice(i)):a(r,eM(to.trim(e.slice(i))))),to.trim(n.join(" "))}function mV(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function gV(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="'"||i==='"'?t:-1}}function yV(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function vV(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function eM(e){return vV(e)?e.substr(1,e.length-2):e}Hg.parseTag=dV;Hg.parseAttr=fV;var bV=mw.FilterCSS,Ms=lt,HE=Hg,_V=HE.parseTag,wV=HE.parseAttr,uf=gw;function hp(e){return e==null}function xV(e){var t=uf.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=uf.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=uf.trim(e.slice(0,-1))),{html:e,closing:i}}function SV(e){var t={};for(var i in e)t[i]=e[i];return t}function MV(e){var t={};for(var i in e)Array.isArray(e[i])?t[i.toLowerCase()]=e[i].map(function(s){return s.toLowerCase()}):t[i.toLowerCase()]=e[i];return t}function GE(e){e=SV(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Ms.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=MV(e.whiteList||e.allowList):e.whiteList=Ms.whiteList,e.onTag=e.onTag||Ms.onTag,e.onTagAttr=e.onTagAttr||Ms.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Ms.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Ms.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Ms.safeAttrValue,e.escapeHtml=e.escapeHtml||Ms.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new bV(e.css))}GE.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,s=i.whiteList,n=i.onTag,r=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,l=i.safeAttrValue,c=i.escapeHtml,h=t.cssFilter;i.stripBlankChar&&(e=Ms.stripBlankChar(e)),i.allowCommentTag||(e=Ms.stripCommentTag(e));var p=!1;i.stripIgnoreTagBody&&(p=Ms.StripTagBody(i.stripIgnoreTagBody,r),r=p.onIgnoreTag);var m=_V(e,function(g,y,v,b,w){var x={sourcePosition:g,position:y,isClosing:w,isWhite:Object.prototype.hasOwnProperty.call(s,v)},$=n(v,b,x);if(!hp($))return $;if(x.isWhite){if(x.isClosing)return"</"+v+">";var S=xV(b),M=s[v],P=wV(S.html,function(C,I){var D=uf.indexOf(M,C)!==-1,N=o(v,C,I,D);return hp(N)?D?(I=l(v,C,I,h),I?C+'="'+I+'"':C):(N=a(v,C,I,D),hp(N)?void 0:N):N});return b="<"+v,P&&(b+=" "+P),S.closing&&(b+=" /"),b+=">",b}else return $=r(v,b,x),hp($)?c(b):$},c);return p&&(m=p.remove(m)),m};var $V=GE;(function(e,t){var i=lt,s=Hg,n=$V;function r(a,l){var c=new n(l);return c.process(a)}t=e.exports=r,t.filterXSS=r,t.FilterXSS=n,function(){for(var a in i)t[a]=i[a];for(var l in s)t[l]=s[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(V1,V1.exports);var ml=V1.exports,TV=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},kV=function(){function e(t,i){var s=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],details:["style"],div:["align","style","aria-label","aria-hidden"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=$m($m({},ml.getDefaultCSSWhiteList()),{flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,"line-height":!0,"justify-content":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(r,o,a,l){return r==="a"&&o==="href"||(r==="img"||r==="source")&&o==="src"?s.sanitizeUrl(a):ml.safeAttrValue(r,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;t&&!i?n=t:t&&i?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(r){if(r==="whiteList")n.whiteList=s._extendObjectOfArrays([s.arcgisWhiteList,t.whiteList||{}]);else if(r==="css"){var o=t.css.whiteList;o!=null&&t.css instanceof Object&&Object.keys(o).forEach(function(a){return n.css.whiteList[a]=o[a]})}else n[r]=t[r]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new ml.FilterXSS(n)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var s=(i??{}).isProtocolRequired,n=s===void 0?!0:s,r=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),l=r&&this.allowedProtocols.indexOf(r.toLowerCase())>-1;return o||a||l?ml.escapeAttrValue(t):!r&&!n?ml.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,s,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,s,n):ml.safeAttrValue(t,i,s,n)},e.prototype.validate=function(t,i){i===void 0&&(i={});var s=this.sanitize(t,i);return{isValid:t===s,sanitized:s}},e.prototype.encodeHTML=function(t){var i=this;return String(t).replace(/[&<>"'\/]/g,function(s){return i._entityMap[s]})},e.prototype.encodeAttrValue=function(t){var i=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(s,n){return i.test(s)?s:"&#x".concat(Number(t.charCodeAt(n)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(s){Object.keys(s).forEach(function(n){Array.isArray(s[n])&&Array.isArray(i[n])?i[n]=i[n].concat(s[n]):i[n]=s[n]})}),i},e.prototype._iterateOverObject=function(t,i){var s=this;i===void 0&&(i={});try{var n=!1,r=void 0;if(Array.isArray(t))r=t.reduce(function(a,l){var c=s.validate(l,i);return c.isValid?a.concat([l]):(n=!0,a.concat([c.sanitized]))},[]);else if(TV(t)){var o=Object.keys(t);r=o.reduce(function(a,l){var c=t[l],h=s.validate(c,i);return h.isValid?a[l]=c:(n=!0,a[l]=h.sanitized),a},{})}else return i.allowUndefined&&typeof t>"u"?void 0:null;return n?r:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const Gg=new Map;function qE(){Gg.clear()}function PV(e){return Gg.get(e)}function OV(e,t){Gg.set(e,t)}function t0(e){Gg.delete(e)}function EV(...e){const t=li.acquire();for(let s=0;s<e.length;s++){const n=e[s],r=typeof n;if(r==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(r==="object")for(const o in n)n[o]&&t.push(o)}const i=t.join(" ");return li.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(s=>{qE();for(const n of s)e.get(n.target)?.(n)}),i=(s,n,r)=>(e.set(s,n),t.observe(s,r),Ee(()=>{t.unobserve(s),e.delete(s)}));return(s,n,r)=>{let o=null;return ud([le(()=>typeof s=="function"?s():s,a=>{o?.remove(),a&&(o=i(a,n,r))},es),Ee(()=>o?.remove())])}})();function AV(e){const t=e?.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function lue(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function cue(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const CV=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],IV=CV.reduce((e,t)=>(e[t]=[],e),{}),LV=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],YE=new kV({whiteList:IV,onTagAttr:(e,t,i)=>{const s=`${t}="${i}"`;if(LV.includes(t))return s},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function RV(e){return e==="Enter"||e===" "}const ZE="http://www.w3.org/",qg=`${ZE}2000/svg`,JE=`${ZE}1999/xlink`;let tM=[],yw=(e,t)=>{let i={};return Object.keys(e).forEach(s=>{i[s]=e[s]}),t&&Object.keys(t).forEach(s=>{i[s]=t[s]}),i},vw=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),XE=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},DV=(e,t,i)=>{if(t.vnodeSelector!==""){for(let s=i;s<e.length;s++)if(vw(e[s],t))return s}return-1},i0=(e,t,i,s)=>{let n=e[t];if(n.vnodeSelector==="")return;let r=n.properties;if(!(r&&(r.key===void 0?r.bind:r.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(vw(a,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${s==="added"?s:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},NV=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},W1=[],B1=!1,KE=e=>{(e.children||[]).forEach(KE),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},iM=()=>{B1=!1,W1.forEach(KE),W1.length=0},sM=e=>{W1.push(e),B1||(B1=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(iM,{timeout:16}):setTimeout(iM,16))},nM=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),sM(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),sM(e))},FV=(e,t,i)=>{if(!t)return;let s=i.eventHandlerInterceptor,n=Object.keys(t),r=n.length;for(let o=0;o<r;o++){let a=n[o],l=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")G1(e,l,!0);else if(a==="classes"){let c=Object.keys(l),h=c.length;for(let p=0;p<h;p++){let m=c[p];l[m]&&e.classList.add(m)}}else if(a==="styles"){let c=Object.keys(l),h=c.length;for(let p=0;p<h;p++){let m=c[p],g=l[m];g&&(XE(g),i.styleApplyer(e,m,g))}}else if(a!=="key"&&l!=null){let c=typeof l;c==="function"?(a.lastIndexOf("on",0)===0&&(s&&(l=s(a,l,e,t)),a==="oninput"&&function(){let h=l;l=function(p){h.apply(this,[p]),p.target["oninput-value"]=p.target.value}}()),e[a]=l):i.namespace===qg?a==="href"?e.setAttributeNS(JE,a,l):e.setAttribute(a,l):c==="string"&&a!=="value"?a==="innerHTML"?e[a]=YE.sanitize(l):H1(e)&&a in e?e[a]=l:e.setAttribute(a,l):e[a]=l}}};function H1(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let km,jV=(e,t,i)=>{if(t)for(let s of t)Zl(s,e,void 0,i)},QE=(e,t,i)=>{jV(e,t.children,i),t.text&&(e.textContent=t.text),FV(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},Zl=(e,t,i,s)=>{let n,r=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")n=e.domNode=a.createTextNode(e.text),i!==void 0?t.insertBefore(n,i):t.appendChild(n);else{for(let l=0;l<=o.length;++l){let c=o.charAt(l);if(l===o.length||c==="."||c==="#"){let h=o.charAt(r-1),p=o.slice(r,l);h==="."?n.classList.add(p):h==="#"?n.id=p:(p==="svg"&&(s=yw(s,{namespace:qg})),s.namespace!==void 0?n=e.domNode=a.createElementNS(s.namespace,p):(n=e.domNode=e.domNode||a.createElement(p),p==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(n,i):n.parentNode!==t&&t.appendChild(n)),r=l+1}}QE(n,e,s)}},G1=(e,t,i)=>{t&&t.split(" ").forEach(s=>{s&&e.classList.toggle(s,i)})},zV=(e,t,i,s)=>{if(!i)return;let n=!1,r=Object.keys(i),o=r.length;for(let a=0;a<o;a++){let l=r[a],c=i[l],h=t[l];if(l==="class")h!==c&&(G1(e,h,!1),G1(e,c,!0));else if(l==="classes"){let p=e.classList,m=Object.keys(c),g=m.length;for(let y=0;y<g;y++){let v=m[y],b=!!c[v];b!==!!h[v]&&(n=!0,b?p.add(v):p.remove(v))}}else if(l==="styles"){let p=Object.keys(c),m=p.length;for(let g=0;g<m;g++){let y=p[g],v=c[y];v!==h[y]&&(n=!0,v?(XE(v),s.styleApplyer(e,y,v)):s.styleApplyer(e,y,""))}}else if(c||typeof h!="string"||(c=""),l!=="value"||H1(e)){if(c!==h){let p=typeof c;p==="function"&&s.eventHandlerInterceptor||(s.namespace===qg?l==="href"?e.setAttributeNS(JE,l,c):e.setAttribute(l,c):p==="string"?l==="innerHTML"?e[l]=YE.sanitize(c):l==="role"&&c===""?e.removeAttribute(l):H1(e)&&l in e?e[l]=c:e.setAttribute(l,c):e[l]!==c&&(e[l]=c),n=!0)}}else{let p=e[l];p!==c&&(e["oninput-value"]?p===e["oninput-value"]:c!==h)&&(e[l]=c,e["oninput-value"]=void 0),c!==h&&(n=!0)}}return n},VV=(e,t,i,s,n)=>{if(i===s)return!1;s=s||tM;let r,o=(i=i||tM).length,a=s.length,l=0,c=0,h=!1;for(;c<a;){let p=l<o?i[l]:void 0,m=s[c];if(p!==void 0&&vw(p,m))h=km(p,m,n)||h,l++;else{let g=DV(i,m,l+1);if(g>=0){for(r=l;r<g;r++)nM(i[r]),i0(i,r,e,"removed");h=km(i[g],m,n)||h,l=g+1}else Zl(m,t,l<o?i[l].domNode:void 0,n),NV(m),i0(s,c,e,"added")}c++}if(o>l)for(r=l;r<o;r++)nM(i[r]),i0(i,r,e,"removed");return h};km=(e,t,i)=>{let s=e.domNode,n=!1;if(e===t)return!1;let r=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=s.ownerDocument.createTextNode(t.text);return s.parentNode.replaceChild(o,s),t.domNode=o,n=!0,n}t.domNode=s}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=yw(i,{namespace:qg})),e.text!==t.text&&(r=!0,t.text===void 0?s.removeChild(s.firstChild):s.textContent=t.text),t.domNode=s,r=VV(t,s,e.children,t.children,i)||r,r=zV(s,e.properties,t.properties,i)||r,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[s,i,t.vnodeSelector,t.properties,t.children]);return r&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(s,t.properties,e.properties),n};let iu=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let s=e;e=i,km(s,i,t)},domNode:e.domNode});const UV={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let Tl=e=>yw(UV,e),ao={create:(e,t)=>(t=Tl(t),Zl(e,document.createElement("div"),void 0,t),iu(e,t)),append:(e,t,i)=>(i=Tl(i),Zl(t,e,void 0,i),iu(t,i)),insertBefore:(e,t,i)=>(i=Tl(i),Zl(t,e.parentNode,e,i),iu(t,i)),merge:(e,t,i)=>(i=Tl(i),t.domNode=e,QE(e,t,i),iu(t,i)),replace:(e,t,i)=>(i=Tl(i),Zl(t,e.parentNode,e,i),e.parentNode.removeChild(e),iu(t,i))},eA,WV=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};eA=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let BV=(e,t)=>{let i=e;return t.forEach(s=>{i=i&&i.children?eA(i.children,n=>n.domNode===s):void 0}),i},HV=(e,t,i)=>{let s=function(n){i("domEvent",n);let r=t(),o=WV(n.currentTarget,r.domNode);o.reverse();let a,l=BV(r.getLastRender(),o);return e.scheduleRender(),l&&(a=l.properties[`on${n.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",n),a};return(n,r,o,a)=>s},rM=e=>{let t,i,s=Tl(e),n=s.performanceLogger,r=!0,o=!1,a=[],l=[],c=(p,m,g)=>{let y,v=()=>y;s.eventHandlerInterceptor=HV(t,v,n),y=p(m,g(),s),a.push(y),l.push(g)},h=()=>{if(i=void 0,r){r=!1,n("renderStart",void 0);for(let p=0;p<a.length;p++){let m=l[p]();n("rendered",void 0),a[p].update(m),n("patched",void 0)}n("renderDone",void 0),r=!0}};return t={renderNow:h,scheduleRender:()=>{i||o||(i=requestAnimationFrame(h))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,r=!0,t.scheduleRender()},append:(p,m)=>{c(ao.append,p,m)},insertBefore:(p,m)=>{c(ao.insertBefore,p,m)},merge:(p,m)=>{c(ao.merge,p,m)},replace:(p,m)=>{c(ao.replace,p,m)},detach:p=>{for(let m=0;m<l.length;m++)if(l[m]===p)return l.splice(m,1),a.splice(m,1)[0];throw new Error("renderFunction was not found")}},t};const GV={handleInterceptedEvent:(e,t,i,s)=>(e.scheduleRender(),t.properties[`on${s.type}`].apply(t.properties.bind||i,[s]))},qV={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}},YV=e=>({...qV,...e}),ZV=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},JV=(e,t)=>e.find(t),oM=(e,t,i=!1)=>{let s=e;return t.forEach((n,r)=>{const o=s?.children?JV(s.children,a=>a.domNode===n):void 0;i&&!o&&r!==t.length-1||(s=o)}),s},XV=e=>{let t;const i={...GV,...e},s=YV(i),n=s.performanceLogger;let r,o=!0,a=!1;const l=[],c=[],h=(m,g,y)=>{let v;s.eventHandlerInterceptor=(w,x,$,S)=>function(M){let P;n("domEvent",M);const C=ZV(M.currentTarget,v.domNode),I=C.some(N=>customElements.get(N?.tagName?.toLowerCase()));if(M.eventPhase===Event.CAPTURING_PHASE||!I)C.reverse(),P=oM(v.getLastRender(),C);else{const N=M.composedPath(),U=N.slice(N.indexOf(M.currentTarget),N.indexOf(v.domNode)).reverse();P=oM(v.getLastRender(),U,!0)}let D;return P&&(D=i.handleInterceptedEvent(t,P,this,M)),n("domEventProcessed",M),D},i.postProcessProjectionOptions?.(s);const b=y();v=m(g,b,s),s.eventHandlerInterceptor=void 0,l.push(v),c.push(y),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(v,b)};let p=()=>{if(r=void 0,o){o=!1,n("renderStart",void 0);for(let m=0;m<l.length;m++){const g=c[m]();n("rendered",void 0),l[m].update(g),n("patched",void 0)}n("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(p=i.modifyDoRenderImplementation(p,l,c)),t={renderNow:p,scheduleRender:()=>{r||a||(r=requestAnimationFrame(p))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(m,g)=>{h(ao.append,m,g)},insertBefore:(m,g)=>{h(ao.insertBefore,m,g)},merge:(m,g)=>{h(ao.merge,m,g)},replace:(m,g)=>{h(ao.replace,m,g)},detach:m=>{for(let g=0;g<c.length;g++)if(c[g]===m)return c.splice(g,1),l.splice(g,1)[0];throw new Error("renderFunction was not found")}},t};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const tA="calcite-mode-auto",iA="calcite-mode-dark",KV="calcite-mode-light",uue={autoMode:tA,darkMode:iA,lightMode:KV,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */const Tu=globalThis.calciteConfig,hue=Tu?.focusTrapStack||[],aM="2.10.1";function QV(){if(Tu&&Tu.version){console.warn(`[calcite-components] while initializing v${aM}, an existing configuration with version "${Tu.version}" was found. This may cause unexpected behavior. The version will not be added to the existing global configuration.`);return}const e=Tu||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:aM,writable:!1}),globalThis.calciteConfig=e}var Zt={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},eU=Object.defineProperty,tU=(e,t)=>{for(var i in t)eU(e,i,{get:t[i],enumerable:!0})};Zt.isDev,Zt.isTesting;var iU=e=>{const t=new URL(e,jt.$resourcesUrl$);return t.origin!==Td.location.origin?t.href:t.pathname},sU=e=>jt.$resourcesUrl$=e,lM={},nU="http://www.w3.org/2000/svg",rU="http://www.w3.org/1999/xhtml",oU=e=>e!=null,bw=e=>(e=typeof e,e==="object"||e==="function");function aU(e){var t,i,s;return(s=(i=(t=e.head)==null?void 0:t.querySelector('meta[name="csp-nonce"]'))==null?void 0:i.getAttribute("content"))!=null?s:void 0}var lU={};tU(lU,{err:()=>sA,map:()=>cU,ok:()=>q1,unwrap:()=>uU,unwrapErr:()=>hU});var q1=e=>({isOk:!0,isErr:!1,value:e}),sA=e=>({isOk:!1,isErr:!0,value:e});function cU(e,t){if(e.isOk){const i=t(e.value);return i instanceof Promise?i.then(s=>q1(s)):q1(i)}if(e.isErr){const i=e.value;return sA(i)}throw"should never get here"}var uU=e=>{if(e.isOk)return e.value;throw e.value},hU=e=>{if(e.isErr)return e.value;throw e.value},el=(e,t="")=>()=>{},dU="slot-fb{display:contents}slot-fb[hidden]{display:none}",cM="http://www.w3.org/1999/xlink",nA=(e,t,...i)=>{let s=null,n=null,r=null,o=!1,a=!1;const l=[],c=p=>{for(let m=0;m<p.length;m++)s=p[m],Array.isArray(s)?c(s):s!=null&&typeof s!="boolean"&&((o=typeof e!="function"&&!bw(s))&&(s=String(s)),o&&a?l[l.length-1].$text$+=s:l.push(o?Pm(null,s):s),a=o)};if(c(i),t){t.key&&(n=t.key),t.name&&(r=t.name);{const p=t.className||t.class;p&&(t.class=typeof p!="object"?p:Object.keys(p).filter(m=>p[m]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,l,mU);const h=Pm(e,null);return h.$attrs$=t,l.length>0&&(h.$children$=l),h.$key$=n,h.$name$=r,h},Pm=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},pU={},fU=e=>e&&e.$tag$===pU,mU={forEach:(e,t)=>e.map(uM).forEach(t),map:(e,t)=>e.map(uM).map(t).map(gU)},uM=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),gU=e=>{if(typeof e.vtag=="function"){const i={...e.vattrs};return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),nA(e.vtag,i,...e.vchildren||[])}const t=Pm(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},yU=e=>HU.map(t=>t(e)).find(t=>!!t),vU=(e,t)=>e!=null&&!bw(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,bU=e=>e,due=(e,t,i)=>{const s=bU(e);return{emit:n=>_U(s,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:n})}},_U=(e,t,i)=>{const s=jt.ce(t,i);return e.dispatchEvent(s),s},hM=new WeakMap,wU=(e,t,i)=>{let s=Am.get(e);YU&&i?(s=s||new CSSStyleSheet,typeof s=="string"?s=t:s.replaceSync(t)):s=t,Am.set(e,s)},xU=(e,t,i)=>{var s;const n=rA(t,i),r=Am.get(n);if(e=e.nodeType===11?e:os,r)if(typeof r=="string"){e=e.head||e;let o=hM.get(e),a;if(o||hM.set(e,o=new Set),!o.has(n)){{a=os.createElement("style"),a.innerHTML=r;const l=(s=jt.$nonce$)!=null?s:aU(os);l!=null&&a.setAttribute("nonce",l),e.insertBefore(a,e.querySelector("link"))}t.$flags$&4&&(a.innerHTML+=dU),o&&o.add(n)}}else e.adoptedStyleSheets.includes(r)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,r]);return n},SU=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,s=t.$flags$,n=el("attachStyles",t.$tagName$),r=xU(Cm&&i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);s&10&&(i["s-sc"]=r,i.classList.add(r+"-h"),s&2&&i.classList.add(r+"-s")),n()},rA=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),dM=(e,t,i,s,n,r)=>{if(i!==s){let o=bM(e,t),a=t.toLowerCase();if(t==="class"){const l=e.classList,c=pM(i),h=pM(s);l.remove(...c.filter(p=>p&&!h.includes(p))),l.add(...h.filter(p=>p&&!c.includes(p)))}else if(t==="style"){for(const l in i)(!s||s[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in s)(!i||s[l]!==i[l])&&(l.includes("-")?e.style.setProperty(l,s[l]):e.style[l]=s[l])}else if(t!=="key")if(t==="ref")s&&s(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n"){if(t[2]==="-"?t=t.slice(3):bM(Td,a)?t=a.slice(2):t=a[2]+t.slice(3),i||s){const l=t.endsWith(oA);t=t.replace($U,""),i&&jt.rel(e,t,i,l),s&&jt.ael(e,t,s,l)}}else{const l=bw(s);if((o||l&&s!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=s;else{const h=s??"";t==="list"?o=!1:(i==null||e[t]!=h)&&(e[t]=h)}}catch{}let c=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,c=!0),s==null||s===!1?(s!==!1||e.getAttribute(t)==="")&&(c?e.removeAttributeNS(cM,t):e.removeAttribute(t)):(!o||r&4||n)&&!l&&(s=s===!0?"":s,c?e.setAttributeNS(cM,t,s):e.setAttribute(t,s))}}},MU=/\s/,pM=e=>e?e.split(MU):[],oA="Capture",$U=new RegExp(oA+"$"),aA=(e,t,i)=>{const s=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,n=e&&e.$attrs$||lM,r=t.$attrs$||lM;for(const o of fM(Object.keys(n)))o in r||dM(s,o,n[o],void 0,i,t.$flags$);for(const o of fM(Object.keys(r)))dM(s,o,n[o],r[o],i,t.$flags$)};function fM(e){return e.includes("ref")?[...e.filter(t=>t!=="ref"),"ref"]:e}var kl,Y1,Sc,_w=!1,Om=!1,ww=!1,Ci=!1,Em=(e,t,i,s)=>{var n;const r=t.$children$[i];let o=0,a,l,c;if(_w||(ww=!0,r.$tag$==="slot"&&(kl&&s.classList.add(kl+"-s"),r.$flags$|=r.$children$?2:1)),r.$text$!==null)a=r.$elm$=os.createTextNode(r.$text$);else if(r.$flags$&1)a=r.$elm$=os.createTextNode("");else{if(Ci||(Ci=r.$tag$==="svg"),a=r.$elm$=os.createElementNS(Ci?nU:rU,r.$flags$&2?"slot-fb":r.$tag$),Ci&&r.$tag$==="foreignObject"&&(Ci=!1),aA(null,r,Ci),oU(kl)&&a["s-si"]!==kl&&a.classList.add(a["s-si"]=kl),Sw(a,s),r.$children$)for(o=0;o<r.$children$.length;++o)l=Em(e,r,o,a),l&&a.appendChild(l);r.$tag$==="svg"?Ci=!1:a.tagName==="foreignObject"&&(Ci=!0)}return a["s-hn"]=Sc,r.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=Y1,a["s-sn"]=r.$name$||"",a["s-rf"]=(n=r.$attrs$)==null?void 0:n.ref,c=e&&e.$children$&&e.$children$[i],c&&c.$tag$===r.$tag$&&e.$elm$&&Hh(e.$elm$,!1)),a},Hh=(e,t)=>{jt.$flags$|=1;const i=Array.from(e.childNodes);if(e["s-sr"]&&Zt.experimentalSlotFixes){let s=e;for(;s=s.nextSibling;)s&&s["s-sn"]===e["s-sn"]&&s["s-sh"]===Sc&&i.push(s)}for(let s=i.length-1;s>=0;s--){const n=i[s];n["s-hn"]!==Sc&&n["s-ol"]&&(fo(uA(n),n,xw(n)),n["s-ol"].remove(),n["s-ol"]=void 0,n["s-sh"]=void 0,ww=!0),t&&Hh(n,t)}jt.$flags$&=-2},lA=(e,t,i,s,n,r)=>{let o=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(o.shadowRoot&&o.tagName===Sc&&(o=o.shadowRoot);n<=r;++n)s[n]&&(a=Em(null,i,n,e),a&&(s[n].$elm$=a,fo(o,a,xw(t))))},cA=(e,t,i)=>{for(let s=t;s<=i;++s){const n=e[s];if(n){const r=n.$elm$;pA(n),r&&(Om=!0,r["s-ol"]?r["s-ol"].remove():Hh(r,!0),r.remove())}}},TU=(e,t,i,s,n=!1)=>{let r=0,o=0,a=0,l=0,c=t.length-1,h=t[0],p=t[c],m=s.length-1,g=s[0],y=s[m],v,b;for(;r<=c&&o<=m;)if(h==null)h=t[++r];else if(p==null)p=t[--c];else if(g==null)g=s[++o];else if(y==null)y=s[--m];else if(dp(h,g,n))Pl(h,g,n),h=t[++r],g=s[++o];else if(dp(p,y,n))Pl(p,y,n),p=t[--c],y=s[--m];else if(dp(h,y,n))(h.$tag$==="slot"||y.$tag$==="slot")&&Hh(h.$elm$.parentNode,!1),Pl(h,y,n),fo(e,h.$elm$,p.$elm$.nextSibling),h=t[++r],y=s[--m];else if(dp(p,g,n))(h.$tag$==="slot"||y.$tag$==="slot")&&Hh(p.$elm$.parentNode,!1),Pl(p,g,n),fo(e,p.$elm$,h.$elm$),p=t[--c],g=s[++o];else{for(a=-1,l=r;l<=c;++l)if(t[l]&&t[l].$key$!==null&&t[l].$key$===g.$key$){a=l;break}a>=0?(b=t[a],b.$tag$!==g.$tag$?v=Em(t&&t[o],i,a,e):(Pl(b,g,n),t[a]=void 0,v=b.$elm$),g=s[++o]):(v=Em(t&&t[o],i,o,e),g=s[++o]),v&&fo(uA(h.$elm$),v,xw(h.$elm$))}r>c?lA(e,s[m+1]==null?null:s[m+1].$elm$,i,s,o,m):o>m&&cA(t,r,c)},dp=(e,t,i=!1)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:i?!0:e.$key$===t.$key$:!1,xw=e=>e&&e["s-ol"]||e,uA=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Pl=(e,t,i=!1)=>{const s=t.$elm$=e.$elm$,n=e.$children$,r=t.$children$,o=t.$tag$,a=t.$text$;let l;a===null?(Ci=o==="svg"?!0:o==="foreignObject"?!1:Ci,o==="slot"&&!_w||aA(e,t,Ci),n!==null&&r!==null?TU(s,n,t,r,i):r!==null?(e.$text$!==null&&(s.textContent=""),lA(s,null,t,r,0,r.length-1)):n!==null&&cA(n,0,n.length-1),Ci&&o==="svg"&&(Ci=!1)):(l=s["s-cr"])?l.parentNode.textContent=a:e.$text$!==a&&(s.data=a)},hA=e=>{const t=e.childNodes;for(const i of t)if(i.nodeType===1){if(i["s-sr"]){const s=i["s-sn"];i.hidden=!1;for(const n of t)if(n!==i){if(n["s-hn"]!==i["s-hn"]||s!==""){if(n.nodeType===1&&(s===n.getAttribute("slot")||s===n["s-sn"])||n.nodeType===3&&s===n["s-sn"]){i.hidden=!0;break}}else if(n.nodeType===1||n.nodeType===3&&n.textContent.trim()!==""){i.hidden=!0;break}}}hA(i)}},Jn=[],dA=e=>{let t,i,s;for(const n of e.childNodes){if(n["s-sr"]&&(t=n["s-cr"])&&t.parentNode){i=t.parentNode.childNodes;const r=n["s-sn"];for(s=i.length-1;s>=0;s--)if(t=i[s],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==n["s-hn"]&&!Zt.experimentalSlotFixes)if(mM(t,r)){let o=Jn.find(a=>a.$nodeToRelocate$===t);Om=!0,t["s-sn"]=t["s-sn"]||r,o?(o.$nodeToRelocate$["s-sh"]=n["s-hn"],o.$slotRefNode$=n):(t["s-sh"]=n["s-hn"],Jn.push({$slotRefNode$:n,$nodeToRelocate$:t})),t["s-sr"]&&Jn.map(a=>{mM(a.$nodeToRelocate$,t["s-sn"])&&(o=Jn.find(l=>l.$nodeToRelocate$===t),o&&!a.$slotRefNode$&&(a.$slotRefNode$=o.$slotRefNode$))})}else Jn.some(o=>o.$nodeToRelocate$===t)||Jn.push({$nodeToRelocate$:t})}n.nodeType===1&&dA(n)}},mM=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",pA=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(pA)},fo=(e,t,i)=>{const s=e?.insertBefore(t,i);return Sw(t,e),s},fA=e=>{const t=[];return e&&t.push(...e["s-scs"]||[],e["s-si"],e["s-sc"],...fA(e.parentElement)),t},Sw=(e,t,i=!1)=>{var s;if(e&&t&&e.nodeType===1){const n=new Set(fA(t).filter(Boolean));if(n.size&&((s=e.classList)==null||s.add(...e["s-scs"]=[...n]),e["s-ol"]||i))for(const r of Array.from(e.childNodes))Sw(r,e,!0)}},kU=(e,t,i=!1)=>{var s,n,r,o,a;const l=e.$hostElement$,c=e.$cmpMeta$,h=e.$vnode$||Pm(null,null),p=fU(t)?t:nA(null,null,t);if(Sc=l.tagName,c.$attrsToReflect$&&(p.$attrs$=p.$attrs$||{},c.$attrsToReflect$.map(([m,g])=>p.$attrs$[g]=l[m])),i&&p.$attrs$)for(const m of Object.keys(p.$attrs$))l.hasAttribute(m)&&!["key","ref","style","class"].includes(m)&&(p.$attrs$[m]=l[m]);p.$tag$=null,p.$flags$|=4,e.$vnode$=p,p.$elm$=h.$elm$=l.shadowRoot||l,kl=l["s-sc"],_w=Cm&&(c.$flags$&1)!==0,Y1=l["s-cr"],Om=!1,Pl(h,p,i);{if(jt.$flags$|=1,ww){dA(p.$elm$);for(const m of Jn){const g=m.$nodeToRelocate$;if(!g["s-ol"]){const y=os.createTextNode("");y["s-nr"]=g,fo(g.parentNode,g["s-ol"]=y,g)}}for(const m of Jn){const g=m.$nodeToRelocate$,y=m.$slotRefNode$;if(y){const v=y.parentNode;let b=y.nextSibling;{let w=(s=g["s-ol"])==null?void 0:s.previousSibling;for(;w;){let x=(n=w["s-nr"])!=null?n:null;if(x&&x["s-sn"]===g["s-sn"]&&v===x.parentNode){for(x=x.nextSibling;x===g||x?.["s-sr"];)x=x?.nextSibling;if(!x||!x["s-nr"]){b=x;break}}w=w.previousSibling}}(!b&&v!==g.parentNode||g.nextSibling!==b)&&g!==b&&(!g["s-hn"]&&g["s-ol"]&&(g["s-hn"]=g["s-ol"].parentNode.nodeName),fo(v,g,b),g.nodeType===1&&(g.hidden=(r=g["s-ih"])!=null?r:!1)),g&&typeof y["s-rf"]=="function"&&y["s-rf"](g)}else g.nodeType===1&&(i&&(g["s-ih"]=(o=g.hidden)!=null?o:!1),g.hidden=!0)}}Om&&hA(p.$elm$),jt.$flags$&=-2,Jn.length=0}if(Zt.experimentalScopedSlotChanges&&c.$flags$&2)for(const m of p.$elm$.childNodes)m["s-hn"]!==Sc&&!m["s-sh"]&&(i&&m["s-ih"]==null&&(m["s-ih"]=(a=m.hidden)!=null?a:!1),m.hidden=!0);Y1=void 0},PU=(e,t)=>{},Mw=(e,t)=>(e.$flags$|=16,PU(e,e.$ancestorComponent$),JU(()=>OU(e,t))),OU=(e,t)=>{const i=e.$hostElement$,s=el("scheduleUpdate",e.$cmpMeta$.$tagName$),n=i;if(!n)throw new Error(`Can't render component <${i.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let r;return t?r=oc(n,"componentWillLoad"):r=oc(n,"componentWillUpdate"),r=gM(r,()=>oc(n,"componentWillRender")),s(),gM(r,()=>AU(e,n,t))},gM=(e,t)=>EU(e)?e.then(t):t(),EU=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",AU=async(e,t,i)=>{const s=e.$hostElement$,n=el("update",e.$cmpMeta$.$tagName$);s["s-rc"],i&&SU(e);const r=el("render",e.$cmpMeta$.$tagName$);CU(e,t,s,i),r(),n(),IU(e)},yM=null,CU=(e,t,i,s)=>{try{yM=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(Zt.hasRenderFn||Zt.reflect)&&(Zt.vdomRender||Zt.reflect)&&(Zt.hydrateServerSide||kU(e,t,s))}catch(l){$d(l,e.$hostElement$)}return yM=null,null},IU=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,s=el("postUpdate",t),n=i;e.$ancestorComponent$,oc(n,"componentDidRender"),e.$flags$&64?(oc(n,"componentDidUpdate"),s()):(e.$flags$|=64,oc(n,"componentDidLoad"),s())},pue=e=>{{const t=Vc(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&Mw(t,!1),i}},oc=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(s){$d(s)}},LU=(e,t)=>Vc(e).$instanceValues$.get(t),RU=(e,t,i,s)=>{const n=Vc(e),r=e,o=n.$instanceValues$.get(t),a=n.$flags$,l=r;i=vU(i,s.$members$[t][0]);const c=Number.isNaN(o)&&Number.isNaN(i);if(i!==o&&!c){n.$instanceValues$.set(t,i);{if(s.$watchers$&&a&128){const p=s.$watchers$[t];p&&p.map(m=>{try{l[m](i,o,t)}catch(g){$d(g,r)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(i,o,t)===!1)return;Mw(n,!1)}}}},DU=(e,t,i)=>{var s;const n=e.prototype;if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$);r.map(([o,[a]])=>{(a&31||a&32)&&Object.defineProperty(n,o,{get(){return LU(this,o)},set(l){RU(this,o,l,t)},configurable:!0,enumerable:!0})});{const o=new Map;n.attributeChangedCallback=function(a,l,c){jt.jmp(()=>{var h;const p=o.get(a);if(this.hasOwnProperty(p))c=this[p],delete this[p];else{if(n.hasOwnProperty(p)&&typeof this[p]=="number"&&this[p]==c)return;if(p==null){const m=Vc(this),g=m?.$flags$;if(g&&!(g&8)&&g&128&&c!==l){const v=this,b=(h=t.$watchers$)==null?void 0:h[a];b?.forEach(w=>{v[w]!=null&&v[w].call(v,c,l,a)})}return}}this[p]=c===null&&typeof this[p]=="boolean"?!1:c})},e.observedAttributes=Array.from(new Set([...Object.keys((s=t.$watchers$)!=null?s:{}),...r.filter(([a,l])=>l[0]&15).map(([a,l])=>{var c;const h=l[1]||a;return o.set(h,a),l[0]&512&&((c=t.$attrsToReflect$)==null||c.push([a,h])),h})]))}}return e},NU=async(e,t,i,s)=>{let n;if((t.$flags$&32)===0){t.$flags$|=32,i.$lazyBundleId$;{n=e.constructor;const o=e.localName;customElements.whenDefined(o).then(()=>t.$flags$|=128)}if(n&&n.style){let o=n.style;typeof o!="string"&&(t.$modeName$=yU(e),t.$modeName$&&(o=o[t.$modeName$]));const a=rA(i,t.$modeName$);if(!Am.has(a)){const l=el("registerStyles",i.$tagName$);wU(a,o,!!(i.$flags$&1)),l()}}}t.$ancestorComponent$,(()=>Mw(t,!0))()},vM=e=>{},FU=e=>{if((jt.$flags$&1)===0){const t=Vc(e),i=t.$cmpMeta$,s=el("connectedCallback",i.$tagName$);t.$flags$&1?(mA(e,t,i.$listeners$),t?.$lazyInstance$?vM(t.$lazyInstance$):t?.$onReadyPromise$&&t.$onReadyPromise$.then(()=>vM(t.$lazyInstance$))):(t.$flags$|=1,i.$flags$&12&&jU(e),i.$members$&&Object.entries(i.$members$).map(([n,[r]])=>{if(r&31&&e.hasOwnProperty(n)){const o=e[n];delete e[n],e[n]=o}}),NU(e,t,i)),s()}},jU=e=>{const t=e["s-cr"]=os.createComment("");t["s-cn"]=!0,fo(e,t,e.firstChild)},zU=async e=>{if((jt.$flags$&1)===0){const t=Vc(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},fue=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[],!Cm&&i.$flags$&1&&(i.$flags$|=8);const s=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){BU(this,i)},connectedCallback(){FU(this),s&&s.call(this)},disconnectedCallback(){zU(this),n&&n.call(this)},__attachShadow(){Cm?this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)}):this.shadowRoot=this}}),e.is=i.$tagName$,DU(e,i)},mue=(e,t)=>t,mA=(e,t,i,s)=>{i&&i.map(([n,r,o])=>{const a=UU(e,n),l=VU(t,o),c=WU(n);jt.ael(a,r,l,c),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>jt.rel(a,r,l,c))})},VU=(e,t)=>i=>{var s;try{Zt.lazyLoad||e.$hostElement$[t](i)}catch(n){$d(n)}},UU=(e,t)=>t&4?os:t&8?Td:t&16?os.body:e,WU=e=>GU?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,gA=Zt.hotModuleReplacement?window.__STENCIL_HOSTREFS__||(window.__STENCIL_HOSTREFS__=new WeakMap):new WeakMap,Vc=e=>gA.get(e),BU=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return mA(e,i,t.$listeners$),gA.set(e,i)},bM=(e,t)=>t in e,$d=(e,t)=>(0,console.error)(e,t);Zt.isTesting;var Am=new Map,HU=[],Td=typeof window<"u"?window:{},os=Td.document||{head:{}},gue=Td.HTMLElement||class{},jt={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,s)=>e.addEventListener(t,i,s),rel:(e,t,i,s)=>e.removeEventListener(t,i,s),ce:(e,t)=>new CustomEvent(e,t)},Cm=Zt.shadowDomShim&&Zt.shadowDom?(()=>(os.head.attachShadow+"").indexOf("[native")>-1)():!0,GU=(()=>{let e=!1;try{os.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),qU=e=>Promise.resolve(e),YU=Zt.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})():!1,Z1=!1,J1=[],yA=[],vA=(e,t)=>i=>{e.push(i),Z1||(Z1=!0,t&&jt.$flags$&4?ZU(X1):jt.raf(X1))},_M=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){$d(i)}e.length=0},X1=()=>{_M(J1),_M(yA),(Z1=J1.length>0)&&jt.raf(X1)},ZU=e=>qU().then(e),yue=vA(J1,!1),JU=vA(yA,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.10.1
 */function wM(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>e.contains(iA)||e.contains(tA)&&t?"dark":"light",s=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{r!==o&&s(o),r=o};let r=i();s(r),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function XU(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?wM():document.addEventListener("DOMContentLoaded",()=>wM(),{once:!0})),QV()}const KU=XU;KU();let bA;function QU(){try{iU(".")}catch{sU(ts(Pe(bA)))}}function Yg(e){const t=[];for(const i of Object.keys(e))customElements.get(`calcite-${i}`)||t.push(e[i]?.());return t.length>0?Promise.all(t):null}bA="components/assets";const _A=Symbol("widget"),wA=Symbol("widget-test-data"),eW=[],tW={},Im=new WeakMap;function xA(e,t){let i=t.children;if(i?.length)for(let n=0;n<i.length;++n)i[n]=xA(e,i[n]);else i=eW;const s=t.vnodeSelector;if(Lm(s)){const n=t.properties||tW,r=n.key||s;return{vnodeSelector:"div",properties:{key:r,afterCreate:iW,afterUpdate:sW,afterRemoved:SA,parentWidget:e,widgetConstructor:s,widgetProperties:{...n,key:r,children:i}},children:void 0,text:void 0,domNode:null}}return t}function iW(e,t,i,{parentWidget:s,widgetConstructor:n,widgetProperties:r}){const o=new n(r);o.container=e,Im.set(e,o),o.afterCreate?.(o,e),s.addHandles(Ee(()=>SA(e))),queueMicrotask(()=>{o[wA].projector.renderNow()})}function sW(e,t,i,{widgetProperties:s}){const n=Im.get(e);n&&(n.set(s),n.afterUpdate?.(n,e))}function SA(e){const t=Im.get(e);t&&(t.afterRemoved?.(t,e),t.destroy(),Im.delete(e))}function Lm(e){return typeof e=="function"&&e[_A]}const xM=new Set;function nW(e){xM.add(e),e.finally(()=>xM.delete(e))}var MA;const rW="esri.widgets.Widget";let oW=0;function $A(e,t){const i=Object.prototype.hasOwnProperty;for(const s in t)i.call(t,s)&&i.call(e,s)&&(e[s]!=null&&t[s]!=null&&typeof e[s]=="object"&&typeof t[s]=="object"?$A(e[s],t[s]):e[s]=t[s]);return e}const aW=XV({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(s,n,r,o)=>{const a=t?.(s,n,r,o),l=i.test(s);if(!((s=s.replace(i,"")).toLowerCase()in r)||l){const c=s[2].toLowerCase()+s.slice(3),h=g=>a?.call(r,g);r.addEventListener(c,h,l);const p=()=>r.removeEventListener(c,h,l),m=o.afterRemoved;o.afterRemoved=g=>{m?.(g),p()}}return a}},handleInterceptedEvent(e,t,i,s){const{eventPhase:n,type:r}=s,o=n===Event.CAPTURING_PHASE;let a=`on${r}${o?"capture":""}`;const l=t.properties;(l&&a in l||(a=`on${r[0].toUpperCase()}${r.slice(1)}${o?"Capture":""}`,l&&a in l))&&(qE(),e.scheduleRender(),l[a].call(l.bind||i,s))}});let s0=!1,kt=class extends N_(Eo.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._projector=aW,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=v4(async()=>{if(this._messageBundleProps?.length){const a=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:l,propertyName:c})=>{if(this.destroyed)return;let h=await lO(l);this.uiStrings&&Object.keys(this.uiStrings)&&(h=$A(F(h),this.uiStrings)),this[c]=h}));if(this.destroyed)return;for(const l of a)l.status==="rejected"&&B.getLogger(this).error("widget-intl:locale-error",this.declaredClass,l.reason)}await this.loadLocale()}),QU();const i="esri-widget-uid-"+fw(),s=this.render.bind(this);this._trackingTarget=new _g(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const n=()=>({vnodeSelector:"div",properties:{key:`${i}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),r=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const a=s()??n(),l=a.properties??={};if(l.key??=i,Lm(a.vnodeSelector)){if(!this.visible)return n()}else this.visible?l.styles||(l.styles={}):(l.class="",l.styles={display:"none"}),l.styles.display??="";let c=0;return a.children?.forEach(h=>{Lm(h.vnodeSelector)||(h.properties??={},h.properties.key??=`${this.id}--${c++}`)}),xA(this,a)};this.render=()=>{if(s0)return r();let a=PV(this)??null;if(a)return a;this._trackingTarget.clear(),s0=!0;try{a=lr(this._trackingTarget,r)}catch(l){throw B.getLogger(this).error(l),l}finally{s0=!1}return a&&OV(this,a),a};const o=this.beforeFirstRender();o?this._resourcesFetch=o.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),nW(this._resourcesFetch)}normalizeCtorArgs(e,t){const i={...e};return t&&(i.container=t),i}postInitialize(){}beforeFirstRender(){const e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(Ex):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Ke(this._trackingTarget),Ke(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,t0(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return dw(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+oW++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(MA=_A,wA)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(t0(this),this._projector.scheduleRender())}own(e){B3(B.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(e)}classes(...e){return EV.apply(this,e)}renderNow(){t0(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(le(()=>this.viewModel,(t,i)=>{i&&this.removeHandles("delegated-events"),t&&vg(t)&&this.addHandles(this._delegatedEventNames.map(s=>fd(t,s,n=>{this.emit(s,n)})),"delegated-events")},es)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(Ex),this.scheduleRender()};this.addHandles([iO(e),le(()=>this.uiStrings,e),hr(()=>this.container,t=>{this.destroyed||this._attach(t)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}};kt[MA]=!0,d([f()],kt.prototype,"_readyForTrueRender",void 0),d([f({value:null})],kt.prototype,"container",null),d([Mt("container")],kt.prototype,"castContainer",null),d([f()],kt.prototype,"icon",null),d([f()],kt.prototype,"id",null),d([f()],kt.prototype,"label",null),d([f()],kt.prototype,"renderable",null),d([f()],kt.prototype,"uiStrings",void 0),d([f()],kt.prototype,"viewModel",void 0),d([f({value:!0})],kt.prototype,"visible",null),d([f()],kt.prototype,"key",void 0),d([f()],kt.prototype,"children",void 0),d([f()],kt.prototype,"afterCreate",void 0),d([f()],kt.prototype,"afterUpdate",void 0),d([f()],kt.prototype,"afterRemoved",void 0),kt=d([k(rW)],kt);const kd=kt;function Mc(e,t,i=!1){let{hasM:s,hasZ:n}=e;Array.isArray(t)?t.length!==4||s||n?t.length===3&&i&&!s?(n=!0,s=!1):t.length===3&&s&&n&&(s=!1,n=!1):(s=!0,n=!0):(n=!n&&t.hasZ&&(!s||t.hasM),s=!s&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=s}var K1;function SM(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function lW(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Ir=K1=class extends pr{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return{};const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):lW(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const s=i.points?.[0];return s&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=s.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=s.length>3:i.hasM===void 0&&(i.hasM=s.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new tt,i=this.hasZ,s=this.hasM,n=i?3:2,r=e[0],o=SM(Math.min),a=SM(Math.max);let l,c,h,p,[m,g]=r,[y,v]=r;for(let b=0,w=e.length;b<w;b++){const x=e[b],[$,S]=x;if(m=o(m,$),g=o(g,S),y=a(y,$),v=a(v,S),i&&x.length>2){const M=x[2];l=o(l,M),h=a(h,M)}if(s&&x.length>n){const M=x[n];c=o(c,M),p=a(p,M)}}return t.xmin=m,t.ymin=g,t.xmax=y,t.ymax=v,t.spatialReference=this.spatialReference,i?(t.zmin=l,t.zmax=h):(t.zmin=void 0,t.zmax=void 0),s?(t.mmin=c,t.mmax=p):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=F(this.points)}addPoint(e){return Mc(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:F(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new K1(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let s=2;return this.hasZ&&(i.z=t[2],s=3),this.hasM&&(i.m=t[s]),new ae(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new ae(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Mc(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};d([f({readOnly:!0})],Ir.prototype,"cache",null),d([f()],Ir.prototype,"extent",null),d([f({type:[[Number]],json:{write:{isRequired:!0}}})],Ir.prototype,"points",void 0),d([ve("points")],Ir.prototype,"writePoints",null),Ir=K1=d([k("esri.geometry.Multipoint")],Ir),Ir.prototype.toJSON.isDefaultToJSON=!0;const Zg=Ir;function vue(e){const t=[];for(e.reset();e.nextPath();){const i=[];for(;e.nextPoint();)i.push([e.x,e.y]);t.push(i)}return e.reset(),t}function cW(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var Rm;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(Rm||(Rm={}));function $w(e,t){const i=t[0]-e[0],s=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(i*i+s*s+n*n)}return Math.sqrt(i*i+s*s)}function uW(e,t,i){const s=e[0]+i*(t[0]-e[0]),n=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[s,n,e[2]+i*(t[2]-e[2])]:[s,n]}function hW(e,t,i,s){return dW(e,t,i[s],i[s+1])}function dW(e,t,i,s){const[n,r]=t,[o,a]=i,[l,c]=s,h=l-o,p=c-a,m=h*h+p*p,g=(n-o)*h+(r-a)*p,y=Math.min(1,Math.max(0,g/m));return e[0]=o+h*y,e[1]=a+p*y,e}function bue(e,t,i,s,n,r){let o=i,a=s,l=n-o,c=r-a;if(l!==0||c!==0){const h=((e-o)*l+(t-a)*c)/(l*l+c*c);h>1?(o=n,a=r):h>0&&(o+=l*h,a+=c*h)}return l=e-o,c=t-a,l*l+c*c}function TA(e,t){return uW(e,t,.5)}function _ue(e){const t=e.length;let i=0;for(let s=0;s<t-1;++s)i+=$w(e[s],e[s+1]);return i}function kA(e,t=Rm.X,i=Rm.Y){let s=0;const n=e.length;let r=e[0];for(let o=1;o<n;o++){const a=e[o];s+=(a[t]-r[t])*(a[i]+r[i]),r=a}if(!PA(e)){const o=e[0];s+=(o[t]-r[t])*(o[i]+r[i])}return s>=0}function PA(e){const t=e.length;return t<3||ug(e[0],e[t-1])}function wue(e){"rings"in e&&(pW(e),fW(e))}function pW(e){if(!("rings"in e))return!1;let t=!1;for(const i of e.rings)PA(i)||(i.push(i[0].slice()),t=!0);return t}function fW(e){if(!("rings"in e)||e.rings.length===0||kA(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function xue(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function mW(e){return e?gW(e.rings,e.hasZ??!1):null}function gW(e,t){if(!e?.length)return null;const i=[],s=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let r=0,o=e.length;r<o;r++){const a=OA(e[r],t,n);a&&s.push(a)}if(s.sort((r,o)=>{let a=r[2]-o[2];return a===0&&t&&(a=r[4]-o[4]),a}),s.length&&(i[0]=s[0][0],i[1]=s[0][1],t&&(i[2]=s[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||t&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const r=e[0]&&e[0].length?yW(e[0],t):null;if(!r)return null;i[0]=r[0],i[1]=r[1],t&&r.length>2&&(i[2]=r[2])}return i}function OA(e,t,i){let s=0,n=0,r=0,o=0,a=0;const l=e.length?e[0][0]:0,c=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let m=0;m<e.length;m++){const g=e[m],y=e[(m+1)%e.length],[v,b,w]=g,x=v-l,$=b-c,[S,M,P]=y,C=S-l,I=M-c,D=x*I-C*$;if(o+=D,s+=(x+C)*D,n+=($+I)*D,t&&g.length>2&&y.length>2){const N=w-h,U=P-h,H=x*U-C*N;r+=(N+U)*H,a+=H}v<i[0]&&(i[0]=v),v>i[1]&&(i[1]=v),b<i[2]&&(i[2]=b),b>i[3]&&(i[3]=b),t&&(w<i[4]&&(i[4]=w),w>i[5]&&(i[5]=w))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const p=[s/(6*o)+l,n/(6*o)+c,o];return t&&(i[4]===i[5]||a===0?(p[3]=(i[4]+i[5])/2,p[4]=0):(p[3]=r/(6*a)+h,p[4]=a)),p}function Sue(e,t){let i=0,s=0,n=0;e.nextPoint();const r=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let a=0;a<e.pathSize;a++){e.seekInPath(a);const l=[e.x,e.y];e.seekInPath((a+1)%e.pathSize);const c=[e.x,e.y],[h,p]=l,m=h-r,g=p-o,[y,v]=c,b=y-r,w=v-o,x=m*w-b*g;n+=x,i+=(m+b)*x,s+=(g+w)*x,h<t[0]&&(t[0]=h),h>t[1]&&(t[1]=h),p<t[2]&&(t[2]=p),p>t[3]&&(t[3]=p)}return n>0&&(n*=-1),n?(n*=.5,[i/(6*n)+r,s/(6*n)+o,n]):null}function yW(e,t){const i=t?[0,0,0]:[0,0],s=t?[0,0,0]:[0,0];let n=0,r=0,o=0,a=0;for(let l=0,c=e.length;l<c-1;l++){const h=e[l],p=e[l+1];if(h&&p){i[0]=h[0],i[1]=h[1],s[0]=p[0],s[1]=p[1],t&&h.length>2&&p.length>2&&(i[2]=h[2],s[2]=p[2]);const m=$w(i,s);if(m){n+=m;const g=TA(h,p);r+=m*g[0],o+=m*g[1],t&&g.length>2&&(a+=m*g[2])}}}return n>0?t?[r/n,o/n,a/n]:[r/n,o/n]:e.length?e[0]:null}function vW(e){const{hasZ:t,totalSize:i}=e;if(i===0)return null;const s=[],n=[],r=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=OA(cW(e),e.hasZ,r);o&&n.push(o)}if(n.sort((o,a)=>{let l=o[2]-a[2];return l===0&&t&&(l=o[4]-a[4]),l}),n.length&&(s[0]=n[0][0],s[1]=n[0][1],t&&(s[2]=n[0][3]),(s[0]<r[0]||s[0]>r[1]||s[1]<r[2]||s[1]>r[3]||t&&(s[2]<r[4]||s[2]>r[5]))&&(s.length=0)),!s.length){e.reset(),e.nextPath();const o=e.pathSize?bW(e):null;if(!o)return null;s[0]=o[0],s[1]=o[1],t&&o.length>2&&(s[2]=o[2])}return s}function bW(e){const{hasZ:t}=e,i=t?[0,0,0]:[0,0],s=t?[0,0,0]:[0,0];let n=0,r=0,o=0,a=0;if(e.nextPoint()){let l=e.x,c=e.y,h=e.z;for(;e.nextPoint();){const p=e.x,m=e.y,g=e.z;i[0]=l,i[1]=c,s[0]=p,s[1]=m,t&&(i[2]=h,s[2]=g);const y=$w(i,s);if(y){n+=y;const v=TA(i,s);r+=y*v[0],o+=y*v[1],t&&v.length>2&&(a+=y*v[2])}l=p,c=m,h=g}}return n>0?t?[r/n,o/n,a/n]:[r/n,o/n]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const _W=1e-6;function Mue(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<_W){const n=vW(e);return n?[n[0],n[1]]:null}const i=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const s=[e.x,e.y];for(e.reset();e.nextPath();)xW(i,s,e);return i[0]*=1/t,i[1]*=1/t,i[0]+=s[0],i[1]+=s[1],i}const wW=1/3;function xW(e,t,i){if(!e||!i||i.pathSize<3)return null;i.nextPoint();const s=i.x,n=i.y;i.nextPoint();let r,o=i.x-s,a=i.y-n,l=0,c=0;for(;i.nextPoint();)l=i.x-s,c=i.y-n,r=.5*wW*(l*a-c*o),e[0]+=r*(o+l),e[1]+=r*(a+c),o=l,a=c;const h=i.getCurrentRingArea(),p=[s,n];return p[0]-=t[0],p[1]-=t[1],p[0]*=h,p[1]*=h,e[0]+=p[0],e[1]+=p[1],e}function Tw(e){const t=e[0],i=e[1],s=e[2];return Math.sqrt(t*t+i*i+s*s)}function SW(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function EA(e,t,i,s){return e[0]=t,e[1]=i,e[2]=s,e}function MW(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function AA(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function CA(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function IA(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function $W(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function TW(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function kW(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function PW(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function OW(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function EW(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function AW(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function LA(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function CW(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e}function RA(e,t){const i=t[0]-e[0],s=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(i*i+s*s+n*n)}function DA(e,t){const i=t[0]-e[0],s=t[1]-e[1],n=t[2]-e[2];return i*i+s*s+n*n}function NA(e){const t=e[0],i=e[1],s=e[2];return t*t+i*i+s*s}function IW(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function LW(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Q1(e,t){const i=t[0],s=t[1],n=t[2];let r=i*i+s*s+n*n;return r>0&&(r=1/Math.sqrt(r),e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r),e}function FA(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function RW(e,t,i){const s=t[0],n=t[1],r=t[2],o=i[0],a=i[1],l=i[2];return e[0]=n*l-r*a,e[1]=r*o-s*l,e[2]=s*a-n*o,e}function DW(e,t,i,s){const n=t[0],r=t[1],o=t[2];return e[0]=n+s*(i[0]-n),e[1]=r+s*(i[1]-r),e[2]=o+s*(i[2]-o),e}function NW(e,t,i,s,n,r){const o=r*r,a=o*(2*r-3)+1,l=o*(r-2)+r,c=o*(r-1),h=o*(3-2*r);return e[0]=t[0]*a+i[0]*l+s[0]*c+n[0]*h,e[1]=t[1]*a+i[1]*l+s[1]*c+n[1]*h,e[2]=t[2]*a+i[2]*l+s[2]*c+n[2]*h,e}function FW(e,t,i,s,n,r){const o=1-r,a=o*o,l=r*r,c=a*o,h=3*r*a,p=3*l*o,m=l*r;return e[0]=t[0]*c+i[0]*h+s[0]*p+n[0]*m,e[1]=t[1]*c+i[1]*h+s[1]*p+n[1]*m,e[2]=t[2]*c+i[2]*h+s[2]*p+n[2]*m,e}function jW(e,t){t=t||1;const i=Q_,s=2*i()*Math.PI,n=2*i()-1,r=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(s)*r,e[1]=Math.sin(s)*r,e[2]=n*t,e}function zW(e,t,i){const s=t[0],n=t[1],r=t[2];return e[0]=i[0]*s+i[4]*n+i[8]*r+i[12],e[1]=i[1]*s+i[5]*n+i[9]*r+i[13],e[2]=i[2]*s+i[6]*n+i[10]*r+i[14],e}function VW(e,t,i){const s=t[0],n=t[1],r=t[2];return e[0]=s*i[0]+n*i[3]+r*i[6],e[1]=s*i[1]+n*i[4]+r*i[7],e[2]=s*i[2]+n*i[5]+r*i[8],e}function UW(e,t,i){const s=i[0],n=i[1],r=i[2],o=i[3],a=t[0],l=t[1],c=t[2],h=n*c-r*l,p=r*a-s*c,m=s*l-n*a,g=n*m-r*p,y=r*h-s*m,v=s*p-n*h,b=2*o;return e[0]=a+h*b+2*g,e[1]=l+p*b+2*y,e[2]=c+m*b+2*v,e}function WW(e,t,i,s){const n=[],r=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(s)-n[2]*Math.sin(s),r[2]=n[1]*Math.sin(s)+n[2]*Math.cos(s),e[0]=r[0]+i[0],e[1]=r[1]+i[1],e[2]=r[2]+i[2],e}function BW(e,t,i,s){const n=[],r=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],r[0]=n[2]*Math.sin(s)+n[0]*Math.cos(s),r[1]=n[1],r[2]=n[2]*Math.cos(s)-n[0]*Math.sin(s),e[0]=r[0]+i[0],e[1]=r[1]+i[1],e[2]=r[2]+i[2],e}function HW(e,t,i,s){const n=[],r=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],r[0]=n[0]*Math.cos(s)-n[1]*Math.sin(s),r[1]=n[0]*Math.sin(s)+n[1]*Math.cos(s),r[2]=n[2],e[0]=r[0]+i[0],e[1]=r[1]+i[1],e[2]=r[2]+i[2],e}function GW(e,t){Q1(MM,e),Q1($M,t);const i=FA(MM,$M);return i>1?0:i<-1?Math.PI:Math.acos(i)}const MM=Ao(),$M=Ao();function qW(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function YW(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function ZW(e,t){if(e===t)return!0;const i=e[0],s=e[1],n=e[2],r=t[0],o=t[1],a=t[2],l=Mi();return Math.abs(i-r)<=l*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(s-o)<=l*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(n-a)<=l*Math.max(1,Math.abs(n),Math.abs(a))}function JW(e,t,i){const s=i[0]-t[0],n=i[1]-t[1],r=i[2]-t[2];let o=s*s+n*n+r*r;return o>0?(o=1/Math.sqrt(o),e[0]=s*o,e[1]=n*o,e[2]=r*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const XW=AA,KW=CA,QW=IA,eB=RA,tB=DA,iB=Tw,sB=NA;Object.freeze(Object.defineProperty({__proto__:null,abs:kW,add:MW,angle:GW,bezier:FW,ceil:$W,copy:SW,cross:RW,direction:JW,dist:eB,distance:RA,div:QW,divide:IA,dot:FA,equals:ZW,exactEquals:YW,floor:TW,hermite:NW,inverse:LW,len:iB,length:Tw,lerp:DW,max:EW,min:OW,mul:KW,multiply:CA,negate:IW,normalize:Q1,random:jW,rotateX:WW,rotateY:BW,rotateZ:HW,round:AW,scale:LA,scaleAndAdd:CW,set:EA,sign:PW,sqrDist:tB,sqrLen:sB,squaredDistance:DA,squaredLength:NA,str:qW,sub:XW,subtract:AA,transformMat3:VW,transformMat4:zW,transformQuat:UW},Symbol.toStringTag,{value:"Module"}));const TM=new Float32Array(1);function $ue(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function mn(e,t,i){return Math.min(Math.max(e,t),i)}function Tue(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function ku(e,t,i){return e+(t-e)*i}function kue(e,t,i,s,n){return ku(s,n,(e-t)/(i-t))}function Jg(e){return e*Math.PI/180}function jA(e){return 180*e/Math.PI}function Pue(e){return Math.acos(mn(e,-1,1))}function zA(e){return Math.asin(mn(e,-1,1))}function n0(e,t,i=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=i}const Dm=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function ev(e){return Dm.setFloat64(0,e),Dm.getBigInt64(0)}function nB(e){return Dm.setBigInt64(0,e),Dm.getFloat64(0)}const hf=BigInt("1000000"),rB=VA(1);function VA(e){const t=ev(e=Math.abs(e)),i=nB(t<=hf?hf:t-hf);return Math.abs(e-i)}function Oue(e,t,i=rB){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(i!=null&&VA(Math.min(Math.abs(e),Math.abs(t)))<i)return Math.abs(e-t)<=i;const s=ev(e),n=ev(t);return s<0!=n<0?!1:!((s<n?n-s:s-n)>hf)}function Eue(e){return UA(Math.max(-kM,Math.min(e,kM)))}function UA(e){return TM[0]=e,TM[0]}function Aue(e,t){const i=Tw(e),s=zA(e[2]/i),n=Math.atan2(e[1]/i,e[0]/i);return EA(t,i,s,n),t}function Cue(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],s=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(n0(t,1)&&n0(i,1)&&n0(s,1))}const kM=UA(34028234663852886e22);function xi(e=aB){return[e[0],e[1],e[2],e[3]]}function WA(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function Iue(e,t,i,s,n=xi()){return n[0]=e,n[1]=t,n[2]=i,n[3]=s,n}function Lue(e,t=xi()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function Rue(e,t){return new tt({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function Due(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Nue(e,t,i){if(t!=null)if("length"in t)tv(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}else WA(i,e)}function BA(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function HA(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function Fue(e){return BA(e)*HA(e)}function jue(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function zue(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function oB(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function Vue(e){return e?WA(e,PM):xi(PM)}function tv(e){return e!=null&&e.length===4}function Uue(e,t){return tv(e)&&tv(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const PM=[1/0,1/0,-1/0,-1/0],aB=[0,0,0,0];function GA(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function qA(e){return e.points!==void 0}function YA(e){return e.x!==void 0&&e.y!==void 0}function ZA(e){return e.paths!==void 0}function JA(e){return e.rings!==void 0}function XA(e){function t(i,s){return i==null?s:s==null?i:e(i,s)}return t}const lo=XA(Math.min),co=XA(Math.max);function Wue(e,t){return ZA(t)?$c(e,t.paths,!1,!1):JA(t)?$c(e,t.rings,!1,!1):qA(t)?kw(e,t.points,!1,!1,!1,!1):GA(t)?KA(e,t):(YA(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function Bue(e){let t,i,s,n;for(e.reset(),t=s=1/0,i=n=-1/0;e.nextPath();){const r=lB(e);t=Math.min(r[0],t),s=Math.min(r[1],s),i=Math.max(r[2],i),n=Math.max(r[3],n)}return xi([t,s,i,n])}function lB(e){let t,i,s,n;for(t=s=1/0,i=n=-1/0;e.nextPoint();)t=Math.min(e.x,t),s=Math.min(e.y,s),i=Math.max(e.x,i),n=Math.max(e.y,n);return xi([t,s,i,n])}function Hue(e,t){return ZA(t)?$c(e,t.paths,!0,!1):JA(t)?$c(e,t.rings,!0,!1):qA(t)?kw(e,t.points,!0,!1,!0,!1):GA(t)?KA(e,t,!0,!1,!0,!1):(YA(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function $c(e,t,i,s){const n=i?3:2;if(!t.length||!t[0].length)return null;let r,o,a,l,[c,h]=t[0][0],[p,m]=t[0][0];for(let g=0;g<t.length;g++){const y=t[g];for(let v=0;v<y.length;v++){const b=y[v],[w,x]=b;if(c=lo(c,w),h=lo(h,x),p=co(p,w),m=co(m,x),i&&b.length>2){const $=b[2];r=lo(r,$),o=co(o,$)}if(s&&b.length>n){const $=b[n];a=lo(r,$),l=co(o,$)}}}return i?s?(e[0]=c,e[1]=h,e[2]=r,e[3]=a,e[4]=p,e[5]=m,e[6]=o,e[7]=l,e.length=8,e):(e[0]=c,e[1]=h,e[2]=r,e[3]=p,e[4]=m,e[5]=o,e.length=6,e):s?(e[0]=c,e[1]=h,e[2]=a,e[3]=p,e[4]=m,e[5]=l,e.length=6,e):(e[0]=c,e[1]=h,e[2]=p,e[3]=m,e.length=4,e)}function KA(e,t,i,s,n,r){const o=t.xmin,a=t.xmax,l=t.ymin,c=t.ymax;let h=t.zmin,p=t.zmax,m=t.mmin,g=t.mmax;return n?(h=h||0,p=p||0,r?(m=m||0,g=g||0,e[0]=o,e[1]=l,e[2]=h,e[3]=m,e[4]=a,e[5]=c,e[6]=p,e[7]=g,e):(e[0]=o,e[1]=l,e[2]=h,e[3]=a,e[4]=c,e[5]=p,e)):r?(m=m||0,g=g||0,e[0]=o,e[1]=l,e[2]=m,e[3]=a,e[4]=c,e[5]=g,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=c,e)}function kw(e,t,i,s,n,r){const o=i?3:2,a=s&&r,l=i&&n;if(!t.length||!t[0].length)return null;let c,h,p,m,[g,y]=t[0],[v,b]=t[0];for(let w=0;w<t.length;w++){const x=t[w],[$,S]=x;if(g=lo(g,$),y=lo(y,S),v=co(v,$),b=co(b,S),l&&x.length>2){const M=x[2];c=lo(c,M),h=co(h,M)}if(a&&x.length>o){const M=x[o];p=lo(c,M),m=co(h,M)}}return n?(c=c||0,h=h||0,r?(p=p||0,m=m||0,e[0]=g,e[1]=y,e[2]=c,e[3]=p,e[4]=v,e[5]=b,e[6]=h,e[7]=m,e):(e[0]=g,e[1]=y,e[2]=c,e[3]=v,e[4]=b,e[5]=h,e)):r?(p=p||0,m=m||0,e[0]=g,e[1]=y,e[2]=p,e[3]=v,e[4]=b,e[5]=m,e):(e[0]=g,e[1]=y,e[2]=v,e[3]=b,e)}function cB(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function uB(e){return e.points!==void 0}function hB(e){return e.x!==void 0&&e.y!==void 0}function dB(e){return e.paths!==void 0}function pB(e){return e.rings!==void 0}const Pw=[];function QA(e,t,i,s){return{xmin:e,ymin:t,xmax:i,ymax:s}}function eC(e,t,i,s,n,r){return{xmin:e,ymin:t,zmin:i,xmax:s,ymax:n,zmax:r}}function tC(e,t,i,s,n,r){return{xmin:e,ymin:t,mmin:i,xmax:s,ymax:n,mmax:r}}function iC(e,t,i,s,n,r,o,a){return{xmin:e,ymin:t,zmin:i,mmin:s,xmax:n,ymax:r,zmax:o,mmax:a}}function Ow(e,t=!1,i=!1){return t?i?iC(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):eC(e[0],e[1],e[2],e[3],e[4],e[5]):i?tC(e[0],e[1],e[2],e[3],e[4],e[5]):QA(e[0],e[1],e[2],e[3])}function Gue(e){return e?cB(e)?e:hB(e)?mB(e):pB(e)?sC(e):dB(e)?nC(e):uB(e)?fB(e):null:null}function fB(e){const{hasZ:t,hasM:i,points:s}=e;return Ow(kw(Pw,s,t??!1,i??!1),t,i)}function mB(e){const{x:t,y:i,z:s,m:n}=e,r=n!=null;return s!=null?r?iC(t,i,s,n,t,i,s,n):eC(t,i,s,t,i,s):r?tC(t,i,n,t,i,n):QA(t,i,t,i)}function sC(e){const{hasZ:t,hasM:i,rings:s}=e,n=$c(Pw,s,t??!1,i??!1);return n?Ow(n,t,i):null}function nC(e){const{hasZ:t,hasM:i,paths:s}=e,n=$c(Pw,s,t??!1,i??!1);return n?Ow(n,t,i):null}var df;function OM(e){return!Array.isArray(e[0])}let Us=df=class extends pr{static fromExtent(e){const t=e.clone().normalize(),i=e.spatialReference;let s=!1,n=!1;for(const o of t)o.hasZ&&(s=!0),o.hasM&&(n=!0);const r={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(s&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(n&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a}),spatialReference:i};return s&&(r.hasZ=!0),n&&(r.hasM=!0),new df(r)}constructor(...e){super(...e),this.rings=[],this.type="polygon"}normalizeCtorArgs(e,t){let i,s,n=null,r=null;return e&&!Array.isArray(e)?(n=e.rings??null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),i=e.hasZ,s=e.hasM):n=e,n=n||[],t=t||ge.WGS84,n.length&&n[0]?.[0]!=null&&typeof n[0][0]=="number"&&(n=[n]),r=n[0]?.[0],r&&(i===void 0&&s===void 0?(i=r.length>2,s=r.length>3):i===void 0?i=s?r.length>3:r.length>2:s===void 0&&(s=i?r.length>3:r.length>2)),{rings:n,spatialReference:t,hasZ:i,hasM:s}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=mW(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new ae;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=sC(this);if(!t)return null;const i=new tt(t);return i.spatialReference=e,i}get isSelfIntersecting(){return s8(this.rings)}writeRings(e,t){t.rings=F(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(OM(e)){const s=[];for(let n=0,r=e.length;n<r;n++)s[n]=e[n].toArray();t[i]=s}else t[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new df;return e.spatialReference=this.spatialReference,e.rings=F(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;if(t!=null!=(i!=null)||t!=null&&i!=null&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const s=([n,r,o,a],[l,c,h,p])=>n===l&&r===c&&(o==null&&h==null||o===h)&&(a==null&&p==null||a===p);for(let n=0;n<this.rings.length;n++){const r=this.rings[n],o=e.rings[n];if(!ug(r,o,s))return!1}return!0}contains(e){if(!e)return!1;const t=Tg(e,this.spatialReference);return G_(this,t??e)}isClockwise(e){const t=OM(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e;return kA(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],s=this.hasZ,n=this.hasM;return s&&!n?new ae(i[0],i[1],i[2],void 0,this.spatialReference):n&&!s?new ae(i[0],i[1],void 0,i[2],this.spatialReference):s&&n?new ae(i[0],i[1],i[2],i[3],this.spatialReference):new ae(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Mc(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new ae(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,s=t.map(n=>new ae(n,i));return this.notifyChange("rings"),s}setPoint(e,t,i){return this._validateInputs(e,t)?(Mc(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const s=this.rings[e];if(i&&(t<0||t>s.length)||!i&&(t<0||t>=s.length))return!1}return!0}toJSON(e){return this.write({},e)}};d([f({readOnly:!0})],Us.prototype,"cache",null),d([f({readOnly:!0})],Us.prototype,"centroid",null),d([f({readOnly:!0})],Us.prototype,"extent",null),d([f({readOnly:!0})],Us.prototype,"isSelfIntersecting",null),d([f({type:[[[Number]]],json:{write:{isRequired:!0}}})],Us.prototype,"rings",void 0),d([ve("rings")],Us.prototype,"writeRings",null),Us=df=d([k("esri.geometry.Polygon")],Us),Us.prototype.toJSON.isDefaultToJSON=!0;const Mo=Us;var iv;function gB(e){return!Array.isArray(e[0])}let Lr=iv=class extends pr{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let i,s,n=null,r=null;return e&&!Array.isArray(e)?(n=e.paths??null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),i=e.hasZ,s=e.hasM):n=e,n=n||[],t=t||ge.WGS84,n.length&&n[0]?.[0]!=null&&typeof n[0][0]=="number"&&(n=[n]),r=n[0]?.[0],r&&(i===void 0&&s===void 0?(i=r.length>2,s=!1):i===void 0?i=!s&&r.length>3:s===void 0&&(s=!i&&r.length>3)),{paths:n,spatialReference:t,hasZ:i,hasM:s}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=nC(this);if(!t)return null;const i=new tt(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=F(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(gB(e)){const s=[];for(let n=0,r=e.length;n<r;n++)s[n]=e[n].toArray();t[i]=s}else t[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new iv;return e.spatialReference=this.spatialReference,e.paths=F(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],s=this.hasZ,n=this.hasM;return s&&!n?new ae(i[0],i[1],i[2],void 0,this.spatialReference):n&&!s?new ae(i[0],i[1],void 0,i[2],this.spatialReference):s&&n?new ae(i[0],i[1],i[2],i[3],this.spatialReference):new ae(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Mc(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,s=t.map(n=>new ae(n,i));return this.notifyChange("paths"),s}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new ae(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(Mc(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const s=this.paths[e];if(i&&(t<0||t>s.length)||!i&&(t<0||t>=s.length))return!1}return!0}toJSON(e){return this.write({},e)}};d([f({readOnly:!0})],Lr.prototype,"cache",null),d([f({readOnly:!0})],Lr.prototype,"extent",null),d([f({type:[[[Number]]],json:{write:{isRequired:!0}}})],Lr.prototype,"paths",void 0),d([ve("paths")],Lr.prototype,"writePaths",null),Lr=iv=d([k("esri.geometry.Polyline")],Lr),Lr.prototype.toJSON.isDefaultToJSON=!0;const Os=Lr,kr=at.radius,fs=at.eccentricitySquared,yB={a1:kr*fs,a2:kr*fs*kr*fs,a3:kr*fs*fs/2,a4:kr*fs*kr*fs*2.5,a5:kr*fs+kr*fs*fs/2,a6:1-fs};1/294.9786982,1/298.257222101,at.radius,at.flattening,1/298.257222101,_o.radius,_o.flattening,1/192.0430107526882,cn.radius,cn.flattening,1/10.2079945799458,1/43.61604095563141,cn.radius;var E;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(E||(E={}));const vB={[E.WGS84]:{[E.CGCS2000]:Be,[E.GCSMARS2000]:null,[E.GCSMOON2000]:null,[E.LON_LAT]:Be,[E.SPHERICAL_ECEF]:vh,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:ac,[E.PLATE_CARREE]:lc,[E.WGS84]:Be,[E.WGS84_ECEF]:hc},[E.CGCS2000]:{[E.CGCS2000]:Be,[E.GCSMARS2000]:null,[E.GCSMOON2000]:null,[E.LON_LAT]:Be,[E.SPHERICAL_ECEF]:vh,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:ac,[E.PLATE_CARREE]:lc,[E.WGS84]:Be,[E.WGS84_ECEF]:hc},[E.GCSMARS2000]:{[E.CGCS2000]:null,[E.GCSMARS2000]:Be,[E.GCSMOON2000]:null,[E.LON_LAT]:Be,[E.SPHERICAL_ECEF]:null,[E.SPHERICAL_MARS_PCPF]:CM,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:null,[E.PLATE_CARREE]:null,[E.WGS84]:null,[E.WGS84_ECEF]:null},[E.GCSMOON2000]:{[E.CGCS2000]:null,[E.GCSMARS2000]:null,[E.GCSMOON2000]:Be,[E.LON_LAT]:Be,[E.SPHERICAL_ECEF]:null,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:AM,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:null,[E.PLATE_CARREE]:null,[E.WGS84]:null,[E.WGS84_ECEF]:null},[E.WEB_MERCATOR]:{[E.CGCS2000]:yh,[E.GCSMARS2000]:null,[E.GCSMOON2000]:null,[E.LON_LAT]:yh,[E.SPHERICAL_ECEF]:bB,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:Be,[E.PLATE_CARREE]:xB,[E.WGS84]:yh,[E.WGS84_ECEF]:_B},[E.WGS84_ECEF]:{[E.CGCS2000]:dc,[E.GCSMARS2000]:null,[E.GCSMOON2000]:null,[E.LON_LAT]:dc,[E.SPHERICAL_ECEF]:AB,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:CB,[E.PLATE_CARREE]:SB,[E.WGS84]:dc,[E.WGS84_ECEF]:Be},[E.SPHERICAL_ECEF]:{[E.CGCS2000]:uc,[E.GCSMARS2000]:null,[E.GCSMOON2000]:null,[E.LON_LAT]:uc,[E.SPHERICAL_ECEF]:Be,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:PB,[E.PLATE_CARREE]:MB,[E.WGS84]:uc,[E.WGS84_ECEF]:OB},[E.SPHERICAL_MARS_PCPF]:{[E.CGCS2000]:null,[E.GCSMARS2000]:LM,[E.GCSMOON2000]:null,[E.LON_LAT]:LM,[E.SPHERICAL_ECEF]:null,[E.SPHERICAL_MARS_PCPF]:Be,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:null,[E.PLATE_CARREE]:null,[E.WGS84]:null,[E.WGS84_ECEF]:null},[E.SPHERICAL_MOON_PCPF]:{[E.CGCS2000]:null,[E.GCSMARS2000]:null,[E.GCSMOON2000]:IM,[E.LON_LAT]:IM,[E.SPHERICAL_ECEF]:null,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:Be,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:null,[E.PLATE_CARREE]:null,[E.WGS84]:null,[E.WGS84_ECEF]:null},[E.UNKNOWN]:{[E.CGCS2000]:null,[E.GCSMARS2000]:null,[E.GCSMOON2000]:null,[E.LON_LAT]:null,[E.SPHERICAL_ECEF]:null,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:Be,[E.WEB_MERCATOR]:null,[E.PLATE_CARREE]:null,[E.WGS84]:null,[E.WGS84_ECEF]:null},[E.LON_LAT]:{[E.CGCS2000]:Be,[E.GCSMARS2000]:Be,[E.GCSMOON2000]:Be,[E.LON_LAT]:Be,[E.SPHERICAL_ECEF]:vh,[E.SPHERICAL_MARS_PCPF]:CM,[E.SPHERICAL_MOON_PCPF]:AM,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:ac,[E.PLATE_CARREE]:lc,[E.WGS84]:Be,[E.WGS84_ECEF]:hc},[E.PLATE_CARREE]:{[E.CGCS2000]:cc,[E.GCSMARS2000]:null,[E.GCSMOON2000]:null,[E.LON_LAT]:cc,[E.SPHERICAL_ECEF]:$B,[E.SPHERICAL_MARS_PCPF]:null,[E.SPHERICAL_MOON_PCPF]:null,[E.UNKNOWN]:null,[E.WEB_MERCATOR]:TB,[E.PLATE_CARREE]:Be,[E.WGS84]:cc,[E.WGS84_ECEF]:kB}};function rC(e,t,i=oC()){return e==null||t==null?null:IB(e,t,i).projector}function EM(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=rl(e,1)),vm(e)?t.spatialReferenceId=E.SPHERICAL_ECEF:qa(e)?t.spatialReferenceId=E.WGS84:pn(e)?t.spatialReferenceId=E.WEB_MERCATOR:_F(e)?t.spatialReferenceId=E.PLATE_CARREE:e.wkt===MF.wkt?t.spatialReferenceId=E.WGS84_ECEF:e.wkid===Ga.CGCS2000?t.spatialReferenceId=E.CGCS2000:e.wkt===B_.wkt?t.spatialReferenceId=E.SPHERICAL_MARS_PCPF:e.wkt===H_.wkt?t.spatialReferenceId=E.SPHERICAL_MOON_PCPF:jP(e)?t.spatialReferenceId=E.GCSMARS2000:zP(e)?t.spatialReferenceId=E.GCSMOON2000:t.spatialReferenceId=E.UNKNOWN):E.UNKNOWN}function Be(e,t,i,s){e!==i&&(i[s++]=e[t++],i[s++]=e[t++],i[s]=e[t])}function yh(e,t,i,s){i[s]=kc*(e[t]/Fa),i[s+1]=kc*(lC-2*Math.atan(Math.exp(-e[t+1]/Fa))),i[s+2]=e[t+2]}function bB(e,t,i,s){const n=e[t]/Fa,r=lC-2*Math.atan(Math.exp(-e[t+1]/Fa)),o=Fa+e[t+2],a=Math.cos(r)*o;i[s]=Math.cos(n)*a,i[s+1]=Math.sin(n)*a,i[s+2]=Math.sin(r)*o}function _B(e,t,i,s){yh(e,t,i,s),hc(i,s,i,s)}function wB(e,t,i,s,n){const r=.4999999*Xg,o=mn(Tc*e[t+1],-r,r),a=Math.sin(o);i[s++]=Tc*e[t]*n.radius,i[s++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[s]=e[t+2]}function ac(e,t,i,s){wB(e,t,i,s,at)}function lc(e,t,i,s){i[s]=e[t]*RM,i[s+1]=e[t+1]*RM,i[s+2]=e[t+2]}function cc(e,t,i,s){i[s]=e[t]*DM,i[s+1]=e[t+1]*DM,i[s+2]=e[t+2]}function xB(e,t,i,s){yh(e,t,i,s),lc(i,s,i,s)}function SB(e,t,i,s){dc(e,t,i,s),lc(i,s,i,s)}function MB(e,t,i,s){uc(e,t,i,s),lc(i,s,i,s)}function $B(e,t,i,s){cc(e,t,i,s),vh(i,s,i,s)}function TB(e,t,i,s){cc(e,t,i,s),ac(i,s,i,s)}function kB(e,t,i,s){cc(e,t,i,s),hc(i,s,i,s)}function Ew(e,t,i,s,n){const r=n+e[t+2],o=Tc*e[t+1],a=Tc*e[t],l=Math.cos(o)*r;i[s]=Math.cos(a)*l,i[s+1]=Math.sin(a)*l,i[s+2]=Math.sin(o)*r}function AM(e,t,i,s){Ew(e,t,i,s,_o.radius)}function CM(e,t,i,s){Ew(e,t,i,s,cn.radius)}function vh(e,t,i,s){Ew(e,t,i,s,at.radius)}function Aw(e,t,i,s,n){const r=e[t],o=e[t+1],a=e[t+2],l=Math.sqrt(r*r+o*o+a*a),c=zA(a/(l===0?1:l)),h=Math.atan2(o,r);i[s++]=kc*h,i[s++]=kc*c,i[s]=l-n}function IM(e,t,i,s){Aw(e,t,i,s,_o.radius)}function LM(e,t,i,s){Aw(e,t,i,s,cn.radius)}function uc(e,t,i,s){Aw(e,t,i,s,at.radius)}function PB(e,t,i,s){uc(e,t,i,s),ac(i,s,i,s)}function OB(e,t,i,s){uc(e,t,i,s),hc(i,s,i,s)}function EB(e,t,i,s,n){const r=Tc*e[t],o=Tc*e[t+1],a=e[t+2],l=Math.sin(o),c=Math.cos(o),h=n.radius/Math.sqrt(1-n.eccentricitySquared*l*l);i[s++]=(h+a)*c*Math.cos(r),i[s++]=(h+a)*c*Math.sin(r),i[s++]=(h*(1-n.eccentricitySquared)+a)*l}function hc(e,t,i,s){EB(e,t,i,s,at)}function dc(e,t,i,s){const n=yB,r=e[t],o=e[t+1],a=e[t+2];let l,c,h,p,m,g,y,v,b,w,x,$,S,M,P,C,I,D,N,U,H;l=Math.abs(a),c=r*r+o*o,h=Math.sqrt(c),p=c+a*a,m=Math.sqrt(p),U=Math.atan2(o,r),g=a*a/p,y=c/p,M=n.a2/m,P=n.a3-n.a4/m,y>.3?(v=l/m*(1+y*(n.a1+M+g*P)/m),N=Math.asin(v),w=v*v,b=Math.sqrt(1-w)):(b=h/m*(1-g*(n.a5-M-y*P)/m),N=Math.acos(b),w=1-b*b,v=Math.sqrt(w)),x=1-at.eccentricitySquared*w,$=at.radius/Math.sqrt(x),S=n.a6*$,M=h-$*b,P=l-S*v,I=b*M+v*P,C=b*P-v*M,D=C/(S/x+I),N+=D,H=I+C*D/2,a<0&&(N=-N),i[s++]=kc*U,i[s++]=kc*N,i[s]=H}function AB(e,t,i,s){dc(e,t,i,s),vh(i,s,i,s)}function CB(e,t,i,s){dc(e,t,i,s),ac(i,s,i,s)}function IB(e,t,i){if(e==null||t==null||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const s=EM(e,i.source),n=EM(t,i.dest);return s===E.UNKNOWN&&n===E.UNKNOWN?$t(e,t)?i.projector=Be:i.projector=null:i.projector=vB[s][n],i}function oC(){return{source:{spatialReference:null,spatialReferenceId:E.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:E.UNKNOWN,metersPerUnit:1},projector:Be}}const que={spatialReference:null,spatialReferenceId:E.UNKNOWN},Yue={spatialReference:null,spatialReferenceId:E.UNKNOWN},aC=oC(),Tc=Jg(1),kc=jA(1),Xg=Math.PI,lC=.5*Xg,Fa=at.radius,RM=Fa*Xg/180,DM=180/(Fa*Xg);function Pd(e,t,i,s,n,r,o=1){const a=rC(t,n,aC);if(a==null)return!1;if(a===Be){if(e===s&&i===r)return!0;const c=i+3*o;for(let h=i,p=r;h<c;h++,p++)s[p]=e[h];return!0}const l=i+3*o;for(let c=i,h=r;c<l;c+=3,h+=3)a(e,c,s,h);return!0}var Zue=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:Pd},Symbol.toStringTag,{value:"Module"}));function NM(e,t,i,s,n,r){return pp[0]=e,pp[1]=t,pp[2]=i,Pd(pp,s,0,n,r,0,1)}const pp=Ao();let fp=0;class pc{static fromGE(t){const i=new pc;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}constructor(t){this.uid=fp++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=fp++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=fp++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=fp++}getInverse(){const t=new pc;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class er{static cacheKey(t,i){return[t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??"",i.wkid?.toString()??"-1",i.wkt?.toString()??"",i.wkt2?.toString()??""].join()}static fromGE(t){const i=new er;let s="";for(const n of t.steps){const r=pc.fromGE(n);i.steps.push(r),s+=r.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=s,i}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t?.steps)for(const i of t.steps)i instanceof pc?this.steps.push(i):this.steps.push(new pc({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const t=new er;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const s=this.steps[i];t.steps.push(s.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,s){this._cachedProjection[er.cacheKey(t,i)]=s}getCachedGeTransformation(t,i){let s="";for(const r of this.steps)s+=r.uid.toString()+",";s!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=s);const n=this._cachedProjection[er.cacheKey(t,i)];return n===void 0?null:n}}function LB(e,t,i){if(t==null||i==null||i.vcsWkid||$t(t,i)||wo(t)||wo(i))return null;const s=Xx(t)/Xx(i);if(s===1)return null;switch(e){case"point":case"esriGeometryPoint":return n=>RB(n,s);case"polyline":case"esriGeometryPolyline":return n=>NB(n,s);case"polygon":case"esriGeometryPolygon":return n=>DB(n,s);case"multipoint":case"esriGeometryMultipoint":return n=>FB(n,s);case"extent":case"esriGeometryEnvelope":return n=>jB(n,s);default:return null}}function RB(e,t){e?.z!=null&&(e.z*=t)}function DB(e,t){if(e)for(const i of e.rings)for(const s of i)s.length>2&&(s[2]*=t)}function NB(e,t){if(e)for(const i of e.paths)for(const s of i)s.length>2&&(s[2]*=t)}function FB(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function jB(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let As=null,$o=null,bh=null,pf={};const Cw=new yd;function fr(){return!!As&&U_()}function cC(){return!!fr()||(X(Cw),dr(),!1)}function uC(e,t){return!e||!t||Rs(e,t)||cC()}function zB(e,t){return!Rs(e,t)&&!fr()}function dr(e){return bh==null&&(bh=Promise.all([IP(),W(()=>import("./geometryEngineBase.99ab4263.js"),[]).then(t=>t.g),W(()=>import("./hydrated.4e0a1f30.js"),[])])),bh.then(([,t,{hydratedAdapter:i}])=>{pt(e),$o=i,As=t.default,As._enableProjection(gF),Cw.notify()})}function ll(e,t,i=null,s=null){return Array.isArray(e)?e.length===0?[]:sv($o,e,e[0].spatialReference,t,i,s):sv($o,[e],e.spatialReference,t,i,s)[0]}function sv(e,t,i,s,n=null,r=null){if(i==null||s==null)return t;if(Rs(i,s,n))return t.map(o=>ff(o,i,s));if(n==null&&vm(i))return t.map(o=>ff(o,i,ge.WGS84)).map(o=>Gh(o,s));if(n==null&&vm(s))return t.map(o=>Gh(o,ge.WGS84)).map(o=>ff(o,ge.WGS84,s));if(n==null){const o=er.cacheKey(i,s);pf[o]!==void 0?n=pf[o]:((n=dC(i,s,void 0))==null&&(n=new er),pf[o]=n)}if(As==null||e==null)throw new Kg;return r!=null?As._project(e,t,i,s,n,r):As._project(e,t,i,s,n)}function VB(e,t){const i=hC([e],t);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function hC(e,t){if(!fr()){for(const i of e)if(i!=null&&!$t(i.spatialReference,t)&&Li(i.spatialReference)&&Li(t)&&!Rs(i.spatialReference,t))return X(Cw),{pending:dr(),geometries:null}}return{pending:null,geometries:e.map(i=>i==null?null:$t(i.spatialReference,t)?i:Li(i.spatialReference)&&Li(t)?Gh(i,t):null)}}function dC(e,t,i=null){if(e==null||t==null)return null;if(As==null||$o==null)throw new Kg;const s=As._getTransformation($o,e,t,i,i?.spatialReference);return s!==null?er.fromGE(s):null}function UB(e,t,i=null){if(As==null||$o==null)throw new Kg;const s=As._getTransformationBySuitability($o,e,t,i,i?.spatialReference);if(s!==null){const n=[];for(const r of s)n.push(er.fromGE(r));return n}return[]}class Kg extends V{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function WB(){As=null,$o=null,bh=null,pf={}}const BB={get loadPromise(){return bh}};function Gh(e,t){try{const i=ll(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const s=LB(i.type,e.spatialReference,t);return s?.(i),i}catch(i){if(!(i instanceof Kg))throw i;return null}}async function HB(e,t,i){const s=e.spatialReference;return s!=null&&t!=null&&await pC(s,t,null,i),Gh(e,t)}function Rs(e,t,i){return!i&&(!!$t(e,t)||Li(e)&&Li(t)&&!!rC(e,t,aC))}function GB(e,t){if($t(e,t))return!0;if(!Li(e)||!Li(t))return!1;const i=qa(e)||pn(e)||Zx(e),s=qa(t)||pn(t)||Zx(t);return i&&s}async function pC(e,t,i,s){if(fr())return Ix(s);if(Array.isArray(e)){for(const{source:n,dest:r,geographicTransformation:o}of e)if(n&&r&&!Rs(n,r,o))return dr(s)}else if(e&&t&&!Rs(e,t,i))return dr(s);return Ix(s)}function ff(e,t,i){return e?"x"in e?fC(e,t,new ae,i,0):"xmin"in e?vC(e,t,new tt,i,0):"rings"in e?yC(e,t,new Mo,i,0):"paths"in e?gC(e,t,new Os,i,0):"points"in e?mC(e,t,new Zg,i,0):null:null}function qB(e,t,i=t.spatialReference,s=0){return i!=null&&e.spatialReference!=null&&fC(e,e.spatialReference,t,i,s)!=null}function fC(e,t,i,s,n){Gt[0]=e.x,Gt[1]=e.y;const r=e.z;return Gt[2]=r!==void 0?r:n,Pd(Gt,t,0,Gt,s,0,1)?(i.x=Gt[0],i.y=Gt[1],i.spatialReference=s,r!==void 0||wo(s)?(i.z=Gt[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function YB(e,t,i=t.spatialReference,s=0){return e.spatialReference!=null&&i!=null&&mC(e,e.spatialReference,t,i,s)!=null}function mC(e,t,i,s,n){const{points:r,hasZ:o,hasM:a}=e,l=[],c=r.length,h=[];for(const m of r)h.push(m[0],m[1],o?m[2]:n);if(!Pd(h,t,0,h,s,0,c))return null;const p=o||wo(s);for(let m=0;m<c;++m){const g=3*m,y=h[g],v=h[g+1];p&&a?l.push([y,v,h[g+2],r[m][3]]):p?l.push([y,v,h[g+2]]):a?l.push([y,v,r[m][2]]):l.push([y,v])}return i.points=l,i.spatialReference=s,i.hasZ=o,i.hasM=a,i}function ZB(e,t,i=t.spatialReference,s=0){return e.spatialReference!=null&&i!=null&&gC(e,e.spatialReference,t,i,s)!=null}function gC(e,t,i,s,n){const{paths:r,hasZ:o,hasM:a}=e,l=[];if(!bC(r,o??!1,a??!1,t,l,s,n))return null;const c=o||wo(s);return i.paths=l,i.spatialReference=s,i.hasZ=c,i.hasM=a,i}function JB(e,t,i=t.spatialReference,s=0){return e.spatialReference!=null&&i!=null&&yC(e,e.spatialReference,t,i,s)!=null}function yC(e,t,i,s,n){const{rings:r,hasZ:o,hasM:a}=e,l=[];if(!bC(r,o??!1,a??!1,t,l,s,n))return null;const c=o||wo(s);return i.rings=l,i.spatialReference=s,i.hasZ=c,i.hasM=a,i}function XB(e,t,i=t.spatialReference,s=0){return e.spatialReference!=null&&i!=null&&vC(e,e.spatialReference,t,i,s)!=null}function vC(e,t,i,s,n){const{xmin:r,ymin:o,xmax:a,ymax:l,hasZ:c,hasM:h}=e,p=c?e.zmin:n;if(!NM(r,o,p,t,Gt,s))return null;const m=c||wo(s);i.xmin=Gt[0],i.ymin=Gt[1],m&&(i.zmin=Gt[2]);const g=c?e.zmax:n;return NM(a,l,g,t,Gt,s)?(i.xmax=Gt[0],i.ymax=Gt[1],m&&(i.zmax=Gt[2]),h&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=s,i):null}function bC(e,t,i,s,n,r,o=0){const a=new Array;for(const h of e)for(const p of h)a.push(p[0],p[1],t?p[2]:o);if(!Pd(a,s,0,a,r,0,a.length/3))return!1;let l=0;n.length=0;const c=t||wo(r);for(const h of e){const p=new Array;for(const m of h)c&&i?p.push([a[l++],a[l++],a[l++],m[3]]):c?p.push([a[l++],a[l++],a[l++]]):i?(p.push([a[l++],a[l++],m[2]]),l++):(p.push([a[l++],a[l++]]),l++);n.push(p)}return!0}const Gt=Ao();var Jue=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Rs,getTransformation:dC,getTransformations:UB,initializeProjection:pC,isEqualBaseGCS:GB,isLoaded:fr,isLoadedOrLoad:cC,isLoadedOrLoadFor:uC,load:dr,project:ll,projectExtent:XB,projectMany:sv,projectMultipoint:YB,projectOrLoad:VB,projectOrLoadMany:hC,projectPoint:qB,projectPolygon:JB,projectPolyline:ZB,projectWithZConversion:HB,projectWithoutEngine:ff,requiresLoad:zB,test:BB,tryProjectWithZConversion:Gh,unload:WB},Symbol.toStringTag,{value:"Module"}));let Gi=class extends Q{constructor(e){super(e),this._basemapCache={},this._loadingProjectionEngine=!1,this.nextBasemap=of("hybrid",this._basemapCache),this.view=null}initialize(){le(()=>this.nextBasemap,e=>{e&&!e.loaded&&e.load().catch(()=>{})},Qt)}destroy(){this.view=null,xO(this._basemapCache),this._basemapCache=null}get _nextBasemapSpatialReferenceTask(){return hj(this.view,this.nextBasemap)}get _viewSpatialReferenceLocked(){const{view:e}=this;return!e||!("spatialReferenceLocked"in e)||e.spatialReferenceLocked}get activeBasemap(){return of(this.view?.map?.basemap??"topo-vector",this._basemapCache)}castNextBasemap(e){return of(e,this._basemapCache)}get state(){const{view:e}=this;if(!e?.ready||this._nextBasemapSpatialReferenceTask.updating)return"disabled";const{spatialReference:t}=this._nextBasemapSpatialReferenceTask;return this._viewSpatialReferenceLocked&&t!=null&&!e.spatialReference.equals(t)?"incompatible-next-basemap":this._loadingProjectionEngine?"loading":"ready"}async toggle(){const{activeBasemap:e,nextBasemap:t,state:i,view:s}=this;if(!s||i==="disabled"||i==="incompatible-next-basemap")return;const n=this._viewSpatialReferenceLocked;if(!n){if(await Bg(()=>!this._nextBasemapSpatialReferenceTask.updating),t!==this.nextBasemap||e!==this.activeBasemap)return;const{spatialReference:r}=this._nextBasemapSpatialReferenceTask;if(r==null||$t(s.spatialReference,r)||fr()||Rs(s.spatialReference,r)||(this._loadingProjectionEngine=!0,await dr(),this._loadingProjectionEngine=!1),t!==this.nextBasemap||e!==this.activeBasemap)return}s.map.basemap=t,n||this._nextBasemapSpatialReferenceTask.spatialReference==null||$t(s.spatialReference,this._nextBasemapSpatialReferenceTask.spatialReference)||(s.spatialReference=this._nextBasemapSpatialReferenceTask.spatialReference),this.nextBasemap=e}static getThumbnailUrl(e){return $O(e)}};d([f()],Gi.prototype,"_loadingProjectionEngine",void 0),d([f({readOnly:!0})],Gi.prototype,"_nextBasemapSpatialReferenceTask",null),d([f({readOnly:!0})],Gi.prototype,"_viewSpatialReferenceLocked",null),d([f({readOnly:!0})],Gi.prototype,"activeBasemap",null),d([f()],Gi.prototype,"nextBasemap",void 0),d([Mt("nextBasemap")],Gi.prototype,"castNextBasemap",null),d([f({readOnly:!0})],Gi.prototype,"state",null),d([f()],Gi.prototype,"view",void 0),d([f()],Gi.prototype,"toggle",null),Gi=d([k("esri.widgets.BasemapToggle.BasemapToggleViewModel")],Gi);const _C=Gi,Uo="esri-basemap-toggle",su="esri-basemap-thumbnail",js={base:Uo,secondaryBasemapImage:`${Uo}__image--secondary`,container:`${su} ${Uo}__container`,image:`${su}__image ${Uo}__image`,imageLoading:`${Uo}__image--loading`,overlay:`${su}__overlay ${Uo}__image-overlay`,title:`${su}__title ${Uo}__title`,overlayScrim:`${su}__overlay-scrim`},as={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function Od(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var KB=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},wC=function(e,t){for(var i=0,s=e.length;i<s;i++){var n=e[i];Array.isArray(n)?wC(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=KB(n)),t.push(n))}},QB=function(e,t){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var n=[];return wC(i,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function ze(e,t,...i){return typeof e!="function"||Lm(e)?QB(e,t,...i):e(t,...i)}function Xue(...e){return e}function FM(e){const t=$O(e);return t?{backgroundImage:"url("+t+")"}:{backgroundImage:""}}const jM={title:!1};let qi=class extends kd{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new _C,this.visibleElements={...jM},this.toggle=()=>this.viewModel.toggle()}loadDependencies(){return Yg({button:()=>W(()=>import("./calcite-button.9d3728df.js"),["assets/calcite-button.9d3728df.js","assets/form.fb46e9d3.js","assets/dom.fb88ae35.js","assets/guid.bddc4052.js","assets/interactive.97d78cc9.js","assets/label.692e1b0c.js","assets/component.86cabc11.js","assets/loadable.242c5db2.js","assets/t9n.5bb2be1c.js","assets/observers.7dfa93c8.js","assets/icon.cd760d37.js","assets/loader.9a33bba7.js"]),icon:()=>W(()=>import("./calcite-icon.042918cf.js"),["assets/calcite-icon.042918cf.js","assets/icon.cd760d37.js","assets/dom.fb88ae35.js","assets/guid.bddc4052.js","assets/observers.7dfa93c8.js"]),scrim:()=>W(()=>import("./calcite-scrim.5b566177.js"),["assets/calcite-scrim.5b566177.js","assets/scrim.6351e450.js","assets/t9n.5bb2be1c.js","assets/dom.fb88ae35.js","assets/guid.bddc4052.js","assets/observers.7dfa93c8.js","assets/loader.9a33bba7.js"])})}get activeBasemap(){return this.viewModel.activeBasemap}get icon(){return"layer-basemap"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get nextBasemap(){return this.viewModel.nextBasemap}set nextBasemap(e){this.viewModel.nextBasemap=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...jM,...e}}render(){const e=this.viewModel,t=e.state==="disabled"?null:e.activeBasemap,i=e.state==="disabled"?null:e.nextBasemap,s=e.state==="loading",n=e.state==="incompatible-next-basemap",r=i?.title??"",o=i&&i.loadStatus!=="loaded";let a;const l=this.visibleElements.title&&r,c=n;return(l||c)&&(a=ze("div",{class:js.overlay,key:"overlay"},l?ze("span",{class:js.title,title:r},r):null,c?ze("calcite-scrim",{class:js.overlayScrim,title:this.messages.incompatibleSpatialReference},ze("calcite-icon",{icon:"exclamation-mark-triangle"})):null)),ze("div",{class:this.classes(js.base,as.widget)},ze("calcite-button",{appearance:"transparent","data-basemap-id":i?i.id:"",disabled:n,kind:"neutral",label:this.label,onclick:()=>{this.toggle()},title:this.label},ze("div",{class:this.classes(js.container,js.secondaryBasemapImage)},ze("div",{class:js.image,styles:FM(t)})),ze("div",{class:js.container},ze("div",{class:this.classes(js.image,o?js.imageLoading:null),styles:FM(i)},o||s?ze("calcite-scrim",null,ze("span",{"aria-hidden":"true",class:as.loaderAnimation,role:"presentation"})):null),a)))}};d([f({readOnly:!0})],qi.prototype,"activeBasemap",null),d([f()],qi.prototype,"icon",null),d([f()],qi.prototype,"label",null),d([f(),Od("esri/widgets/BasemapToggle/t9n/BasemapToggle")],qi.prototype,"messages",void 0),d([f()],qi.prototype,"nextBasemap",null),d([f()],qi.prototype,"view",null),d([f({type:_C})],qi.prototype,"viewModel",void 0),d([f()],qi.prototype,"visibleElements",void 0),d([Mt("visibleElements")],qi.prototype,"castVisibleElements",null),qi=d([k("esri.widgets.BasemapToggle")],qi);const eH=qi;let _h=class extends ee{constructor(e){super(e),this.addHandles([this.on("before-add",t=>{t.item==null&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(ee.ofType(this.itemType.Type))(e):new ee(e)}};function nv(e,t){return{type:e,cast:OP,set(i){const s=vo(i,this._get(t),e);s.owner=this,this._set(t,s)}}}d([f()],_h.prototype,"owner",null),_h=d([k("esri.core.support.OwningCollection")],_h);const tH=di()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),Kue=di()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function xC(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function SC(e){return e.points!==void 0}function MC(e){return e.x!==void 0&&e.y!==void 0}function $C(e){return e.paths!==void 0}function Iw(e){return e.rings!==void 0}function Pc(e){return e==null?null:e instanceof pr?e:MC(e)?ae.fromJSON(e):$C(e)?Os.fromJSON(e):Iw(e)?Mo.fromJSON(e):SC(e)?Zg.fromJSON(e):xC(e)?tt.fromJSON(e):null}function Lw(e){return e?MC(e)?"esriGeometryPoint":$C(e)?"esriGeometryPolyline":Iw(e)?"esriGeometryPolygon":xC(e)?"esriGeometryEnvelope":SC(e)?"esriGeometryMultipoint":null:null}const iH={esriGeometryPoint:ae,esriGeometryPolyline:Os,esriGeometryPolygon:Mo,esriGeometryEnvelope:tt,esriGeometryMultipoint:Zg};function sH(e){return e&&iH[e]||null}const Qg={base:pr,key:"type",typeMap:{extent:tt,multipoint:Zg,point:ae,polyline:Os,polygon:Mo}};ar(Qg);const zM={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function r0(e,t,i,s=fn){const n=new Ls(hw(s)),r=oe.fromJSDate(e,{zone:n}),o=i==="decades"||i==="centuries"?"year":TC(i);return i==="decades"&&(t*=10),i==="centuries"&&(t*=100),r.plus({[o]:t}).toJSDate()}function Que(e,t,i="milliseconds"){const s=e.getTime(),n=nH(t,i,"milliseconds");return new Date(s+n)}function VM(e,t,i=fn){const s=new Ls(hw(i)),n=oe.fromJSDate(e,{zone:s});if(t==="decades"||t==="centuries"){const o=n.startOf("year"),{year:a}=o,l=a-a%(t==="decades"?10:100);return o.set({year:l}).toJSDate()}const r=TC(t);return n.startOf(r).toJSDate()}function nH(e,t,i){return e===0?0:e*zM[t]/zM[i]}function TC(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Yi;let Ei=Yi=class extends Z{static get allTime(){return UM}static get empty(){return rH}static fromArray(e){return new Yi({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?.getTime()??null}get isAllTime(){return this.equals(Yi.allTime)}get isEmpty(){return this.equals(Yi.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?.getTime()??null}clone(){return new Yi({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=this.start?.getTime()??this.start,i=this.end?.getTime()??this.end,s=e.start?.getTime()??e.start,n=e.end?.getTime()??e.end;return t===s&&i===n}expandTo(e,t=fn){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=VM(i,e,t));let s=this.end;if(s){const n=VM(s,e,t);s=s.getTime()===n.getTime()?n:r0(n,1,e,t)}return new Yi({start:i,end:s})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Yi.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=this.start?.getTime()??-1/0,i=this.end?.getTime()??1/0,s=e.start?.getTime()??-1/0,n=e.end?.getTime()??1/0;let r,o;return s>=t&&s<=i?r=s:t>=s&&t<=n&&(r=t),i>=s&&i<=n?o=i:n>=t&&n<=i&&(o=n),r==null||o==null||isNaN(r)||isNaN(o)?Yi.empty:new Yi({start:r===-1/0?null:new Date(r),end:o===1/0?null:new Date(o)})}offset(e,t,i=fn){if(this.isEmpty||this.isAllTime)return this.clone();const s=new Yi,{start:n,end:r}=this;return n!=null&&(s.start=r0(n,e,t,i)),r!=null&&(s.end=r0(r,e,t,i)),s}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return UM.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Yi({start:t,end:i})}};d([f({type:Date,json:{write:{allowNull:!0}}})],Ei.prototype,"end",void 0),d([$e("end")],Ei.prototype,"readEnd",null),d([ve("end")],Ei.prototype,"writeEnd",null),d([f({readOnly:!0,json:{read:!1}})],Ei.prototype,"isAllTime",null),d([f({readOnly:!0,json:{read:!1}})],Ei.prototype,"isEmpty",null),d([f({type:Date,json:{write:{allowNull:!0}}})],Ei.prototype,"start",void 0),d([$e("start")],Ei.prototype,"readStart",null),d([ve("start")],Ei.prototype,"writeStart",null),Ei=Yi=d([k("esri.TimeExtent")],Ei);const UM=new Ei,rH=new Ei({start:void 0,end:void 0}),Rw=Ei;let kC=0;const Dw=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+kC++})}};return t=d([k("esri.core.Identifiable")],t),t},Nw=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:kC++})}};return t=d([k("esri.core.Identifiable.NumericIdentifiable")],t),t};let WM=class extends Dw(class{}){};WM=d([k("esri.core.Identifiable")],WM);async function oH(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:i}=await W(()=>import("./portalLayers.6c8950b8.js").then(function(s){return s.p}),["assets/portalLayers.6c8950b8.js","assets/associatedFeatureServiceUtils.f808dfcb.js","assets/fetchService.e99559bf.js","assets/portalItemUtils.761d02ba.js"]);try{return await i(t)}catch(s){const n=t?.portalItem,r=n?.id||"unset",o=n?.portal?.url||Me.portalUrl;throw B.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+r+"')",s),s}}let aH=0,mt=class extends Eo.EventedMixin(Dw(bo)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new tt(-180,-90,180,90,ge.WGS84),this.id=Date.now().toString(16)+"-layer-"+aH++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=ge.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e;return(await W(()=>import("./arcgisLayers.e2fb052b.js"),["assets/arcgisLayers.e2fb052b.js","assets/associatedFeatureServiceUtils.f808dfcb.js","assets/fetchService.e99559bf.js"])).fromUrl(t)}static fromPortalItem(e){return oH(e)}initialize(){this.when().catch(e=>{us(e)||B.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const e=this.parent;if(e){const t=this;"layers"in e&&e.layers.includes(t)?e.layers.remove(t):"tables"in e&&e.tables.includes(t)?e.tables.remove(t):"baseLayers"in e&&e.baseLayers.includes(t)?e.baseLayers.remove(t):"referenceLayers"in e&&e.referenceLayers.includes(t)&&e.referenceLayers.remove(t),this._set("parent",null)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return hi(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Dt(e,{query:{f:"json"},responseType:"json"})).data;throw new V("layer:no-attribution-data","Layer does not have attribution data")}};d([f({type:String})],mt.prototype,"attributionDataUrl",void 0),d([f({type:tt})],mt.prototype,"fullExtent",void 0),d([f({readOnly:!0})],mt.prototype,"hasAttributionData",null),d([f({type:String,clonable:!1})],mt.prototype,"id",void 0),d([f({type:Boolean,nonNullable:!0})],mt.prototype,"legendEnabled",void 0),d([f({type:["show","hide","hide-children"]})],mt.prototype,"listMode",void 0),d([f({type:Number,range:{min:0,max:1},nonNullable:!0})],mt.prototype,"opacity",void 0),d([f({clonable:!1})],mt.prototype,"parent",void 0),d([f({readOnly:!0})],mt.prototype,"parsedUrl",null),d([f({type:Boolean,readOnly:!0})],mt.prototype,"persistenceEnabled",void 0),d([f({type:Boolean})],mt.prototype,"popupEnabled",void 0),d([f({type:Boolean})],mt.prototype,"attributionVisible",void 0),d([f({type:ge})],mt.prototype,"spatialReference",void 0),d([f({type:String})],mt.prototype,"title",void 0),d([f({readOnly:!0,json:{read:!1}})],mt.prototype,"type",void 0),d([f()],mt.prototype,"url",void 0),d([f({type:Rw})],mt.prototype,"visibilityTimeExtent",void 0),d([f({type:Boolean,nonNullable:!0})],mt.prototype,"visible",void 0),mt=d([k("esri.layers.Layer")],mt);const PC=mt;var ehe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lH(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var BM,HM,OC={exports:{}};HM=function(){function e(n,r){function o(){this.constructor=n}o.prototype=r.prototype,n.prototype=new o}function t(n,r,o,a){var l=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(l,t.prototype),l.expected=r,l.found=o,l.location=a,l.name="SyntaxError",l}function i(n,r,o){return o=o||" ",n.length>r?n:(r-=n.length,n+(o+=o.repeat(r)).slice(0,r))}function s(n,r){var o,a={},l=(r=r!==void 0?r:{}).grammarSource,c={start:tx},h=tx,p="none",m=")",g=",",y="(",v="%",b="px",w="cm",x="mm",$="in",S="pt",M="pc",P="deg",C="rad",I="grad",D="turn",N="#",U=".",H="e",te=/^[ \t\n\r]/,q=/^[a-z\-]/,ne=/^[0-9a-fA-F]/,ye=/^[+\-]/,de=/^[0-9]/,pe=xn("none"),De=At("none",!1),gr=At(")",!1),Fo=At(",",!1),yr=xn("whitespace"),vr=Hc([" ","	",`
`,"\r"],!1,!1),_n=xn("function"),jo=At("(",!1),wn=xn("identifier"),J2=Hc([["a","z"],"-"],!1,!1),FD=xn("percentage"),jD=At("%",!1),zD=xn("length"),VD=At("px",!1),UD=At("cm",!1),WD=At("mm",!1),BD=At("in",!1),HD=At("pt",!1),GD=At("pc",!1),qD=xn("angle"),YD=At("deg",!1),ZD=At("rad",!1),JD=At("grad",!1),XD=At("turn",!1),KD=xn("number"),QD=xn("color"),e5=At("#",!1),X2=Hc([["0","9"],["a","f"],["A","F"]],!1,!1),K2=Hc(["+","-"],!1,!1),br=Hc([["0","9"]],!1,!1),t5=At(".",!1),i5=At("e",!1),s5=function(){return[]},n5=function(T,R){return{type:"function",name:T,parameters:R||[]}},r5=function(T,R){return R.length>0?F5(T,R,3):[T]},o5=function(T){return{type:"quantity",value:T.value,unit:T.unit}},a5=function(T){return{type:"color",colorType:T.type,value:T.value}},l5=function(T){return T},c5=function(){return Bd()},u5=function(T){return{value:T,unit:"%"}},h5=function(T){return{value:T,unit:"px"}},d5=function(T){return{value:T,unit:"cm"}},p5=function(T){return{value:T,unit:"mm"}},f5=function(T){return{value:T,unit:"in"}},m5=function(T){return{value:T,unit:"pt"}},g5=function(T){return{value:T,unit:"pc"}},y5=function(T){return{value:T,unit:"deg"}},v5=function(T){return{value:T,unit:"rad"}},b5=function(T){return{value:T,unit:"grad"}},_5=function(T){return{value:T,unit:"turn"}},w5=function(T){return{value:T,unit:null}},x5=function(){return{type:"hex",value:Bd()}},S5=function(T){return{type:"function",value:T}},M5=function(){return{type:"named",value:Bd()}},$5=function(){return parseFloat(Bd())},A=0,Xe=0,Wd=[{line:1,column:1}],Ds=0,Oy=[],Y=0;if("startRule"in r){if(!(r.startRule in c))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');h=c[r.startRule]}function Bd(){return n.substring(Xe,A)}function At(T,R){return{type:"literal",text:T,ignoreCase:R}}function Hc(T,R,j){return{type:"class",parts:T,inverted:R,ignoreCase:j}}function T5(){return{type:"end"}}function xn(T){return{type:"other",description:T}}function Q2(T){var R,j=Wd[T];if(j)return j;for(R=T-1;!Wd[R];)R--;for(j={line:(j=Wd[R]).line,column:j.column};R<T;)n.charCodeAt(R)===10?(j.line++,j.column=1):j.column++,R++;return Wd[T]=j,j}function ex(T,R,j){var me=Q2(T),wt=Q2(R);return{source:l,start:{offset:T,line:me.line,column:me.column},end:{offset:R,line:wt.line,column:wt.column}}}function ue(T){A<Ds||(A>Ds&&(Ds=A,Oy=[]),Oy.push(T))}function k5(T,R,j){return new t(t.buildMessage(T,R),T,R,j)}function tx(){var T;return(T=P5())===a&&(T=O5()),T}function P5(){var T,R;return Y++,T=A,Ct(),n.substr(A,4)===p?(R=p,A+=4):(R=a,Y===0&&ue(De)),R!==a?(Ct(),Xe=T,T=s5()):(A=T,T=a),Y--,T===a&&Y===0&&ue(pe),T}function O5(){var T,R;if(T=[],(R=Ey())!==a)for(;R!==a;)T.push(R),R=Ey();else T=a;return T}function Ey(){var T,R,j,me;return T=A,Ct(),(R=A5())!==a?(Ct(),(j=E5())===a&&(j=null),Ct(),n.charCodeAt(A)===41?(me=m,A++):(me=a,Y===0&&ue(gr)),me!==a?(Ct(),Xe=T,T=n5(R,j)):(A=T,T=a)):(A=T,T=a),T}function E5(){var T,R,j,me,wt,it,ji,Hd;if(T=A,(R=Ay())!==a){for(j=[],me=A,wt=Ct(),n.charCodeAt(A)===44?(it=g,A++):(it=a,Y===0&&ue(Fo)),it===a&&(it=null),ji=Ct(),(Hd=Ay())!==a?me=wt=[wt,it,ji,Hd]:(A=me,me=a);me!==a;)j.push(me),me=A,wt=Ct(),n.charCodeAt(A)===44?(it=g,A++):(it=a,Y===0&&ue(Fo)),it===a&&(it=null),ji=Ct(),(Hd=Ay())!==a?me=wt=[wt,it,ji,Hd]:(A=me,me=a);Xe=T,T=r5(R,j)}else A=T,T=a;return T}function Ay(){var T,R;return T=A,(R=C5())===a&&(R=I5())===a&&(R=L5())===a&&(R=R5()),R!==a&&(Xe=T,R=o5(R)),(T=R)===a&&(T=A,(R=D5())!==a&&(Xe=T,R=a5(R)),T=R),T}function Ct(){var T,R;for(Y++,T=[],te.test(n.charAt(A))?(R=n.charAt(A),A++):(R=a,Y===0&&ue(vr));R!==a;)T.push(R),te.test(n.charAt(A))?(R=n.charAt(A),A++):(R=a,Y===0&&ue(vr));return Y--,R=a,Y===0&&ue(yr),T}function A5(){var T,R,j;return Y++,T=A,(R=ix())!==a?(n.charCodeAt(A)===40?(j=y,A++):(j=a,Y===0&&ue(jo)),j!==a?(Xe=T,T=l5(R)):(A=T,T=a)):(A=T,T=a),Y--,T===a&&(R=a,Y===0&&ue(_n)),T}function ix(){var T,R,j;if(Y++,T=A,R=[],q.test(n.charAt(A))?(j=n.charAt(A),A++):(j=a,Y===0&&ue(J2)),j!==a)for(;j!==a;)R.push(j),q.test(n.charAt(A))?(j=n.charAt(A),A++):(j=a,Y===0&&ue(J2));else R=a;return R!==a&&(Xe=T,R=c5()),Y--,(T=R)===a&&(R=a,Y===0&&ue(wn)),T}function C5(){var T,R,j;return Y++,T=A,Ct(),(R=Fi())!==a?(n.charCodeAt(A)===37?(j=v,A++):(j=a,Y===0&&ue(jD)),j!==a?(Xe=T,T=u5(R)):(A=T,T=a)):(A=T,T=a),Y--,T===a&&Y===0&&ue(FD),T}function I5(){var T,R,j;return Y++,T=A,Ct(),(R=Fi())!==a?(n.substr(A,2)===b?(j=b,A+=2):(j=a,Y===0&&ue(VD)),j!==a?(Xe=T,T=h5(R)):(A=T,T=a)):(A=T,T=a),T===a&&(T=A,Ct(),(R=Fi())!==a?(n.substr(A,2)===w?(j=w,A+=2):(j=a,Y===0&&ue(UD)),j!==a?(Xe=T,T=d5(R)):(A=T,T=a)):(A=T,T=a),T===a&&(T=A,Ct(),(R=Fi())!==a?(n.substr(A,2)===x?(j=x,A+=2):(j=a,Y===0&&ue(WD)),j!==a?(Xe=T,T=p5(R)):(A=T,T=a)):(A=T,T=a),T===a&&(T=A,Ct(),(R=Fi())!==a?(n.substr(A,2)===$?(j=$,A+=2):(j=a,Y===0&&ue(BD)),j!==a?(Xe=T,T=f5(R)):(A=T,T=a)):(A=T,T=a),T===a&&(T=A,Ct(),(R=Fi())!==a?(n.substr(A,2)===S?(j=S,A+=2):(j=a,Y===0&&ue(HD)),j!==a?(Xe=T,T=m5(R)):(A=T,T=a)):(A=T,T=a),T===a&&(T=A,Ct(),(R=Fi())!==a?(n.substr(A,2)===M?(j=M,A+=2):(j=a,Y===0&&ue(GD)),j!==a?(Xe=T,T=g5(R)):(A=T,T=a)):(A=T,T=a)))))),Y--,T===a&&Y===0&&ue(zD),T}function L5(){var T,R,j;return Y++,T=A,(R=Fi())!==a?(n.substr(A,3)===P?(j=P,A+=3):(j=a,Y===0&&ue(YD)),j!==a?(Xe=T,T=y5(R)):(A=T,T=a)):(A=T,T=a),T===a&&(T=A,(R=Fi())!==a?(n.substr(A,3)===C?(j=C,A+=3):(j=a,Y===0&&ue(ZD)),j!==a?(Xe=T,T=v5(R)):(A=T,T=a)):(A=T,T=a),T===a&&(T=A,(R=Fi())!==a?(n.substr(A,4)===I?(j=I,A+=4):(j=a,Y===0&&ue(JD)),j!==a?(Xe=T,T=b5(R)):(A=T,T=a)):(A=T,T=a),T===a&&(T=A,(R=Fi())!==a?(n.substr(A,4)===D?(j=D,A+=4):(j=a,Y===0&&ue(XD)),j!==a?(Xe=T,T=_5(R)):(A=T,T=a)):(A=T,T=a)))),Y--,T===a&&(R=a,Y===0&&ue(qD)),T}function R5(){var T,R;return Y++,T=A,Ct(),(R=Fi())!==a?(Xe=T,T=w5(R)):(A=T,T=a),Y--,T===a&&Y===0&&ue(KD),T}function D5(){var T,R,j,me;if(Y++,T=A,n.charCodeAt(A)===35?(R=N,A++):(R=a,Y===0&&ue(e5)),R!==a){if(j=[],ne.test(n.charAt(A))?(me=n.charAt(A),A++):(me=a,Y===0&&ue(X2)),me!==a)for(;me!==a;)j.push(me),ne.test(n.charAt(A))?(me=n.charAt(A),A++):(me=a,Y===0&&ue(X2));else j=a;j!==a?(Xe=T,T=x5()):(A=T,T=a)}else A=T,T=a;return T===a&&(T=A,(R=Ey())!==a&&(Xe=T,R=S5(R)),(T=R)===a&&(T=A,(R=ix())!==a&&(Xe=T,R=M5()),T=R)),Y--,T===a&&(R=a,Y===0&&ue(QD)),T}function Fi(){var T,R,j,me,wt,it,ji;for(T=A,ye.test(n.charAt(A))?(n.charAt(A),A++):Y===0&&ue(K2),R=A,j=[],de.test(n.charAt(A))?(me=n.charAt(A),A++):(me=a,Y===0&&ue(br));me!==a;)j.push(me),de.test(n.charAt(A))?(me=n.charAt(A),A++):(me=a,Y===0&&ue(br));if(n.charCodeAt(A)===46?(me=U,A++):(me=a,Y===0&&ue(t5)),me!==a){if(wt=[],de.test(n.charAt(A))?(it=n.charAt(A),A++):(it=a,Y===0&&ue(br)),it!==a)for(;it!==a;)wt.push(it),de.test(n.charAt(A))?(it=n.charAt(A),A++):(it=a,Y===0&&ue(br));else wt=a;wt!==a?R=j=[j,me,wt]:(A=R,R=a)}else A=R,R=a;if(R===a)if(R=[],de.test(n.charAt(A))?(j=n.charAt(A),A++):(j=a,Y===0&&ue(br)),j!==a)for(;j!==a;)R.push(j),de.test(n.charAt(A))?(j=n.charAt(A),A++):(j=a,Y===0&&ue(br));else R=a;if(R!==a){if(j=A,n.charCodeAt(A)===101?(me=H,A++):(me=a,Y===0&&ue(i5)),me!==a){if(ye.test(n.charAt(A))?(wt=n.charAt(A),A++):(wt=a,Y===0&&ue(K2)),wt===a&&(wt=null),it=[],de.test(n.charAt(A))?(ji=n.charAt(A),A++):(ji=a,Y===0&&ue(br)),ji!==a)for(;ji!==a;)it.push(ji),de.test(n.charAt(A))?(ji=n.charAt(A),A++):(ji=a,Y===0&&ue(br));else it=a;it!==a?j=me=[me,wt,it]:(A=j,j=a)}else A=j,j=a;j===a&&(j=null),Xe=T,T=$5()}else A=T,T=a;return T}function N5(T,R){return T.map(function(j){return j[R]})}function F5(T,R,j){return[T].concat(N5(R,j))}if((o=h())!==a&&A===n.length)return o;throw o!==a&&A<n.length&&ue(T5()),k5(Oy,Ds<n.length?n.charAt(Ds):null,Ds<n.length?ex(Ds,Ds+1):ex(Ds,Ds))}return e(t,Error),t.prototype.format=function(n){var r="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<n.length;o++)if(n[o].source===this.location.source){a=n[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,c=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(l):l,h=this.location.source+":"+c.line+":"+c.column;if(a){var p=this.location.end,m=i("",c.line.toString().length," "),g=a[l.line-1],y=(l.line===p.line?p.column:g.length+1)-l.column||1;r+=`
 --> `+h+`
`+m+` |
`+c.line+" | "+g+`
`+m+" | "+i("",l.column-1," ")+i("",y,"^")}else r+=`
 at `+h}return r},t.buildMessage=function(n,r){var o={literal:function(g){return'"'+l(g.text)+'"'},class:function(g){var y=g.parts.map(function(v){return Array.isArray(v)?c(v[0])+"-"+c(v[1]):c(v)});return"["+(g.inverted?"^":"")+y.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(g){return g.description}};function a(g){return g.charCodeAt(0).toString(16).toUpperCase()}function l(g){return g.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+a(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+a(y)})}function c(g){return g.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+a(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+a(y)})}function h(g){return o[g.type](g)}function p(g){var y,v,b=g.map(h);if(b.sort(),b.length>0){for(y=1,v=1;y<b.length;y++)b[y-1]!==b[y]&&(b[v]=b[y],v++);b.length=v}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}function m(g){return g?'"'+l(g)+'"':"end of input"}return"Expected "+p(n)+" but "+m(r)+" found."},{SyntaxError:t,parse:s}},(BM=OC).exports&&(BM.exports=HM());var cH=OC.exports;function EC(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=GM(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new V("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:GM(i.value)}});t.sort((i,s)=>s.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!rj(t[i].effects,t[i+1].effects))throw new V("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});oj(t[i].effects,t[i+1].effects)}return t.sort((i,s)=>s.scale-i.scale),t}function GM(e){let t;if(!e)return[];try{t=cH.parse(e)}catch(i){throw new V("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>uH(i))}function uH(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return hH(e);case"opacity":return dH(e);case"hue-rotate":return pH(e);case"blur":return fH(e);case"drop-shadow":return mH(e);case"bloom":return gH(e)}}catch(t){throw t.details.filter=e,t}throw new V("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function hH(e){let t=1;return Uc(e.parameters,1),e.parameters.length===1&&(t=$s(e.parameters[0])),new Uh(e.name,t)}function dH(e){let t=1;return Uc(e.parameters,1),e.parameters.length===1&&(t=$s(e.parameters[0])),new Ng(t)}function pH(e){let t=0;return Uc(e.parameters,1),e.parameters.length===1&&(t=xH(e.parameters[0])),new Dg(t)}function fH(e){let t=0;return Uc(e.parameters,1),e.parameters.length===1&&(t=zw(e.parameters[0]),Ed(t,e.parameters[0])),new Lg(t)}function mH(e){const t=[];let i=null;for(const s of e.parameters)if(s.type==="color"){if(t.length&&Object.freeze(t),i)throw new V("effect:type-error","Accepts only one color",{});i=SH(s)}else{const n=zw(s);if(Object.isFrozen(t))throw new V("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(n),t.length===3&&Ed(n,s)}if(t.length<2||t.length>3)throw new V("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new Rg(t[0],t[1],t[2]||0,i||AC("black"))}function gH(e){let t=1,i=0,s=0;return Uc(e.parameters,3),e.parameters[0]&&(t=$s(e.parameters[0])),e.parameters[1]&&(i=zw(e.parameters[1]),Ed(i,e.parameters[1])),e.parameters[2]&&(s=$s(e.parameters[2])),new Ig(t,i,s)}function Uc(e,t){if(e.length>t)throw new V("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function ey(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in jw)return"<length>";if(e.unit in Fw)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function Ed(e,t){if(e<0)throw new V("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function yH(e){if(e.type!=="quantity"||e.unit!==null)throw new V("effect:type-error",`Expected <double>, Actual: ${ey(e)}`,{term:e})}function vH(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new V("effect:type-error",`Expected <double> or <percentage>, Actual: ${ey(e)}`,{term:e})}const Fw={deg:1,grad:.9,rad:180/Math.PI,turn:360};function bH(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&Fw[e.unit]!=null))throw new V("effect:type-error",`Expected <angle>, Actual: ${ey(e)}`,{term:e})}const jw={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function _H(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&jw[e.unit]!=null))throw new V("effect:type-error",`Expected <length>, Actual: ${ey(e)}`,{term:e})}function $s(e){vH(e);const t=e.value;return Ed(t,e),e.unit==="%"?.01*t:t}function wH(e){return yH(e),Ed(e.value,e),e.value}function xH(e){return bH(e),e.value*Fw[e.unit]||0}function zw(e){return _H(e),e.value*jw[e.unit]||0}function SH(e){switch(e.colorType){case"hex":return B8(e.value);case"named":return AC(e.value);case"function":return TH(e.value)}}function AC(e){if(!uO(e))throw new V("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return W8(e)}const MH=/^rgba?/i,$H=/^hsla?/i;function TH(e){if(Uc(e.parameters,4),MH.test(e.name))return[$s(e.parameters[0]),$s(e.parameters[1]),$s(e.parameters[2]),e.parameters[3]?$s(e.parameters[3]):1];if($H.test(e.name))return hO(wH(e.parameters[0]),$s(e.parameters[1]),$s(e.parameters[2]),e.parameters[3]?$s(e.parameters[3]):1);throw new V("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function kH(e,t,i){try{return EH(e)}catch(s){i?.messages?.push(s)}return null}function PH(e,t,i,s){try{const n=OH(e);sl(i,n,t)}catch(n){s.messages&&s.messages.push(n)}}function OH(e){const t=EC(e);return t?aj(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:s})=>({scale:i,value:s.map(n=>n.toJSON())})):null}function EH(e){if(!e||e.length===0)return null;if(AH(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:qM(i.value)});return t}return qM(e)}function AH(e){const t=e[0];return!!t&&"scale"in t}function qM(e){if(!e?.length)return"";const t=[];for(const i of e){let s=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":s=[Mn(i,"amount")];break;case"blur":s=[Mn(i,"radius","pt")];break;case"hue-rotate":s=[Mn(i,"angle","deg")];break;case"drop-shadow":s=[Mn(i,"xoffset","pt"),Mn(i,"yoffset","pt"),Mn(i,"blurRadius","pt"),CH(i,"color")];break;case"bloom":s=[Mn(i,"strength"),Mn(i,"radius","pt"),Mn(i,"threshold")]}const n=`${i.type}(${s.filter(Boolean).join(" ")})`;EC(n),t.push(n)}return t.join(" ")}function Mn(e,t,i){if(e[t]==null)throw new V("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function CH(e,t){if(e[t]==null)throw new V("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const IH={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},YM={read:{reader:kH},write:{allowNull:!0,writer:PH}},LH={json:{read:!1,write:!1,origins:{"web-map":YM,"portal-item":YM}}},RH=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return d([f(IH)],t.prototype,"blendMode",void 0),d([f(LH)],t.prototype,"effect",void 0),t=d([k("esri.layers.mixins.BlendLayer")],t),t},DH=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},s=this.parent;s&&"effectiveScaleRange"in s&&NH(i,s.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return d([f({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),d([f({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),d([f({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=d([k("esri.layers.mixins.ScaleRangeLayer")],t),t};function NH(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const vn=e=>{let t=class extends e{clone(){const i=yo(this);H3(i,"unable to clone instance of non-accessor class");const s=i.metadata,n=i.store,r={},o=new Map;for(const l in s){const c=s[l],h=n?.originOf(l),p=c.clonable;if(c.readOnly||p===!1||h!==xe.USER&&h!==xe.DEFAULTS&&h!==xe.WEB_MAP&&h!==xe.WEB_SCENE)continue;const m=this[l];let g=null;g=typeof p=="function"?p(m):p==="reference"?m:K0(m),m!=null&&g==null||(h===xe.DEFAULTS?o.set(l,g):r[l]=g)}const a=new(Object.getPrototypeOf(this)).constructor(r);if(o.size){const l=yo(a)?.store;if(l)for(const[c,h]of o)l.set(c,h,xe.DEFAULTS)}return a}};return t=d([k("esri.core.Clonable")],t),t};let rv=class extends vn(Q){};rv=d([k("esri.core.Clonable")],rv);async function FH(e,t){const{WhereClause:i}=await W(()=>import("./WhereClause.b007a323.js").then(function(s){return s.W}),["assets/WhereClause.b007a323.js","assets/TimeOnly.5d28261e.js","assets/UnknownTimeZone.4756be49.js"]);return i.create(e,t)}function the(e,t){return e==="1=1"?t??e:t==="1=1"?e??t:e!=null&&e!==""?t!=null&&t!==""?`(${e}) AND (${t})`:e:t}function ihe(e){return typeof e=="number"}function Vw(e){return typeof e=="string"||e instanceof String}const jH="yyyy-MM-dd",zH="TT";var wh;(function(e){e.HM="HH:mm",e.HMS="HH:mm:ss",e.HMS_MS="HH:mm:ss.SSS"})(wh||(wh={}));const VH=[wh.HMS_MS,wh.HMS,wh.HM,zH];function ZM(e){if(!e||!Vw(e))return null;const t=oe.fromFormat(e,jH);return t.isValid?t:null}function JM(e){return e&&Vw(e)?G3(VH,t=>{const i=oe.fromFormat(e,t);return i.isValid?i:null})??null:null}function XM(e){if(!e||!Vw(e))return null;const t=oe.fromISO(e);return t.isValid?t:null}var Oc;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Oc||(Oc={}));const UH=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function WH(e){return e!=null&&UH.has(e.type)}function CC(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function IC(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function LC(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function BH(e,t,i){const s=i??e?.domain;if(!s)return null;switch(s.type){case"range":{const{min:n,max:r}=HH(e,i);if(n!=null&&+t<n||r!=null&&+t>r)return Oc.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(s.codedValues==null||s.codedValues.every(n=>n==null||n.code!==t))return Oc.INVALID_CODED_VALUE}return null}function HH(e,t){const i=t??e?.domain;if(!i||i.type!=="range")return;const s="range"in i?i.range[0]:i.minValue,n="range"in i?i.range[1]:i.maxValue,r=WH(e);return CC(e)||LC(e)||IC(e)?{...GH(e,n,s),isInteger:r}:{min:s!=null&&typeof s=="number"?s:null,max:n!=null&&typeof n=="number"?n:null,rawMin:s,rawMax:n,isInteger:r}}function GH(e,t,i){return CC(e)?{min:ZM(i)?.toMillis(),max:ZM(t)?.toMillis(),rawMin:i,rawMax:t}:LC(e)?{min:JM(i)?.toMillis(),max:JM(t)?.toMillis(),rawMin:i,rawMax:t}:IC(e)?{min:XM(i)?.toMillis(),max:XM(t)?.toMillis(),rawMin:i,rawMax:t}:{max:null,min:null}}const qH=()=>B.getLogger("esri.support.arcadeOnDemand");let o0;function RC(){return o0||(o0=(async()=>{const e=await W(()=>import("./arcadeUtils.154760f4.js").then(function(t){return t.aN}),["assets/arcadeUtils.154760f4.js","assets/TimeOnly.5d28261e.js","assets/UnknownTimeZone.4756be49.js","assets/ImmutableArray.28227007.js","assets/number.fad7db53.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/FieldsIndex.333d0734.js"]);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),o0}const she=(e,t,i)=>ty.create(e,t,i,null,["$feature","$view"],[]),nhe=(e,t,i,s)=>ty.create(e,t,i,s,["$feature","$view"],[]);class ty{constructor(t,i,s,n,r,o,a){this.services=null,this.script=t,this.evaluate=n;const l=Array.isArray(o)?o:o?.fields;this.fields=l??[],this._syntaxTree=s,this._arcade=i,this._arcadeFeature=r,this._spatialReference=a,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,s,n,r,o){const{arcade:a,Feature:l,Dictionary:c}=await RC(),h=ge.fromJSON(i);let p;try{p=a.parseScript(t,o)}catch(I){return qH().error(new V("arcade-bad-expression","Failed to parse arcade script",{script:t,error:I})),null}const m=r.reduce((I,D)=>({...I,[D]:null}),{});let g=null;n!=null&&(g=new c(n),g.immutable=!0,m.$config=null);const y=a.scriptUsesGeometryEngine(p),v=y&&a.enableGeometrySupport(),b=a.scriptUsesFeatureSet(p)&&a.enableFeatureSetSupport(),w=a.scriptIsAsync(p),x=w&&a.enableAsyncSupport(),$={vars:m,spatialReference:h,useAsync:!!x};await Promise.all([v,b,x]);const S=new Set;await a.loadDependentModules(S,p,null,w,y);const M=new c;M.immutable=!1,M.setField("scale",0);const P=a.compileScript(p,$),C=(I,D)=>{const N=I.$view?.timeZone;return"$view"in I&&I.$view&&(M.setField("scale",typeof I.$view=="object"&&"scale"in I.$view?I.$view.scale:void 0),I.$view=M),g&&(I.$config=g),P({vars:I,spatialReference:h,services:D,timeZone:N})};return new ty(t,a,p,C,new l,s,h)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}}const YH=/^([0-9_])/,ZH=/[^a-z0-9_\u0080-\uffff]+/gi;function rhe(e){return e==null?null:e.trim().replaceAll(ZH,"_").replace(YH,"F$1")||null}const JH=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],XH=["field","normalizationField"];function ohe(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(KM(JH,i,t),"visualVariables"in i&&i.visualVariables)for(const s of i.visualVariables)KM(XH,s,t)}}function KM(e,t,i){if(e)for(const s of e){const n=pg(s,t),r=n&&typeof n!="function"&&i.get(n);r&&sl(s,r.name,t)}}function ahe(e,t){if(e!=null&&t?.fields?.length)if("startField"in e){const i=t.get(e.startField),s=t.get(e.endField);e.startField=i?.name??null,e.endField=s?.name??null}else{const i=t.get(e.startTimeField),s=t.get(e.endTimeField);e.startTimeField=i?.name??null,e.endTimeField=s?.name??null}}const a0=new Set;function Uw(e,t){return e&&t?(a0.clear(),qh(a0,e,t),Array.from(a0).sort()):[]}function qh(e,t,i){if(i)if(t?.fields?.length)if(i.includes("*"))for(const{name:s}of t.fields)e.add(s);else for(const s of i)iy(e,t,s);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const s of i)s!=null&&e.add(s)}}function iy(e,t,i){if(typeof i=="string")if(t){const s=t.get(i);s&&e.add(s.name)}else e.add(i)}function lhe(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(i=>i.name):t}function che(e,t,i=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const s=Uw(e,t);return s.length/e.fields.length>=i?["*"]:s}async function To(e,t,i){if(!i)return;const{arcadeUtils:s}=await RC(),n=s.extractFieldNames(i,t?.fields?.map(r=>r.name));for(const r of n)iy(e,t,r)}async function DC(e,t,i){if(i&&i!=="1=1"){const s=await FH(i,t);if(!s.isStandardized)throw new V("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});qh(e,t,s.fieldNames)}}function uhe({displayField:e,fields:t}){return e||(t?.length?l0(t,"name-or-title")||l0(t,"unique-identifier")||l0(t,"type-or-category")||KH(t):null)}function KH(e){for(const t of e){if(!t?.name)continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function l0(e,t){for(const i of e)if(i?.valueType&&i.valueType===t)return i.name;return null}async function hhe(e,t){if(!t)return;const i=t.elevationInfo?.featureExpressionInfo;return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}function QH(e,t,i){i.onStatisticExpression?To(e,t,i.onStatisticExpression.expression):e.add(i.onStatisticField)}async function dhe(e,t,i){if(!t||!i||!("fields"in i))return;const s=[],n=i.popupTemplate;s.push(eG(e,t,n)),i.fields&&s.push(...i.fields.map(async r=>QH(e,t.fieldsIndex,r))),await Promise.all(s)}async function eG(e,t,i){const s=[];i?.expressionInfos&&s.push(...i.expressionInfos.map(r=>To(e,t.fieldsIndex,r.expression)));const n=i?.content;if(Array.isArray(n))for(const r of n)r.type==="expression"&&r.expressionInfo&&s.push(To(e,t.fieldsIndex,r.expressionInfo.expression));await Promise.all(s)}async function phe(e,t,i){t&&(t.timeInfo&&i?.timeExtent&&qh(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&qh(e,t.fieldsIndex,[t.floorInfo.floorField]),i?.where!=null&&await DC(e,t.fieldsIndex,i.where))}async function fhe(e,t,i){t&&i&&await Promise.all(i.map(s=>tG(e,t,s)))}async function tG(e,t,i){t&&i&&(i.valueExpression?await To(e,t.fieldsIndex,i.valueExpression):i.field&&iy(e,t.fieldsIndex,i.field))}function mhe(e){return e?Uw(e.fieldsIndex,NC(e)):[]}function iG(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?Uw(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const sG=new Set(["oid","global-id","guid"]),nG=new Set(["oid","global-id"]),rG=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function oG(e){const t=new Set;FC(e).forEach(s=>t.add(s)),iG(e).forEach(s=>t.add(s.toLowerCase()));const i=e&&"infoFor3D"in e?e.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(s=>t.add(s.toLowerCase())),Object.values(i.transformFieldRoles).forEach(s=>t.add(s.toLowerCase()))),Array.from(t)}function NC(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:i,creatorField:s,editDateField:n,editorField:r}=t;return[i,s,n,r].filter(Boolean)}function FC(e){return NC(e).map(t=>t.toLowerCase())}function ghe(e,t){return e.editable&&!sG.has(e.type)&&!FC(t).includes(e.name?.toLowerCase()??"")}function yhe(e,t){const i=e.name?.toLowerCase()??"";return!(t?.objectIdField!=null&&i===t.objectIdField.toLowerCase()||t?.globalIdField!=null&&i===t.globalIdField.toLowerCase()||oG(t).includes(i)||nG.has(e.type)||rG.some(s=>s.test(i)))}async function vhe(e,t){const{labelingInfo:i,fieldsIndex:s}=t;i?.length&&await Promise.all(i.map(n=>aG(e,s,n)))}async function aG(e,t,i){if(!i)return;const s=i.getLabelExpression(),n=i.where;if(s.type==="arcade")await To(e,t,s.expression);else{const r=s.expression.match(/{[^}]*}/g);r&&r.forEach(o=>{iy(e,t,o.slice(1,-1))})}await DC(e,t,n)}function bhe(e){const t=e.defaultValue;return t!==void 0&&VC(e,t)?t:e.nullable?null:void 0}function _he(e){const t=typeof e=="string"?{type:e}:e;return _G(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function jC(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function lG(e){return e===null||jC(e)}function cG(e){return e===null||Number.isInteger(e)}function zC(e){return e!=null&&typeof e=="string"}function uG(e){return e===null||zC(e)}function hG(){return!0}function VC(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=e.nullable?cG:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?lG:jC;break;case"string":case"esriFieldTypeString":i=e.nullable?uG:zC;break;default:i=hG}return arguments.length===1?i:i(t)}const dG=["integer","small-integer","big-integer"],pG=["single","double"],fG=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],mG=["esriFieldTypeSingle","esriFieldTypeDouble"],gG=new Set([...dG,...fG]),yG=new Set([...pG,...mG]),vG=nP(gG,yG);function bG(e){return e!=null&&vG.has(e.type)}function _G(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function whe(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function xhe(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function She(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function Mhe(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function $he(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function The(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function khe(e,t){return wG(e,t)===null}var Nm,Fm;function Phe(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function wG(e,t){return e==null||e.nullable&&t===null?null:bG(e)&&!xG(e.type,Number(t))?Nm.OUT_OF_RANGE:VC(e,t)?e.domain?BH(e,t):null:Fm.INVALID_TYPE}function xG(e,t){const i=typeof e=="string"?UC(e):e;if(!i)return!1;const s=i.min,n=i.max;return i.isInteger?Number.isInteger(t)&&t>=s&&t<=n:t>=s&&t<=n}function UC(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return SG;case"esriFieldTypeInteger":case"integer":return MG;case"esriFieldTypeBigInteger":case"big-integer":return $G;case"esriFieldTypeSingle":case"single":return TG;case"esriFieldTypeDouble":case"double":return kG}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Nm||(Nm={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(Fm||(Fm={}));const SG={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},MG={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},$G={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},TG={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},kG={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function Ohe(e,t,i){switch(e){case Oc.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Oc.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Fm.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case Nm.OUT_OF_RANGE:{const{min:s,max:n}=UC(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${s} to ${n}`}}}function Ehe(e,t){return!PG(e,t,null)}function PG(e,t,i){if(!t?.attributes||!e){if(i!=null)for(const r of e??[])i.add(r);return!0}const s=new Set(Object.keys(t.attributes));let n=!1;for(const r of e)if(!s.has(r)){if(n=!0,i==null)break;i.add(r)}return n}function Ahe(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}function OG(e){const t=e?.match(/{[^}]+}/g);return t?t.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let mf=class extends Z{constructor(e){super(e),this.type=null}};d([f({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],mf.prototype,"type",void 0),mf=d([k("esri.popup.content.Content")],mf);const Lo=mf;var ov;let ta=ov=class extends Lo{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new ov({description:this.description,displayType:this.displayType,title:this.title})}};d([f({type:String,json:{write:!0}})],ta.prototype,"description",void 0),d([f({type:["auto","preview","list"],json:{write:!0}})],ta.prototype,"displayType",void 0),d([f({type:String,json:{write:!0}})],ta.prototype,"title",void 0),d([f({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],ta.prototype,"type",void 0),ta=ov=d([k("esri.popup.content.AttachmentsContent")],ta);const jm=ta;var av;let ia=av=class extends Lo{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new av({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?F(this.outFields):null})}};d([f()],ia.prototype,"creator",void 0),d([f()],ia.prototype,"destroyer",void 0),d([f()],ia.prototype,"outFields",void 0),d([f({type:["custom"],readOnly:!0})],ia.prototype,"type",void 0),ia=av=d([k("esri.popup.content.CustomContent")],ia);const EG=ia;var lv;let Ol=lv=class extends Z{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new lv({title:this.title,expression:this.expression})}};d([f({type:String,json:{write:!0}})],Ol.prototype,"title",void 0),d([f({type:String,json:{write:!0}})],Ol.prototype,"expression",void 0),d([f({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Ol.prototype,"returnType",void 0),Ol=lv=d([k("esri.popup.ElementExpressionInfo")],Ol);const AG=Ol;var cv;let Pu=cv=class extends Lo{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){return new cv({expressionInfo:this.expressionInfo?.clone()})}};d([f({type:AG,json:{write:!0}})],Pu.prototype,"expressionInfo",void 0),d([f({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Pu.prototype,"type",void 0),Pu=cv=d([k("esri.popup.content.ExpressionContent")],Pu);const Ww=Pu;function se(e,t={}){const i=e instanceof Ft?e:new Ft(e,t),s={type:t?.ignoreUnknown??1?i.apiValues:String,json:{type:i.jsonValues,read:!t?.readOnly&&{reader:i.read},write:{writer:i.write}}};return t?.readOnly!==void 0&&(s.readOnly=!!t.readOnly),t?.default!==void 0&&(s.json.default=t.default),t?.name!==void 0&&(s.json.name=t.name),t?.nonNullable!==void 0&&(s.nonNullable=t.nonNullable),f(s)}let El=class extends vn(Z){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};d([se(kz)],El.prototype,"dateFormat",void 0),d([f({type:Boolean,json:{write:!0}})],El.prototype,"digitSeparator",void 0),d([f({type:rt,json:{write:!0}})],El.prototype,"places",void 0),El=d([k("esri.popup.support.FieldInfoFormat")],El);const CG=El;var uv;let ys=uv=class extends Z{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new uv({fieldName:this.fieldName,format:this.format?.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};d([f({type:String,json:{write:!0}})],ys.prototype,"fieldName",void 0),d([f({type:CG,json:{write:!0}})],ys.prototype,"format",void 0),d([f({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],ys.prototype,"isEditable",void 0),d([f({type:String,json:{write:!0}})],ys.prototype,"label",void 0),d([se(new Ft({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],ys.prototype,"stringFieldOption",void 0),d([f({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],ys.prototype,"statisticType",void 0),d([f({type:String,json:{write:!0}})],ys.prototype,"tooltip",void 0),d([f({type:Boolean,json:{write:!0}})],ys.prototype,"visible",void 0),ys=uv=d([k("esri.popup.FieldInfo")],ys);const WC=ys;var hv;let In=hv=class extends Lo{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new hv(F({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};d([f({type:Object,json:{write:!0}})],In.prototype,"attributes",void 0),d([f({type:String,json:{write:!0}})],In.prototype,"description",void 0),d([f({type:[WC]})],In.prototype,"fieldInfos",void 0),d([ve("fieldInfos")],In.prototype,"writeFieldInfos",null),d([f({type:String,json:{write:!0}})],In.prototype,"title",void 0),d([f({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],In.prototype,"type",void 0),In=hv=d([k("esri.popup.content.FieldsContent")],In);const zm=In;let sa=class extends Z{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};d([f({type:String,json:{write:!0}})],sa.prototype,"altText",void 0),d([f({type:String,json:{write:!0}})],sa.prototype,"caption",void 0),d([f({type:String,json:{write:!0}})],sa.prototype,"title",void 0),d([f({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],sa.prototype,"type",void 0),sa=d([k("esri.popup.content.mixins.MediaInfo")],sa);const Bw=sa;function mp(e){return mn(m_(e),0,255)}function gp(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}function yp(e,t){const i=e.toString(16).padStart(2,"0");return t?i.substring(0,1):i}class st{static blendColors(t,i,s,n=new st){return n.r=Math.round(t.r+(i.r-t.r)*s),n.g=Math.round(t.g+(i.g-t.g)*s),n.b=Math.round(t.b+(i.b-t.b)*s),n.a=t.a+(i.a-t.a)*s,n._sanitize()}static fromRgb(t,i){const s=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(s){const n=s[2].split(/\s*,\s*/),r=s[1];if(r==="rgb"&&n.length===3||r==="rgba"&&n.length===4){const o=n[0];if(o.charAt(o.length-1)==="%"){const a=n.map(l=>2.56*parseFloat(l));return n.length===4&&(a[3]=parseFloat(n[3])),st.fromArray(a,i)}return st.fromArray(n.map(a=>parseFloat(a)),i)}if(r==="hsl"&&n.length===3||r==="hsla"&&n.length===4)return st.fromArray(hO(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),i)}return null}static fromHex(t,i=new st){if(t[0]!=="#"||isNaN(Number(`0x${t.substring(1)}`)))return null;switch(t.length){case 4:case 5:{const s=parseInt(t.substring(1,2),16),n=parseInt(t.substring(2,3),16),r=parseInt(t.substring(3,4),16),o=t.length===5?15:parseInt(t.substring(4),16);return st.fromArray([s+16*s,n+16*n,r+16*r,(o+16*o)/255],i)}case 7:case 9:{const s=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),r=parseInt(t.substring(5,7),16),o=t.length===7?255:parseInt(t.substring(7),16);return st.fromArray([s,n,r,o/255],i)}default:return null}}static fromArray(t,i=new st){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const s=uO(t)?X_(t):null;return s&&st.fromArray(s,i)||st.fromRgb(t,i)||st.fromHex(t,i)}static fromJSON(t){return t!=null?new st([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?st.fromString(t,this):Array.isArray(t)?st.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof st||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const i=t?.capitalize??!1,s=t?.digits??6,n=s===3||s===4,r=s===4||s===8,o=`#${yp(this.r,n)}${yp(this.g,n)}${yp(this.b,n)}${r?yp(Math.round(255*this.a),n):""}`;return i?o.toUpperCase():o}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=st.AlphaMode.ALWAYS){const i=mp(this.r),s=mp(this.g),n=mp(this.b);return t===st.AlphaMode.ALWAYS||this.a!==1?[i,s,n,mp(255*this.a)]:[i,s,n]}clone(){return new st(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(gp(this.r,0,255)),this.g=Math.round(gp(this.g,0,255)),this.b=Math.round(gp(this.b,0,255)),this.a=gp(this.a,0,1),this}_set(t,i,s,n){this.r=t,this.g=i,this.b=s,this.a=n}}st.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(st||(st={}));const _e=st;var dv;let na=dv=class extends Q{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new dv({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};d([f()],na.prototype,"color",void 0),d([f()],na.prototype,"fieldName",void 0),d([f()],na.prototype,"tooltip",void 0),d([f()],na.prototype,"value",void 0),na=dv=d([k("esri.popup.content.support.ChartMediaInfoValueSeries")],na);const IG=na;var pv;let Rr=pv=class extends Z{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new pv({colors:F(this.colors),fields:F(this.fields),normalizeField:this.normalizeField,series:F(this.series),tooltipField:this.tooltipField})}};d([f({type:[_e],json:{type:[[rt]],write:!0}})],Rr.prototype,"colors",void 0),d([f({type:[String],json:{write:!0}})],Rr.prototype,"fields",void 0),d([f({type:String,json:{write:!0}})],Rr.prototype,"normalizeField",void 0),d([f({type:[IG],json:{read:!1}})],Rr.prototype,"series",void 0),d([f({type:String,json:{write:!0}})],Rr.prototype,"tooltipField",void 0),Rr=pv=d([k("esri.popup.content.support.ChartMediaInfoValue")],Rr);const LG=Rr;let Ou=class extends Bw{constructor(e){super(e),this.type=null,this.value=void 0}};d([f({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Ou.prototype,"type",void 0),d([f({type:LG,json:{write:!0}})],Ou.prototype,"value",void 0),Ou=d([k("esri.popup.content.mixins.ChartMediaInfo")],Ou);const sy=Ou,ny=di()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var fv;let gf=fv=class extends sy{constructor(e){super(e),this.type="bar-chart"}clone(){return new fv({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};d([f({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:ny.write}})],gf.prototype,"type",void 0),gf=fv=d([k("esri.popup.content.BarChartMediaInfo")],gf);const BC=gf;var mv;let yf=mv=class extends sy{constructor(e){super(e),this.type="column-chart"}clone(){return new mv({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};d([f({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:ny.write}})],yf.prototype,"type",void 0),yf=mv=d([k("esri.popup.content.ColumnChartMediaInfo")],yf);const HC=yf;var gv;let Eu=gv=class extends Z{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new gv({linkURL:this.linkURL,sourceURL:this.sourceURL})}};d([f({type:String,json:{write:!0}})],Eu.prototype,"linkURL",void 0),d([f({type:String,json:{write:!0}})],Eu.prototype,"sourceURL",void 0),Eu=gv=d([k("esri.popup.content.support.ImageMediaInfoValue")],Eu);const RG=Eu;var yv;let Al=yv=class extends Bw{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new yv({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};d([f({type:Number,json:{write:!0}})],Al.prototype,"refreshInterval",void 0),d([f({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Al.prototype,"type",void 0),d([f({type:RG,json:{write:!0}})],Al.prototype,"value",void 0),Al=yv=d([k("esri.popup.content.ImageMediaInfo")],Al);const GC=Al;var vv;let vf=vv=class extends sy{constructor(e){super(e),this.type="line-chart"}clone(){return new vv({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};d([f({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:ny.write}})],vf.prototype,"type",void 0),vf=vv=d([k("esri.popup.content.LineChartMediaInfo")],vf);const qC=vf;var bv;let bf=bv=class extends sy{constructor(e){super(e),this.type="pie-chart"}clone(){return new bv({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};d([f({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:ny.write}})],bf.prototype,"type",void 0),bf=bv=d([k("esri.popup.content.PieChartMediaInfo")],bf);const YC=bf,ZC={base:Bw,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":BC,"column-chart":HC,"line-chart":qC,"pie-chart":YC,image:GC}};var _v;let vs=_v=class extends Lo{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?GC.fromJSON(t):t.type==="barchart"?BC.fromJSON(t):t.type==="columnchart"?HC.fromJSON(t):t.type==="linechart"?qC.fromJSON(t):t.type==="piechart"?YC.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new _v(F({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};d([f()],vs.prototype,"activeMediaInfoIndex",void 0),d([f({type:Object,json:{write:!0}})],vs.prototype,"attributes",void 0),d([f({type:String,json:{write:!0}})],vs.prototype,"description",void 0),d([f({types:[ZC]})],vs.prototype,"mediaInfos",void 0),d([$e("mediaInfos")],vs.prototype,"readMediaInfos",null),d([ve("mediaInfos")],vs.prototype,"writeMediaInfos",null),d([f({type:String,json:{write:!0}})],vs.prototype,"title",void 0),d([f({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],vs.prototype,"type",void 0),vs=_v=d([k("esri.popup.content.MediaContent")],vs);const Vm=vs;var wv;let Au=wv=class extends Z{constructor(e){super(e),this.field=null,this.order=null}clone(){return new wv({field:this.field,order:this.order})}};d([f({type:String,json:{write:!0}})],Au.prototype,"field",void 0),d([f({type:["asc","desc"],json:{write:!0}})],Au.prototype,"order",void 0),Au=wv=d([k("esri.popup.support.RelatedRecordsInfoFieldOrder")],Au);const JC=Au;let Ws=class extends vn(Lo){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};d([f({type:String,json:{write:!0}})],Ws.prototype,"description",void 0),d([f({type:Number,json:{type:rt,write:!0}})],Ws.prototype,"displayCount",void 0),d([f({type:["list"],json:{write:!0}})],Ws.prototype,"displayType",void 0),d([f({type:[JC],json:{write:!0}})],Ws.prototype,"orderByFields",void 0),d([f({type:Number,json:{type:rt,write:!0}})],Ws.prototype,"relationshipId",void 0),d([f({type:String,json:{write:!0}})],Ws.prototype,"title",void 0),d([f({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Ws.prototype,"type",void 0),Ws=d([k("esri.popup.content.RelationshipContent")],Ws);const Um=Ws;var xv;let Cu=xv=class extends Lo{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new xv({text:this.text})}};d([f({type:String,json:{write:!0}})],Cu.prototype,"text",void 0),d([f({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Cu.prototype,"type",void 0),Cu=xv=d([k("esri.popup.content.TextContent")],Cu);const Wm=Cu,DG={base:null,key:"type",typeMap:{attachment:jm,media:Vm,text:Wm,expression:Ww,field:zm,relationship:Um}};var Sv;let ra=Sv=class extends Z{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new Sv({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};d([f({type:String,json:{write:!0}})],ra.prototype,"name",void 0),d([f({type:String,json:{write:!0}})],ra.prototype,"title",void 0),d([f({type:String,json:{write:!0}})],ra.prototype,"expression",void 0),d([f({type:["string","number"],json:{write:!0}})],ra.prototype,"returnType",void 0),ra=Sv=d([k("esri.popup.ExpressionInfo")],ra);const NG=ra;var Mv;let Iu=Mv=class extends Z{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new Mv({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};d([f({type:Boolean,json:{write:!0}})],Iu.prototype,"returnTopmostRaster",void 0),d([f({type:Boolean,json:{write:!0}})],Iu.prototype,"showNoDataRecords",void 0),Iu=Mv=d([k("esri.popup.LayerOptions")],Iu);const FG=Iu;var $v;let Lu=$v=class extends Z{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new $v({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?F(this.orderByFields):null})}};d([f({type:Boolean,json:{write:!0}})],Lu.prototype,"showRelatedRecords",void 0),d([f({type:[JC],json:{write:!0}})],Lu.prototype,"orderByFields",void 0),Lu=$v=d([k("esri.popup.RelatedRecordsInfo")],Lu);const jG=Lu;var Tv;let Zi=Tv=class extends Dw(Q){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new Tv({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};d([f()],Zi.prototype,"active",void 0),d([f()],Zi.prototype,"className",void 0),d([f()],Zi.prototype,"disabled",void 0),d([f()],Zi.prototype,"icon",void 0),d([f()],Zi.prototype,"id",void 0),d([f()],Zi.prototype,"indicator",void 0),d([f()],Zi.prototype,"title",void 0),d([f()],Zi.prototype,"type",void 0),d([f()],Zi.prototype,"visible",void 0),Zi=Tv=d([k("esri.support.actions.ActionBase")],Zi);const Hw=Zi;var kv;let _f=kv=class extends Hw{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new kv({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};d([f()],_f.prototype,"image",void 0),_f=kv=d([k("esri.support.actions.ActionButton")],_f);const zG=_f;var Pv;let Ru=Pv=class extends Hw{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new Pv({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};d([f()],Ru.prototype,"image",void 0),d([f()],Ru.prototype,"value",void 0),Ru=Pv=d([k("esri.support.actions.ActionToggle")],Ru);const VG=Ru,nu="relationships/",QM="expression/",UG=ee.ofType({key:"type",defaultKeyValue:"button",base:Hw,typeMap:{button:zG,toggle:VG}}),WG={base:Lo,key:"type",typeMap:{media:Vm,custom:EG,text:Wm,attachments:jm,fields:zm,expression:Ww,relationship:Um}},BG=new Set(["attachments","fields","media","text","expression","relationship"]);let Pt=class extends vn(Z){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(t=>ar(WG,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Oo(e)?e:(B.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:i}=t;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(t.description,t.mediaInfos,i):this._readPopupInfo(t)}writeContent(e,t,i,s){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(n=>BG.has(n.type)).map(n=>n?.toJSON(s)),t.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(t):n.type==="media"?this._writeMediaContent(n,t):n.type==="text"?this._writeTextContent(n,t):n.type==="relationship"&&this._writeRelationshipContent(n,t)})):t.description=e}writeFieldInfos(e,t,i,s){const{content:n}=this,r=Array.isArray(n)?n:null;if(e){const o=r?r.filter(l=>l.type==="fields"):[],a=o.length&&o.every(l=>l.fieldInfos?.length);t.fieldInfos=e.filter(Boolean).map(l=>{const c=l.toJSON(s);return a&&(c.visible=!1),c})}if(r)for(const o of r)o.type==="fields"&&this._writeFieldsContent(o,t)}writeLayerOptions(e,t,i,s){t[i]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(s)}writeTitle(e,t){t.title=e||""}async collectRequiredFields(e,t){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...i,...this._getContentExpressionInfos(this.content,i)]),qh(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const i=F(e.fieldInfos);Array.isArray(t.fieldInfos)?i.forEach(s=>{const n=t.fieldInfos.find(r=>r.fieldName?.toLowerCase()===s.fieldName?.toLowerCase());n?n.visible=!0:t.fieldInfos.push(s)}):t.fieldInfos=i}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,t){const i=e.orderByFields?.map(n=>this._toFieldOrderJSON(n,e.relationshipId))||[],s=[...t.relatedRecordsInfo?.orderByFields||[],...i];t.relatedRecordsInfo={showRelatedRecords:!0,...s?.length&&{orderByFields:s}}}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=F(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...i]:t.mediaInfos=i}_readPopupInfoElements(e,t,i){const s={description:!1,mediaInfos:!1};return i.map(n=>n.type==="media"?(n.mediaInfos||!t||s.mediaInfos||(n.mediaInfos=t,s.mediaInfos=!0),Vm.fromJSON(n)):n.type==="text"?(n.text||!e||s.description||(n.text=e,s.description=!0),Wm.fromJSON(n)):n.type==="attachments"?jm.fromJSON(n):n.type==="fields"?zm.fromJSON(n):n.type==="expression"?Ww.fromJSON(n):n.type==="relationship"?Um.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:t,order:i}=e;if(!t?.startsWith(nu))return null;const s=t.replace(nu,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),r=s[1];return typeof n=="number"&&r?Um.fromJSON({relationshipId:n,orderByFields:[{field:r,order:i}]}):null}_toFieldOrderJSON(e,t){const{order:i,field:s}=e;return{field:`${nu}${t}/${s}`,order:i}}_readPopupInfo({description:e,mediaInfos:t,showAttachments:i,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];e?n.push(new Wm({text:e})):n.push(new zm),Array.isArray(t)&&t.length&&n.push(Vm.fromJSON({mediaInfos:t})),i&&n.push(jm.fromJSON({displayType:"auto"}));const{showRelatedRecords:r,orderByFields:o}=s;return r&&o?.length&&o.forEach(a=>{const l=this._toRelationshipContent(a);l&&n.push(l)}),n.length?n:e}_getContentElementFields(e){const t=e?.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(t==="media"){const i=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...i.reduce((s,n)=>[...s,...this._getMediaInfoFields(n)],[])]}return t==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:i,value:s}=e,n=s||{},{fields:r,normalizeField:o,tooltipField:a,sourceURL:l,linkURL:c}=n,h=[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(l),...this._extractFieldNames(c),...r??[]];return o&&h.push(o),a&&h.push(a),h}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((i,s)=>[...i,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,i)=>[...t,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(e,t,i){i&&await Promise.all(i.map(s=>To(e,t,s.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:t,visible:i})=>!(i!==void 0&&!i||!t||t.startsWith(nu)||t.startsWith(QM))).map(t=>t.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((t,i)=>[...t,...this._getActionFields(i)],[]):[]}_getActionFields(e){const{className:t,title:i,type:s}=e,n=s==="button"||s==="toggle"?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(n)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return OG(e).filter(t=>!(t.indexOf(nu)===0||t.indexOf(QM)===0))}};d([f({type:UG})],Pt.prototype,"actions",void 0),d([f()],Pt.prototype,"content",void 0),d([Mt("content")],Pt.prototype,"castContent",null),d([$e("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Pt.prototype,"readContent",null),d([ve("content",{popupElements:{type:ee.ofType(DG)},showAttachments:{type:Boolean},mediaInfos:{type:ee.ofType(ZC)},description:{type:String},relatedRecordsInfo:{type:jG}})],Pt.prototype,"writeContent",null),d([f({type:[NG],json:{write:!0}})],Pt.prototype,"expressionInfos",void 0),d([f({type:[WC]})],Pt.prototype,"fieldInfos",void 0),d([ve("fieldInfos")],Pt.prototype,"writeFieldInfos",null),d([f({type:FG})],Pt.prototype,"layerOptions",void 0),d([ve("layerOptions")],Pt.prototype,"writeLayerOptions",null),d([f({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Pt.prototype,"lastEditInfoEnabled",void 0),d([f()],Pt.prototype,"outFields",void 0),d([f()],Pt.prototype,"overwriteActions",void 0),d([f()],Pt.prototype,"returnGeometry",void 0),d([f({json:{type:String}})],Pt.prototype,"title",void 0),d([ve("title")],Pt.prototype,"writeTitle",null),Pt=d([k("esri.PopupTemplate")],Pt);const HG=Pt,e$=new Ft({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let GG=0,Cl=class extends Z{constructor(e){super(e),this.id="sym"+GG++,this.type=null,this.color=new _e([0,0,0,1])}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};d([f({type:e$.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:e$.write}}})],Cl.prototype,"type",void 0),d([f({type:_e,json:{write:{allowNull:!0}}})],Cl.prototype,"color",void 0),d([$e("color")],Cl.prototype,"readColor",null),Cl=d([k("esri.symbols.Symbol")],Cl);const ti=Cl;var Ov;let Dr=Ov=class extends ti{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){if(this.data?.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const s=i.map(n=>{const r=n.valueExpressionInfo;return r?To(e,t,r.expression):null});await Promise.all(s)}}}clone(){return new Ov({data:F(this.data)})}hash(){return v3(JSON.stringify(this.data)).toString()}};d([f({json:{write:!1}})],Dr.prototype,"color",void 0),d([f({json:{write:!0}})],Dr.prototype,"data",void 0),d([$e("data",["symbol"])],Dr.prototype,"readData",null),d([ve("data",{})],Dr.prototype,"writeData",null),d([se({CIMSymbolReference:"cim"},{readOnly:!0})],Dr.prototype,"type",void 0),Dr=Ov=d([k("esri.symbols.CIMSymbol")],Dr);const cl=Dr;let Il=class extends Z{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,t,i){e||(t[i]=e)}};d([f({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Il.prototype,"enabled",void 0),d([ve("enabled")],Il.prototype,"writeEnabled",null),d([f({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Il.prototype,"type",void 0),Il=d([k("esri.symbols.Symbol3DLayer")],Il);const bn=Il;function XC(e){const t=m_(100*(1-e));return Math.max(0,Math.min(t,100))}function KC(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}function qG(e,t){const i=t.transparency!=null?KC(t.transparency):1,s=t.color;return s&&Array.isArray(s)?new _e([s[0]||0,s[1]||0,s[2]||0,i]):null}function YG(e,t){t.color=e.toJSON().slice(0,3);const i=XC(e.a);i!==0&&(t.transparency=i)}const Ro={type:_e,json:{type:[rt],default:null,read:{source:["color","transparency"],reader:qG},write:{target:{color:{type:[rt]},transparency:{type:rt}},writer:YG}}},gn={type:Number,cast:Qe,json:{write:!0}};let oa=class extends Z{constructor(e){super(e),this.color=new _e([0,0,0,1]),this.extensionLength=0,this.size=So(1)}clone(){}cloneProperties(){return{color:F(this.color),size:this.size,extensionLength:this.extensionLength}}};d([f({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],oa.prototype,"type",void 0),d([f(Ro)],oa.prototype,"color",void 0),d([f({...gn,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],oa.prototype,"extensionLength",void 0),d([f(gn)],oa.prototype,"size",void 0),oa=d([k("esri.symbols.edges.Edges3D")],oa);const Gw=oa;var Ev;let wf=Ev=class extends Gw{constructor(e){super(e),this.type="sketch"}clone(){return new Ev(this.cloneProperties())}};d([se({sketch:"sketch"},{readOnly:!0})],wf.prototype,"type",void 0),wf=Ev=d([k("esri.symbols.edges.SketchEdges3D")],wf);const ZG=wf;var Av;let xf=Av=class extends Gw{constructor(e){super(e),this.type="solid"}clone(){return new Av(this.cloneProperties())}};d([se({solid:"solid"},{readOnly:!0})],xf.prototype,"type",void 0),xf=Av=d([k("esri.symbols.edges.SolidEdges3D")],xf);const JG=xf,QC={types:{key:"type",base:Gw,typeMap:{solid:JG,sketch:ZG}},json:{write:!0}};var Cv;let ls=Cv=class extends Z{constructor(e){super(e),this.color=null}clone(){const e={color:this.color!=null?this.color.clone():null};return new Cv(e)}};d([f(Ro)],ls.prototype,"color",void 0),ls=Cv=d([k("esri.symbols.support.Symbol3DMaterial")],ls);var Iv;let Nr=Iv=class extends bn{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new Iv({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}};d([se({Extrude:"extrude"},{readOnly:!0})],Nr.prototype,"type",void 0),d([f({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Nr.prototype,"size",void 0),d([f({type:ls,json:{write:!0}})],Nr.prototype,"material",void 0),d([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Nr.prototype,"castShadows",void 0),d([f(QC)],Nr.prototype,"edges",void 0),Nr=Iv=d([k("esri.symbols.ExtrudeSymbol3DLayer")],Nr);const eI=Nr;let Du=class extends ti{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};d([se({esriSLS:"simple-line"},{readOnly:!0})],Du.prototype,"type",void 0),d([f({type:Number,cast:Qe,json:{write:!0}})],Du.prototype,"width",void 0),Du=d([k("esri.symbols.LineSymbol")],Du);const XG=Du,KG=["begin","end","begin-end"],tI=["arrow","circle","square","diamond","cross","x"];var Lv;let Bs=Lv=class extends Z{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,s){t[i]=s?.origin==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,s){s?.origin==="web-map"||(t[i]=e)}clone(){return new Lv({color:F(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};d([f({type:["begin","end","begin-end"],json:{write:!0}})],Bs.prototype,"placement",void 0),d([se({"line-marker":"line-marker"},{readOnly:!0}),f({json:{origins:{"web-map":{write:!1}}}})],Bs.prototype,"type",void 0),d([f({type:tI})],Bs.prototype,"style",void 0),d([ve("style")],Bs.prototype,"writeStyle",null),d([f({type:_e,value:null,json:{write:{allowNull:!0}}})],Bs.prototype,"color",null),d([$e("color")],Bs.prototype,"readColor",null),d([ve("color")],Bs.prototype,"writeColor",null),Bs=Lv=d([k("esri.symbols.LineSymbolMarker")],Bs);const QG=Bs;var Rv;const c0=new Ft({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Ln=Rv=class extends XG{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,s,n,r){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),i!=null&&(o.width=Qe(i)),s!=null&&(o.cap=s),n!=null&&(o.join=n),r!=null&&(o.miterLimit=Qe(r)),o}clone(){return new Rv({color:F(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};d([se({esriSLS:"simple-line"},{readOnly:!0})],Ln.prototype,"type",void 0),d([f({type:c0.apiValues,json:{read:c0.read,write:c0.write}})],Ln.prototype,"style",void 0),d([f({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&i?.origin==null})}}})],Ln.prototype,"cap",void 0),d([f({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&i?.origin==null})}}})],Ln.prototype,"join",void 0),d([f({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":QG}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ln.prototype,"marker",void 0),d([f({type:Number,json:{read:!1,write:!1}})],Ln.prototype,"miterLimit",void 0),Ln=Rv=d([k("esri.symbols.SimpleLineSymbol")],Ln);const ul=Ln;let Nu=class extends ti{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};d([f({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ul}},json:{default:null,write:!0}})],Nu.prototype,"outline",void 0),d([f({type:["simple-fill","picture-fill"],readOnly:!0})],Nu.prototype,"type",void 0),Nu=d([k("esri.symbols.FillSymbol")],Nu);const iI=Nu;let Sf=class extends Z{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};d([f({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Sf.prototype,"type",void 0),Sf=d([k("esri.symbols.patterns.LinePattern3D")],Sf);const sI=Sf,eq=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var Dv;const tq=di()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Fu=Dv=class extends sI{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new Dv(e)}};d([f({type:["style"]})],Fu.prototype,"type",void 0),d([se(tq),f({type:eq})],Fu.prototype,"style",void 0),Fu=Dv=d([k("esri.symbols.patterns.LineStylePattern3D")],Fu);const qw=Fu;let Mf=class extends Z{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};d([f({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Mf.prototype,"type",void 0),Mf=d([k("esri.symbols.patterns.Pattern3D")],Mf);const nI=Mf,iq=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var Nv;let ju=Nv=class extends nI{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new Nv({style:this.style})}};d([f({type:["style"]})],ju.prototype,"type",void 0),d([f({type:iq,json:{read:!0,write:!0}})],ju.prototype,"style",void 0),ju=Nv=d([k("esri.symbols.patterns.StylePattern3D")],ju);const rI=ju,sq={types:{key:"type",base:nI,typeMap:{style:rI}},json:{write:!0}},oI={types:{key:"type",base:sI,typeMap:{style:qw}},json:{write:!0}},xh=new _e("white");new _e("black");const nq=new _e([255,255,255,0]);function rq(e){return e.r===0&&e.g===0&&e.b===0}var Fv;let Sh=Fv=class extends ls{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new Fv(e)}};d([se({multiply:"multiply",replace:"replace",tint:"tint"})],Sh.prototype,"colorMixMode",void 0),Sh=Fv=d([k("esri.symbols.support.Symbol3DFillMaterial")],Sh);function Yw(e=uq){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function Zw(e,t,i,s,n,r,o=Yw()){return o[0]=e,o[1]=t,o[2]=i,o[3]=s,o[4]=n,o[5]=r,o}function Che(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new tt(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function Ihe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function Lhe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function Rhe(e,t,i=0,s=t.length/3){let n=e[0],r=e[1],o=e[2],a=e[3],l=e[4],c=e[5];for(let h=0;h<s;h++)n=Math.min(n,t[i+3*h]),r=Math.min(r,t[i+3*h+1]),o=Math.min(o,t[i+3*h+2]),a=Math.max(a,t[i+3*h]),l=Math.max(l,t[i+3*h+1]),c=Math.max(c,t[i+3*h+2]);e[0]=n,e[1]=r,e[2]=o,e[3]=a,e[4]=l,e[5]=c}function oq(e){return e[0]>=e[3]?0:e[3]-e[0]}function aq(e){return e[1]>=e[4]?0:e[4]-e[1]}function lq(e){return e[2]>=e[5]?0:e[5]-e[2]}function Dhe(e,t=[0,0,0]){return t[0]=oq(e),t[1]=aq(e),t[2]=lq(e),t}function Nhe(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function Fhe(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function cq(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function jhe(e){return e?cq(e,i$):Yw(i$)}function zhe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function Vhe(e,t,i,s,n){return e[0]=t,e[1]=i,e[2]=Number.NEGATIVE_INFINITY,e[3]=s,e[4]=n,e[5]=Number.POSITIVE_INFINITY,e}function t$(e){return e.length===6}function Uhe(e,t,i){if(e==null||t==null)return e===t;if(!t$(e)||!t$(t))return!1;if(i){for(let s=0;s<e.length;s++)if(!i(e[s],t[s]))return!1}else for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}const i$=[1/0,1/0,1/0,-1/0,-1/0,-1/0],uq=[0,0,0,0,0,0];Yw();const hq=Zw(-.5,-.5,-.5,.5,.5,.5),dq=Zw(-.5,-.5,0,.5,.5,1),pq=Zw(-.5,-.5,0,.5,.5,.5);function Whe(e){switch(e){case"sphere":case"cube":case"diamond":return hq;case"cylinder":case"cone":case"inverted-cone":return dq;case"tetrahedron":return pq;default:return}}const Jw=["butt","square","round"],fq=[...Jw,"none"],aI=["miter","bevel","round"];var jv;let aa=jv=class extends Z{constructor(e){super(e),this.color=new _e([0,0,0,1]),this.size=So(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new jv(e)}};d([f(Ro)],aa.prototype,"color",void 0),d([f(gn)],aa.prototype,"size",void 0),d([f(oI)],aa.prototype,"pattern",void 0),d([f({type:Jw,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],aa.prototype,"patternCap",void 0),aa=jv=d([k("esri.symbols.support.Symbol3DOutline")],aa);var $f;let Rn=$f=class extends bn{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new $f(e)}static fromSimpleFillSymbol(e){const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new qw({style:e.outline.style}):null,i={size:e.outline?.width??0,color:(e.outline?.color??xh).clone(),pattern:t};return t&&e.outline?.cap&&(i.patternCap=e.outline.cap),new $f({material:new Sh({color:(e.color??nq).clone()}),pattern:e.style&&e.style!=="solid"?new rI({style:e.style}):null,outline:i})}};d([se({Fill:"fill"},{readOnly:!0})],Rn.prototype,"type",void 0),d([f({type:Sh,json:{write:!0}})],Rn.prototype,"material",void 0),d([f(sq)],Rn.prototype,"pattern",void 0),d([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Rn.prototype,"castShadows",void 0),d([f({type:aa,json:{write:!0}})],Rn.prototype,"outline",void 0),d([f(QC)],Rn.prototype,"edges",void 0),Rn=$f=d([k("esri.symbols.FillSymbol3DLayer")],Rn);const Ad=Rn,mq=["none","underline","line-through"],gq=["normal","italic","oblique"],yq=["normal","lighter","bold","bolder"],lI={type:Number,cast:e=>{const t=ks(e);return t===0?1:mn(t,.1,4)},nonNullable:!0},vq=["left","right","center"],bq=["baseline","top","middle","bottom"],cI={type:vq,nonNullable:!0},uI={type:bq,nonNullable:!0},Bhe=8;var zv;let Dn=zv=class extends Z{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Qe(e)}clone(){return new zv({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};d([f({type:mq,json:{default:"none",write:!0}})],Dn.prototype,"decoration",void 0),d([f({type:String,json:{write:!0}})],Dn.prototype,"family",void 0),d([f({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],Dn.prototype,"size",void 0),d([Mt("size")],Dn.prototype,"castSize",null),d([f({type:gq,json:{default:"normal",write:!0}})],Dn.prototype,"style",void 0),d([f({type:yq,json:{default:"normal",write:!0}})],Dn.prototype,"weight",void 0),Dn=zv=d([k("esri.symbols.Font")],Dn);const ry=Dn;var Vv;const _q=di()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let la=Vv=class extends Z{constructor(e){super(e)}readHref(e,t,i){return e?bd(e,i):t.dataURI}writeHref(e,t,i,s){e&&(nl(e)?t.dataURI=e:(t.href=Pg(e,s),Ri(t.href)&&(t.href=rr(t.href))))}clone(){return new Vv({href:this.href,primitive:this.primitive})}};d([f({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],la.prototype,"href",void 0),d([$e("href")],la.prototype,"readHref",null),d([ve("href",{href:{type:String},dataURI:{type:String}})],la.prototype,"writeHref",null),d([se(_q)],la.prototype,"primitive",void 0),la=Vv=d([k("esri.symbols.support.IconSymbol3DLayerResource")],la);var Uv;let Jl=Uv=class extends Q{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new Uv({x:this.x,y:this.y})}};d([f({type:Number})],Jl.prototype,"x",void 0),d([f({type:Number})],Jl.prototype,"y",void 0),Jl=Uv=d([k("esri.symbols.support.Symbol3DAnchorPosition2D")],Jl);var Wv;let zu=Wv=class extends Z{constructor(e){super(e),this.color=new _e([0,0,0,1]),this.size=So(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new Wv(e)}};d([f(Ro)],zu.prototype,"color",void 0),d([f(gn)],zu.prototype,"size",void 0),zu=Wv=d([k("esri.symbols.support.Symbol3DIconOutline")],zu);var Ll;const hI="esri.symbols.IconSymbol3DLayer";let Hs=Ll=class extends bn{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new Ll({anchor:this.anchor,anchorPosition:F(this.anchorPosition),enabled:this.enabled,material:F(this.material),outline:F(this.outline),resource:F(this.resource),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||xh,i=s$(e),s=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||xh).clone()}:null;return new Ll({size:e.size,resource:{primitive:xq(e.style)},material:{color:t},outline:s,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||rq(e.color)?xh:e.color,i=s$(e);return new Ll({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new Ll({resource:{href:yP({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};d([f({type:ls,json:{write:!0}})],Hs.prototype,"material",void 0),d([f({type:la,json:{write:!0}})],Hs.prototype,"resource",void 0),d([se({Icon:"icon"},{readOnly:!0})],Hs.prototype,"type",void 0),d([f(gn)],Hs.prototype,"size",void 0),d([se({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),f({json:{default:"center"}})],Hs.prototype,"anchor",void 0),d([f({type:Jl,json:{type:[Number],read:{reader:e=>new Jl({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Hs.prototype,"anchorPosition",void 0),d([f({type:zu,json:{write:!0}})],Hs.prototype,"outline",void 0),Hs=Ll=d([k(hI)],Hs);const Aa=Hs;function s$(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,s=n$(e.xoffset),n=n$(e.yoffset);return(s||n)&&t&&i?{x:-s/t,y:n/i}:null}function n$(e){return isFinite(e)?e:0}const wq={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function xq(e){return wq[e]||(B.getLogger(hI).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let ca=class extends vn(Z){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};d([f({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ca.prototype,"type",void 0),d([f({type:KG,json:{default:"begin-end",write:!0}})],ca.prototype,"placement",void 0),d([f({type:tI,json:{default:"arrow",write:!0}})],ca.prototype,"style",void 0),d([f({type:_e,json:{type:[rt],default:null,write:!0}})],ca.prototype,"color",void 0),ca=d([k("esri.symbols.LineStyleMarker3D")],ca);const Bv=ca;var Tf;let Gs=Tf=class extends bn{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=So(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new Tf(e)}static fromSimpleLineSymbol(e){const t={enabled:!0,size:e.width??So(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new qw({style:e.style}):null,material:new ls({color:(e.color||xh).clone()}),marker:e.marker?new Bv({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new Tf(t)}};d([f({type:ls,json:{write:!0}})],Gs.prototype,"material",void 0),d([se({Line:"line"},{readOnly:!0})],Gs.prototype,"type",void 0),d([f({type:aI,json:{write:!0,default:"miter"}})],Gs.prototype,"join",void 0),d([f({type:Jw,json:{write:!0,default:"butt"}})],Gs.prototype,"cap",void 0),d([f(gn)],Gs.prototype,"size",void 0),d([f(oI)],Gs.prototype,"pattern",void 0),d([f({types:{key:"type",base:Bv,typeMap:{style:Bv}},json:{write:!0}})],Gs.prototype,"marker",void 0),Gs=Tf=d([k("esri.symbols.LineSymbol3DLayer")],Gs);const Cd=Gs;var Hv;const Sq=di()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Vu=Hv=class extends Z{clone(){return new Hv({href:this.href,primitive:this.primitive})}};d([f({type:String,json:{read:Z_,write:_c}})],Vu.prototype,"href",void 0),d([se(Sq)],Vu.prototype,"primitive",void 0),Vu=Hv=d([k("esri.symbols.support.ObjectSymbol3DLayerResource")],Vu);var Gv;let ka=Gv=class extends Q{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new Gv({x:this.x,y:this.y,z:this.z})}};d([f({type:Number})],ka.prototype,"x",void 0),d([f({type:Number})],ka.prototype,"y",void 0),d([f({type:Number})],ka.prototype,"z",void 0),ka=Gv=d([k("esri.symbols.support.Symbol3DAnchorPosition3D")],ka);var qv;let Wt=qv=class extends bn{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new qv({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};d([f({type:ls,json:{write:!0}})],Wt.prototype,"material",void 0),d([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Wt.prototype,"castShadows",void 0),d([f({type:Vu,json:{write:!0}})],Wt.prototype,"resource",void 0),d([se({Object:"object"},{readOnly:!0})],Wt.prototype,"type",void 0),d([f({type:Number,json:{write:!0}})],Wt.prototype,"width",void 0),d([f({type:Number,json:{write:!0}})],Wt.prototype,"height",void 0),d([f({type:Number,json:{write:!0}})],Wt.prototype,"depth",void 0),d([se({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),f({json:{default:"origin"}})],Wt.prototype,"anchor",void 0),d([f({type:ka,json:{type:[Number],read:{reader:e=>new ka({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Wt.prototype,"anchorPosition",void 0),d([f({type:Number,json:{write:!0}})],Wt.prototype,"heading",void 0),d([f({type:Number,json:{write:!0}})],Wt.prototype,"tilt",void 0),d([f({type:Number,json:{write:!0}})],Wt.prototype,"roll",void 0),d([f({readOnly:!0})],Wt.prototype,"isPrimitive",null),Wt=qv=d([k("esri.symbols.ObjectSymbol3DLayer")],Wt);const Xw=Wt;var Yv;let si=Yv=class extends bn{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new Yv({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};d([f({type:ls,json:{write:!0}})],si.prototype,"material",void 0),d([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],si.prototype,"castShadows",void 0),d([se({Path:"path"},{readOnly:!0})],si.prototype,"type",void 0),d([f({type:["circle","quad"],json:{write:!0,default:"circle"}})],si.prototype,"profile",void 0),d([f({type:aI,json:{write:!0,default:"miter"}})],si.prototype,"join",void 0),d([f({type:fq,json:{write:!0,default:"butt"}})],si.prototype,"cap",void 0),d([f({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],si.prototype,"width",void 0),d([$e("width",["width","size","height"])],si.prototype,"readWidth",null),d([f({type:Number,json:{write:!0}})],si.prototype,"height",void 0),d([$e("height",["height","size","width"])],si.prototype,"readHeight",null),d([f({type:["center","bottom","top"],json:{write:!0,default:"center"}})],si.prototype,"anchor",void 0),d([f({type:["heading","all"],json:{write:!0,default:"all"}})],si.prototype,"profileRotation",void 0),si=Yv=d([k("esri.symbols.PathSymbol3DLayer")],si);const Kw=si;var Zv;let Xl=Zv=class extends Z{constructor(){super(...arguments),this.color=new _e([0,0,0,1]),this.size=0}clone(){const e={color:F(this.color),size:this.size};return new Zv(e)}};d([f(Ro)],Xl.prototype,"color",void 0),d([f(gn)],Xl.prototype,"size",void 0),Xl=Zv=d([k("esri.symbols.support.Symbol3DHalo")],Xl);let Mh=class extends vn(Z){constructor(e){super(e),this.color=null}};d([f(Ro)],Mh.prototype,"color",void 0),Mh=d([k("esri.symbols.support.Symbol3DTextBackground")],Mh);var kf;let mi=kf=class extends bn{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,s){const n={...s,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new kf({enabled:this.enabled,font:this.font&&F(this.font),halo:this.halo&&F(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:F(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new kf({font:e.font!=null?e.font.clone():new ry,halo:Mq(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new ls({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Mh({color:e.backgroundColor.clone()}):null})}};function Mq(e,t){return e&&t!=null&&t>0?new Xl({color:F(e),size:t}):null}d([f({type:ry,json:{write:!0}})],mi.prototype,"font",null),d([ve("font")],mi.prototype,"writeFont",null),d([f({type:Xl,json:{write:!0}})],mi.prototype,"halo",void 0),d([f({...cI,json:{default:"center",write:!0}})],mi.prototype,"horizontalAlignment",void 0),d([f({...lI,json:{default:1,write:!0}})],mi.prototype,"lineHeight",void 0),d([f({type:ls,json:{write:!0}})],mi.prototype,"material",void 0),d([f({type:Mh,json:{write:!0}})],mi.prototype,"background",void 0),d([f(gn)],mi.prototype,"size",null),d([f({type:String,json:{write:!0}})],mi.prototype,"text",void 0),d([se({Text:"text"},{readOnly:!0})],mi.prototype,"type",void 0),d([f({...uI,json:{default:"baseline",write:!0}})],mi.prototype,"verticalAlignment",void 0),mi=kf=d([k("esri.symbols.TextSymbol3DLayer")],mi);const Wc=mi;var Jv;let Fr=Jv=class extends bn{constructor(e){super(e),this.color=Xv.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new Jv({color:F(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};d([f({type:_e,nonNullable:!0,json:{type:[rt],write:(e,t,i)=>t[i]=e.toArray(_e.AlphaMode.UNLESS_OPAQUE),default:()=>Xv.clone(),defaultEquals:e=>e.toCss(!0)===Xv.toCss(!0)}})],Fr.prototype,"color",void 0),d([se({Water:"water"},{readOnly:!0})],Fr.prototype,"type",void 0),d([f({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Fr.prototype,"waterbodySize",void 0),d([f({type:Number,json:{write:!0,default:null}})],Fr.prototype,"waveDirection",void 0),d([f({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Fr.prototype,"waveStrength",void 0),Fr=Jv=d([k("esri.symbols.WaterSymbol3DLayer")],Fr);const dI=Fr,Xv=new _e([0,119,190]);var Kv;let ua=Kv=class extends Q{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new Kv({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};d([f({type:String})],ua.prototype,"name",void 0),d([f({type:String})],ua.prototype,"styleUrl",void 0),d([f({type:String})],ua.prototype,"styleName",void 0),d([f({type:xo})],ua.prototype,"portal",void 0),ua=Kv=d([k("esri.symbols.support.StyleOrigin")],ua);const Qv=ua;var eb;let $h=eb=class extends Q{constructor(){super(...arguments),this.url=""}clone(){return new eb({url:this.url})}};d([f({type:String})],$h.prototype,"url",void 0),$h=eb=d([k("esri.symbols.support.Thumbnail")],$h);const pI={icon:Aa,object:Xw,line:Cd,path:Kw,fill:Ad,extrude:eI,text:Wc,water:dI},$q=ee.ofType({base:bn,key:"type",typeMap:pI,errorContext:"symbol-layer"});let qs=class extends ti{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=t?.type,s=i||ee;this._set("symbolLayers",new s)}get color(){return null}set color(e){this.constructed&&B.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){vo(e,this._get("symbolLayers"))}readStyleOrigin(e,t,i){if(e.styleUrl&&e.name){const s=bd(e.styleUrl,i);return new Qv({styleUrl:s,name:e.name})}if(e.styleName&&e.name)return new Qv({portal:i?.portal||xo.getDefault(),styleName:e.styleName,name:e.name});i?.messages&&i.messages.push(new cr("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:e}))}writeStyleOrigin(e,t,i,s){if(e.styleUrl&&e.name){let n=Pg(e.styleUrl,s);Ri(n)&&(n=rr(n)),t.styleOrigin={styleUrl:n,name:e.name}}else e.styleName&&e.name&&(e.portal&&s?.portal&&!x6(e.portal.restUrl,s.portal.restUrl)?s?.messages&&s.messages.push(new cr("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof bn||e&&pI[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};d([f({json:{read:!1,write:!1}})],qs.prototype,"color",null),d([f({type:$q,nonNullable:!0,json:{write:!0}}),Mt(OP)],qs.prototype,"symbolLayers",null),d([f({type:Qv})],qs.prototype,"styleOrigin",void 0),d([$e("styleOrigin")],qs.prototype,"readStyleOrigin",null),d([ve("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],qs.prototype,"writeStyleOrigin",null),d([f({type:$h,json:{read:!1}})],qs.prototype,"thumbnail",void 0),d([f({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],qs.prototype,"type",void 0),qs=d([k("esri.symbols.Symbol3D")],qs);const Id=qs;let Uu=class extends Z{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};d([f({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Uu.prototype,"type",void 0),d([f({readOnly:!0})],Uu.prototype,"visible",void 0),Uu=d([k("esri.symbols.callouts.Callout3D")],Uu);const fI=Uu;var tb;let Pf=tb=class extends Z{constructor(e){super(e),this.color=new _e("white")}clone(){return new tb({color:F(this.color)})}};d([f(Ro)],Pf.prototype,"color",void 0),Pf=tb=d([k("esri.symbols.callouts.LineCallout3DBorder")],Pf);const Tq=Pf;var ib;let jr=ib=class extends fI{constructor(e){super(e),this.type="line",this.color=new _e([0,0,0,1]),this.size=So(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new ib({color:F(this.color),size:this.size,border:F(this.border)})}};d([se({line:"line"})],jr.prototype,"type",void 0),d([f(Ro)],jr.prototype,"color",void 0),d([f(gn)],jr.prototype,"size",void 0),d([f({type:Tq,json:{write:!0}})],jr.prototype,"border",void 0),d([f({readOnly:!0})],jr.prototype,"visible",null),jr=ib=d([k("esri.symbols.callouts.LineCallout3D")],jr);const mI=jr;function Qw(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function gI(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!Qw(e)}const yI={types:{key:"type",base:fI,typeMap:{line:mI}},json:{write:!0}};var sb;let Rl=sb=class extends Z{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new sb({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};d([f(gn)],Rl.prototype,"screenLength",void 0),d([f({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Rl.prototype,"minWorldLength",void 0),d([f({type:Number,json:{write:!0}})],Rl.prototype,"maxWorldLength",void 0),Rl=sb=d([k("esri.symbols.support.Symbol3DVerticalOffset")],Rl);const e2=Rl;var Of;const vI=ee.ofType({base:null,key:"type",typeMap:{text:Wc}});let zr=Of=class extends Id{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new vI,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return gI(this)}hasVisibleVerticalOffset(){return Qw(this)}clone(){return new Of({styleOrigin:F(this.styleOrigin),symbolLayers:F(this.symbolLayers),thumbnail:F(this.thumbnail),callout:F(this.callout),verticalOffset:F(this.verticalOffset)})}static fromTextSymbol(e){return new Of({symbolLayers:new ee([Wc.fromTextSymbol(e)])})}};d([f({type:e2,json:{write:!0}})],zr.prototype,"verticalOffset",void 0),d([f(yI)],zr.prototype,"callout",void 0),d([f({json:{read:!1,write:!1}})],zr.prototype,"styleOrigin",void 0),d([f({type:vI})],zr.prototype,"symbolLayers",void 0),d([se({LabelSymbol3D:"label-3d"},{readOnly:!0})],zr.prototype,"type",void 0),zr=Of=d([k("esri.symbols.LabelSymbol3D")],zr);const t2=zr;var Ef;const bI=ee.ofType({base:null,key:"type",typeMap:{line:Cd,path:Kw}}),kq=ee.ofType({base:null,key:"type",typeMap:{line:Cd,path:Kw}});let Wu=Ef=class extends Id{constructor(e){super(e),this.symbolLayers=new bI,this.type="line-3d"}clone(){return new Ef({styleOrigin:F(this.styleOrigin),symbolLayers:F(this.symbolLayers),thumbnail:F(this.thumbnail)})}static fromSimpleLineSymbol(e){return new Ef({symbolLayers:new ee([Cd.fromSimpleLineSymbol(e)])})}};d([f({type:bI,json:{type:kq}})],Wu.prototype,"symbolLayers",void 0),d([se({LineSymbol3D:"line-3d"},{readOnly:!0})],Wu.prototype,"type",void 0),Wu=Ef=d([k("esri.symbols.LineSymbol3D")],Wu);const oy=Wu;let Vr=class extends ti{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};d([f({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Vr.prototype,"angle",void 0),d([f({type:["simple-marker","picture-marker"],readOnly:!0})],Vr.prototype,"type",void 0),d([f({type:Number,cast:Qe,json:{write:!0}})],Vr.prototype,"xoffset",void 0),d([f({type:Number,cast:Qe,json:{write:!0}})],Vr.prototype,"yoffset",void 0),d([f({type:Number,cast:e=>e==="auto"?e:Qe(e),json:{write:!0}})],Vr.prototype,"size",void 0),Vr=d([k("esri.symbols.MarkerSymbol")],Vr);const _I=Vr;var Af;const wI=ee.ofType({base:null,key:"type",typeMap:{fill:Ad}});let Bu=Af=class extends Id{constructor(e){super(e),this.symbolLayers=new wI,this.type="mesh-3d"}clone(){return new Af({styleOrigin:F(this.styleOrigin),symbolLayers:F(this.symbolLayers),thumbnail:F(this.thumbnail)})}static fromSimpleFillSymbol(e){return new Af({symbolLayers:new ee([Ad.fromSimpleFillSymbol(e)])})}};d([f({type:wI})],Bu.prototype,"symbolLayers",void 0),d([se({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Bu.prototype,"type",void 0),Bu=Af=d([k("esri.symbols.MeshSymbol3D")],Bu);const i2=Bu;function Pq(e,t,i){return t.imageData?yP({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):xI(t.url,i)}function xI(e,t){if(!Ri(e)){const i=Eq(t);if(i)return xg(i,"images",e)}return bd(e,t)}function Oq(e,t,i,s){if(nl(e)){const n=jh(e);if(!n)return;t.contentType=n.mediaType,t.imageData=n.data,i&&i.imageData===t.imageData&&i.url&&_c(i.url,t,"url",s)}else _c(e,t,"url",s)}const SI={json:{read:{source:["imageData","url"],reader:Pq},write:{writer(e,t,i,s){Oq(e,t,this.source,s)}}}},MI={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const s={};return t.imageData&&(s.imageData=t.imageData),t.contentType&&(s.contentType=t.contentType),t.url&&(s.url=xI(t.url,i)),s}}}};function Eq(e){if(!e)return null;const{origin:t,layer:i}=e;if(t!=="service"&&t!=="portal-item")return null;const s=i?.type;return s==="feature"||s==="stream"?i.parsedUrl?.path:s==="map-image"||s==="tile"?e.url?.path:null}var nb;let Ji=nb=class extends iI{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,s){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),i!=null&&(n.width=Qe(i)),s!=null&&(n.height=Qe(s)),n}clone(){const e=new nb({color:F(this.color),height:this.height,outline:F(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",F(this.source)),e}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};d([se({esriPFS:"picture-fill"},{readOnly:!0})],Ji.prototype,"type",void 0),d([f(SI)],Ji.prototype,"url",void 0),d([f({type:Number,json:{write:!0}})],Ji.prototype,"xscale",void 0),d([f({type:Number,json:{write:!0}})],Ji.prototype,"yscale",void 0),d([f({type:Number,cast:Qe,json:{write:!0}})],Ji.prototype,"width",void 0),d([f({type:Number,cast:Qe,json:{write:!0}})],Ji.prototype,"height",void 0),d([f({type:Number,cast:Qe,json:{write:!0}})],Ji.prototype,"xoffset",void 0),d([f({type:Number,cast:Qe,json:{write:!0}})],Ji.prototype,"yoffset",void 0),d([f(MI)],Ji.prototype,"source",void 0),Ji=nb=d([k("esri.symbols.PictureFillSymbol")],Ji);const s2=Ji;var rb;let bs=rb=class extends _I{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t!=null&&(s.width=Qe(t)),i!=null&&(s.height=Qe(i)),s}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new rb({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",F(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};d([f({json:{write:!1}})],bs.prototype,"color",void 0),d([se({esriPMS:"picture-marker"},{readOnly:!0})],bs.prototype,"type",void 0),d([f(SI)],bs.prototype,"url",void 0),d([f(MI)],bs.prototype,"source",void 0),d([f({type:Number,cast:Qe,json:{write:!0}})],bs.prototype,"height",void 0),d([$e("height",["height","size"])],bs.prototype,"readHeight",null),d([f({type:Number,cast:Qe,json:{write:!0}})],bs.prototype,"width",void 0),d([f({json:{write:!1}})],bs.prototype,"size",void 0),bs=rb=d([k("esri.symbols.PictureMarkerSymbol")],bs);const ay=bs;var ha;const $I=ee.ofType({base:null,key:"type",typeMap:{icon:Aa,object:Xw,text:Wc}});let da=ha=class extends Id{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new $I,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return gI(this)}hasVisibleVerticalOffset(){return Qw(this)}clone(){return new ha({verticalOffset:F(this.verticalOffset),callout:F(this.callout),styleOrigin:F(this.styleOrigin),symbolLayers:F(this.symbolLayers),thumbnail:F(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new ha({symbolLayers:new ee([Aa.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new ha({symbolLayers:new ee([Aa.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){if(e.data?.symbol?.type!=="CIMPointSymbol")return null;const i=e.data.symbol;return new ha(i?.callout?{symbolLayers:new ee([Aa.fromCIMSymbol(e)]),callout:new mI({size:.5,color:new _e([0,0,0])}),verticalOffset:new e2({screenLength:40})}:{symbolLayers:new ee([Aa.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new ha({symbolLayers:new ee([Wc.fromTextSymbol(e)])})}};d([f({type:e2,json:{write:!0}})],da.prototype,"verticalOffset",void 0),d([f(yI)],da.prototype,"callout",void 0),d([f({type:$I,json:{origins:{"web-scene":{write:!0}}}})],da.prototype,"symbolLayers",void 0),d([se({PointSymbol3D:"point-3d"},{readOnly:!0})],da.prototype,"type",void 0),da=ha=d([k("esri.symbols.PointSymbol3D")],da);const ly=da;var Hu;const TI=ee.ofType({base:null,key:"type",typeMap:{extrude:eI,fill:Ad,icon:Aa,line:Cd,object:Xw,text:Wc,water:dI}});let Gu=Hu=class extends Id{constructor(e){super(e),this.symbolLayers=new TI,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&Ba(B.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&Ba(B.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(Ka(()=>this.symbolLayers,"after-add",({item:t})=>e(t),Qa))}clone(){return new Hu({styleOrigin:F(this.styleOrigin),symbolLayers:F(this.symbolLayers),thumbnail:F(this.thumbnail)})}static fromJSON(e){const t=new Hu;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const i=t.symbolLayers.at(0),s=t.symbolLayers.at(1);!s.enabled||e.symbolLayers?.[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:s.size,color:s.material!=null?s.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Hu({symbolLayers:new ee([Ad.fromSimpleFillSymbol(e)])})}};d([f({type:TI,json:{write:!0}})],Gu.prototype,"symbolLayers",void 0),d([se({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Gu.prototype,"type",void 0),Gu=Hu=d([k("esri.symbols.PolygonSymbol3D")],Gu);const cy=Gu;var ob;const u0=new Ft({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let pa=ob=class extends iI{constructor(...e){super(...e),this.color=new _e([0,0,0,.25]),this.outline=new ul,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t&&(s.outline=t),i&&(s.color=i),s}clone(){return new ob({color:F(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};d([f()],pa.prototype,"color",void 0),d([f()],pa.prototype,"outline",void 0),d([se({esriSFS:"simple-fill"},{readOnly:!0})],pa.prototype,"type",void 0),d([f({type:u0.apiValues,json:{read:u0.read,write:u0.write}})],pa.prototype,"style",void 0),pa=ob=d([k("esri.symbols.SimpleFillSymbol")],pa);const n2=pa;var ab;const h0=new Ft({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Ys=ab=class extends _I{constructor(...e){super(...e),this.color=new _e([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new ul}normalizeCtorArgs(e,t,i,s){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t!=null&&(n.size=Qe(t)),i&&(n.outline=i),s&&(n.color=s),n}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new ab({angle:this.angle,color:F(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};d([f()],Ys.prototype,"color",void 0),d([ve("color")],Ys.prototype,"writeColor",null),d([se({esriSMS:"simple-marker"},{readOnly:!0})],Ys.prototype,"type",void 0),d([f()],Ys.prototype,"size",void 0),d([f({type:h0.apiValues,json:{read:h0.read,write:h0.write}})],Ys.prototype,"style",void 0),d([f({type:String,json:{write:!0}})],Ys.prototype,"path",null),d([f({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ul}},json:{default:null,write:!0}})],Ys.prototype,"outline",void 0),Ys=ab=d([k("esri.symbols.SimpleMarkerSymbol")],Ys);const uy=Ys;var lb;let We=lb=class extends ti{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new ry,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const s={};return e&&(s.text=e),t&&(s.font=t),i&&(s.color=i),s}writeLineWidth(e,t,i,s){s&&typeof s!="string"?s.origin:t[i]=e}castLineWidth(e){return Qe(e)}writeLineHeight(e,t,i,s){s&&typeof s!="string"?s.origin:t[i]=e}clone(){return new lb({angle:this.angle,backgroundColor:F(this.backgroundColor),borderLineColor:F(this.borderLineColor),borderLineSize:this.borderLineSize,color:F(this.color),font:this.font&&this.font.clone(),haloColor:F(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};d([f({type:_e,json:{write:!0}})],We.prototype,"backgroundColor",void 0),d([f({type:_e,json:{write:!0}})],We.prototype,"borderLineColor",void 0),d([f({type:Number,json:{write:!0},cast:Qe})],We.prototype,"borderLineSize",void 0),d([f({type:ry,json:{write:!0}})],We.prototype,"font",void 0),d([f({...cI,json:{write:!0}})],We.prototype,"horizontalAlignment",void 0),d([f({type:Boolean,json:{write:!0}})],We.prototype,"kerning",void 0),d([f({type:_e,json:{write:!0}})],We.prototype,"haloColor",void 0),d([f({type:Number,cast:Qe,json:{write:!0}})],We.prototype,"haloSize",void 0),d([f({type:Boolean,json:{write:!0}})],We.prototype,"rightToLeft",void 0),d([f({type:Boolean,json:{write:!0}})],We.prototype,"rotated",void 0),d([f({type:String,json:{write:!0}})],We.prototype,"text",void 0),d([se({esriTS:"text"},{readOnly:!0})],We.prototype,"type",void 0),d([f({...uI,json:{write:!0}})],We.prototype,"verticalAlignment",void 0),d([f({type:Number,cast:Qe,json:{write:!0}})],We.prototype,"xoffset",void 0),d([f({type:Number,cast:Qe,json:{write:!0}})],We.prototype,"yoffset",void 0),d([f({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],We.prototype,"angle",void 0),d([f({type:Number,json:{write:!0}})],We.prototype,"width",void 0),d([f({type:Number})],We.prototype,"lineWidth",void 0),d([ve("lineWidth")],We.prototype,"writeLineWidth",null),d([Mt("lineWidth")],We.prototype,"castLineWidth",null),d([f(lI)],We.prototype,"lineHeight",void 0),d([ve("lineHeight")],We.prototype,"writeLineHeight",null),We=lb=d([k("esri.symbols.TextSymbol")],We);const hy=We;var cb;let _s=cb=class extends ti{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:xo.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?.portal,super.read(e,t)}clone(){return new cb({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=t!=null?t.cache:null,s=i?this._fetchCacheKey:null;if(i!=null){const a=s&&i.get(s);if(a)return a.clone()}const{resolveWebStyleSymbol:n}=await W(()=>import("./webStyleSymbolUtils.4925a002.js"),["assets/webStyleSymbolUtils.4925a002.js","assets/devEnvironmentUtils.307ef2af.js","assets/jsonUtils.185b82ae.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/styleUtils.7f2b22b0.js"]);pt(t);const r=n(this,{portal:this.portal},e,t);r.catch(a=>{B.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await r;return e==="webRef"&&o.type==="point-3d"||e==="cimRef"&&o.type==="cim"?(i?.set(s,o.clone()),o):null}};d([f({json:{write:!1}})],_s.prototype,"color",void 0),d([f({type:String,json:{write:!0}})],_s.prototype,"styleName",void 0),d([f({type:xo,json:{write:!1}})],_s.prototype,"portal",void 0),d([f({type:String,json:{read:Z_,write:_c}})],_s.prototype,"styleUrl",void 0),d([f({type:$h,json:{read:!1}})],_s.prototype,"thumbnail",void 0),d([f({type:String,json:{write:!0}})],_s.prototype,"name",void 0),d([se({styleSymbolReference:"web-style"},{readOnly:!0})],_s.prototype,"type",void 0),d([f()],_s.prototype,"_fetchCacheKey",null),_s=cb=d([k("esri.symbols.WebStyleSymbol")],_s);const dy=_s;function Hhe(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Ghe(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const r2={base:ti,key:"type",typeMap:{"simple-fill":n2,"picture-fill":s2,"picture-marker":ay,"simple-line":ul,"simple-marker":uy,text:hy,"label-3d":t2,"line-3d":oy,"mesh-3d":i2,"point-3d":ly,"polygon-3d":cy,"web-style":dy,cim:cl},errorContext:"symbol"},qhe={base:ti,key:"type",typeMap:{"picture-marker":ay,"simple-marker":uy,"point-3d":ly,cim:cl},errorContext:"symbol"},Yhe={base:ti,key:"type",typeMap:{"simple-line":ul,"line-3d":oy,cim:cl},errorContext:"symbol"},Zhe={base:ti,key:"type",typeMap:{"simple-fill":n2,"picture-fill":s2,"polygon-3d":cy,cim:cl},errorContext:"symbol"},Jhe={base:ti,key:"type",typeMap:{"picture-marker":ay,"simple-marker":uy,text:hy,"web-style":dy,cim:cl},errorContext:"symbol"},Xhe=v_({types:r2}),Khe={base:ti,key:"type",typeMap:{"simple-fill":n2,"picture-fill":s2,"picture-marker":ay,"simple-line":ul,"simple-marker":uy,text:hy,"line-3d":oy,"mesh-3d":i2,"point-3d":ly,"polygon-3d":cy,"web-style":dy,cim:cl},errorContext:"symbol"},Qhe={base:ti,key:"type",typeMap:{text:hy,"label-3d":t2},errorContext:"symbol"},ede={base:ti,key:"type",typeMap:{"line-3d":oy,"mesh-3d":i2,"point-3d":ly,"polygon-3d":cy,"web-style":dy,cim:cl},errorContext:"symbol"},tde={base:ti,key:"type",typeMap:{"label-3d":t2},errorContext:"symbol"},ide=ar(r2);var ub;function Aq(e){if(!e)return null;const t={};for(const i in e){const s=Pc(e[i]);s&&(t[i]=s)}return Object.keys(t).length!==0?t:null}function Cq(e){if(e==null)return null;const t={};for(const i in e){const s=e[i];s&&(t[i]=s.toJSON())}return Object.keys(t).length!==0?t:null}let ni=ub=class extends vn(Z){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:hh(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&KN(B.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),e?.type!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new ub({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[t,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(e&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:Cq(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:p1(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if(t?.type==="mesh"){const i={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",i,i,e.action)}}_notifyLayer(e,t,i,s){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:i};e==="origin-transform"&&(n.action=s),e==="attributes"&&(n.attributeName=s),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([hr(()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),hr(()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const e=this.geometry;e?.type==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};d([f({value:null,json:{read:Aq}})],ni.prototype,"aggregateGeometries",null),d([f({value:null})],ni.prototype,"attributes",null),d([f({value:null,types:Qg,json:{read:Pc}})],ni.prototype,"geometry",null),d([f({type:Boolean})],ni.prototype,"isAggregate",void 0),d([f({clonable:"reference"})],ni.prototype,"layer",void 0),d([f({clonable:"reference"})],ni.prototype,"origin",void 0),d([f({type:HG})],ni.prototype,"popupTemplate",void 0),d([f({clonable:"reference"})],ni.prototype,"sourceLayer",void 0),d([f({value:null,types:r2})],ni.prototype,"symbol",null),d([f({type:Boolean,value:!0})],ni.prototype,"visible",null),ni=ub=d([k("esri.Graphic")],ni),function(e){e.generateUID=hh}(ni||(ni={}));const Yh=ni;let ja=class extends _h{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};d([kP({Type:Yh,ensureType:ui(Yh)})],ja.prototype,"itemType",void 0),ja=d([k("esri.support.GraphicsCollection")],ja);var hb;let qu=hb=class extends Z{constructor(e){super(e)}async collectRequiredFields(e,t){return To(e,t,this.expression)}clone(){return new hb({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};d([f({type:String,json:{write:!0}})],qu.prototype,"expression",void 0),d([f({type:String,json:{write:!0}})],qu.prototype,"title",void 0),qu=hb=d([k("esri.symbols.support.FeatureExpressionInfo")],qu);const r$=qu,kI={unknown:1,inches:Wi(1,"meters","inches"),feet:Wi(1,"meters","feet"),"us-feet":Wi(1,"meters","us-feet"),yards:Wi(1,"meters","yards"),miles:Wi(1,"meters","miles"),"nautical-miles":Wi(1,"meters","nautical-miles"),millimeters:Wi(1,"meters","millimeters"),centimeters:Wi(1,"meters","centimeters"),decimeters:Wi(1,"meters","decimeters"),meters:Wi(1,"meters","meters"),kilometers:Wi(1,"meters","kilometers"),"decimal-degrees":1/LF(1,"meters",at.radius)};function sde(e){return 1/(kI[e]||1)}function Iq(){const e=Object.keys(kI);return e.sort(),e}const Lq=Iq();var db;const vp=di()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),o$=new Ft({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Nn=db=class extends Z{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,i,s){t[i]=e.write({},s),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new db({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&e4(this.featureExpressionInfo,e.featureExpressionInfo)}};d([f({type:r$,json:{write:!0}})],Nn.prototype,"featureExpressionInfo",void 0),d([$e("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Nn.prototype,"readFeatureExpressionInfo",null),d([ve("featureExpressionInfo",{featureExpressionInfo:{type:r$},"featureExpression.value":{type:[0]}})],Nn.prototype,"writeFeatureExpressionInfo",null),d([f({type:vp.apiValues,nonNullable:!0,json:{type:vp.jsonValues,read:vp.read,write:{writer:vp.write,isRequired:!0}}})],Nn.prototype,"mode",null),d([f({type:Number,json:{write:!0}})],Nn.prototype,"offset",void 0),d([f({type:Lq,json:{type:String,read:o$.read,write:o$.write}})],Nn.prototype,"unit",null),Nn=db=d([k("esri.symbols.support.ElevationInfo")],Nn);const Rq=Nn;let Fn=class extends RH(DH(PC)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new ja,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};d([f({type:Rq})],Fn.prototype,"elevationInfo",void 0),d([f(nv(ja,"graphics"))],Fn.prototype,"graphics",void 0),d([f({type:["show","hide"]})],Fn.prototype,"listMode",void 0),d([f()],Fn.prototype,"screenSizePerspectiveEnabled",void 0),d([f({readOnly:!0})],Fn.prototype,"type",void 0),d([f({constructOnly:!0})],Fn.prototype,"internal",void 0),Fn=d([k("esri.layers.GraphicsLayer")],Fn);const PI=Fn;function nde(e){}function Dq(e){return()=>e}var pb;let Cf=pb=class extends Z{constructor(e){super(e),this.type="none"}clone(){return new pb({type:this.type})}};d([se({none:"none",stayAbove:"stay-above"})],Cf.prototype,"type",void 0),Cf=pb=d([k("esri.ground.NavigationConstraint")],Cf);var fb;let jn=fb=class extends gd(bo){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new ee;const t=s=>{s.parent&&s.parent!==this&&"remove"in s.parent&&s.parent.remove(s),s.parent=this,s.type!=="elevation"&&s.type!=="base-elevation"&&B.getLogger(this).error(`Layer '${s.title}, id:${s.id}' of type '${s.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=s=>{s.parent=null};this.addHandles([this.layers.on("after-add",s=>t(s.item)),this.layers.on("after-remove",s=>i(s.item))])}initialize(){this.when().catch(e=>{us(e)||B.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)Ke(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",vo(e,this._get("layers")))}writeLayers(e,t,i,s){const n=[];e&&(s={...s,layerContainerType:"ground"},e.forEach(r=>{if("write"in r){const o={};Dq(r)().write(o,s)&&n.push(o)}else s?.messages&&s.messages.push(new V("layer:unsupported",`Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted in the ground`,{layer:r}))})),t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return CP(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t?.signal});const{ElevationQuery:i}=await W(()=>import("./ElevationQuery.e3b0f9e1.js"),[]);pt(t);const s=new i,n=this.layers.filter(a$).toArray();return s.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:t?.signal});const{ElevationQuery:i}=await W(()=>import("./ElevationQuery.e3b0f9e1.js"),[]);pt(t);const s=new i,n=this.layers.filter(a$).toArray();return s.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:F(this.surfaceColor),navigationConstraint:F(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new fb({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,i){const s=t?.origin||"web-scene",n=t?.portal||null,r=t?.url||null,{populateOperationalLayers:o}=await W(()=>import("./layersCreator.44f6b1c8.js"),["assets/layersCreator.44f6b1c8.js","assets/portalLayers.6c8950b8.js","assets/associatedFeatureServiceUtils.f808dfcb.js","assets/fetchService.e99559bf.js","assets/portalItemUtils.761d02ba.js","assets/styleUtils.f0558e3a.js"]);pt(i);const a=[];if(e.layers&&Array.isArray(e.layers)){const l={context:{origin:s,url:r,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,l))}await Promise.allSettled(a)}};function Nq(e){return e&&"createElevationSampler"in e}function a$(e){return e.type==="elevation"||Nq(e)}d([f({json:{read:!1}})],jn.prototype,"layers",null),d([ve("layers")],jn.prototype,"writeLayers",null),d([f({readOnly:!0})],jn.prototype,"resourceInfo",void 0),d([f({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:rt,read:{reader:KC,source:"transparency"},write:{writer:(e,t)=>{t.transparency=XC(e)},target:"transparency"}}})],jn.prototype,"opacity",void 0),d([f({type:_e,json:{type:[rt],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],jn.prototype,"surfaceColor",void 0),d([f({type:Cf,json:{write:!0}})],jn.prototype,"navigationConstraint",void 0),jn=fb=d([k("esri.Ground")],jn);const Bm=jn;let Dl=class extends ee{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(R4(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let t=0;for(const i of e)i!=null&&(t=this._processCollection(t,i));this.splice(t,this.length)}_createNewInstance(e){return new ee(e)}_processCollection(e,t){if(!t)return e;const i=this.itemFilterFunction??(s=>!!s);for(const s of t)if(s){if(i(s)){const n=this.indexOf(s,e);n>=0?n!==e&&this.reorder(s,e):this.add(s,e),++e}if(this.getChildrenFunction){const n=this.getChildrenFunction(s);if(Array.isArray(n))for(const r of n)e=this._processCollection(e,r);else e=this._processCollection(e,n)}}return e}};d([f()],Dl.prototype,"getCollections",void 0),d([f()],Dl.prototype,"getChildrenFunction",void 0),d([f()],Dl.prototype,"itemFilterFunction",void 0),Dl=d([k("esri.core.CollectionFlattener")],Dl);const Zh=Dl,bp=new WeakMap;function OI(e){return!e.destroyed&&(bp.has(e)||e.addHandles([le(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||OI(t))},t=>bp.set(e,t),es),Ee(()=>bp.delete(e))]),bp.get(e))}function Fq(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function jq(e){return!(!Fq(e)||!E8(e)?.operations?.supportsEditing||"editingEnabled"in e&&!C8(e)||OI(e))}function zq(e){return new Zh({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return!!i&&"tables"in i&&i.tables.includes(t)}})}function d0(e){for(const t of e.values())t?.destroy();e.clear()}const l$={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function Vq(e){let t=null;if(typeof e=="string")if(e in l$){const i=l$[e];t=new Bm({resourceInfo:{data:{layers:[i]}}})}else B.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=ui(Bm,e);return t}function mb(e,t,i){let s,n;if(e)for(let r=0,o=e.length;r<o;r++){if(s=e.at(r),s?.[t]===i)return s;if(s?.type==="group"&&(n=mb(s.layers,t,i),n))return n}}const Uq=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new ee;const s=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||B.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},r=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void B.getLogger(this).error("#add()","Cannot add layer to itself.");s(o.item)}),this.layers.on("after-add",o=>n(o.item)),this.layers.on("after-remove",o=>r(o.item))])}destroy(){const i=this.layers.toArray();for(const s of i)s.destroy();this.layers.destroy()}set layers(i){this._set("layers",vo(i,this._get("layers")))}add(i,s){const n=this.layers;if(s=n.getNextIndex(s),i instanceof PC){const r=i;r.parent===this?this.reorder(r,s):n.add(r,s)}else Oo(i)?i.then(r=>{this.destroyed||this.add(r,s)}):B.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,s){const n=this.layers;let r=n.getNextIndex(s);i.slice().forEach(o=>{o.parent!==this?(n.add(o,r),r+=1):this.reorder(o,r)})}findLayerById(i){return mb(this.layers,"id",i)}findLayerByUid(i){return mb(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,s){return this.layers.reorder(i,s)}layerAdded(i){}layerRemoved(i){}};return d([f()],t.prototype,"layers",null),t=d([k("esri.support.LayersMixin")],t),t};function gb(e,t,i){if(e)for(let s=0,n=e.length;s<n;s++){const r=e.at(s);if(r[t]===i)return r;if(r?.type==="group"){const o=gb(r.tables,t,i);if(o)return o}}}const Wq=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new ee,this.addHandles([this.tables.on("after-add",s=>{const n=s.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&B.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",s=>{s.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const s of i)s.destroy();this.tables.destroy()}set tables(i){this._set("tables",vo(i,this._get("tables")))}findTableById(i){return gb(this.tables,"id",i)}findTableByUid(i){return gb(this.tables,"uid",i)}};return d([f()],t.prototype,"tables",null),t=d([k("esri.support.TablesMixin")],t),t};let ws=class extends Wq(Uq(Eo.EventedMixin(Q))){constructor(e){super(e),this.allLayers=new Zh({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=zq(this),this.basemap=null,this.editableLayers=new Zh({getCollections:()=>[this.allLayers],itemFilterFunction:jq}),this.ground=new Bm,this._basemapCache=cj()}destroy(){xO(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Ke(this.basemap),Ke(this.ground),this._set("ground",null)}castBasemap(e){return of(e,this._basemapCache)}castGround(e){return Vq(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};d([f({readOnly:!0,dependsOn:[]})],ws.prototype,"allLayers",void 0),d([f({readOnly:!0})],ws.prototype,"allTables",void 0),d([f({type:fh,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],ws.prototype,"basemap",void 0),d([Mt("basemap")],ws.prototype,"castBasemap",null),d([f({readOnly:!0})],ws.prototype,"editableLayers",void 0),d([f({type:Bm,nonNullable:!0})],ws.prototype,"ground",void 0),d([Mt("ground")],ws.prototype,"castGround",null),d([f()],ws.prototype,"undoRedo",void 0),ws=d([k("esri.Map")],ws);const EI=ws;let fa=class extends rv{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};d([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],fa.prototype,"row",void 0),d([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],fa.prototype,"column",void 0),d([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],fa.prototype,"rows",void 0),d([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],fa.prototype,"columns",void 0),fa=d([k("esri.CameraLayout")],fa);const AI=fa;class o2{constructor(t,i){this.min=t,this.max=i,this.range=i-t}normalize(t,i=0,s=!1){return c$(this.range,this.min,this.max,t,i,s)}clamp(t,i=0){return mn(t-i,this.min,this.max)+i}monotonic(t,i,s){return t<i?i:i+yb(this.range,t-i,s)}minimalMonotonic(t,i,s){return c$(this.range,t,t+this.range,i,s)}center(t,i,s){return i=this.monotonic(t,i,s),this.normalize((t+i)/2,s)}diff(t,i,s){return this.monotonic(t,i,s)-t}shortestSignedDiff(t,i){t=this.normalize(t);const s=(i=this.normalize(i))-t,n=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(s)<Math.abs(n)?s:n}contains(t,i,s){return i=this.minimalMonotonic(t,i),(s=this.minimalMonotonic(t,s))>t&&s<i}}function c$(e,t,i,s,n=0,r=!1){return(s-=n)<t?s+=yb(e,t-s):s>i&&(s-=yb(e,s-i)),r&&s===i&&(s=t),s+n}function yb(e,t,i=0){return Math.ceil((t-i)/e)*e+i}new o2(0,2*Math.PI);new o2(-Math.PI,Math.PI);const Bq=new o2(0,360);let Zs=class extends vn(Z){constructor(...e){super(...e),this.position=new ae([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new AI}normalizeCtorArgs(e,t,i,s){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const n={position:e};return t!=null&&(n.heading=t),i!=null&&(n.tilt=i),s!=null&&(n.fov=s),n}return e}writePosition(e,t,i,s){const n=e.clone();n.x=ks(e.x||0),n.y=ks(e.y||0),n.z=e.hasZ?ks(e.z||0):e.z,t[i]=n.write({},s)}readPosition(e,t){const i=new ae;return i.read(e,t),i.x=ks(i.x||0),i.y=ks(i.y||0),i.z=i.hasZ?ks(i.z||0):i.z,i}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};d([f({type:ae,json:{write:{isRequired:!0}}})],Zs.prototype,"position",void 0),d([ve("position")],Zs.prototype,"writePosition",null),d([$e("position")],Zs.prototype,"readPosition",null),d([f({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Mt(e=>Bq.normalize(ks(e)))],Zs.prototype,"heading",void 0),d([f({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Mt(e=>mn(ks(e),-180,180))],Zs.prototype,"tilt",void 0),d([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Zs.prototype,"fov",void 0),d([f({type:AI,nonNullable:!0,json:{read:!1,write:!1}})],Zs.prototype,"layout",void 0),Zs=d([k("esri.Camera")],Zs);const Hq=Zs;var vb;let Ur=vb=class extends Z{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new vb({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};d([f({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:p0}}}}})],Ur.prototype,"rotation",void 0),d([Mt("rotation")],Ur.prototype,"castRotation",null),d([f({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:p0}}}}})],Ur.prototype,"scale",void 0),d([f({types:Qg,json:{read:Pc,write:!0,origins:{"web-scene":{read:Pc,write:{overridePolicy:p0}}}}})],Ur.prototype,"targetGeometry",void 0),d([f({type:Hq,json:{write:!0}})],Ur.prototype,"camera",void 0),Ur=vb=d([k("esri.Viewpoint")],Ur);const Cs=Ur;function p0(){return{enabled:!this.camera}}class Hm{constructor(t=i=>i.values().next().value){this._peeker=t,this._observable=new yd,this._items=new Set}get length(){return X(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return X(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const i=this.length;return this._items.forEach(s=>{t(s)||this._items.delete(s)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){X(this._observable),yield*this._items}}const CI=new FinalizationRegistry(e=>{e.close()});function Gq(e,t){CI.register(e,t,t)}function qq(e){CI.unregister(e)}function II(e,t){return new Proxy({},{get:(i,s,n)=>(...r)=>{let o,a;const l=r[r.length-1];return Yq(l)&&(o=l.signal,a=l.transferList,r.pop()),e.apply(t?`${t}.${s.toString()}`:s.toString(),r,{transferList:a,signal:o})}})}function Yq(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const Zq={statsWorker:()=>W(()=>import("./statsWorker.389b4532.js"),["assets/statsWorker.389b4532.js","assets/utils.235d7b4d.js","assets/quantizationUtils.fe6b1e6e.js","assets/heatmapUtils.b763e953.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/utils.26a12d83.js","assets/utils.f2d50388.js","assets/ClassBreaksDefinition.427c0bbe.js"]),geometryEngineWorker:()=>W(()=>import("./geometryEngineWorker.ea6ae1a5.js"),["assets/geometryEngineWorker.ea6ae1a5.js","assets/geometryEngineJSON.ca151196.js","assets/geometryEngineBase.99ab4263.js","assets/json.20588c22.js"]),CSVSourceWorker:()=>W(()=>import("./CSVSourceWorker.1ceb8f83.js"),["assets/CSVSourceWorker.1ceb8f83.js","assets/date.9883f6ae.js","assets/json.20588c22.js","assets/OptimizedFeature.32c00f5f.js","assets/FeatureStore.a6527479.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/BoundsStore.ae8d78e2.js","assets/PooledRBush.0bbb795a.js","assets/timeSupport.393bd0ba.js","assets/QueryEngine.b9df2d2a.js","assets/LRUCache.6f8863ed.js","assets/WhereClause.b007a323.js","assets/TimeOnly.5d28261e.js","assets/UnknownTimeZone.4756be49.js","assets/QueryEngineCapabilities.a12653c7.js","assets/quantizationUtils.fe6b1e6e.js","assets/utils.235d7b4d.js","assets/heatmapUtils.b763e953.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/utils.26a12d83.js","assets/utils.f2d50388.js","assets/ClassBreaksDefinition.427c0bbe.js","assets/FieldsIndex.333d0734.js","assets/number.fad7db53.js","assets/clientSideDefaults.e011af70.js","assets/defaultsJSON.ba72df2f.js"]),EdgeProcessingWorker:()=>W(()=>import("./EdgeProcessingWorker.6fe364e9.js"),["assets/EdgeProcessingWorker.6fe364e9.js","assets/InterleavedLayout.1531e330.js","assets/BufferView.80717d85.js","assets/vec42.faaf2b1c.js","assets/types.d0a70996.js","assets/Util.00c6201e.js","assets/vec4f64.7b667e97.js","assets/edgeProcessing.96aa4115.js","assets/deduplicate.a7cfab22.js","assets/Indices.5bfd2621.js","assets/VertexAttribute.53a8dea2.js","assets/enums.8929356b.js","assets/VertexElementDescriptor.c76e1b24.js"]),ElevationSamplerWorker:()=>W(()=>import("./ElevationSamplerWorker.5311c8fe.js"),["assets/ElevationSamplerWorker.5311c8fe.js","assets/PooledRBush.0bbb795a.js","assets/MeshLocalVertexSpace.82c9e8da.js","assets/vertexSpaceConversion.8ec27d21.js","assets/mat3f64.4564d6a3.js","assets/mat4f64.a89cc140.js","assets/spatialReferenceEllipsoidUtils.54dfd023.js","assets/computeTranslationToOriginAndRotation.4860e3ef.js","assets/meshVertexSpaceUtils.5f97af5a.js","assets/vec3.5fc4e8fc.js","assets/projection.6ad549e2.js","assets/DoubleArray.2bb33e3e.js","assets/BufferView.80717d85.js","assets/vec42.faaf2b1c.js","assets/vec4.2d53fcda.js"]),FeatureServiceSnappingSourceWorker:()=>W(()=>import("./FeatureServiceSnappingSourceWorker.eb9ea1a6.js"),["assets/FeatureServiceSnappingSourceWorker.eb9ea1a6.js","assets/FeatureStore.a6527479.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/BoundsStore.ae8d78e2.js","assets/PooledRBush.0bbb795a.js","assets/timeSupport.393bd0ba.js","assets/json.20588c22.js","assets/QueryEngine.b9df2d2a.js","assets/LRUCache.6f8863ed.js","assets/WhereClause.b007a323.js","assets/TimeOnly.5d28261e.js","assets/UnknownTimeZone.4756be49.js","assets/QueryEngineCapabilities.a12653c7.js","assets/quantizationUtils.fe6b1e6e.js","assets/utils.235d7b4d.js","assets/heatmapUtils.b763e953.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/utils.26a12d83.js","assets/utils.f2d50388.js","assets/ClassBreaksDefinition.427c0bbe.js","assets/FieldsIndex.333d0734.js","assets/pbfQueryUtils.52d7ad7f.js","assets/pbf.72af564e.js","assets/query.702fc5fe.js","assets/queryZScale.835a340e.js","assets/ByteSizeUnit.e7dc4350.js"]),GeoJSONSourceWorker:()=>W(()=>import("./GeoJSONSourceWorker.114b07e0.js"),["assets/GeoJSONSourceWorker.114b07e0.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/FeatureStore.a6527479.js","assets/BoundsStore.ae8d78e2.js","assets/PooledRBush.0bbb795a.js","assets/timeSupport.393bd0ba.js","assets/json.20588c22.js","assets/QueryEngine.b9df2d2a.js","assets/LRUCache.6f8863ed.js","assets/WhereClause.b007a323.js","assets/TimeOnly.5d28261e.js","assets/UnknownTimeZone.4756be49.js","assets/QueryEngineCapabilities.a12653c7.js","assets/quantizationUtils.fe6b1e6e.js","assets/utils.235d7b4d.js","assets/heatmapUtils.b763e953.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/utils.26a12d83.js","assets/utils.f2d50388.js","assets/ClassBreaksDefinition.427c0bbe.js","assets/FieldsIndex.333d0734.js","assets/geojson.10d37f4c.js","assets/date.9883f6ae.js","assets/clientSideDefaults.e011af70.js","assets/defaultsJSON.ba72df2f.js","assets/sourceUtils.62033bd7.js"]),LercWorker:()=>W(()=>import("./LercWorker.6ab838f7.js"),[]),MemorySourceWorker:()=>W(()=>import("./MemorySourceWorker.9ee00545.js"),["assets/MemorySourceWorker.9ee00545.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/objectIdUtils.df266b78.js","assets/FeatureStore.a6527479.js","assets/BoundsStore.ae8d78e2.js","assets/PooledRBush.0bbb795a.js","assets/timeSupport.393bd0ba.js","assets/json.20588c22.js","assets/QueryEngine.b9df2d2a.js","assets/LRUCache.6f8863ed.js","assets/WhereClause.b007a323.js","assets/TimeOnly.5d28261e.js","assets/UnknownTimeZone.4756be49.js","assets/QueryEngineCapabilities.a12653c7.js","assets/quantizationUtils.fe6b1e6e.js","assets/utils.235d7b4d.js","assets/heatmapUtils.b763e953.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/utils.26a12d83.js","assets/utils.f2d50388.js","assets/ClassBreaksDefinition.427c0bbe.js","assets/FieldsIndex.333d0734.js","assets/clientSideDefaults.e011af70.js","assets/defaultsJSON.ba72df2f.js","assets/sourceUtils.62033bd7.js","assets/date.9883f6ae.js"]),PBFDecoderWorker:()=>W(()=>import("./PBFDecoderWorker.d8babbd4.js"),["assets/PBFDecoderWorker.d8babbd4.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/pbfQueryUtils.52d7ad7f.js","assets/pbf.72af564e.js"]),FeaturePipelineWorker:()=>W(()=>import("./FeaturePipelineWorker.e24c01e2.js"),["assets/FeaturePipelineWorker.e24c01e2.js","assets/definitions.a3a54ed1.js","assets/diffUtils.080c04bc.js","assets/AttributeStore.38266bd6.js","assets/LabelMetric.267a8b18.js","assets/enums.abef80de.js","assets/Texture.7423fe29.js","assets/enums.8929356b.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/OptimizedFeature.32c00f5f.js","assets/GeometryUtils.c6f9b045.js","assets/utils.dbb84a38.js","assets/Rect.ab45bd96.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/highlightReasons.c3e7cabb.js","assets/labelUtils.37b9d8d8.js","assets/FieldsIndex.333d0734.js","assets/UnknownTimeZone.4756be49.js","assets/TimeOnly.5d28261e.js","assets/timeSupport.393bd0ba.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/json.20588c22.js","assets/tileUtils.91e274f6.js","assets/MeshWriterRegistry.6d7fb0c7.js","assets/PieChartMeshWriter.c11791d1.js","assets/TurboLine.af583914.js","assets/earcut.dc9d94eb.js","assets/constants.344a1358.js","assets/grouping.811b1171.js","assets/QueryEngine.b9df2d2a.js","assets/LRUCache.6f8863ed.js","assets/WhereClause.b007a323.js","assets/QueryEngineCapabilities.a12653c7.js","assets/quantizationUtils.fe6b1e6e.js","assets/utils.235d7b4d.js","assets/heatmapUtils.b763e953.js","assets/utils.26a12d83.js","assets/utils.f2d50388.js","assets/ClassBreaksDefinition.427c0bbe.js","assets/query.702fc5fe.js","assets/pbfQueryUtils.52d7ad7f.js","assets/pbf.72af564e.js","assets/queryZScale.835a340e.js","assets/ogcFeatureUtils.01021563.js","assets/geojson.10d37f4c.js","assets/date.9883f6ae.js","assets/clientSideDefaults.e011af70.js","assets/sourceUtils.62033bd7.js","assets/CircularArray.0c40a6a8.js","assets/createConnection.edb926a0.js"]),PointCloudWorker:()=>W(()=>import("./PointCloudWorker.f0358f99.js"),["assets/PointCloudWorker.f0358f99.js","assets/quat.2c7c64ba.js","assets/mat3f64.4564d6a3.js","assets/quatf64.bcd5b590.js","assets/vec42.faaf2b1c.js","assets/vec3f32.788be850.js","assets/PointCloudUniqueValueRenderer.4d9cb7a0.js","assets/ColorStop.aa8650af.js","assets/I3SBinaryReader.79100f56.js","assets/VertexAttribute.53a8dea2.js","assets/orientedBoundingBox.ee8aaba9.js","assets/mat4f64.a89cc140.js","assets/vec4f64.7b667e97.js","assets/spatialReferenceEllipsoidUtils.54dfd023.js","assets/computeTranslationToOriginAndRotation.4860e3ef.js","assets/plane.23059d6d.js"]),RasterWorker:()=>W(()=>import("./RasterWorker.cdfc00f0.js"),["assets/RasterWorker.cdfc00f0.js","assets/dataUtils.a1eaa611.js","assets/RasterSymbolizer.f97d5f6c.js","assets/colorUtils.085072a2.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/PolynomialTransform.ec68af67.js","assets/colorRamps.272b71a1.js","assets/rasterProjectionHelper.dd8d9a43.js"]),SceneLayerSnappingSourceWorker:()=>W(()=>import("./SceneLayerSnappingSourceWorker.653351ce.js"),["assets/SceneLayerSnappingSourceWorker.653351ce.js","assets/lineSegment.e18ce047.js","assets/sphere.701721ad.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/plane.23059d6d.js","assets/mat3f64.4564d6a3.js","assets/mat4f64.a89cc140.js","assets/quatf64.bcd5b590.js","assets/Util.00c6201e.js","assets/edgeProcessing.96aa4115.js","assets/deduplicate.a7cfab22.js","assets/Indices.5bfd2621.js","assets/InterleavedLayout.1531e330.js","assets/BufferView.80717d85.js","assets/types.d0a70996.js","assets/VertexAttribute.53a8dea2.js","assets/enums.8929356b.js","assets/VertexElementDescriptor.c76e1b24.js"]),SceneLayerWorker:()=>W(()=>import("./SceneLayerWorker.54fc32b3.js"),["assets/SceneLayerWorker.54fc32b3.js","assets/DoubleArray.2bb33e3e.js","assets/MeshLocalVertexSpace.82c9e8da.js","assets/vec3.5fc4e8fc.js","assets/vec4f64.7b667e97.js","assets/sphere.701721ad.js","assets/vec42.faaf2b1c.js","assets/plane.23059d6d.js","assets/mat3f64.4564d6a3.js","assets/mat4f64.a89cc140.js","assets/quatf64.bcd5b590.js","assets/I3SUtil.ba9513ba.js","assets/spatialReferenceEllipsoidUtils.54dfd023.js","assets/I3SBinaryReader.79100f56.js","assets/VertexAttribute.53a8dea2.js","assets/floatRGBA.133c49be.js","assets/NormalAttribute.glsl.519bff8e.js","assets/interfaces.98cd2ad6.js","assets/BindType.597c7f67.js","assets/orientedBoundingBox.ee8aaba9.js","assets/quat.2c7c64ba.js","assets/computeTranslationToOriginAndRotation.4860e3ef.js"]),WFSSourceWorker:()=>W(()=>import("./WFSSourceWorker.3f6ec838.js"),["assets/WFSSourceWorker.3f6ec838.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/FeatureStore.a6527479.js","assets/BoundsStore.ae8d78e2.js","assets/PooledRBush.0bbb795a.js","assets/timeSupport.393bd0ba.js","assets/json.20588c22.js","assets/QueryEngine.b9df2d2a.js","assets/LRUCache.6f8863ed.js","assets/WhereClause.b007a323.js","assets/TimeOnly.5d28261e.js","assets/UnknownTimeZone.4756be49.js","assets/QueryEngineCapabilities.a12653c7.js","assets/quantizationUtils.fe6b1e6e.js","assets/utils.235d7b4d.js","assets/heatmapUtils.b763e953.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/utils.26a12d83.js","assets/utils.f2d50388.js","assets/ClassBreaksDefinition.427c0bbe.js","assets/FieldsIndex.333d0734.js","assets/geojson.10d37f4c.js","assets/date.9883f6ae.js","assets/sourceUtils.62033bd7.js","assets/wfsUtils.4653566f.js","assets/xmlUtils.41bbbcaa.js"]),WorkerTileHandler:()=>W(()=>import("./WorkerTileHandler.3e1c6ca5.js"),["assets/WorkerTileHandler.3e1c6ca5.js","assets/enums.7f54e43a.js","assets/GeometryUtils.c6f9b045.js","assets/Rect.ab45bd96.js","assets/config.8224a140.js","assets/StyleDefinition.e031dcf6.js","assets/enums.abef80de.js","assets/pbf.72af564e.js","assets/TurboLine.af583914.js","assets/definitions.a3a54ed1.js","assets/SourceLayerData.39b55c8a.js","assets/StyleRepository.baadede2.js","assets/enums.8929356b.js","assets/VertexElementDescriptor.c76e1b24.js","assets/colorUtils.085072a2.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/earcut.dc9d94eb.js","assets/BidiEngine.5f10619c.js"]),Lyr3DWorker:()=>W(()=>import("./Lyr3DWorker.8f1e04f5.js"),[])},LI="worker:port-closed";var Rt;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(Rt||(Rt={}));let Jq=0;function RI(){return Jq++}function Xq(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function Jh(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function a2(e,t,i,s){if(t.type===Rt.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==Rt.INVOKE&&t.type!==Rt.RESPONSE)return void e.postMessage(t);let n;if(Xq(i)?(n=u$(i.transferList),t.data=i.result):(n=u$(s),t.data=i),n){if(L("ff")){for(const r of n)if("byteLength"in r&&r.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case Rt.INVOKE:throw o;case Rt.RESPONSE:return void a2(e,{type:Rt.RESPONSE,jobId:t.jobId,error:Jh(o)})}}}e.postMessage(t,n)}else e.postMessage(t)}function Xh(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function u$(e){if(!e?.length)return null;if(L("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!Kq(i));return t.length?t:null}function Kq(e){return e instanceof ArrayBuffer||e?.constructor?.name==="ArrayBuffer"}async function rde(e){try{return await e}catch(t){const i=t?.name===LI;if(!(us(t)||i))throw t;return}}const{CLOSE:h$,ABORT:d$,INVOKE:p$,RESPONSE:ru,OPEN_PORT:f$,ON:Qq}=Rt,eY=2;class tY{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===Rt.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class _i{static connect(t,i){const s=new MessageChannel;let n;n=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const r=new _i(s.port1,{channel:s,client:n,schedule:i});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=r),_i.clients.set(r,n),s.port2}static loadWorker(t){const i=Zq[t];return i?i():Promise.resolve(null)}constructor(t,i,s){this._port=t,this._jobQueue=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new tY(n=>this._onInvokeMessage(n)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:h$}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,s){return this.apply(t,[i],s)}apply(t,i,s){const n=s?.signal,r=s?.transferList;if(!this._port)return Promise.reject(new V(LI,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const o=RI();return new Promise((a,l)=>{if(ur(n))return this._processWork(),void l(_t());const c=ns(n,()=>{const p=this._outJobs.get(o);p&&(this._outJobs.delete(o),this._processWork(),et(p.abortHandle),this._post({type:d$,jobId:o}),l(_t()))}),h={resolve:a,reject:l,abortHandle:c,debugInfo:t};this._outJobs.set(o,h),this._post({type:p$,jobId:o,methodName:t,abortable:n!=null},i,r)})}createInvokeProxy(t){return II(this,t)}on(t,i){const s=new MessageChannel;function n(r){i(r.data)}return this._port.postMessage({type:Rt.ON,eventType:t,port:s.port2},[s.port2]),s.port1.addEventListener("message",n),s.port1.start(),Ee(()=>{s.port1.postMessage({type:Rt.CLOSE}),s.port1.close(),s.port1.removeEventListener("message",n)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:f$,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=eY)return;const t=this._jobQueue?.pop();if(!t)return;const{methodName:i,data:s,invokeOptions:n,resolver:r}=t;this.apply(i,s,n).then(o=>r.resolve(o)).catch(o=>r.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{et(t.abortHandle),t.reject(_t(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,i){const s=Xh(t);if(s)switch(s.type){case ru:this._onResponseMessage(s);break;case p$:i?this._onInvokeMessage(s):this._invokeQueue.push(s);break;case d$:this._onAbortMessage(s);break;case h$:this._onCloseMessage();break;case f$:this._onOpenPortMessage(s);break;case Qq:this._onOnMessage(s)}}_onAbortMessage(t){const i=this._inJobs,s=t.jobId,n=i.get(s);this._invokeQueue.push(t),n&&(n.controller&&n.controller.abort(),i.delete(s))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&_i.clients.get(this)===t&&t.destroy(),_i.clients.delete(this),t?.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:s,data:n=[],abortable:r}=t,o=r?new AbortController:null,a=this._inJobs;let l,c=this._client,h=c[i];try{if(!h&&i&&i.includes(".")){const p=i.split(".");for(let m=0;m<p.length-1;m++)c=c[p[m]],h=c[p[m+1]]}if(typeof h!="function")throw new TypeError(`${i} is not a function`);n.push({client:this,signal:o?o.signal:null}),l=h.apply(c,n)}catch(p){return void this._post({type:ru,jobId:s,error:Jh(p)})}Oo(l)?(a.set(s,{controller:o,promise:l}),l.then(p=>{a.has(s)&&(a.delete(s),this._post({type:ru,jobId:s},p))},p=>{a.has(s)&&(a.delete(s),us(p)||this._post({type:ru,jobId:s,error:Jh(p||{message:`Error encountered at method ${i}`})}))})):this._post({type:ru,jobId:s},l)}_onOpenPortMessage(t){new _i(t.port,{client:this._client})}_onOnMessage(t){const{port:i}=t,s=this._client.on(t.eventType,r=>{i.postMessage(r)}),n=fd(t.port,"message",r=>{Xh(r)?.type===Rt.CLOSE&&(n.remove(),s.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:s,data:n}=t,r=this._outJobs;if(!r.has(i))return;const o=r.get(i);r.delete(i),this._processWork(),et(o.abortHandle),s?o.reject(V.fromJSON(JSON.parse(s))):o.resolve(n)}_post(t,i,s){return a2(this._port,t,i,s)}}_i.kernelInfo={buildDate:wP,fullVersion:D_,revision:xP},_i.clients=new Map;class iY{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new Hm}destroy(){this.close()}get closed(){return!this._clients?.length}open(t,i){return new Promise((s,n)=>{let r=!0;const o=a=>{pt(i.signal),r&&(r=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const l=t[a];Oo(l)?this._clientPromises[a]=l.then(c=>(this._clients[a]=new _i(c,i,this._ongoingJobsQueue),o(s),this._clients[a]),()=>(o(n),null)):(this._clients[a]=new _i(l,i,this._ongoingJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(s))}})}broadcast(t,i,s){const n=new Array(this._clientPromises.length);for(let r=0;r<this._clientPromises.length;++r){const o=this._clientPromises[r];n[r]=o.then(a=>a?.invoke(t,i,s))}return n}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(_t(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(s=>s?.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,qq(this)}invoke(t,i,s){return this.apply(t,[i],s)}apply(t,i,s){const n=cs();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:s,resolver:n});for(let r=0;r<this._clientPromises.length;r++){const o=this._clients[r];o?o.jobAdded():this._clientPromises[r].then(a=>a?.jobAdded())}return n.promise}createInvokeProxy(t){return II(this,t)}on(t,i){return Promise.all(this._clientPromises).then(()=>ud(this._clients.map(s=>s.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let s=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(r=>{r&&(i[n]=r.openPort()),--s==0&&t(i)})})}get test(){}}const sY={async request(e,t){const i=e.options,s=i.responseType;i.signal=t?.signal,i.responseType=s==="native"||s==="native-request-init"?"native-request-init":s&&["blob","json","text"].includes(s)&&f1(e.url)?.after?s:"array-buffer";const n=await Dt(e.url,i),r={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch(n.requestOptions?.responseType){case"native-request-init":return delete r.data.signal,r;case"blob":r.data=await r.data.arrayBuffer();break;case"json":r.data=new TextEncoder().encode(JSON.stringify(r.data)).buffer;break;case"text":r.data=new TextEncoder().encode(r.data).buffer}return{result:r,transferList:[r.data]}}},m$={};function nY(e){const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages?.concat()||[],paths:{...m$.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=m$.baseUrl),t}class rY{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...s)=>t[i](...s)})}}class If{constructor(){this._dispatcher=new rY,this._workerPostMessage({type:Rt.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){nm(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,s){this._dispatcher.addEventListener(t,i,s)}removeEventListener(t,i,s){this._dispatcher.removeEventListener(t,i,s)}_workerPostMessage(t){nm(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=Xh(t);if(i&&i.type===Rt.OPEN){const{modulePath:s,jobId:n}=i;let r=await _i.loadWorker(s);r||(r=await W(()=>import(s),[]));const o=_i.connect(r);this._workerPostMessage({type:Rt.OPENED,jobId:n,data:o})}}}const bb=()=>B.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:oY}=Rt,aY='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let _p,wp;const g$="Failed to create Worker. Fallback to execute module in main thread";async function lY(){if(!L("esri-workers"))return y$(new If);if(!_p&&!wp)try{const t=aY.split("{CONFIGURATION}").join(cY());_p=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){wp=t||{}}let e;if(_p)try{e=new Worker(_p,{name:"esri-worker-"+uY++})}catch{bb().warn(g$,wp),e=new If}else bb().warn(g$,wp),e=new If;return y$(e)}async function y$(e){return new Promise(t=>{function i(n){const r=Xh(n);r&&r.type===oY&&(e.removeEventListener("message",i),e.removeEventListener("error",s),t(e))}function s(n){n.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",s),bb().warn("Failed to create Worker. Fallback to execute module in main thread",n),(e=new If).addEventListener("message",i),e.addEventListener("error",s)}e.addEventListener("message",i),e.addEventListener("error",s)})}function cY(){let e;if(Me.default!=null){const n={...Me};delete n.default,e=JSON.parse(JSON.stringify(n))}else e=JSON.parse(JSON.stringify(Me));e.assetsPath=ts(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?ts(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Di(),e.has={"esri-csp-restrictions":L("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":L("esri-2d-update-debug"),"esri-2d-log-updating":L("esri-2d-log-updating"),"featurelayer-pbf":L("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":L("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":L("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":L("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":L("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":L("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":L("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":L("featurelayer-snapshot-enabled"),"esri-atomics":L("esri-atomics"),"esri-shared-array-buffer":L("esri-shared-array-buffer"),"esri-tiles-debug":L("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":L("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":L("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=ts(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=ts(e.workers.workerPath):e.workers.workerPath=ts(Pe("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Me.workers.loaderConfig,i=nY({baseUrl:t?.baseUrl,locale:Di(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t?.has},map:{...t?.map},paths:{...t?.paths},packages:t?.packages||[]}),s={buildDate:wP,fullVersion:D_,revision:xP};return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:s})}let uY=0;const{ABORT:v$,INVOKE:hY,OPEN:dY,OPENED:pY,RESPONSE:ou}=Rt;class l2{static async create(t){const i=await lY();return new l2(i,t)}constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",s=>{s.preventDefault(),B.getLogger("esri.core.workers.WorkerOwner").error(s)})}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:s}=i,n=RI();return new Promise((r,o)=>{const a={resolve:r,reject:o,abortHandle:S_(s,()=>{this._outJobs.delete(n),this._post({type:v$,jobId:n})})};this._outJobs.set(n,a),this._post({type:dY,jobId:n,modulePath:t})})}_onMessage(t){const i=Xh(t);if(i)switch(i.type){case pY:this._onOpenedMessage(i);break;case ou:this._onResponseMessage(i);break;case v$:this._onAbortMessage(i);break;case hY:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,s=t.jobId,n=i.get(s);n&&(n.controller&&n.controller.abort(),i.delete(s))}_onInvokeMessage(t){const{methodName:i,jobId:s,data:n,abortable:r}=t,o=r?new AbortController:null,a=this._inJobs,l=sY[i];let c;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);c=l.call(null,n,{signal:o?o.signal:null})}catch(h){return void this._post({type:ou,jobId:s,error:Jh(h)})}Oo(c)?(a.set(s,{controller:o,promise:c}),c.then(h=>{a.has(s)&&(a.delete(s),this._post({type:ou,jobId:s},h))},h=>{a.has(s)&&(a.delete(s),h||(h={message:"Error encountered at method"+i}),us(h)||this._post({type:ou,jobId:s,error:Jh(h||{message:`Error encountered at method ${i}`})}))})):this._post({type:ou,jobId:s},c)}_onOpenedMessage(t){const{jobId:i,data:s}=t,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),et(n.abortHandle),n.resolve(s))}_onResponseMessage(t){const{jobId:i,error:s,data:n}=t,r=this._outJobs.get(i);r&&(this._outJobs.delete(i),et(r.abortHandle),s?r.reject(V.fromJSON(JSON.parse(s))):r.resolve(n))}_post(t,i,s){return a2(this.worker,t,i,s)}}const b$=L("host-browser")?Math.min(navigator.hardwareConcurrency-1,L("workers-pool-size")):0;let Ca=L("esri-mobile")?Math.min(b$,3):b$;Ca||(Ca=L("safari")&&L("mac")?7:2);let _$=0;const Lf=[];function fY(){DI()}async function xp(e,t){const i=new iY,{registryTarget:s,...n}=t;return await i.open(e,n),s&&Gq(s,i),i}async function ode(e,t={}){if(typeof e!="string")throw new V("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(L("host-webworker")&&!L("esri-workers")&&(i="local"),i==="local"){let s=await _i.loadWorker(e);s||(s=await W(()=>import(e),[])),pt(t.signal);const n=t.client||s;return xp([_i.connect(s,t.schedule)],{...t,client:n})}if(await DI(),pt(t.signal),i==="dedicated"){const s=_$++%Ca;return xp([await Lf[s].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const s=Math.min(t.maxNumWorkers,Ca);if(s<Ca){const n=new Array(s);for(let r=0;r<s;++r){const o=_$++%Ca;n[r]=Lf[o].open(e,t)}return xp(n,t)}}return xp(Lf.map(s=>s.open(e,t)),t)}let Sp=null;async function DI(){if(Sp)return Sp;new AbortController;const e=[];for(let t=0;t<Ca;t++){const i=l2.create(t).then(s=>(Lf[t]=s,s));e.push(i)}return Sp=Promise.all(e),Sp}var _b;let Js=_b=class extends Z{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new _b({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};d([f({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Js.prototype,"cols",void 0),d([f({type:rt,json:{write:!0}})],Js.prototype,"level",void 0),d([f({type:String,json:{write:!0}})],Js.prototype,"levelValue",void 0),d([f({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Js.prototype,"origin",void 0),d([f({type:Number,json:{write:!0}})],Js.prototype,"resolution",void 0),d([f({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Js.prototype,"rows",void 0),d([f({type:Number,json:{write:!0}})],Js.prototype,"scale",void 0),Js=_b=d([k("esri.layers.support.LOD")],Js);const io=Js;class mY{constructor(t,i,s,n,r=void 0){this.id=t,this.level=i,this.row=s,this.col=n,this.extent=r}}var Wr;const w$=new Ft({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let zt=Wr=class extends Z{static create(e={}){const{resolutionFactor:t=1,scales:i,size:s=256,spatialReference:n=ge.WebMercator,numLODs:r=24}=e;if(!Li(n)){const p=[];if(i)for(let m=0;m<i.length;m++){const g=i[m];p.push(new io({level:m,scale:g,resolution:g}))}else{let m=5e-4;for(let g=r-1;g>=0;g--)p.unshift(new io({level:g,scale:m,resolution:m})),m*=2}return new Wr({dpi:96,lods:p,origin:new ae(0,0,n),size:[s,s],spatialReference:n})}const o=Si(n),a=e.origin?new ae({x:e.origin.x,y:e.origin.y,spatialReference:n}):new ae(o?{x:o.origin[0],y:o.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),l=96,c=1/(rl(n)*39.37*l),h=[];if(i)for(let p=0;p<i.length;p++){const m=i[p],g=m*c;h.push(new io({level:p,scale:m,resolution:g}))}else{let p=Sg(n)?512/s*5916575275917094e-7:256/s*591657527591555e-6;const m=Math.ceil(r/t);h.push(new io({level:0,scale:p,resolution:p*c}));for(let g=1;g<m;g++){const y=p/2**t,v=y*c;h.push(new io({level:g,scale:y,resolution:v})),p=y}}return new Wr({dpi:l,lods:h,origin:a,size:[s,s],spatialReference:n})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=Si(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return ae.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const s=[],n=this._levelToLOD={};e&&(t=-1/0,i=1/0,e.forEach(r=>{s.push(r.scale),t=r.scale>t?r.scale:t,i=r.scale<i?r.scale:i,n[r.level]=r})),this._set("scales",s),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const i=Math.floor(e),s=i+1;return t[i]/(t[i]/t[s])**(e-i)}scaleToZoom(e){const t=this.scales,i=t.length-1;let s=0;for(;s<i;s++){const n=t[s],r=t[s+1];if(n<=e)return s;if(r===e)return s+1;if(n>e&&r<e)return s+Math.log(n/e)/Math.log(n/r)}return s}tileAt(e,t,i,s){const n=this.lodAt(e);if(!n)return null;let r,o;if(typeof t=="number")r=t,o=i;else if($t(t.spatialReference,this.spatialReference))r=t.x,o=t.y,s=i;else{const c=Tg(t,this.spatialReference);if(c==null)return null;r=c.x,o=c.y,s=i}const a=n.resolution*this.size[0],l=n.resolution*this.size[1];return s||(s=new mY(null,0,0,0,xi())),s.level=e,s.row=Math.floor((this.origin.y-o)/l+.001),s.col=Math.floor((r-this.origin.x)/a+.001),this.updateTileInfo(s),s}updateTileInfo(e,t=Wr.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===Wr.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(i=o)}if(!i)return;const s=e.level-i.level,n=i.resolution*this.size[0]/2**s,r=i.resolution*this.size[1]/2**s;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=xi()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*r,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+r}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const i=this.lodAt(t.level);if(i==null)return null;const{resolution:s}=i,n=s*this.size[0],r=s*this.size[1];return e[0]=this.origin.x+t.col*n,e[1]=this.origin.y-(t.row+1)*r,e[2]=e[0]+n,e[3]=e[1]+r,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return Wr.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const i=[],s=this.lods.length-t;for(let n=0;n<s;n++){const r=n+t,{scale:o,resolution:a}=r>=0?this.lods[r]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};i.push(new io({level:n,scale:o,resolution:a}))}return new Wr({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const s=e[i];this._upsampleLevels[s.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/s.resolution:0},t=s}}};d([f({type:Number,json:{write:!0}})],zt.prototype,"compressionQuality",void 0),d([f({type:Number,json:{write:!0}})],zt.prototype,"dpi",void 0),d([f({type:String,json:{read:w$.read,write:w$.write,origins:{"web-scene":{read:!1,write:!1}}}})],zt.prototype,"format",void 0),d([f({readOnly:!0})],zt.prototype,"isWrappable",null),d([f({type:ae,json:{write:!0}})],zt.prototype,"origin",void 0),d([$e("origin")],zt.prototype,"readOrigin",null),d([f({type:[io],value:null,json:{write:!0}})],zt.prototype,"lods",null),d([f({readOnly:!0})],zt.prototype,"scales",void 0),d([f({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],zt.prototype,"size",void 0),d([$e("size",["rows","cols"])],zt.prototype,"readSize",null),d([ve("size",{cols:{type:rt},rows:{type:rt}})],zt.prototype,"writeSize",null),d([f({type:ge,json:{write:!0}})],zt.prototype,"spatialReference",void 0),zt=Wr=d([k("esri.layers.support.TileInfo")],zt),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(zt||(zt={}));const gY=zt,Rf={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,s=this.values;return t<=i.xsmall?s.xsmall:t<=i.small?s.small:t<=i.medium?s.medium:t<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,s=this.values;return t<=i.xsmall?s.xsmall:t<=i.small?s.small:t<=i.medium?s.medium:t<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],s=t[1],n=this.values;return s>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},f0={xsmall:544,small:768,medium:992,large:1200};function yY(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function m0(e,t){return t?Rf[e].valueToClassName[t].split(" "):[]}const vY=e=>{let t=class extends e{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=f0}initialize(){this.addHandles(le(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Qt))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i!==this._get("breakpoints")){if(!yY(i)){const s=JSON.stringify(f0,null,2);console.warn("provided breakpoints are not valid, using defaults:"+s),i=f0}this._set("breakpoints",{...i})}}_updateClassNames(){if(!this.container)return;const i=li.acquire(),s=li.acquire();let n,r=!1;for(n in Rf){const o=this[n],a=Rf[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(r=!0,this[n]=a,m0(n,o).forEach(l=>s.push(l)),m0(n,a).forEach(l=>i.push(l)))}r&&(this._applyClassNameChanges(i,s),li.release(i),li.release(s))}_applyClassNameChanges(i,s){const n=this.container;n&&(s.forEach(r=>n.classList.remove(r)),i.forEach(r=>n.classList.add(r)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let s;for(s in Rf)m0(s,this[s]).forEach(n=>i.classList.remove(n))}};return d([f()],t.prototype,"breakpoints",null),d([f()],t.prototype,"orientation",void 0),d([f()],t.prototype,"widthBreakpoint",void 0),d([f()],t.prototype,"heightBreakpoint",void 0),t=d([k("esri.views.BreakpointsOwner")],t),t};let za=class extends Q{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,t,i={}){return this._installWatch(e,t,i,le)}addWhen(e,t,i={}){return this._installWatch(e,t,i,hr)}addOnCollectionChange(e,t,{initial:i=!1,final:s=!1}={}){const n=++this._handleId;return this.addHandles([Ka(e,"after-changes",this._createSyncUpdatingCallback(),Qa),Ka(e,"change",t,{onListenerAdd:i?r=>t({added:r.toArray(),removed:[]}):void 0,onListenerRemove:s?r=>t({added:[],removed:r.toArray()}):void 0})],n),Ee(()=>this.removeHandles(n))}addPromise(e){if(e==null)return e;const t=++this._handleId;this.addHandles(Ee(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(Mp)||this._set("updating",!1))}),t),this._pendingPromises.add(e),this._set("updating",!0);const i=()=>this.removeHandles(t);return e.then(i,i),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,t,i={},s){const n=++this._handleId;i.sync||this._installSyncUpdatingWatch(e,n);const r=s(e,t,i);return this.addHandles(r,n),Ee(()=>this.removeHandles(n))}_installSyncUpdatingWatch(e,t){const i=this._createSyncUpdatingCallback(),s=le(e,i,{sync:!0,equals:()=>!1});return this.addHandles(s,t),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(Mp),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(md(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(Mp))}),Mp)}}};d([f({readOnly:!0})],za.prototype,"updating",void 0),za=d([k("esri.core.support.UpdatingHandles")],za);const Mp=-42;let Br=class extends Q{constructor(){super(...arguments),this.items=new ee,this._watchUpdatingTracking=new za,this._callbacks=new Map,this._projector=rM(),this._hiddenProjector=rM()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const i of t.added){const s=()=>i.render();this._callbacks.set(i,s),this._projector.append(this.surface,s)}for(const i of t.removed){const s=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(s.domNode),this._callbacks.delete(i)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,i=this._hiddenProjector;let s;const n=()=>(s=e.render(),s);i.append(t,n),i.renderNow();const r={left:0,top:0,right:0,bottom:0};if(s?.domNode){const o=s.domNode.getBoundingClientRect();r.left=o.left,r.top=o.top,r.right=o.right,r.bottom=o.bottom}for(i.detach(n);t.firstChild;)t.removeChild(t.firstChild);return r}overlaps(e,t){const i=this.computeBoundingRect(e),s=this.computeBoundingRect(t);return Math.max(i.left,s.left)<=Math.min(i.right,s.right)&&Math.max(i.top,s.top)<=Math.min(i.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,t){const i=!!t?.disableDecorations;if(!this.items.some(n=>n.visible&&!(i&&n.isDecoration)))return;const s=e.getContext("2d");s.save(),s.font=this._fontString(),this.items.forEach(n=>{i&&n.isDecoration||(s.save(),n.renderCanvas(s),s.restore())}),s.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};d([f({readOnly:!0})],Br.prototype,"surface",void 0),d([f({readOnly:!0})],Br.prototype,"items",void 0),d([f({readOnly:!0})],Br.prototype,"needsRender",null),d([f({readOnly:!0})],Br.prototype,"_watchUpdatingTracking",void 0),d([f({readOnly:!0})],Br.prototype,"updating",null),Br=d([k("esri.views.overlay.ViewOverlay")],Br);const x$=Br,g0=[0,0];function bY(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return g0[0]=i.left+(t?.pageXOffset??0),g0[1]=i.top+(t?.pageYOffset??0),g0}function S$(e){e&&(EE(e),e.parentNode&&e.parentNode.removeChild(e))}function _Y(e){const t=document.createElement("div");return e.appendChild(t),t}const au=16,$p=750,wY=512,xY=2,SY=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:au,time:$p},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([le(()=>this.cursor,s=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",s)}),le(()=>this.navigating,s=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",s.toString())})])}initialize(){this.addHandles([le(()=>this.ui,(i,s)=>this._handleUIChange(i,s),Qt),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=Ke(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(i){const s=this._get("container"),n=dw(i);if(n||typeof i!="string"||B.getLogger(this).error("#container",`element with id '${i}' not found`),s===n)return;if(this._stopMeasuring(),s&&(s.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(S$(this.root),this._set("root",null)),this.userContent&&(JS(this.userContent,s),S$(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const r=document.createElement("div");r.className="esri-view-user-storage",JS(n,r),n.appendChild(r),this._set("userContent",r);const o=document.createElement("div");o.className="esri-view-root",n.insertBefore(o,n.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new x$;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(le(()=>l.needsRender,c=>{c&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=gc({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=et(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(i,s,n){const r=this.position;return i-=r?r[0]:0,s-=r?r[1]:0,n?(n[0]=i,n[1]=s):n=[i,s],n}containerToPage(i,s,n){const r=this.position;return i+=r?r[0]:0,s+=r?r[1]:0,n?(n[0]=i,n[1]=s):n=[i,s],n}_handleUIChange(i,s){this.removeHandles("ui"),s&&s!==i&&s.destroy(),i&&(i.view=this,this.addHandles(le(()=>this.root,n=>{i.container=n?_Y(n):null},Qt),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=au,i.time=$p,this.addHandles([fd(window,"resize",()=>{i.freq=au,i.time=$p}),gc({prepare:s=>{const n=this._measure(),r=this._freqInfo;if(r.time+=s.deltaTime,n&&(r.freq=au,this._get("resizing")||this._set("resizing",!0)),r.time<r.freq)return;r.time=0;const o=this._position();r.freq=o||n?au:Math.min($p,r.freq*xY),!n&&r.freq>=wY&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,s=i?i.clientWidth:0,n=i?i.clientHeight:0;if(s===0||n===0)return this.suspended||this._set("suspended",!0),!1;const r=this.width,o=this.height;return s===r&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",s),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:r,oldHeight:o,width:s,height:n}),!0)}_position(){const i=this.container,s=this.position,n=i&&bY(i);return!!n&&(!s||n[0]!==s[0]||n[1]!==s[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return d([f()],t.prototype,"container",null),d([f({readOnly:!0})],t.prototype,"focused",null),d([f({readOnly:!0})],t.prototype,"height",void 0),d([f()],t.prototype,"messagesCommon",void 0),d([f({type:x$})],t.prototype,"overlay",void 0),d([f({readOnly:!0})],t.prototype,"position",void 0),d([f({readOnly:!0})],t.prototype,"resizing",void 0),d([f({readOnly:!0})],t.prototype,"root",void 0),d([f({value:null,readOnly:!0})],t.prototype,"size",null),d([f({readOnly:!0})],t.prototype,"surface",void 0),d([f({readOnly:!0})],t.prototype,"suspended",void 0),d([f()],t.prototype,"ui",void 0),d([f({readOnly:!0})],t.prototype,"userContent",void 0),d([f({readOnly:!0})],t.prototype,"width",void 0),d([f()],t.prototype,"widthBreakpoint",void 0),t=d([k("esri.views.DOMContainer")],t),t};class MY{constructor(t,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const s in t){const n=t[s],r=new Z3(n,void 0,void 0,2,2);this._properties[s]={pool:r,acquired:[]}}this._afterDispatchHandle=z4(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const i=this._properties[t];for(const s of i.acquired)Dx(s)||i.pool.release(s);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(t){const i=this._owner._get(t),s=this._properties[t];let n=s.pool.acquire();for(s.acquired.push(n);n===i;)s.acquired.push(n),n=s.pool.acquire();return n}_release(){for(const t in this._properties){const i=this._properties[t];let s=0;for(const n of i.acquired)Dx(n)?i.acquired[s++]=n:i.pool.release(n);i.acquired.length=s}}}const $Y=L("mac")?"Meta":"Control",TY=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),kY=e=>TY.has(e);class PY{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const s of this.keyModifiers)if(!i.has(s))return!1;return!0}}class Et{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const s of i)this._incomingEventMatches.push(s.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,s){let n;typeof i=="function"?(s=i,n=[]):n=i||[];const r=typeof t=="string"?new PY(t,n):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const p=this._incoming[h.match.eventType];if(p){const m=p.indexOf(h);p.splice(m,1),o(),this._manager&&this._manager.updateDependencies()}},l=new OY(r,s,{onPause:a,onRemove:a,onResume:h=>{const p=this._incoming[h.match.eventType];p&&!p.includes(h)&&(p.push(h),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[r.eventType];return c||(c=[],this._incoming[r.eventType]=c),c.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new EY(t,{onEmit:(s,n,r,o)=>{this._manager?.emit(s.eventType,n,r,o)},onRemove:s=>{delete this._outgoing[s.eventType],this._manager?.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){this._manager?.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager?.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){const i=this._incoming[t.type];if(i){for(const s of i)if(s.match.matches(t)&&(s.callback?.(t),t.shouldStopPropagation()))break}}}class OY{constructor(t,i,s){this.match=t,this._callback=i,this._handler=s}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class EY{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,s){this._removed||this._handler.onEmit(this,t,i,s)}remove(){this._removed=!0,this._handler.onRemove(this)}}class AY extends Et{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(t){const i=t.native.pointerType==="touch"?"touch":"mouse",{x:s,y:n}=t;i===this._value&&this._x===s&&this._y===n||(this._value=i,this._x=s,this._y=n,this._onChange(i,s,n))}}class CY{constructor(t,i){this._observable=new yd,this._value=t,this._equalityFunction=i}get value(){return X(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}}function NI(e,t=f3){return new CY(e,t)}class IY extends Et{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=NI(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}}let Xi=class extends Q{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=$Y,this._latestPointerType="mouse",this._propertiesPool=new MY({latestPointerLocation:DY},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,t,i=mo.INTERNAL){if(this._nameToGroup[e]||t.length===0)return;const s={name:e,handlers:t.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=s;for(let n=s.handlers.length-1;n>=0;n--){const r=s.handlers[n];this._handlers.push(r),r.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(o,a,l,c,h)=>{this._emitInputEvent(r.priorityIndex+1,o,a,l,h,c)},setPointerCapture:(o,a)=>{this._setPointerCapture(s,r,o,a)},setEventCallback:o=>{r.eventCallback=o},setUninstallCallback:o=>{r.uninstallCallback=o},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(i=>{i.removed=!0,i.uninstallCallback?.()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):B.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers&&this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const s=this._handlers[i];s.priorityIndex=i,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const s=this._handlersPriority[i];s.priorityIndex=i;let n=s.handler.hasSideEffects;if(!n){for(const r of s.handler.outgoingEventTypes)if(e.has(r)){n=!0;break}}if(n)for(const r of s.handler.incomingEventMatches){e.add(r.eventType);for(const o of r.keyModifiers)kY(o)||t.add(o)}s.active=n}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,i){this._latestPointerType=e;const s=this._get("latestPointerLocation");if(s==null||s.x!==t||s.y!==i){const n=this._propertiesPool.get("latestPointerLocation");n.x=t,n.y=i,this._set("latestPointerLocation",n)}}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const n=t;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(e,t);const i=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,s=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,i,s)}_updateKeyModifiers(e,t){if(!t)return;let i=!1;const s=()=>{if(!i){const o=new Set;this._activeKeyModifiers.forEach(a=>{o.add(a)}),this._activeKeyModifiers=o,i=!0}},n=(o,a)=>{a&&!this._activeKeyModifiers.has(o)?(s(),this._activeKeyModifiers.add(o)):!a&&this._activeKeyModifiers.has(o)&&(s(),this._activeKeyModifiers.delete(o))};if(e==="key-down"||e==="key-up"){const o=t.key;this._keyModifiers.has(o)&&n(o,e==="key-down")}const r=t.native;n("Alt",!(!r||!r.altKey)),n("Control",!(!r||!r.ctrlKey)),n("Ctrl",!(!r||!r.ctrlKey)),n("Shift",!(!r||!r.shiftKey)),n("Meta",!(!r||!r.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new AY((e,t,i)=>this._setLatestPointer(e,t,i)),this._multiTouchHandler=new IY,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],mo.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,mo.INTERNAL)}_setPointerCapture(e,t,i,s){const n=e.name+"-"+t.priorityIndex,r=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,r),s?(r.add(n),r.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):r.has(n)&&(r.delete(n),r.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,i,s){this._emitInputEvent(0,e,t,i,s)}_emitInputEvent(e,t,i,s,n,r){const o=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),a=n!==void 0&&n,l={event:new LY(t,i,o,r||this._activeKeyModifiers,a),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(l):this._doNewPropagation(l)}_doNewPropagation(e){this._currentPropagation={events:new Hm,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:t,priorityIndex:i}=e.events.pop(),s=t.data?.eventId;if(!(s!=null&&this._stoppedPropagationEventIds.has(s)))for(e.currentHandler=this._handlersPriority[i];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback?.(t),t.shouldStopPropagation()){s!=null&&this._stoppedPropagationEventIds.add(s);break}if(t.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new Hm;t.push(e);const i=this._currentPropagation;if(i){for(;i.events.length;)t.push(i.events.pop());i.events=t,i.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const s of t.handler.incomingEventMatches){if(i.eventType!==s.eventType)continue;const n=i.keyModifiers.filter(r=>s.keyModifiers.includes(r));if(n.length===i.keyModifiers.length!=(n.length===s.keyModifiers.length))return i.keyModifiers.length>s.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const i of e){let s=0;for(;s<t.length&&this._compareHandlerPriority(i,t[s])>=0;)s++;t.splice(s,0,i)}return t}get debug(){const e=t=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=i};return{injectEvent:(t,i)=>{e(()=>{this._onEventReceived(t,i)})},disablePointerCapture:e}}};d([f({readOnly:!0})],Xi.prototype,"hasPendingInputs",null),d([f({constructOnly:!0})],Xi.prototype,"eventSource",void 0),d([f({constructOnly:!0})],Xi.prototype,"recognizers",void 0),d([f()],Xi.prototype,"_latestPointerType",void 0),d([f()],Xi.prototype,"latestPointerType",null),d([f()],Xi.prototype,"multiTouchActive",null),d([f({readOnly:!0})],Xi.prototype,"latestPointerLocation",void 0),d([f()],Xi.prototype,"_paused",void 0),d([f({readOnly:!0})],Xi.prototype,"updating",null),Xi=d([k("esri.views.input.InputManager")],Xi);class LY{constructor(t,i,s,n,r){this.type=t,this.data=i,this.timestamp=s,this.modifiers=n,this.cancelable=r,this._propagationState=so.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=so.STOPPED}shouldStopPropagation(){return!!(this._propagationState&so.STOPPED)}async(t){this._propagationState|=so.PAUSED;const i=(s,n)=>{this._propagationState&=~so.PAUSED;const r=this._resumeCallback;if(this._resumeCallback=null,r&&r(),n)throw s;return s};return(typeof t=="function"?t():t).then(s=>i(s,!1),s=>i(s,!0))}shouldPausePropagation(t){return!!(this._propagationState&so.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}}var so;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(so||(so={}));const mo={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class RY{}const DY=RY;function $n(e){return e!=null&&"open"in e&&"declaredClass"in e}function M$(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const NY=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([le(()=>[this.ui,this.popup],([i,s],n)=>{const r="popup",o="manual";if(n){const[a,l]=n;a&&$n(l)&&(l.view=null,M$(l)&&a.remove(l,r))}i&&$n(s)&&(s.view=this,M$(s)&&i.add(s,{key:r,position:o,internal:!0}))},Qt),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&($n(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),$n(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)}))},mo.WIDGET)]),Bg(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{W(()=>import("./Popup.702e1b55.js"),["assets/Popup.702e1b55.js","assets/substitute.d70135f2.js","assets/ByteSizeUnit.e7dc4350.js","assets/AttachmentInfo.232c633e.js","assets/RelationshipQuery.a9d69ee6.js","assets/utils.26a12d83.js","assets/ColorStop.aa8650af.js","assets/utils.e5165ddb.js","assets/utils.dbb84a38.js","assets/LRUCache.6f8863ed.js","assets/jsonUtils.93554317.js","assets/UniqueValueRenderer.8069ab57.js","assets/diffUtils.080c04bc.js","assets/colorRamps.272b71a1.js","assets/sizeVariableUtils.34255976.js","assets/visualVariableUtils.12ee1cdb.js","assets/jsonUtils.185b82ae.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/styleUtils.7f2b22b0.js","assets/Version.856e86b2.js","assets/FieldsIndex.333d0734.js","assets/UnknownTimeZone.4756be49.js","assets/OverrideHelper.b5d99b26.js","assets/colorUtils.085072a2.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/quantizationUtils.fe6b1e6e.js","assets/heatmapUtils.b763e953.js","assets/executeQueryJSON.b781982b.js","assets/query.702fc5fe.js","assets/pbfQueryUtils.52d7ad7f.js","assets/pbf.72af564e.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/queryZScale.835a340e.js","assets/FeatureSet.78257171.js","assets/TopFeaturesQuery.0af13513.js","assets/FeatureLayer.aed98d1b.js","assets/MultiOriginJSONSupport.b5976a45.js","assets/commonProperties.a37169f8.js","assets/FeatureLayerBase.dd6763e4.js","assets/featureLayerUtils.1828d741.js","assets/LayerFloorInfo.164b006f.js","assets/Relationship.ee67ec43.js","assets/serviceCapabilitiesUtils.21de2819.js","assets/editsZScale.3b0b1c90.js","assets/APIKeyMixin.a389fc6d.js","assets/ArcGISService.c7559039.js","assets/CustomParametersMixin.b4d39f07.js","assets/EditBusLayer.979b288a.js","assets/FeatureEffectLayer.11729363.js","assets/FeatureEffect.00e4e7d7.js","assets/FeatureReductionLayer.8358918b.js","assets/FeatureReductionSelection.49649196.js","assets/labelingInfo.41bbc735.js","assets/labelUtils.37b9d8d8.js","assets/MD5.f6d873db.js","assets/OperationalLayer.33897364.js","assets/OrderedLayer.7fae9ad1.js","assets/OrderByInfo.b53e85dd.js","assets/PortalLayer.5cf51695.js","assets/portalItemUtils.761d02ba.js","assets/RefreshableLayer.908b9ff1.js","assets/TemporalLayer.859e579f.js","assets/TimeInfo.d882fe8e.js","assets/FeatureTemplate.7907b31e.js","assets/FeatureType.f4c0cb30.js","assets/fieldProperties.80f53b4c.js","assets/versionUtils.9e2a095a.js","assets/styleUtils.f0558e3a.js","assets/popupUtils.f17e95f0.js","assets/interfaces.c34ab3ac.js","assets/layerViewUtils.8a0a28d0.js"])})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if($n(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void B.getLogger(this).error(new V("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){this._popupSetupTask?.abort(),$n(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,s){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(i,s),s)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!$n(this.popup))return this._popupSetupTask=z_(async i=>{const{default:s}=await W(()=>import("./Popup.702e1b55.js"),["assets/Popup.702e1b55.js","assets/substitute.d70135f2.js","assets/ByteSizeUnit.e7dc4350.js","assets/AttachmentInfo.232c633e.js","assets/RelationshipQuery.a9d69ee6.js","assets/utils.26a12d83.js","assets/ColorStop.aa8650af.js","assets/utils.e5165ddb.js","assets/utils.dbb84a38.js","assets/LRUCache.6f8863ed.js","assets/jsonUtils.93554317.js","assets/UniqueValueRenderer.8069ab57.js","assets/diffUtils.080c04bc.js","assets/colorRamps.272b71a1.js","assets/sizeVariableUtils.34255976.js","assets/visualVariableUtils.12ee1cdb.js","assets/jsonUtils.185b82ae.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/styleUtils.7f2b22b0.js","assets/Version.856e86b2.js","assets/FieldsIndex.333d0734.js","assets/UnknownTimeZone.4756be49.js","assets/OverrideHelper.b5d99b26.js","assets/colorUtils.085072a2.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/quantizationUtils.fe6b1e6e.js","assets/heatmapUtils.b763e953.js","assets/executeQueryJSON.b781982b.js","assets/query.702fc5fe.js","assets/pbfQueryUtils.52d7ad7f.js","assets/pbf.72af564e.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/queryZScale.835a340e.js","assets/FeatureSet.78257171.js","assets/TopFeaturesQuery.0af13513.js","assets/FeatureLayer.aed98d1b.js","assets/MultiOriginJSONSupport.b5976a45.js","assets/commonProperties.a37169f8.js","assets/FeatureLayerBase.dd6763e4.js","assets/featureLayerUtils.1828d741.js","assets/LayerFloorInfo.164b006f.js","assets/Relationship.ee67ec43.js","assets/serviceCapabilitiesUtils.21de2819.js","assets/editsZScale.3b0b1c90.js","assets/APIKeyMixin.a389fc6d.js","assets/ArcGISService.c7559039.js","assets/CustomParametersMixin.b4d39f07.js","assets/EditBusLayer.979b288a.js","assets/FeatureEffectLayer.11729363.js","assets/FeatureEffect.00e4e7d7.js","assets/FeatureReductionLayer.8358918b.js","assets/FeatureReductionSelection.49649196.js","assets/labelingInfo.41bbc735.js","assets/labelUtils.37b9d8d8.js","assets/MD5.f6d873db.js","assets/OperationalLayer.33897364.js","assets/OrderedLayer.7fae9ad1.js","assets/OrderByInfo.b53e85dd.js","assets/PortalLayer.5cf51695.js","assets/portalItemUtils.761d02ba.js","assets/RefreshableLayer.908b9ff1.js","assets/TemporalLayer.859e579f.js","assets/TimeInfo.d882fe8e.js","assets/FeatureTemplate.7907b31e.js","assets/FeatureType.f4c0cb30.js","assets/fieldProperties.80f53b4c.js","assets/versionUtils.9e2a095a.js","assets/styleUtils.f0558e3a.js","assets/popupUtils.f17e95f0.js","assets/interfaces.c34ab3ac.js","assets/layerViewUtils.8a0a28d0.js"]);if(pt(i),!this.popup||$n(this.popup))return;const n=this.popup;delete n.open,delete n.close,this.popup=new s(n)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:i,hits:s},n){const r=[],o=[];let a=!1;const l=y4(n,L("popup-view-fetch-timeout")??jY),c=m=>{const g=new FY(m);return o.push(g),r.push(g.promise),g},h=m=>{const g=o.at(-1);return g&&g.layerView===m&&!a?g:c(m)};for(const m of s)"graphic"in m?(h(m.layerView).graphics.push(m.graphic),a=!1):(r.push(m.layerView.fetchPopupFeaturesAtLocation(m.mapPoint,l)),a=!0);o.map(m=>m.resolve(l));const p=g4(r).then(m=>m.filter(g=>!!g).flat());return{pendingFeatures:r,allGraphicsPromise:p,location:i}}async _getPopupHits(i,s){const{hits:n,location:r}=await this.popupHitTest(i);pt(s);const o=[];for(const a of n)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,s)){const l=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:l})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:r}}_isValidPopupGraphic(i,s){return i&&!!i.getEffectivePopupTemplate(s?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(i){return!i||(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesFromGraphics"in i}_isValidPopupLocationLayerView(i){return(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesAtLocation"in i}};return d([f({cast(i){return!i||$n(i)||typeof i=="object"&&(i.open=s=>(Ba(B.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(s)),i.close=()=>(Ba(B.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),i}})],t.prototype,"popup",void 0),d([f()],t.prototype,"popupEnabled",void 0),t=d([k("esri.views.PopupView")],t),t};class FY{constructor(t){this.layerView=t,this._resolver=cs(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:i,graphics:s,_resolver:n}=this;if(!i)return n.resolve(s),n.promise;let r;return i.fetchPopupFeaturesFromGraphics(s,t).catch(o=>(r=o,null)).then(o=>{o?n.resolve(o):n.reject(r)}),n.promise}}const jY=5e3;var Yu;const Gm=di()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),FI=Gm.jsonValues.slice();U5(FI,"orthometric");const Th=di()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let xs=Yu=class extends Z{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return Gm.write(e,t,i)}readHeightModel(e,t,i){return Gm.read(e)||(i?.messages&&i.messages.push(zY(e,{context:i})),null)}readHeightUnit(e,t,i){return Th.read(e)||(i?.messages&&i.messages.push($$(e,{context:i})),null)}readHeightUnitService(e,t,i){return HP(e)||Th.read(e)||(i?.messages&&i.messages.push($$(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new Yu({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=RF(t);return new Yu({heightModel:e.heightModel,heightUnit:i??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new Yu;return t.read(e,{origin:"web-scene"}),t}};function $$(e,t){return new cr("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function zY(e,t){return new cr("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}d([f({type:Gm.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:FI,default:"ellipsoidal"}}}})],xs.prototype,"heightModel",void 0),d([ve("web-scene","heightModel")],xs.prototype,"writeHeightModel",null),d([$e(["web-scene","service"],"heightModel")],xs.prototype,"readHeightModel",null),d([f({type:Th.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Th.jsonValues,write:Th.write}}}})],xs.prototype,"heightUnit",void 0),d([$e("web-scene","heightUnit")],xs.prototype,"readHeightUnit",null),d([$e("service","heightUnit")],xs.prototype,"readHeightUnitService",null),d([f({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],xs.prototype,"vertCRS",void 0),d([$e("service","vertCRS",["vertCRS","ellipsoid","geoid"])],xs.prototype,"readVertCRS",null),xs=Yu=d([k("esri.geometry.HeightModelInfo")],xs);const c2=xs;let qm=class extends _h{constructor(e){super(e),this.addHandles(this.on("before-add",t=>{t.item!=null&&t.item.parent===this.owner&&(B.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};qm=d([k("esri.support.AnalysesCollection")],qm);let Hr=class extends Q{constructor(e){super(e),this.view=null,this.baseLayerViews=new ee,this.referenceLayerViews=new ee,this._loadingHandle=le(()=>this.view?.map?.basemap,t=>{t&&t.load().catch(()=>{})},Qt)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view?.suspended)return!1;const e=this.view?.map?.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(t=>t.updating)||this.referenceLayerViews.some(t=>t.updating))}};d([f({constructOnly:!0})],Hr.prototype,"view",void 0),d([f({readOnly:!0})],Hr.prototype,"baseLayerViews",void 0),d([f({readOnly:!0})],Hr.prototype,"referenceLayerViews",void 0),d([f({readOnly:!0})],Hr.prototype,"suspended",null),d([f({type:Boolean,readOnly:!0})],Hr.prototype,"updating",null),Hr=d([k("esri.views.BasemapView")],Hr);function VY(e){return"tryRecycleWith"in e}function UY(e){return e!=null&&typeof e=="object"&&"layerViews"in e}class WY{constructor(t,i,s){this.layer=t,this.view=i,this.layerViewImporter=s,this._controller=new AbortController,this._deferred=cs(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,ns(this._controller.signal,()=>{const n=new V("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(n)})}tryRecycle(t){if(!this.done||!this.layerView||!VY(this.layerView))return null;const i=this.layer.type,s=this._controller.signal;for(let n=0;n<t.length;n++){const r=t[n];if(r.type!==i)continue;const o=this.layerView.tryRecycleWith(r,{signal:s});if(o){t.splice(n,1),this.layer=r;const a=this.layerView,l=a.view;return this.promise=Promise.race([o.then(()=>(pt(this._controller.signal),r.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),r.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((c,h)=>ns(this._controller.signal,()=>h(_t())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:i,view:s}=this;i.emit("layerview-destroy",{view:s,layerView:t}),s.emit("layerview-destroy",{layer:i,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:s}=this;this._map=s.map;try{let n,r;if(await i.load({signal:t}),i.prefetchResources&&await i.prefetchResources({signal:t}),HY(i))n=await i.createLayerView(s,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new V("layer:view-not-supported","No layerview implementation was found");const l=await this.layerViewImporter.importLayerView(i);pt(t),n="default"in l?new l.default({layer:i,view:s}):new l({layer:i,view:s})}const o=()=>{r=et(r),n.destroyed||n.destroy(),n.layer=null,n.parent=null,n.view=null,this.done=!0};r=ns(t,o),pt(t);try{await n.when()}catch(l){throw o(),l}if(!this._map?.allLayers?.includes(i))return o(),void this._deferred.reject(new V("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=n,i.emit("layerview-create",{view:s,layerView:n}),s.emit("layerview-create",{layer:i,layerView:n}),this.done=!0,this._deferred.resolve(n)}catch(n){i.emit("layerview-create-error",{view:s,error:n}),s.emit("layerview-create-error",{layer:i,error:n}),this.done=!0,this._deferred.reject(new V("layerview:create-error","layerview creation failed",{layer:i,error:n}))}}}let Ki=class extends Q{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new za,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const t=this.view.map?.allLayers;if(t)for(const i of t)this.layerViewImporter.hasLayerViewModule(i)&&this.layerViewImporter.importLayerView(i)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=cs(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(md(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=new Set,s=[],n=this.view.ready,r=a=>{if(a!=null){for(const l of a)if(l){i.add(l);const c=this._layerLayerViewInfoMap.get(l);c&&n?c.start():c||this._recyclingInfoMap.has(l)||s.push(l),"layers"in l&&l.layers&&r(l.layers)}}};for(const a of this._rootCollectionNames)r(an(this,a));for(const[a,l]of this._layerLayerViewInfoMap)if(!i.has(a)){this._layerLayerViewInfoMap.delete(l.layer);const c=l.tryRecycle(s);c?(this.notifyChange("updating"),this._recyclingInfoMap.set(l.layer,l),c.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(l.layer),this._layerLayerViewInfoMap.set(l.layer,l),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(l.layer),l.destroy(),this._reschedule()})):l.destroy()}for(const[a,l]of this._recyclingInfoMap)i.has(a)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(l.layer),l.destroy());for(const a of s)this._createLayerView(a);this._refreshCollections();const o=[t?.ground?.layers,t?.basemap?.baseLayers,t?.basemap?.referenceLayers,t?.layers].filter(a=>!!a);i.forEach(a=>"layers"in a&&o.push(a.layers)),this.addHandles(o.map(a=>this._watchUpdatingTracking.addOnCollectionChange(()=>a,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Ka(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),le(()=>{const e=this.view,t=e?.map;return[t?.basemap,t?.ground,t?.layers,e?.ready]},()=>this._reschedule(),es)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),d0(this._recyclingInfoMap),d0(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(_t()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||fg(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){this.destroyed||(d0(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new V("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}isCreatingLayerViewsForLayer(e,t){this.commitProperty("updatingRemaining");const i=this._layerLayerViewInfoMap.get(e);if(!i?.done)return!0;const s=i.layerView;return!(!s||!t||s.parent===t)||!!(i.done&&s&&"layers"in e&&e.layers?.length)&&e.layers.some(n=>this.isCreatingLayerViewsForLayer(n,s))}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(an(this,e),an(this,t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,i){if(!e||!t)return void(t&&t.removeAll());let s=0;for(const n of e){const r=this._layerLayerViewInfoMap.get(n);if(!r?.layerView)continue;const o=r.layerView;o.layer=n,o.parent=i,t.at(s)!==o&&t.splice(s,0,o),"layers"in n&&UY(o)&&this._populateLayerViewsOwners(n.layers,o.layerViews,o),s+=1}s<t.length&&t.splice(s,t.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new WY(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),i=>{i&&(us(i)||i.name==="cancelled:layerview-create")||B.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};d([f()],Ki.prototype,"_workPromise",void 0),d([f({readOnly:!0})],Ki.prototype,"_watchUpdatingTracking",void 0),d([f({readOnly:!0})],Ki.prototype,"_layersToLayerViews",null),d([f({readOnly:!0})],Ki.prototype,"_rootCollectionNames",null),d([f()],Ki.prototype,"layerViewImporter",void 0),d([f()],Ki.prototype,"supportsGround",void 0),d([f({readOnly:!0})],Ki.prototype,"updating",null),d([f({readOnly:!0})],Ki.prototype,"updatingRemaining",null),d([f({constructOnly:!0})],Ki.prototype,"view",void 0),Ki=d([k("esri.views.LayerViewManager")],Ki);const BY=Ki;function HY(e){return"createLayerView"in e&&e.createLayerView!=null}let Pi=class extends Q{constructor(e){super(e),this.factor=1.5,this.offset=Ut(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};d([f({type:Number})],Pi.prototype,"factor",void 0),d([f({nonNullable:!0})],Pi.prototype,"offset",void 0),d([f()],Pi.prototype,"position",void 0),d([f({type:Number,range:{min:0}})],Pi.prototype,"size",void 0),d([f()],Pi.prototype,"maskUrl",void 0),d([f()],Pi.prototype,"maskEnabled",void 0),d([f()],Pi.prototype,"overlayUrl",void 0),d([f()],Pi.prototype,"overlayEnabled",void 0),d([f({readOnly:!0})],Pi.prototype,"version",null),d([f({type:Boolean})],Pi.prototype,"visible",void 0),Pi=d([k("esri.views.Magnifier")],Pi);const jI=Pi;class Df{constructor(t){this._observable=new yd,this._map=new Map(t)}get size(){return X(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const i=this._map.delete(t);return i&&this._observable.notify(),i}entries(){return X(this._observable),this._map.entries()}forEach(t,i){X(this._observable),this._map.forEach((s,n)=>t.call(i,s,n,this),i)}get(t){return X(this._observable),this._map.get(t)}has(t){return X(this._observable),this._map.has(t)}keys(){return X(this._observable),this._map.keys()}set(t,i){return this._map.set(t,i),this._observable.notify(),this}values(){return X(this._observable),this._map.values()}[Symbol.iterator](){return X(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}}var wb;let Zu=wb=class extends Z{constructor(e){super(e),this.name=null,this.code=null}clone(){return new wb({name:this.name,code:this.code})}};d([f({type:String,json:{write:!0}})],Zu.prototype,"name",void 0),d([f({type:[String,Number],json:{write:!0}})],Zu.prototype,"code",void 0),Zu=wb=d([k("esri.layers.support.CodedValue")],Zu);const GY=new Ft({inherited:"inherited",codedValue:"coded-value",range:"range"});let Ju=class extends Z{constructor(e){super(e),this.name=null,this.type=null}};d([f({type:String,json:{write:!0}})],Ju.prototype,"name",void 0),d([se(GY)],Ju.prototype,"type",void 0),Ju=d([k("esri.layers.support.Domain")],Ju);const py=Ju;var xb;let Xu=xb=class extends py{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(s=>(String(s.code)===i&&(t=s.name),!!t))}return t}clone(){return new xb({codedValues:F(this.codedValues),name:this.name})}};d([f({type:[Zu],json:{write:!0}})],Xu.prototype,"codedValues",void 0),d([se({codedValue:"coded-value"})],Xu.prototype,"type",void 0),Xu=xb=d([k("esri.layers.support.CodedValueDomain")],Xu);const zI=Xu;var Sb;let Nf=Sb=class extends py{constructor(e){super(e),this.type="inherited"}clone(){return new Sb}};d([se({inherited:"inherited"})],Nf.prototype,"type",void 0),Nf=Sb=d([k("esri.layers.support.InheritedDomain")],Nf);const VI=Nf;var Mb;let Nl=Mb=class extends py{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new Mb({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};d([f({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],Nl.prototype,"maxValue",void 0),d([f({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],Nl.prototype,"minValue",void 0),d([se({range:"range"})],Nl.prototype,"type",void 0),Nl=Mb=d([k("esri.layers.support.RangeDomain")],Nl);const UI=Nl,qY={key:"type",base:py,typeMap:{range:UI,"coded-value":zI,inherited:VI}};function YY(e){if(!e?.type)return null;switch(e.type){case"range":return UI.fromJSON(e);case"codedValue":return zI.fromJSON(e);case"inherited":return VI.fromJSON(e)}return null}const ZY=new Ft({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var $b;const JY=new Ft({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Bt=$b=class extends Z{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return i?.value??null}readValueType(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return i?JY.fromJSON(i.fieldValueType):null}clone(){return new $b({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};d([f({type:String,json:{write:!0}})],Bt.prototype,"alias",void 0),d([f({type:[String,Number],json:{write:{allowNull:!0}}})],Bt.prototype,"defaultValue",void 0),d([f()],Bt.prototype,"description",void 0),d([$e("description")],Bt.prototype,"readDescription",null),d([f({types:qY,json:{read:{reader:YY},write:!0}})],Bt.prototype,"domain",void 0),d([f({type:Boolean,json:{write:!0}})],Bt.prototype,"editable",void 0),d([f({type:rt,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],Bt.prototype,"length",void 0),d([f({type:String,json:{write:!0}})],Bt.prototype,"name",void 0),d([f({type:Boolean,json:{write:!0}})],Bt.prototype,"nullable",void 0),d([se(ZY)],Bt.prototype,"type",void 0),d([f()],Bt.prototype,"valueType",void 0),d([$e("valueType",["description"])],Bt.prototype,"readValueType",null),d([f({type:Boolean,json:{read:!1}})],Bt.prototype,"visible",void 0),Bt=$b=d([k("esri.layers.support.Field")],Bt);const XY=Bt;var Tb;let Fl=Tb=class extends Z{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new Tb({mapLayerId:e,gdbVersion:t})}};d([se({mapLayer:"map-layer"})],Fl.prototype,"type",void 0),d([f({type:rt,json:{write:!0}})],Fl.prototype,"mapLayerId",void 0),d([f({type:String,json:{write:!0}})],Fl.prototype,"gdbVersion",void 0),Fl=Tb=d([k("esri.layers.support.source.MapLayerSource")],Fl);var kb;let zn=kb=class extends Z{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:i,spatialReference:s,geometryType:n}=this,r={workspaceId:e,query:t,oidFields:i,spatialReference:s?.clone()??void 0,geometryType:n};return new kb(r)}};d([se({queryTable:"query-table"})],zn.prototype,"type",void 0),d([f({type:String,json:{write:!0}})],zn.prototype,"workspaceId",void 0),d([f({type:String,json:{write:!0}})],zn.prototype,"query",void 0),d([f({type:String,json:{write:!0}})],zn.prototype,"oidFields",void 0),d([f({type:ge,json:{write:!0}})],zn.prototype,"spatialReference",void 0),d([se(tH)],zn.prototype,"geometryType",void 0),zn=kb=d([k("esri.layers.support.source.QueryTableDataSource")],zn);var Pb;let jl=Pb=class extends Z{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new Pb({workspaceId:e,dataSourceName:t})}};d([se({raster:"raster"})],jl.prototype,"type",void 0),d([f({type:String,json:{write:!0}})],jl.prototype,"dataSourceName",void 0),d([f({type:String,json:{write:!0}})],jl.prototype,"workspaceId",void 0),jl=Pb=d([k("esri.layers.support.source.RasterDataSource")],jl);var Ob;let ma=Ob=class extends Z{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new Ob({workspaceId:e,gdbVersion:t,dataSourceName:i})}};d([se({table:"table"})],ma.prototype,"type",void 0),d([f({type:String,json:{write:!0}})],ma.prototype,"workspaceId",void 0),d([f({type:String,json:{write:!0}})],ma.prototype,"gdbVersion",void 0),d([f({type:String,json:{write:!0}})],ma.prototype,"dataSourceName",void 0),ma=Ob=d([k("esri.layers.support.source.TableDataSource")],ma);var Eb,Ab;const KY=di()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Oi=Eb=class extends Z{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return T$()(e,t,i)}castLeftTableSource(e){return ar(Cb(),e)}readRightTableSource(e,t,i){return T$()(e,t,i)}castRightTableSource(e){return ar(Cb(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:s,joinType:n}=this,r={leftTableKey:e,rightTableKey:t,leftTableSource:i?.clone()??void 0,rightTableSource:s?.clone()??void 0,joinType:n};return new Eb(r)}};d([se({joinTable:"join-table"})],Oi.prototype,"type",void 0),d([f({type:String,json:{write:!0}})],Oi.prototype,"leftTableKey",void 0),d([f({type:String,json:{write:!0}})],Oi.prototype,"rightTableKey",void 0),d([f({json:{write:!0}})],Oi.prototype,"leftTableSource",void 0),d([$e("leftTableSource")],Oi.prototype,"readLeftTableSource",null),d([Mt("leftTableSource")],Oi.prototype,"castLeftTableSource",null),d([f({json:{write:!0}})],Oi.prototype,"rightTableSource",void 0),d([$e("rightTableSource")],Oi.prototype,"readRightTableSource",null),d([Mt("rightTableSource")],Oi.prototype,"castRightTableSource",null),d([se(KY)],Oi.prototype,"joinType",void 0),Oi=Eb=d([k("esri.layers.support.source.JoinTableDataSource")],Oi);let y0=null;function T$(){return y0||(y0=v_({types:Cb()})),y0}let v0=null;function Cb(){return v0||(v0={key:"type",base:null,typeMap:{"data-layer":Yn,"map-layer":Fl}}),v0}const QY={key:"type",base:null,typeMap:{"join-table":Oi,"query-table":zn,raster:jl,table:ma}};let Yn=Ab=class extends Z{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new Ab({fields:e,dataSource:t})}};d([se({dataLayer:"data-layer"})],Yn.prototype,"type",void 0),d([f({type:[XY],json:{write:!0}})],Yn.prototype,"fields",void 0),d([f({types:QY,json:{write:!0}})],Yn.prototype,"dataSource",void 0),Yn=Ab=d([k("esri.layers.support.source.DataLayerSource")],Yn),Yn.from=ui(Yn);let ga=class extends vn(Z){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};d([f({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],ga.prototype,"onFields",void 0),d([f({type:String,json:{write:!0}})],ga.prototype,"operator",void 0),d([f({type:String,json:{write:!0}})],ga.prototype,"searchTerm",void 0),d([f({type:String,json:{write:!0}})],ga.prototype,"searchType",void 0),ga=d([k("esri.rest.support.FullTextSearch")],ga);const eZ=ga;var Ib;const k$=new Ft({upperLeft:"upper-left",lowerLeft:"lower-left"});let ya=Ib=class extends Z{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new Ib(F({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};d([f({type:tt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],ya.prototype,"extent",void 0),d([f({type:["view","edit"],json:{write:!0}})],ya.prototype,"mode",void 0),d([f({type:String,json:{read:k$.read,write:k$.write}})],ya.prototype,"originPosition",void 0),d([f({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],ya.prototype,"tolerance",void 0),ya=Ib=d([k("esri.rest.support.QuantizationParameters")],ya);const WI=ya,tZ=new Ft({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var Lb;const P$=new Ft({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Ss=Lb=class extends Z{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=F(e))}clone(){return new Lb({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:F(this.statisticParameters)})}};d([f({type:Number,json:{write:!0}})],Ss.prototype,"maxPointCount",void 0),d([f({type:Number,json:{write:!0}})],Ss.prototype,"maxRecordCount",void 0),d([f({type:Number,json:{write:!0}})],Ss.prototype,"maxVertexCount",void 0),d([f({type:String,json:{write:!0}})],Ss.prototype,"onStatisticField",void 0),d([f({type:String,json:{write:!0}})],Ss.prototype,"outStatisticFieldName",void 0),d([f({type:String,json:{read:{source:"statisticType",reader:P$.read},write:{target:"statisticType",writer:P$.write}}})],Ss.prototype,"statisticType",void 0),d([f({type:Object})],Ss.prototype,"statisticParameters",void 0),d([ve("statisticParameters")],Ss.prototype,"writeStatisticParameters",null),Ss=Lb=d([k("esri.rest.support.StatisticDefinition")],Ss);const iZ=Ss;var Ff;const sZ=new Ft({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let K=Ff=class extends Z{static from(e){return mg(Ff,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const s in e){const n=e[s];Array.isArray(n)?i[s]=n.map(r=>r instanceof Date?r.getTime():r):n instanceof Date?i[s]=n.getTime():i[s]=n}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new Ff(F({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};K.MAX_MAX_RECORD_COUNT_FACTOR=5,d([f({json:{write:!0}})],K.prototype,"aggregateIds",void 0),d([f({type:Boolean,json:{write:!0}})],K.prototype,"cacheHint",void 0),d([f({type:Boolean,json:{default:!1,write:!0}})],K.prototype,"compactGeometryEnabled",void 0),d([f({json:{write:!0}})],K.prototype,"datumTransformation",void 0),d([Mt("datumTransformation")],K.prototype,"castDatumTransformation",null),d([f({type:Boolean,json:{default:!1,write:!0}})],K.prototype,"defaultSpatialReferenceEnabled",void 0),d([f({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],K.prototype,"distance",void 0),d([f({type:Yn,json:{write:!0}})],K.prototype,"dynamicDataSource",void 0),d([f({type:String,json:{write:!0}})],K.prototype,"formatOf3DObjects",void 0),d([f({type:[eZ],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],K.prototype,"fullText",void 0),d([f({type:String,json:{write:!0}})],K.prototype,"gdbVersion",void 0),d([f({types:Qg,json:{read:Pc,write:!0}})],K.prototype,"geometry",void 0),d([f({type:Number,json:{write:!0}})],K.prototype,"geometryPrecision",void 0),d([f({type:[String],json:{write:!0}})],K.prototype,"groupByFieldsForStatistics",void 0),d([f({type:String,json:{write:!0}})],K.prototype,"having",void 0),d([f({type:Date})],K.prototype,"historicMoment",void 0),d([ve("historicMoment")],K.prototype,"writeHistoricMoment",null),d([f({type:Number,json:{write:!0}})],K.prototype,"maxAllowableOffset",void 0),d([f({type:Number,cast:e=>e<1?1:e>K.MAX_MAX_RECORD_COUNT_FACTOR?K.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],K.prototype,"maxRecordCountFactor",void 0),d([f({type:["xyFootprint"],json:{write:!0}})],K.prototype,"multipatchOption",void 0),d([f({type:Number,json:{read:{source:"resultRecordCount"}}})],K.prototype,"num",void 0),d([f({json:{write:!0}})],K.prototype,"objectIds",void 0),d([f({type:[String],json:{write:!0}})],K.prototype,"orderByFields",void 0),d([f({type:[String],json:{write:!0}})],K.prototype,"outFields",void 0),d([f({type:ge,json:{name:"outSR",write:!0}})],K.prototype,"outSpatialReference",void 0),d([f({type:[iZ],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],K.prototype,"outStatistics",void 0),d([f({json:{write:!0}})],K.prototype,"parameterValues",void 0),d([ve("parameterValues")],K.prototype,"writeParameterValues",null),d([f({type:ae,json:{write:!0}})],K.prototype,"pixelSize",void 0),d([f({type:WI,json:{write:!0}})],K.prototype,"quantizationParameters",void 0),d([f({type:[Object],json:{write:!0}})],K.prototype,"rangeValues",void 0),d([f({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],K.prototype,"relationParameter",void 0),d([f({type:String,json:{write:!0}})],K.prototype,"resultType",void 0),d([f({type:Boolean,json:{default:!1,write:!0}})],K.prototype,"returnCentroid",void 0),d([f({type:Boolean,json:{default:!1,write:!0}})],K.prototype,"returnDistinctValues",void 0),d([f({type:Boolean,json:{default:!0,write:!0}})],K.prototype,"returnExceededLimitFeatures",void 0),d([f({type:Boolean,json:{write:!0}})],K.prototype,"returnGeometry",void 0),d([f({type:Boolean,json:{default:!1,write:!0}})],K.prototype,"returnQueryGeometry",void 0),d([f({type:Boolean,json:{default:!1,write:!0}})],K.prototype,"returnM",void 0),d([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],K.prototype,"returnZ",void 0),d([f({type:ge,json:{write:!0}})],K.prototype,"sourceSpatialReference",void 0),d([se(tZ,{ignoreUnknown:!1,name:"spatialRel"})],K.prototype,"spatialRelationship",void 0),d([f({type:Number,json:{read:{source:"resultOffset"}}})],K.prototype,"start",void 0),d([ve("start"),ve("num")],K.prototype,"writeStart",null),d([f({type:String,json:{write:!0}})],K.prototype,"sqlFormat",void 0),d([f({type:String,json:{write:!0}})],K.prototype,"text",void 0),d([f({type:Rw,json:{write:!0}})],K.prototype,"timeExtent",void 0),d([f({type:Boolean,json:{default:!1,write:!0}})],K.prototype,"timeReferenceUnknownClient",void 0),d([se(sZ,{ignoreUnknown:!1}),f({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],K.prototype,"units",void 0),d([f({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],K.prototype,"where",void 0),d([ve("where")],K.prototype,"writeWhere",null),K=Ff=d([k("esri.rest.support.Query")],K);const O$=K;function Tp(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let Vn=class extends Eo.EventedAccessor{constructor(e){super(e),this._selectionMap=new Df,this._sources=new ee,this._trashCan=[],this._layerEditHandles=new ee,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([le(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),Ka(()=>this.sources,"change",t=>{const i=this._selectionMap;for(const s of t.removed)i.delete(s);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const e=new ee;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(t=>"sublayers"in t&&t.sublayers?t.sublayers:null).forEach(t=>{(Tp(t)&&!P8(t)||Qo(t))&&e.add(t)}),this.sources=e)})}destroy(){this._layerEditHandles.drain(et)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[t,i]=e;return{layer:t,selection:[...i.selection]}})}get count(){let e=0;for(const t of this._selectionMap.values())e+=t.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){vo(e,this._sources)}async getSelectedFeatures(e,t={},i="layerView"){const{view:s,selections:n}=this,r=(e!==void 0?n.filter(o=>e.includes(o.layer)):n).filter(o=>o.selection.length>0).map(async o=>{const{layer:a,selection:l}=o,c=Qo(a)?a.parent:a;if(c==null||!A$(c))return null;if(i==="layer")return C$(c,l,t);if(E$(c))return null;const h=await s.whenLayerView(c).catch(()=>null);return h?C$(h,l,t):null});return(await Promise.all(r)).filter(o=>o!=null)}updateSelection(e){const t=new Map;for(const[n,r]of this._selectionMap)t.set(n,[...r.selection]);let i=!1;const s=e.current.concat(e.added);for(const n of s){const r=n.sourceLayer,o=n.getObjectId();if(this.sources.includes(r)&&(Tp(r)||Qo(r))&&o!==null){const a=b3(t,r,()=>[]);a.includes(o)||(a.push(o),i=!0)}}for(const n of e.removed){const r=n.sourceLayer,o=n.getObjectId();if(this.sources.includes(r)&&(Tp(r)||Qo(r))&&o!==null){const a=t.get(r),l=a?.indexOf(o);l!==void 0&&l>=0&&(a?.splice(l,1),i=!0)}}if(i){const{_selectionMap:n,_trashCan:r}=this,o=[];for(const[a,l]of t){const c=n.get(a);c!==void 0&&r.push(c),n.set(a,{selection:l}),o.push({layer:a,selection:l,...nx(c!==void 0?c.selection:[],l)})}this._onSelectionChange(o)}}setSelection(e,t){this._setSelection(e,t)}getSelection(e){return this._selectionMap.get(e)?.selection}appendToSelection(e,t){const i=this._selectionMap.get(e),s=i!==void 0?[...i.selection]:[];for(const n of t)s.includes(n)||s.push(n);this._setSelection(e,s)}removeFromSelection(e,t){const i=this._selectionMap.get(e);if(!i)return;const s=[];for(const n of i.selection)t.includes(n)||s.push(n);this._setSelection(e,s)}toggleInSelection(e,t){const i=this._selectionMap.get(e);if(!i||i.selection.length===0)return void this._setSelection(e,t);const s=new Set(i.selection),n=new Set(t),r=A4(s,n);this._setSelection(e,Array.from(r))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const t=[];for(const[i,s]of this._selectionMap.entries())t.push({layer:i,added:[],removed:[...s.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(t)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();const{sources:e,view:t,_selectionMap:i,showHighlight:s}=this,n=this._vizTaskId;for(const r of e){const o=i.get(r),a=Qo(r)?r.parent:r;if(a!=null&&A$(a)){if(E$(a))continue;t.whenLayerView(a).then(l=>{o?.highlightHandle?.remove(),o!=null&&s&&n===this._vizTaskId&&"highlight"in l&&typeof l.highlight=="function"&&o.selection.length>0&&(o.highlightHandle=l.highlight(o.selection,"selection"))}).catch(()=>{o?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(et);for(const e of this.sources){const t=Qo(e)?e.parent:e;if(t!=null&&Tp(t)){const i=t.on("edits",s=>{this._handleEditChanges(s,e)});this._layerEditHandles.push(i)}}}_handleEditChanges(e,t){if(e.deletedFeatures!==void 0&&e.deletedFeatures.length>0&&this._selectionMap.has(t)){const i=e.deletedFeatures.filter(s=>s.error==null).map(s=>s.objectId).filter(Ih);this.removeFromSelection(t,i)}}_setSelection(e,t){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const i=this._selectionMap.get(e);if(i===void 0||!rZ(i,{selection:t})){i!==void 0&&this._trashCan.push(i),this._selectionMap.set(e,{selection:[...t]});const s={layer:e,selection:[...t],...nx(i!==void 0?i.selection:[],t)};this._onSelectionChange([s])}}};d([f({readOnly:!0,nonNullable:!0})],Vn.prototype,"selections",null),d([f({readOnly:!0,nonNullable:!0})],Vn.prototype,"count",null),d([f({constructOnly:!0,nonNullable:!0})],Vn.prototype,"view",void 0),d([f({readOnly:!0,nonNullable:!0})],Vn.prototype,"hasSelection",null),d([f()],Vn.prototype,"showHighlight",void 0),d([f()],Vn.prototype,"sources",null),Vn=d([k("esri.views.SelectionManager")],Vn);const E$=e=>Qo(e)?e.parent?.isTable===!0:e.isTable,nZ=e=>e.layer!==void 0,A$=e=>e?.when!==void 0,rZ=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const i=[...e.selection],s=[...t.selection];if(i.length!==s.length)return!1;i.sort(),s.sort();for(let n=0;n<i.length;n++)if(i[n]!==s[n])return!1}return!0},C$=async(e,t,i={})=>{let s;if(nZ(e)){const n=e;s=n===void 0?null:await n.queryFeatures(new O$({...i,objectIds:t})).then(r=>({data:r,layer:e.layer}))}else{const n=e;s=n===void 0?null:await n.queryFeatures(new O$({...i,objectIds:t})).then(r=>({data:r,layer:n}))}return s},oZ=Vn;let Ku=class extends vn(Q){constructor(e){super(e),this.accentColor=new _e([255,127,0]),this.textColor=new _e([255,255,255])}};d([f({type:_e,nonNullable:!0})],Ku.prototype,"accentColor",void 0),d([f({type:_e,nonNullable:!0})],Ku.prototype,"textColor",void 0),Ku=d([k("esri.views.Theme")],Ku);const Rb=Ku;var I$;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(I$||(I$={}));const BI=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],HI={};function GI(e){return!!HI[e]}function aZ(e){for(const t of e)if(!GI(t))return!1;return!0}BI.forEach(e=>{HI[e]=!0});class lZ{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:i,priority:s},n)=>this.inputManager?.installHandlers(n,[i],s))}disconnect(){this.inputManager&&this._handlers.forEach((t,i)=>this.inputManager?.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,i,s,n){const r=Array.isArray(t)?t:t.split(",");if(!aZ(r))return r.some(GI)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof s=="function"?o=s:n=s,n=n??mo.DEFAULT;const l=this._createUniqueGroupName(),c=new cZ(this.view,r,a,o);this._handlers.set(l,{handler:c,priority:n});for(const h of r){const p=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,p+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],n),Ee(()=>this._removeHandler(l,r))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,i){if(this._handlers.has(t)){this._handlers.delete(t);for(const s of i){const n=this._handlerCounts.get(s);n===void 0||(n===1?this._handlerCounts.delete(s):this._handlerCounts.set(s,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}}class cZ extends Et{constructor(t,i,s,n){super(!0),this._latestDragStart=void 0,this.view=t;for(const r of i)switch(r){case"click":this.registerIncoming("click",s,o=>n(dZ(t,o)));break;case"double-click":this.registerIncoming("double-click",s,o=>n(pZ(t,o)));break;case"immediate-click":this.registerIncoming("immediate-click",s,o=>n(fZ(t,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",s,o=>n(mZ(t,o)));break;case"hold":this.registerIncoming("hold",s,o=>n(gZ(t,o)));break;case"drag":this.registerIncoming("drag",s,o=>{const a=this._wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",s,o=>n(yZ(o)));break;case"key-up":this.registerIncoming("key-up",s,o=>n(vZ(o)));break;case"pointer-down":this.registerIncoming("pointer-down",s,o=>n(lu(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",s,o=>n(lu(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",s,o=>n(lu(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",s,o=>n(bZ(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",s,o=>n(_Z(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",s,o=>n(lu(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",s,o=>n(lu(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",s,o=>{n(wZ(o))});break;case"focus":this.registerIncoming("focus",s,o=>{n(uZ(o))});break;case"blur":this.registerIncoming("blur",s,o=>{n(hZ(o))})}}_wrapDrag(t){const i=t.data,{x:s,y:n}=i.center,{action:r,pointerType:o,button:a}=i;if(r==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const l=i.pointer.native,c=i.buttons,{cancelable:h,timestamp:p}=t,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return r==="end"&&(this._latestDragStart=void 0),{type:"drag",action:r,x:s,y:n,origin:m,pointerType:o,button:a,buttons:c,radius:i.radius,angle:jA(i.angle),native:l,timestamp:p,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}}function uZ(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function hZ(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function dZ(e,t){const{pointerType:i,button:s,buttons:n,x:r,y:o,native:a,eventId:l}=t.data,{cancelable:c,timestamp:h}=t;return{type:"click",pointerType:i,button:s,buttons:n,x:r,y:o,native:a,timestamp:h,screenPoint:Ut(r,o),mapPoint:Ld(e,r,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:p=>t.async(p),preventDefault:()=>t.preventDefault()}}function pZ(e,t){const{pointerType:i,button:s,buttons:n,x:r,y:o,native:a,eventId:l}=t.data,{cancelable:c,timestamp:h}=t;return{type:"double-click",pointerType:i,button:s,buttons:n,x:r,y:o,native:a,timestamp:h,mapPoint:Ld(e,r,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:p=>t.async(p),preventDefault:()=>t.preventDefault()}}function fZ(e,t){const{pointerType:i,button:s,buttons:n,x:r,y:o,native:a,eventId:l}=t.data,c=a.pointerId,{cancelable:h,timestamp:p}=t;return{type:"immediate-click",pointerId:c,pointerType:i,button:s,buttons:n,x:r,y:o,native:a,timestamp:p,mapPoint:Ld(e,r,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function mZ(e,t){const{pointerType:i,button:s,buttons:n,x:r,y:o,native:a,eventId:l}=t.data,c=a.pointerId,{cancelable:h,timestamp:p}=t;return{type:"immediate-double-click",pointerId:c,pointerType:i,button:s,buttons:n,x:r,y:o,native:a,timestamp:p,mapPoint:Ld(e,r,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function gZ(e,t){const{pointerType:i,button:s,buttons:n,x:r,y:o,native:a}=t.data,{cancelable:l,timestamp:c}=t;return{type:"hold",pointerType:i,button:s,buttons:n,x:r,y:o,native:a,timestamp:c,mapPoint:Ld(e,r,o),cancelable:l,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}function Ld(e,t,i){return e.toMap(Ut(t,i),{exclude:[]})}function yZ(e){const{key:t,repeat:i,native:s}=e.data,{cancelable:n,timestamp:r}=e;return{type:"key-down",key:t,repeat:i,native:s,timestamp:r,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function vZ(e){const{key:t,native:i}=e.data,{cancelable:s,timestamp:n}=e;return{type:"key-up",key:t,native:i,timestamp:n,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:r=>e.async(r),preventDefault:()=>e.preventDefault()}}function lu(e,t){const{x:i,y:s,button:n,buttons:r,native:o,eventId:a}=e.data,l=o.pointerId,c=o.pointerType,{cancelable:h,timestamp:p}=e;return{type:t,x:i,y:s,pointerId:l,pointerType:c,button:n,buttons:r,native:o,timestamp:p,eventId:a,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}function bZ(e){const{x:t,y:i,buttons:s,native:n,eventId:r}=e.data.currentEvent,{button:o}=e.data.startEvent,a=e.data.startEvent.native.pointerId,l=e.data.startEvent.native.pointerType,c=e.data.action,h={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:p,timestamp:m}=e;return{type:"pointer-drag",x:t,y:i,pointerId:a,pointerType:l,button:o,buttons:s,action:c,origin:h,native:n,timestamp:m,eventId:r,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}function _Z(e){const{cancelable:t,data:i,timestamp:s}=e,{x:n,y:r,deltaY:o,native:a}=i;return{type:"mouse-wheel",x:n,y:r,deltaY:o,native:a,timestamp:s,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}function wZ(e){const{action:t,state:i,device:s}=e.data,{cancelable:n,timestamp:r}=e,{buttons:o,axes:a}=i;return{type:"gamepad",device:s,timestamp:r,action:t,buttons:o,axes:a,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}var Kh,L$,R$;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Kh||(Kh={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(L$||(L$={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(R$||(R$={}));function xZ(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return B.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function Db(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(Kh.USER)&&e.getEditableFlag(Kh.MANAGER)}function Xs(e){return Ut(e.x,e.y)}function qI(e,t){const i=(e instanceof HTMLElement?e:e.surface)?.getBoundingClientRect();return i?Ut(t.clientX-i.left,t.clientY-i.top):Ut(0,0)}function YI(e,t){return t instanceof Event?qI(e,t):Xs(t)}function ZI(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class SZ{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,i){const s=()=>t.stopPropagation();switch(t.type){case"pointer-move":N$(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(s(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!F$(t))break;const n=Xs(t),r=gl(n,t.pointerType,i.forEachTool);if(r==null)break;const o=r.manipulator,a=r.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,t,i),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:a,start:n,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(r.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),s());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!F$(t))break;const n=this._grabbedManipulators.get(t.pointerId),r=n?.manipulator,o=n?.tool;if(r==null||o==null)break;const a=Xs(t);a.x=mn(a.x,0,i.view.width),a.y=mn(a.y,0,i.view.height);const l=n.start,c=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(r.dragging=!0,c?r.events.emit("drag",{action:"update",start:l,screenPoint:a}):r.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:r,start:l}));break;case"end":r.dragging=!1,c&&r.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}s();break}case"immediate-click":{const n=Xs(t),r=gl(n,t.pointerType,i.forEachTool);if(MZ(t)||i.forEachTool(c=>{if((r==null||r.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let h=!1;c.manipulators.forEach(({manipulator:p})=>{p.selected&&(p.selected=!1,h=!0)}),h&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}}),r==null)break;const{manipulator:o,tool:a}=r;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:s}),b0(o,s);break}case"click":{const n=Xs(t),r=gl(n,t.pointerType,i.forEachTool),o=r?.manipulator;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a}),s();break}case"double-click":{const n=Xs(t),r=gl(n,t.pointerType,i.forEachTool),o=r!=null?r.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:s}),b0(o,s);break}case"immediate-double-click":{const n=Xs(t),r=gl(n,t.pointerType,i.forEachTool),o=r!=null?r.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:s}),b0(o,s);break}}this._onFocusChange(i.forEachTool)}_releaseManipulatorBeforeDragging(t,i,s){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Xs(i)}),this._grabbedManipulators.forEach(({manipulator:n},r)=>{n===t&&this._grabbedManipulators.delete(r)}),this._afterManipulatorRelease(s.setActiveTool)}_handlePointerEnd(t,i){const s=this._grabbedManipulators.get(t.pointerId)?.manipulator;s!=null&&s.grabbing&&(s.grabbing=!1,s.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Xs(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=D$(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=D$(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set,s=new Set;this._grabbedManipulators.forEach(({tool:n})=>{i.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{s.add(n)}),t(n=>{n.hasGrabbedManipulators=i.has(n),n.hasHoveredManipulators=s.has(n);const r=this._grabbedManipulators.values(),o=QN(r,({tool:a})=>a===n);n.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(t,{forEachTool:i,setActiveTool:s},n=!0,r){const o=(a,l)=>a===t&&(r==null||r===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:c},h)=>{o(a,l)&&(this._grabbedManipulators.delete(h),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._draggedManipulators.delete(c),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._hoveredManipulators.delete(c),l.hovering=!1)}),this._afterManipulatorRelease(s),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,s)=>{this._updateHoveredStateForPointerAtScreenPosition(Ut(i.x,i.y),s,i.pointerType,t)})}handleHoverEvent(t,i){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!N$(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Xs(t),t.pointerId,t.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(t,i,s,n){let r=gl(t,s,n);const o=this._hoveredManipulators.get(i)?.manipulator;r==null||r.manipulator.interactive||(r=null),r!=null&&o===r.manipulator||(o!=null&&(o.hovering=!1),r!=null?(r.manipulator.hovering=!0,this._hoveredManipulators.set(i,r)):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}}function D$(e){let t=null;return fg(e,({manipulator:i})=>!(i==null||!i.interactive)&&(i.grabbing&&i.grabCursor?(t=i.grabCursor,!0):!!i.cursor&&(t=i.cursor,!0))),t}function gl(e,t,i){let s=null;return i(n=>{if(n.manipulators==null||!Db(n))return!1;const r=n.manipulators.intersect(e,t);return r!=null&&(s={tool:n,manipulator:r},!0)}),s}function N$(e){return e==="mouse"}function F$(e){return e.pointerType!=="mouse"||e.button===0}function MZ(e){return!!e.native.shiftKey}function b0(e,t){e?.consumesClicks&&t()}const j$="attached",_0="tools",$Z=1e3;let Ks=class extends Q{constructor(e){super(e),this._updatingHandles=new za,this._clock=Rc,this._manipulatorState=new SZ,this.tools=new ee,this.cursor=null,this._interacting=!1,this._interactingTimeout=$Z,this._interactingTimeoutHandle=null,this._forEachTool=t=>{for(const i of this.tools.items)if(t(i))return}}initialize(){this.addHandles([this.view.on(BI,e=>{this._handleInputEvent(e)},mo.TOOL),...xZ(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void B.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),t?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(const i of this.tools){this._updateToolEditableFlag(i);const s=Db(i);this.activeTool!=null&&s||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!s)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=et(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([le(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider?.on("elevation-change",e=>this._forEachManipulator(t=>t.onElevationChange(e)))],j$):this.addHandles(le(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(j$),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:i})=>e(i,t))})}_handleInputEvent(e){let t=!1;const i={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(s=>{!t&&s.visible&&s.handleInputEvent(i)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),t||this.activeTool==null||this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(_0),this._forEachTool(e=>{if(e instanceof Q){const t=le(()=>[e.cursor,e.visible,e.editable],()=>{Db(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(t,_0)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",t=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,t.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],_0)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){e.setEditableFlag?.(Kh.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(t=>!(t.cursor==null||!t.visible)&&(e=t.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(t=>(e==null||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}get test(){}};d([f({constructOnly:!0,nonNullable:!0})],Ks.prototype,"view",void 0),d([f({value:null})],Ks.prototype,"activeTool",null),d([f({readOnly:!0,type:ee})],Ks.prototype,"tools",void 0),d([f({readOnly:!0})],Ks.prototype,"cursor",void 0),d([f({readOnly:!0})],Ks.prototype,"updating",null),d([f()],Ks.prototype,"_interacting",void 0),d([f({readOnly:!0})],Ks.prototype,"interacting",null),Ks=d([k("esri.views.ToolViewManager")],Ks);let zl=class extends Q{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":TZ.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return kZ[this.deviceType]}};d([f({nonNullable:!0,readOnly:!0})],zl.prototype,"nativeIndex",void 0),d([f({type:String,readOnly:!0})],zl.prototype,"deviceType",null),d([f({type:Number,readOnly:!0})],zl.prototype,"axisThreshold",null),zl=d([k("esri.views.input.gamepad.GamepadInputDevice")],zl);const u2=zl,TZ=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),kZ={standard:.15,spacemouse:.025,unknown:0};let Qu=class extends Q{constructor(...e){super(...e),this.devices=new ee,this.enabledFocusMode="document"}};d([f({type:ee.ofType(u2),readOnly:!0})],Qu.prototype,"devices",void 0),d([f({type:["document","view","none"]})],Qu.prototype,"enabledFocusMode",void 0),Qu=d([k("esri.views.input.gamepad.GamepadSettings")],Qu);const PZ=Qu;let jf=class extends Q{constructor(){super(...arguments),this.gamepad=new PZ}};d([f({readOnly:!0})],jf.prototype,"gamepad",void 0),jf=d([k("esri.views.input.Input")],jf);const OZ=jf,JI=()=>Me.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;let Gr=class extends Q{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};d([f({type:Boolean,nonNullable:!0})],Gr.prototype,"enabled",void 0),d([f({type:u2})],Gr.prototype,"device",void 0),d([f({type:["pan","zoom"],nonNullable:!0})],Gr.prototype,"mode",void 0),d([f({type:["forward-down","forward-up"],nonNullable:!0})],Gr.prototype,"tiltDirection",void 0),d([f({type:Number,nonNullable:!0})],Gr.prototype,"velocityFactor",void 0),Gr=d([k("esri.views.navigation.gamepad.GamepadSettings")],Gr);const XI=Gr;let va=class extends Q{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new XI,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!JI()}};d([f({type:Boolean})],va.prototype,"browserTouchPanEnabled",void 0),d([f({type:XI,nonNullable:!0})],va.prototype,"gamepad",void 0),d([f({type:Boolean})],va.prototype,"momentumEnabled",void 0),d([f({type:Boolean})],va.prototype,"mouseWheelZoomEnabled",void 0),va=d([k("esri.views.navigation.Navigation")],va);const KI=va,QI={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},eL=Object.values(QI),tL=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${eL.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),EZ=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${eL.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),AZ=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function ade(e){return tL.test(e)}function h2(e){if(e==null)return null;const t=hi(e),i=t?.path.match(tL)||t?.path.match(EZ);if(!i)return null;const[,s,n,r,o]=i,a=n.indexOf("/");return{title:iL(a!==-1?n.slice(a+1):n),serverType:QI[r.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:s}}}function CZ(e){const t=hi(e).path.match(AZ);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function iL(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function lde(e,t){const i=[];if(e){const s=h2(e);s!=null&&s.title&&i.push(s.title)}if(t){const s=iL(t);i.push(s)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function cde(e){let t=rs(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function ude(e,t){return e&&vP(bP(e,t))}function hde(e){let{url:t}=e;if(!t)return{url:t};t=bP(t,e.logger);const i=hi(t),s=h2(i.path);let n;if(s!=null)s.sublayer!=null&&e.layer.layerId==null&&(n=s.sublayer),t=s.url.path;else if(e.nonStandardUrlAllowed){const r=CZ(i.path);r!=null&&(t=r.serviceUrl,n=r.sublayerId)}return{url:vP(t),layerId:n}}function dde(e,t,i,s,n){_c(t,s,"url",n),s.url&&e.layerId!=null&&(s.url=xg(s.url,i,e.layerId.toString()))}function pde(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),s=t.includes("/mapserver/wmsserver"),n=t.includes("/imageserver/wmsserver"),r=t.includes("/wmsserver");return i&&(s||n||r)}var z$;function IZ(e){if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?h2(e.url):void 0;return!(e.spatialReference?.vcsWkid==null&&t!=null&&t.serverType==="ImageServer")&&sL(e)&&e.heightModelInfo?e.heightModelInfo:LZ(e)?c2.deriveUnitFromSR(DZ,e.spatialReference):null}function sL(e){return"heightModelInfo"in e}function nL(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function LZ(e){return nL(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):rL(e)}function RZ(e){return e.layers!=null||rL(e)||nL(e)||sL(e)}function rL(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(z$||(z$={}));const DZ=new c2({heightModel:"gravity-related-height"});var Ym;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(Ym||(Ym={}));let Nb,w0=null;async function NZ(e){w0||(w0=W(()=>import("./geometryServiceUtils.60c5ed45.js"),["assets/geometryServiceUtils.60c5ed45.js","assets/project.aab65bc4.js"]).then(t=>Nb=t)),await w0,pt(e)}async function oL(e,t,i,s){if(!e)return null;const n=e.spatialReference;return fr()||Rs(n,t)?ll(e,t):Nb?Nb.projectGeometry(e,t,i,s):(await Promise.race([NZ(s),dr(s)]),oL(e,t,i,s))}let Ie=class extends Q{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Dh(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),t=[];return this.priorityCollection!=null&&t.push(this.priorityCollection),t.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:t}=this._allLayers;let i=null;for(const n of e){const r=this._getSupportedSpatialReferences(n);if(r.length>0){const o=this._narrowDownSpatialReferenceCandidates(i,r);o!=null&&(i=o)}if(i!=null&&i.length===1)break}if(t&&(i==null||i.length!==1))return{updating:!0};const s=this._pickSpatialReferenceCandidate(i);return{spatialReference:s?.spatialReference??null,viewingMode:s?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:this.map?.()?.basemap,layers:this.map?.()?.basemap?.baseLayers},{layers:this.map?.()?.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const i=e[0].tileInfo;return{tileInfo:i?.spatialReference.equals(this.spatialReference)?i:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const i of e)if(RZ(i)){const s=IZ(i);if(s)return{heightModelInfo:s,vcsWkid:i.spatialReference?.vcsWkid,latestVcsWkid:i.spatialReference?.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,i=[];for(const s of e.layers){const n="fullExtents"in s&&s.fullExtents||(s.fullExtent!=null?[s.fullExtent]:[]),r=this.requiresExtentInSpatialReference?null:n[0],o=n.find(a=>a.spatialReference.equals(this.spatialReference))??r;if(o)return{candidates:[{extent:o,layer:s}],updating:!1};if(this._getSupportedSpatialReferences(s).length>0)for(const a of n)i.push({extent:a,layer:s})}return{candidates:i,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),s=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=Dh(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:s.clone(),task:z_(async n=>{try{const r=await oL(i.extent,s,"portalItem"in i.layer?i.layer.portalItem:void 0,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:r}}catch{if(ur(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(e==null)return t;const i=new Array;for(const s of e)for(const n of t){if(!s.spatialReference.equals(n.spatialReference))continue;const r=jZ(s.viewingMode,n.viewingMode);if(r!==!1){i.push({spatialReference:s.spatialReference,viewingMode:r});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return e==null||e.length<1?t?{spatialReference:t,viewingMode:null}:null:(t!=null&&e.length>1&&e.some(({spatialReference:i})=>i.equals(t))&&(e=e.filter(({spatialReference:i})=>i.equals(t))),e.length>1&&e.some(({viewingMode:i})=>i!==Ym.Local)&&(e=e.filter(({viewingMode:i})=>i!==Ym.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const i=[];for(const s of t){const n=this.getSpatialReferenceSupport(s,e);if(n!=null){const r=n.constraints??[{spatialReference:s,viewingMode:null}];for(const{spatialReference:o,viewingMode:a}of r)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!o.equals(this.userSpatialReference)||i.push({spatialReference:o,viewingMode:a})}}return i}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:i})=>t.equals(i.spatialReference))||e[0]}_collectLayers(e){if(this._loadMaybe(this.map?.())!=="loaded")return{layers:[],updating:!0};const t=new FZ;for(const i of e)if(this._collectCollection(i,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const i of e.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(t=>{us(t)||console.log(t)}),"loading"):e.loadStatus:"loaded"}};d([f()],Ie.prototype,"required",void 0),d([f({constructOnly:!0})],Ie.prototype,"map",void 0),d([f({constructOnly:!0})],Ie.prototype,"getSpatialReferenceSupport",void 0),d([f()],Ie.prototype,"defaultSpatialReference",void 0),d([f()],Ie.prototype,"userSpatialReference",void 0),d([f()],Ie.prototype,"sourcePreloadCount",void 0),d([f()],Ie.prototype,"priorityCollection",void 0),d([f()],Ie.prototype,"requiresExtentInSpatialReference",void 0),d([f()],Ie.prototype,"suspended",void 0),d([f({readOnly:!0})],Ie.prototype,"ready",null),d([f({readOnly:!0})],Ie.prototype,"heightModelInfoReady",null),d([f({readOnly:!0})],Ie.prototype,"spatialReference",null),d([f({readOnly:!0})],Ie.prototype,"extent",null),d([f({readOnly:!0})],Ie.prototype,"heightModelInfo",null),d([f({readOnly:!0})],Ie.prototype,"vcsWkid",null),d([f({readOnly:!0})],Ie.prototype,"latestVcsWkid",null),d([f({readOnly:!0})],Ie.prototype,"viewingMode",null),d([f({readOnly:!0})],Ie.prototype,"tileInfo",null),d([f({readOnly:!0})],Ie.prototype,"mapCollections",null),d([f({readOnly:!0})],Ie.prototype,"_allLayers",null),d([f({readOnly:!0})],Ie.prototype,"_spatialReferenceTask",null),d([f({readOnly:!0})],Ie.prototype,"_tileInfoTask",null),d([f({readOnly:!0})],Ie.prototype,"_heightModelInfoTask",null),d([f({readOnly:!0})],Ie.prototype,"_extentCandidatesTask",null),d([f()],Ie.prototype,"_extentTask",null),d([f()],Ie.prototype,"_projectExtentTask",void 0),Ie=d([k("esri.views.support.DefaultsFromMap")],Ie);class FZ{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}}function jZ(e,t){return e!=null?t!=null?e===t&&e:e:t}var eh;let J=eh=class extends Eo.EventedMixin(N_(Q)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new pd,this.updatingHandles=new za,this.allLayerViews=new Zh({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:VZ}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new ja,this.analyses=new qm,this.typeSpecificPreconditionsReady=!0,this.layerViews=new ee,this.magnifier=new jI,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new OZ,this.navigation=new KI,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new lZ(this),this.persistableViewModels=new ee,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this.theme=null,this.handles.add(le(()=>this.preconditionsReady,t=>{const i=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,eh.views.add(this)):(this._lockedSpatialReference=null,eh.views.remove(this)),this.notifyChange("spatialReference"),!t&&i)this.toolViewManager?.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown();else if(t&&!i){try{this._startup()}catch(s){return void queueMicrotask(()=>{this.fatalError=new V("startup-error",null,s)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},Qa))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,Bg(()=>this.ready)))),this.basemapView=new Hr({view:this}),this.layerViewManager=new BY({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Ks({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new oZ({view:this}),this.addHandles([le(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},es),le(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Qa),le(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},es)])}_setupSpatialReferenceLogger(){let e=null;this.addHandles([le(()=>this.defaultsFromMap?.ready,t=>{const i=this.map?.allLayers.length>0;if(t&&!this.spatialReference&&i){if(e!=null)return;const s=Ee(()=>e=Dh(e));e=z_(async n=>{try{await tP(this.spatialReferenceWarningDelay,null,n)}catch{return}finally{e=null}B.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.addHandles(s,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){this.destroyed||(eh.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Ke(this.graphics),this.analyses=Ke(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Ke(this.analysisViewManager),this.toolViewManager=Ke(this.toolViewManager),this.layerViewManager=Ke(this.layerViewManager),this.selectionManager=Ke(this.selectionManager),this.basemapView=Ke(this.basemapView),this.groundView?.destroy(),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=Ke(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return B.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Ie({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||bo.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(B.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),bo.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const t=e.clone();return t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,t}return e}set spatialReference(e){const t=!$t(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??fn}set timeZone(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(s=>s.toLowerCase()));this._userTimeZone=e,e===fn||e===cw||t.has(e.toLowerCase())||i.has(e.toLowerCase())||B.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new Rb}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}importLayerView(e){throw new V("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&B.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(hr(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};J.views=new ee,d([f()],J.prototype,"_userSpatialReference",void 0),d([f()],J.prototype,"activeTool",null),d([f({readOnly:!0})],J.prototype,"allLayerViews",void 0),d([f()],J.prototype,"groundView",void 0),d([f()],J.prototype,"animation",null),d([f()],J.prototype,"basemapView",void 0),d([f()],J.prototype,"center",null),d([f({readOnly:!0})],J.prototype,"_defaultsFromMapSettings",null),d([f()],J.prototype,"defaultsFromMap",null),d([f()],J.prototype,"fatalError",void 0),d([f({type:tt})],J.prototype,"extent",null),d([f(nv(ja,"graphics"))],J.prototype,"graphics",void 0),d([f(nv(qm,"analyses"))],J.prototype,"analyses",void 0),d([f({readOnly:!0,type:c2})],J.prototype,"heightModelInfo",null),d([f({readOnly:!0})],J.prototype,"interacting",null),d([f({readOnly:!0})],J.prototype,"navigating",null),d([f({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],J.prototype,"preconditionsReady",null),d([f({readOnly:!0})],J.prototype,"typeSpecificPreconditionsReady",void 0),d([f({type:ee,readOnly:!0})],J.prototype,"layerViews",void 0),d([f()],J.prototype,"resolution",null),d([f({type:jI})],J.prototype,"magnifier",void 0),d([f({value:null,type:EI})],J.prototype,"map",null),d([f()],J.prototype,"padding",void 0),d([f({readOnly:!0})],J.prototype,"ready",void 0),d([f({type:ge})],J.prototype,"spatialReference",null),d([f()],J.prototype,"spatialReferenceWarningDelay",void 0),d([f()],J.prototype,"stationary",null),d([f({readOnly:!0})],J.prototype,"supportsGround",void 0),d([f({type:Rw})],J.prototype,"timeExtent",void 0),d([f({type:String,nonNullable:!0})],J.prototype,"timeZone",null),d([f()],J.prototype,"tools",null),d([f()],J.prototype,"toolViewManager",void 0),d([f({readOnly:!0})],J.prototype,"type",void 0),d([f({type:Number})],J.prototype,"scale",void 0),d([f({readOnly:!0})],J.prototype,"updating",void 0),d([f({readOnly:!0})],J.prototype,"initialExtentRequired",void 0),d([f({readOnly:!0})],J.prototype,"initialExtent",null),d([f()],J.prototype,"cursor",null),d([f({readOnly:!0})],J.prototype,"input",void 0),d([f({type:KI,nonNullable:!0})],J.prototype,"navigation",void 0),d([f()],J.prototype,"layerViewManager",void 0),d([f()],J.prototype,"analysisViewManager",void 0),d([f()],J.prototype,"selectionManager",void 0),d([f()],J.prototype,"width",void 0),d([f()],J.prototype,"height",void 0),d([f({readOnly:!0})],J.prototype,"resizing",void 0),d([f({value:null,readOnly:!0})],J.prototype,"size",null),d([f({readOnly:!0})],J.prototype,"suspended",void 0),d([f({readOnly:!0})],J.prototype,"viewEvents",void 0),d([f({readOnly:!0})],J.prototype,"persistableViewModels",void 0),d([f()],J.prototype,"_isValid",void 0),d([f()],J.prototype,"_readyCycleForced",void 0),d([f()],J.prototype,"_lockedSpatialReference",void 0),d([f()],J.prototype,"_userTimeZone",void 0),d([f()],J.prototype,"_lockedTimeZone",void 0),d([f({type:Rb})],J.prototype,"theme",void 0),d([f({readOnly:!0,type:Rb})],J.prototype,"effectiveTheme",null),J=eh=d([k("esri.views.View")],J);const zZ=J;function VZ(e){return e.layerViews}function ot(){return[0,0]}function UZ(e){return[e[0],e[1]]}function Rd(e,t){return[e,t]}function WZ(e,t=ot()){const i=Math.min(2,e.length);for(let s=0;s<i;++s)t[s]=e[s];return t}function BZ(e,t){return new Float64Array(e,t,2)}function aL(){return ot()}function lL(){return Rd(1,1)}function cL(){return Rd(1,0)}function uL(){return Rd(0,1)}const HZ=aL(),GZ=lL(),qZ=cL(),YZ=uL();Object.freeze(Object.defineProperty({__proto__:null,ONES:GZ,UNIT_X:qZ,UNIT_Y:YZ,ZEROS:HZ,clone:UZ,create:ot,createView:BZ,fromArray:WZ,fromValues:Rd,ones:lL,unitX:cL,unitY:uL,zeros:aL},Symbol.toStringTag,{value:"Module"}));let qr=class extends pm{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=cs(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new V("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,t){t||(t=Oo(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};d([f({readOnly:!0})],qr.prototype,"done",null),d([f({readOnly:!0,type:String})],qr.prototype,"state",void 0),d([f()],qr.prototype,"target",void 0),qr=d([k("esri.views.ViewAnimation")],qr),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(qr||(qr={}));const Fb=qr;function fc(e,t){return e[0]=t[0],e[1]=t[1],e}function Lt(e,t,i){return e[0]=t,e[1]=i,e}function hL(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function Qh(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function dL(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function pL(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function ZZ(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function JZ(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function XZ(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function KZ(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function QZ(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function Dd(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function eJ(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e}function fy(e,t){const i=t[0]-e[0],s=t[1]-e[1];return Math.sqrt(i*i+s*s)}function Zm(e,t){const i=t[0]-e[0],s=t[1]-e[1];return i*i+s*s}function Jm(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function fL(e){const t=e[0],i=e[1];return t*t+i*i}function mL(e,t){return e[0]=-t[0],e[1]=-t[1],e}function tJ(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function jb(e,t){const i=t[0],s=t[1];let n=i*i+s*s;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function gL(e,t){return e[0]*t[0]+e[1]*t[1]}function yL(e,t,i){const s=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=s,e}function iJ(e,t,i,s){const n=t[0],r=t[1];return e[0]=n+s*(i[0]-n),e[1]=r+s*(i[1]-r),e}function sJ(e,t){t=t||1;const i=2*Q_()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function nJ(e,t,i){const s=t[0],n=t[1];return e[0]=i[0]*s+i[2]*n,e[1]=i[1]*s+i[3]*n,e}function nn(e,t,i){const s=t[0],n=t[1];return e[0]=i[0]*s+i[2]*n+i[4],e[1]=i[1]*s+i[3]*n+i[5],e}function rJ(e,t,i){const s=t[0],n=t[1];return e[0]=i[0]*s+i[3]*n+i[6],e[1]=i[1]*s+i[4]*n+i[7],e}function oJ(e,t,i){const s=t[0],n=t[1];return e[0]=i[0]*s+i[4]*n+i[12],e[1]=i[1]*s+i[5]*n+i[13],e}function aJ(e,t,i,s){const n=t[0]-i[0],r=t[1]-i[1],o=Math.sin(s),a=Math.cos(s);return e[0]=n*a-r*o+i[0],e[1]=n*o+r*a+i[1],e}function lJ(e,t){const i=e[0],s=e[1],n=t[0],r=t[1];let o=i*i+s*s;o>0&&(o=1/Math.sqrt(o));let a=n*n+r*r;a>0&&(a=1/Math.sqrt(a));const l=(i*n+s*r)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function cJ(e){return"vec2("+e[0]+", "+e[1]+")"}function uJ(e,t){return e[0]===t[0]&&e[1]===t[1]}function hJ(e,t){const i=e[0],s=e[1],n=t[0],r=t[1],o=Mi();return Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(s-r)<=o*Math.max(1,Math.abs(s),Math.abs(r))}function dJ(e,t,i,s,n){let r=t[0]-i[0],o=t[1]-i[1];const a=(s[0]*r+s[1]*o)*(n-1);return r=s[0]*a,o=s[1]*a,e[0]=t[0]+r,e[1]=t[1]+o,e}const pJ=Jm,d2=Qh,fJ=dL,mJ=pL,gJ=fy,yJ=Zm,vJ=fL;Object.freeze(Object.defineProperty({__proto__:null,add:hL,angle:lJ,ceil:ZZ,copy:fc,cross:yL,dist:gJ,distance:fy,div:mJ,divide:pL,dot:gL,equals:hJ,exactEquals:uJ,floor:JZ,inverse:tJ,len:pJ,length:Jm,lerp:iJ,max:KZ,min:XZ,mul:fJ,multiply:dL,negate:mL,normalize:jb,projectAndScale:dJ,random:sJ,rotate:aJ,round:QZ,scale:Dd,scaleAndAdd:eJ,set:Lt,sqrDist:yJ,sqrLen:vJ,squaredDistance:Zm,squaredLength:fL,str:cJ,sub:d2,subtract:Qh,transformMat2:nJ,transformMat2d:nn,transformMat3:rJ,transformMat4:oJ},Symbol.toStringTag,{value:"Module"}));function bJ(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function _J(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function wJ(e,t,i,s,n,r,o){return e[0]=t,e[1]=i,e[2]=s,e[3]=n,e[4]=r,e[5]=o,e}function p2(e,t){const i=t[0],s=t[1],n=t[2],r=t[3],o=t[4],a=t[5];let l=i*r-s*n;return l?(l=1/l,e[0]=r*l,e[1]=-s*l,e[2]=-n*l,e[3]=i*l,e[4]=(n*a-r*o)*l,e[5]=(s*o-i*a)*l,e):null}function xJ(e){return e[0]*e[3]-e[1]*e[2]}function vL(e,t,i){const s=t[0],n=t[1],r=t[2],o=t[3],a=t[4],l=t[5],c=i[0],h=i[1],p=i[2],m=i[3],g=i[4],y=i[5];return e[0]=s*c+r*h,e[1]=n*c+o*h,e[2]=s*p+r*m,e[3]=n*p+o*m,e[4]=s*g+r*y+a,e[5]=n*g+o*y+l,e}function my(e,t,i){const s=t[0],n=t[1],r=t[2],o=t[3],a=t[4],l=t[5],c=Math.sin(i),h=Math.cos(i);return e[0]=s*h+r*c,e[1]=n*h+o*c,e[2]=s*-c+r*h,e[3]=n*-c+o*h,e[4]=a,e[5]=l,e}function f2(e,t,i){const s=t[0],n=t[1],r=t[2],o=t[3],a=t[4],l=t[5],c=i[0],h=i[1];return e[0]=s*c,e[1]=n*c,e[2]=r*h,e[3]=o*h,e[4]=a,e[5]=l,e}function ed(e,t,i){const s=t[0],n=t[1],r=t[2],o=t[3],a=t[4],l=t[5],c=i[0],h=i[1];return e[0]=s,e[1]=n,e[2]=r,e[3]=o,e[4]=s*c+r*h+a,e[5]=n*c+o*h+l,e}function bL(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=i,e[2]=-i,e[3]=s,e[4]=0,e[5]=0,e}function _L(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function m2(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function SJ(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function MJ(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function $J(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function wL(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function TJ(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function kJ(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e[4]=t[4]+i[4]*s,e[5]=t[5]+i[5]*s,e}function PJ(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function OJ(e,t){const i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],a=e[5],l=t[0],c=t[1],h=t[2],p=t[3],m=t[4],g=t[5],y=Mi();return Math.abs(i-l)<=y*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-c)<=y*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(n-h)<=y*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-p)<=y*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(o-m)<=y*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=y*Math.max(1,Math.abs(a),Math.abs(g))}const EJ=vL,AJ=wL;Object.freeze(Object.defineProperty({__proto__:null,add:$J,copy:bJ,determinant:xJ,equals:OJ,exactEquals:PJ,frob:MJ,fromRotation:bL,fromScaling:_L,fromTranslation:m2,identity:_J,invert:p2,mul:EJ,multiply:vL,multiplyScalar:TJ,multiplyScalarAndAdd:kJ,rotate:my,scale:f2,set:wJ,str:SJ,sub:AJ,subtract:wL,translate:ed},Symbol.toStringTag,{value:"Module"}));function or(){return[1,0,0,1,0,0]}function CJ(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function IJ(e,t,i,s,n,r){return[e,t,i,s,n,r]}function LJ(e,t){return new Float64Array(e,t,6)}const RJ=or();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:RJ,clone:CJ,create:or,createView:LJ,fromValues:IJ},Symbol.toStringTag,{value:"Module"}));const kp={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Os({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:ge.WebMercator}),minus180Line:new Os({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:ge.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Os({paths:[[[180,-180],[180,180]]],spatialReference:ge.WGS84}),minus180Line:new Os({paths:[[[-180,-180],[-180,180]]],spatialReference:ge.WGS84})}};function Ia(e,t){return Math.ceil((e-t)/(2*t))}function xL(e,t){const i=kh(e);for(const s of i)for(const n of s)n[0]+=t;return e}function kh(e){return Iw(e)?e.rings:e.paths}function fde(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function DJ(e){return typeof e=="string"?hi(e):F(e)}function NJ(e,t,i){const s={};for(const n in e){if(n==="declaredClass")continue;const r=e[n];if(r!=null&&typeof r!="function")if(Array.isArray(r))s[n]=r.map(o=>NJ(o));else if(typeof r=="object")if(r.toJSON){const o=r.toJSON(i?.[n]);s[n]=t?o:JSON.stringify(o)}else s[n]=t?r:JSON.stringify(r);else s[n]=r}return s}async function FJ(e,t,i,s){const n=DJ(e),r=t[0].spatialReference,o={...s,responseType:"json",query:{...n.query,f:"json",sr:FP(r),target:JSON.stringify({geometryType:Lw(t[0]),geometries:t}),cutter:JSON.stringify(i)}},a=await Dt(n.path+"/cut",o),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map(h=>{const p=Pc(h);return p.spatialReference=r,p})}}function jJ(e){return{geometryType:Lw(e[0]),geometries:e.map(t=>t.toJSON())}}function zJ(e,t,i){const s=sH(t);return e.map(n=>{const r=s.fromJSON(n);return r.spatialReference=i,r})}async function VJ(e,t,i){const s=typeof e=="string"?hi(e):e,n=t[0].spatialReference,r=Lw(t[0]),o={...i,query:{...s.query,f:"json",sr:FP(n),geometries:JSON.stringify(jJ(t))}},{data:a}=await Dt(s.path+"/simplify",o);return zJ(a.geometries,r,n)}const SL=()=>B.getLogger("esri.geometry.support.normalizeUtils");function UJ(e){return e.type==="polygon"}function WJ(e){return e[0].type==="polygon"}function BJ(e){return e[0].type==="polyline"}function V$(e){const t=[];let i=0,s=0;for(let n=0;n<e.length;n++){const r=e[n];let o=null;for(let a=0;a<r.length;a++)o=r[a],t.push(o),a===0?(i=o[0],s=i):(i=Math.min(i,o[0]),s=Math.max(s,o[0]));o&&t.push([(i+s)/2,0])}return t}function HJ(e,t){if(!(e instanceof Os||e instanceof Mo)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw SL().error(n),new V(n)}const i=kh(e),s=[];for(const n of i){const r=[];s.push(r),r.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const a=n[o][0],l=n[o][1],c=n[o+1][0],h=n[o+1][1],p=Math.sqrt((c-a)*(c-a)+(h-l)*(h-l)),m=(h-l)/p,g=(c-a)/p,y=p/t;if(y>1){for(let x=1;x<=y-1;x++){const $=x*t,S=g*$+a,M=m*$+l;r.push([S,M])}const v=(p+Math.floor(y-1)*t)/2,b=g*v+a,w=m*v+l;r.push([b,w])}r.push([c,h])}}return UJ(e)?new Mo({rings:s,spatialReference:e.spatialReference}):new Os({paths:s,spatialReference:e.spatialReference})}function U$(e,t,i){if(t){const s=HJ(e,1e6);e=wu(s,!0)}return i&&(e=xL(e,i)),e}function W$(e,t,i){if(Array.isArray(e)){const s=e[0];if(s>t){const n=Ia(s,t);e[0]=s+n*(-2*t)}else if(s<i){const n=Ia(s,i);e[0]=s+n*(-2*i)}}else{const s=e.x;if(s>t){const n=Ia(s,t);e=e.clone().offset(n*(-2*t),0)}else if(s<i){const n=Ia(s,i);e=e.clone().offset(n*(-2*i),0)}}return e}function GJ(e,t){let i=-1;for(let s=0;s<t.cutIndexes.length;s++){const n=t.cutIndexes[s],r=t.geometries[s],o=kh(r);for(let a=0;a<o.length;a++){const l=o[a];l.some(c=>{if(c[0]<180)return!0;{let h=0;for(let m=0;m<l.length;m++){const g=l[m][0];h=g>h?g:h}h=Number(h.toFixed(9));const p=-360*Ia(h,180);for(let m=0;m<l.length;m++){const g=r.getPoint(a,m);r.setPoint(a,m,g.clone().offset(p,0))}return!0}})}if(n===i){if(WJ(e))for(const a of kh(r))e[n]=e[n].addRing(a);else if(BJ(e))for(const a of kh(r))e[n]=e[n].addPath(a)}else i=n,e[n]=r}return e}async function qJ(e,t,i){if(!Array.isArray(e))return qJ([e],t);t&&typeof t!="string"&&SL().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const s=typeof t=="string"?t:t?.url??Me.geometryServiceUrl;let n,r,o,a,l,c,h,p,m=0;const g=[],y=[];for(const S of e)if(S!=null)if(n||(n=S.spatialReference,r=Si(n),o=n.isWebMercator,c=o?102100:4326,a=kp[c].maxX,l=kp[c].minX,h=kp[c].plus180Line,p=kp[c].minus180Line),r)if(S.type==="mesh")y.push(S);else if(S.type==="point")y.push(W$(S.clone(),a,l));else if(S.type==="multipoint"){const M=S.clone();M.points=M.points.map(P=>W$(P,a,l)),y.push(M)}else if(S.type==="extent"){const M=S.clone()._normalize(!1,!1,r);y.push(M.rings?new Mo(M):M)}else if(S.extent){const M=S.extent,P=Ia(M.xmin,l)*(2*a);let C=P===0?S.clone():xL(S.clone(),P);M.offset(P,0);let{xmin:I,xmax:D}=M;I=Number(I.toFixed(9)),D=Number(D.toFixed(9)),M.intersects(h)&&D!==a?(m=D>m?D:m,C=U$(C,o),g.push(C),y.push("cut")):M.intersects(p)&&I!==l?(m=D*(2*a)>m?D*(2*a):m,C=U$(C,o,360),g.push(C),y.push("cut")):y.push(C)}else y.push(S.clone());else y.push(S);else y.push(S);let v=Ia(m,a),b=-90;const w=v,x=new Os;for(;v>0;){const S=360*v-180;x.addPath([[S,b],[S,-1*b]]),b*=-1,v--}if(g.length>0&&w>0){const S=GJ(g,await FJ(s,g,x,i)),M=[],P=[];for(let D=0;D<y.length;D++){const N=y[D];if(N!=="cut")P.push(N);else{const U=S.shift(),H=e[D];H!=null&&H.type==="polygon"&&H.rings&&H.rings.length>1&&U.rings.length>=H.rings.length?(M.push(U),P.push("simplify")):P.push(o?Da(U):U)}}if(!M.length)return P;const C=await VJ(s,M,i),I=[];for(let D=0;D<P.length;D++){const N=P[D];N!=="simplify"?I.push(N):I.push(o?Da(C.shift()):C.shift())}return I}const $=[];for(let S=0;S<y.length;S++){const M=y[S];if(M!=="cut")$.push(M);else{const P=g.shift();$.push(o===!0?Da(P):P)}}return $}function YJ(e){if(!e)return null;const t=e.extent;if(!t)return null;const i=e.spatialReference&&Si(e.spatialReference);if(!i)return t;const[s,n]=i.valid,r=2*n,{width:o}=t;let a,{xmin:l,xmax:c}=t;if([l,c]=[c,l],e.type==="extent"||o===0||o<=n||o>r||l<s||c>n)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;a=V$(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;a=V$(e.paths);break;case"multipoint":a=e.points}const h=t.clone();for(let p=0;p<a.length;p++){let m=a[p][0];m<0?(m+=n,c=Math.max(m,c)):(m-=n,l=Math.min(m,l))}return h.xmin=l,h.xmax=c,h.width<o?(h.xmin-=n,h.xmax-=n,h):t}function g2(e,t,i){const s=Si(i);if(s==null)return e;const[n,r]=s.valid,o=2*r;let a=0,l=0;t>r?a=Math.ceil(Math.abs(t-r)/o):t<n&&(a=-Math.ceil(Math.abs(t-n)/o)),e>r?l=Math.ceil(Math.abs(e-r)/o):e<n&&(l=-Math.ceil(Math.abs(e-n)/o));let c=e+(a-l)*o;const h=c-t;return h>r?c-=o:h<n&&(c+=o),c}function mde(e,t){const i=Si(t);if(i){const[s,n]=i.valid,r=n-s;if(e<s)for(;e<s;)e+=r;if(e>n)for(;e>n;)e-=r}return e}const ML=96,$L=39.37,ZJ=180/Math.PI;function TL(e){return e.wkid?e:e.spatialReference||ge.WGS84}function y2(e,t){return t.type?Lt(e,t.x,t.y):fc(e,t)}function kL(e){return rl(e)}function gy(e,t,i=0){let s=e.width,n=e.height;if(i!==0){const a=Jg(i),l=Math.abs(Math.cos(a)),c=Math.abs(Math.sin(a));s=e.width*l+e.height*c,n=e.width*c+e.height*l}const r=Math.max(1,t[0]),o=Math.max(1,t[1]);return Math.max(s/r,n/o)*sX(e.spatialReference)}async function th(e,t,i,s){let n,r;if(!e||Array.isArray(e)&&!e.length)return null;if(ee.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const a=e.every(h=>"attributes"in h),l=e.some(h=>!h.geometry);let c=e;if(a&&l&&t&&t.allLayerViews){const h=new Map;for(const y of e){const v=y.layer,b=h.get(v)||[],w=y.attributes[v.objectIdField];w!=null&&b.push(w),h.set(v,b)}const p=[];h.forEach((y,v)=>{const b=t.allLayerViews.find(w=>w.layer.id===v.id);if(b&&"queryFeatures"in b){const w=v.createQuery();w.objectIds=y,w.returnGeometry=!0,p.push(b.queryFeatures(w))}});const m=await Promise.all(p),g=[];for(const y of m)if(y&&y.features&&y.features.length)for(const v of y.features)v.geometry!=null&&g.push(v.geometry);c=g}for(const h of c)s=await th(h,t,i,s);return s}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=new ae(e);else if(e instanceof pr)n=e;else if("geometry"in e){if(e.geometry)n=e.geometry;else if(e.layer){const a=e.layer,l=t.allLayerViews.find(c=>c.layer.id===a.id);if(l&&"queryFeatures"in l){const c=a.createQuery();c.objectIds=[e.attributes[a.objectIdField]],c.returnGeometry=!0,n=(await l.queryFeatures(c))?.features?.[0]?.geometry}}}if(n==null)return null;switch(n.type){case"point":r=new tt({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":r=YJ(n);break;default:r=n.extent}if(!r)return null;fr()||Rs(r.spatialReference,i)||await dr();const o=ll(r,i);if(!o)return null;if(s){const a=o.center,l=a.clone();l.x=g2(a.x,s.center.x,i),l.x!==a.x&&o.centerAt(l),s=s.union(o)}else s=o;return s}function JJ(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer?.minScale!=null&&e.layer.maxScale!=null){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,i=0;for(const s of e){const n=s.layer;n?.minScale&&n.maxScale&&(t=n.minScale<t?n.minScale:t,i=n.maxScale>i?n.maxScale:i)}return t&&i?{min:t,max:i}:null}}}function B$(e,t){return $t(TL(e),t)?e:ll(e,t)}async function XJ(e,t){if(!e||!t)return new Cs({targetGeometry:new ae,scale:0,rotation:0});let i=t.spatialReference;const{constraints:s,padding:n,viewpoint:r,size:o}=t,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let l=null;e instanceof Cs?l=e:e.viewpoint?l=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(l=e.target);let c=null;l?.targetGeometry?c=l.targetGeometry:e instanceof tt?c=e:e instanceof pr?c=await th(e,t,i):e&&(c=await th(e.center,t,i)||await th(e.target,t,i)||await th(e,t,i)),!c&&r?.targetGeometry?c=r.targetGeometry:!c&&t.extent&&(c=t.extent),i||(i=TL(t.spatialReference||t.extent||c)),fr()||$t(c.spatialReference,i)||Rs(c.spatialReference,i)||await dr();const h=B$(c,i),p="center"in h?h.center:h;t.pickClosestTarget!==!1&&p.type==="point"&&r.targetGeometry?.type==="point"&&(p.x=g2(p.x,r.targetGeometry.x,p.spatialReference));let m=0;l?m=l.rotation:e.hasOwnProperty("rotation")?m=e.rotation:r&&(m=r.rotation);let g=0;g=l?.targetGeometry!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&s&&s.effectiveLODs?s.zoomToScale(e.zoom):Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0?r.scale:gy(B$(c.extent,i),a,m);const y=JJ(e.target??e);y&&(y.min&&y.min<g?g=y.min:y.max&&y.max>g&&(g=y.max));let v=new Cs({targetGeometry:p,scale:g,rotation:m});return s&&(v=s.fit(v),s.constrainByGeometry(v),s.rotationEnabled||(v.rotation=r.rotation)),v}function Xt(e,t){const i=e.targetGeometry,s=t.targetGeometry;return i.x=s.x,i.y=s.y,i.spatialReference=s.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function KJ(e,t,i){return i?Lt(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):Dd(e,t,.5)}const QJ=function(){const e=ot();return function(t,i,s){const n=i.targetGeometry;y2(e,n);const r=.5*Bc(i);return t.xmin=e[0]-r*s[0],t.ymin=e[1]-r*s[1],t.xmax=e[0]+r*s[0],t.ymax=e[1]+r*s[1],t.spatialReference=n.spatialReference,t}}();function eX(e,t,i,s,n){return zb(e,t,i.center),e.scale=gy(i,s),n?.constraints?.constrain(e),e}function tX(e,t,i,s){return _2(e,t,i,s),p2(e,e)}const PL=function(){const e=ot();return function(t,i,s){return d2(t,nX(t,i),KJ(e,i,s))}}(),iX=function(){const e=or(),t=ot();return function(i,s,n,r){const o=Bc(s),a=v2(s);return Lt(t,o,o),_L(e,t),my(e,e,a),ed(e,e,PL(t,n,r)),ed(e,e,[0,r.top-r.bottom]),Lt(i,e[4],e[5])}}();function Bc(e){return e.scale*OL(e.targetGeometry?.spatialReference)}function OL(e){return e!=null&&Li(e)?1/(kL(e)*$L*ML):1}function v2(e){return ew(e.rotation)||0}function sX(e){return Li(e)?kL(e)*$L*ML:1}function nX(e,t){return Dd(e,t,.5)}const b2=function(){const e=ot(),t=ot(),i=ot();return function(s,n,r,o,a,l){return mL(e,n),Dd(t,r,.5*l),Lt(i,1/o*l,-1/o*l),m2(s,t),a&&my(s,s,a),f2(s,s,i),ed(s,s,e),s}}(),_2=function(){const e=ot();return function(t,i,s,n){const r=Bc(i),o=v2(i);return y2(e,i.targetGeometry),b2(t,e,s,r,o,n)}}(),rX=function(){const e=ot();return function(t,i,s,n){const r=Bc(i);return y2(e,i.targetGeometry),b2(t,e,s,r,0,n)}}();function EL(e){const t=Si(e);return t?t.valid[1]-t.valid[0]:0}function oX(e,t){return Math.round(EL(e)/t)}const aX=function(){const e=ot(),t=ot(),i=[0,0,0];return function(s,n,r){Qh(e,s,n),jb(e,e),Qh(t,s,r),jb(t,t),yL(i,e,t);let o=Math.acos(gL(e,t)/(Jm(e)*Jm(t)))*ZJ;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),lX=function(){const e=ot();return function(t,i,s,n){const r=t.targetGeometry;return Xt(t,i),iX(e,i,s,n),r.x+=e[0],r.y+=e[1],t}}(),zb=function(e,t,i){Xt(e,t);const s=e.targetGeometry;return s.x=i.x,s.y=i.y,s.spatialReference=i.spatialReference,e},cX=function(){const e=ot();return function(t,i,s,n,r){r||(r="center"),d2(e,s,n),Dd(e,e,.5);const o=e[0],a=e[1];switch(r){case"center":Lt(e,0,0);break;case"left":Lt(e,-o,0);break;case"top":Lt(e,0,a);break;case"right":Lt(e,o,0);break;case"bottom":Lt(e,0,-a);break;case"top-left":Lt(e,-o,a);break;case"bottom-left":Lt(e,-o,-a);break;case"top-right":Lt(e,o,a);break;case"bottom-right":Lt(e,o,-a)}return yy(t,i,e),t}}();function gde(e,t,i){return Xt(e,t),e.rotation+=i,e}function uX(e,t,i){return Xt(e,t),e.rotation=i,e}const hX=function(){const e=ot();return function(t,i,s,n,r){return Xt(t,i),isNaN(s)||s===0||(CL(e,n,i,r),t.scale=i.scale*s,IL(e,e,t,r),yy(t,t,Lt(e,e[0]-n[0],n[1]-e[1]))),t}}();function H$(e,t,i){return Xt(e,t),e.scale=i,e}const AL=function(){const e=ot();return function(t,i,s,n,r,o){return Xt(t,i),isNaN(s)||s===0||(CL(e,r,i,o),t.scale=i.scale*s,t.rotation+=n,IL(e,e,t,o),yy(t,t,Lt(e,e[0]-r[0],r[1]-e[1]))),t}}(),yde=function(){const e=ot(),t=ot();return function(i,s,n,r,o,a,l){return PL(t,a,l),hL(e,o,t),r?AL(i,s,n,r,e,a):hX(i,s,n,e,a)}}(),CL=function(){const e=or();return function(t,i,s,n){return nn(t,i,tX(e,s,n,1))}}(),IL=function(){const e=or();return function(t,i,s,n){return nn(t,i,_2(e,s,n,1))}}(),yy=function(){const e=ot(),t=or();return function(i,s,n){Xt(i,s);const r=Bc(s),o=i.targetGeometry;return bL(t,v2(s)),f2(t,t,Rd(r,r)),nn(e,n,t),o.x+=e[0],o.y+=e[1],i}}();function LL(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function dX(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function pX(e,t,i,s,n,r){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=i,o[3]=s,o[4]=n,o[5]=r,o}function fX(e,t){return new Float32Array(e,t,6)}function RL(e,t,i,s){const n=t[s],r=t[s+1];e[s]=i[0]*n+i[2]*r+i[4],e[s+1]=i[1]*n+i[3]*r+i[5]}function mX(e,t,i,s=0,n=0,r=2){const o=n||t.length/r;for(let a=s;a<o;a++)RL(e,t,i,a*r)}Object.freeze(Object.defineProperty({__proto__:null,clone:dX,create:LL,createView:fX,fromValues:pX,transform:RL,transformMany:mX},Symbol.toStringTag,{value:"Module"}));function gX(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function yX(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function DL(e,t,i,s,n,r,o,a,l,c){return e[0]=t,e[1]=i,e[2]=s,e[3]=n,e[4]=r,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e}function NL(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function vX(e,t){if(e===t){const i=t[1],s=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=s,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function bX(e,t){const i=t[0],s=t[1],n=t[2],r=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],p=h*o-a*c,m=-h*r+a*l,g=c*r-o*l;let y=i*p+s*m+n*g;return y?(y=1/y,e[0]=p*y,e[1]=(-h*s+n*c)*y,e[2]=(a*s-n*o)*y,e[3]=m*y,e[4]=(h*i-n*l)*y,e[5]=(-a*i+n*r)*y,e[6]=g*y,e[7]=(-c*i+s*l)*y,e[8]=(o*i-s*r)*y,e):null}function _X(e,t){const i=t[0],s=t[1],n=t[2],r=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8];return e[0]=o*h-a*c,e[1]=n*c-s*h,e[2]=s*a-n*o,e[3]=a*l-r*h,e[4]=i*h-n*l,e[5]=n*r-i*a,e[6]=r*c-o*l,e[7]=s*l-i*c,e[8]=i*o-s*r,e}function wX(e){const t=e[0],i=e[1],s=e[2],n=e[3],r=e[4],o=e[5],a=e[6],l=e[7],c=e[8];return t*(c*r-o*l)+i*(-c*n+o*a)+s*(l*n-r*a)}function w2(e,t,i){const s=t[0],n=t[1],r=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],p=t[8],m=i[0],g=i[1],y=i[2],v=i[3],b=i[4],w=i[5],x=i[6],$=i[7],S=i[8];return e[0]=m*s+g*o+y*c,e[1]=m*n+g*a+y*h,e[2]=m*r+g*l+y*p,e[3]=v*s+b*o+w*c,e[4]=v*n+b*a+w*h,e[5]=v*r+b*l+w*p,e[6]=x*s+$*o+S*c,e[7]=x*n+$*a+S*h,e[8]=x*r+$*l+S*p,e}function Vb(e,t,i){const s=t[0],n=t[1],r=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],p=t[8],m=i[0],g=i[1];return e[0]=s,e[1]=n,e[2]=r,e[3]=o,e[4]=a,e[5]=l,e[6]=m*s+g*o+c,e[7]=m*n+g*a+h,e[8]=m*r+g*l+p,e}function FL(e,t,i){const s=t[0],n=t[1],r=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],p=t[8],m=Math.sin(i),g=Math.cos(i);return e[0]=g*s+m*o,e[1]=g*n+m*a,e[2]=g*r+m*l,e[3]=g*o-m*s,e[4]=g*a-m*n,e[5]=g*l-m*r,e[6]=c,e[7]=h,e[8]=p,e}function xX(e,t,i){const s=i[0],n=i[1],r=i[2];return e[0]=s*t[0],e[1]=s*t[1],e[2]=s*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=r*t[6],e[7]=r*t[7],e[8]=r*t[8],e}function SX(e,t,i){const s=i[0],n=i[1];return e[0]=s*t[0],e[1]=s*t[1],e[2]=s*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function MX(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function $X(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=i,e[2]=0,e[3]=-i,e[4]=s,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function TX(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function kX(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function PX(e,t){const i=t[0],s=t[1],n=t[2],r=t[3],o=i+i,a=s+s,l=n+n,c=i*o,h=s*o,p=s*a,m=n*o,g=n*a,y=n*l,v=r*o,b=r*a,w=r*l;return e[0]=1-p-y,e[3]=h-w,e[6]=m+b,e[1]=h+w,e[4]=1-c-y,e[7]=g-v,e[2]=m-b,e[5]=g+v,e[8]=1-c-p,e}function OX(e,t){const i=t[0],s=t[1],n=t[2],r=t[4],o=t[5],a=t[6],l=t[8],c=t[9],h=t[10],p=h*o-a*c,m=-h*r+a*l,g=c*r-o*l,y=i*p+s*m+n*g;if(!y)return null;const v=1/y;return e[0]=p*v,e[1]=(-h*s+n*c)*v,e[2]=(a*s-n*o)*v,e[3]=m*v,e[4]=(h*i-n*l)*v,e[5]=(-a*i+n*r)*v,e[6]=g*v,e[7]=(-c*i+s*l)*v,e[8]=(o*i-s*r)*v,e}function EX(e,t){const i=t[0],s=t[1],n=t[2],r=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],p=t[9],m=t[10],g=t[11],y=t[12],v=t[13],b=t[14],w=t[15],x=i*a-s*o,$=i*l-n*o,S=i*c-r*o,M=s*l-n*a,P=s*c-r*a,C=n*c-r*l,I=h*v-p*y,D=h*b-m*y,N=h*w-g*y,U=p*b-m*v,H=p*w-g*v,te=m*w-g*b;let q=x*te-$*H+S*U+M*N-P*D+C*I;return q?(q=1/q,e[0]=(a*te-l*H+c*U)*q,e[1]=(l*N-o*te-c*D)*q,e[2]=(o*H-a*N+c*I)*q,e[3]=(n*H-s*te-r*U)*q,e[4]=(i*te-n*N+r*D)*q,e[5]=(s*N-i*H-r*I)*q,e[6]=(v*C-b*P+w*M)*q,e[7]=(b*S-y*C-w*$)*q,e[8]=(y*P-v*S+w*x)*q,e):null}function AX(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function CX(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function IX(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function LX(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function jL(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function RX(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function DX(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e[4]=t[4]+i[4]*s,e[5]=t[5]+i[5]*s,e[6]=t[6]+i[6]*s,e[7]=t[7]+i[7]*s,e[8]=t[8]+i[8]*s,e}function NX(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function FX(e,t){const i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],p=t[0],m=t[1],g=t[2],y=t[3],v=t[4],b=t[5],w=t[6],x=t[7],$=t[8],S=Mi();return Math.abs(i-p)<=S*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(s-m)<=S*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(n-g)<=S*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-y)<=S*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(o-v)<=S*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-b)<=S*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(l-w)<=S*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(c-x)<=S*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(h-$)<=S*Math.max(1,Math.abs(h),Math.abs($))}function jX(e){const t=Mi(),i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return Math.abs(1-(i*i+r*r+l*l))<=t&&Math.abs(1-(s*s+o*o+c*c))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}const zX=w2,VX=jL;Object.freeze(Object.defineProperty({__proto__:null,add:LX,adjoint:_X,copy:yX,determinant:wX,equals:FX,exactEquals:NX,frob:IX,fromMat2d:kX,fromMat4:gX,fromQuat:PX,fromRotation:$X,fromScaling:TX,fromTranslation:MX,identity:NL,invert:bX,isOrthoNormal:jX,mul:zX,multiply:w2,multiplyScalar:RX,multiplyScalarAndAdd:DX,normalFromMat4:EX,normalFromMat4Legacy:OX,projection:AX,rotate:FL,scale:xX,scaleByVec2:SX,set:DL,str:CX,sub:VX,subtract:jL,translate:Vb,transpose:vX},Symbol.toStringTag,{value:"Module"}));function zf(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function UX(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function WX(e,t,i,s,n,r,o,a,l){const c=new Float32Array(9);return c[0]=e,c[1]=t,c[2]=i,c[3]=s,c[4]=n,c[5]=r,c[6]=o,c[7]=a,c[8]=l,c}function BX(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:UX,create:zf,createView:BX,fromValues:WX},Symbol.toStringTag,{value:"Module"}));function zL(){return new Float32Array(2)}function HX(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function Ec(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function GX(e,t){return new Float32Array(e,t,2)}function VL(){return zL()}function UL(){return Ec(1,1)}function WL(){return Ec(1,0)}function BL(){return Ec(0,1)}const qX=VL(),YX=UL(),ZX=WL(),JX=BL();Object.freeze(Object.defineProperty({__proto__:null,ONES:YX,UNIT_X:ZX,UNIT_Y:JX,ZEROS:qX,clone:HX,create:zL,createView:GX,fromValues:Ec,ones:UL,unitX:WL,unitY:BL,zeros:VL},Symbol.toStringTag,{value:"Module"}));function XX(e){return e instanceof Float32Array&&e.length>=2}function KX(e){return Array.isArray(e)&&e.length>=2}function x0(e){return XX(e)||KX(e)}var Ub;const Tn=[0,0];let Yr=Ub=class extends Z{constructor(e){super(e),this._viewpoint2D={center:ot(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new tt,this.id=0,this.inverseTransform=or(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=or(),this.transformNoRotation=or(),this.displayMat3=zf(),this.displayViewMat3=zf(),this.viewMat3=zf(),this.viewMat2d=LL(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=Xt(i,e.viewpoint),this._set("size",fc(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new Ub({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return x0(t)?nn(e,t,this.inverseTransform):(Tn[0]=t,Tn[1]=i,nn(e,Tn,this.inverseTransform))}toScreen(e,t,i){return x0(t)?nn(e,t,this.transform):(Tn[0]=t,Tn[1]=i,nn(e,Tn,this.transform))}toScreenNoRotation(e,t,i){return x0(t)?nn(e,t,this.transformNoRotation):(Tn[0]=t,Tn[1]=i,nn(e,Tn,this.transformNoRotation))}wrapMapCoordinate(e,t){fc(e,t);const[i]=t,[s]=this.center,{extent:n,spatialReference:r}=this;let{xmin:o,xmax:a}=n;if(r.isWrappable){const l=EL(r)/2;o=Math.max(o,s-l),a=Math.min(a,s+l)}return(i<o||i>a)&&(e[0]=g2(i,s,r)),e}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size");return b2(e,i,n,t,0,s),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:s}=this._viewpoint2D,n=this._get("pixelRatio")||1,r=this._get("size"),o=new Cs({targetGeometry:new ae(e[0],e[1],t),scale:i,rotation:s});if(this._set("viewpoint",o),!r||!t||!i)return;this.resolution=Bc(o),this.rotation=s,this.scale=i,this.spatialReference=t,fc(this.center,e);const a=r[0]!==0?2/r[0]:0,l=r[1]!==0?-2/r[1]:0;DL(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=NL(this.viewMat3),h=Ec(r[0]/2,r[1]/2),p=Ec(-r[0]/2,-r[1]/2),m=ew(s);Vb(c,c,h),FL(c,c,m),Vb(c,c,p),w2(this.displayViewMat3,this.displayMat3,c);const g=m2(this.viewMat2d,h);return my(g,g,m),ed(g,g,p),QJ(this.extent,o,r),_2(this.transform,o,r,n),p2(this.inverseTransform,this.transform),rX(this.transformNoRotation,o,r,n),this.worldScreenWidth=oX(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};d([f({readOnly:!0})],Yr.prototype,"id",void 0),d([f({value:1,json:{write:!0}})],Yr.prototype,"pixelRatio",null),d([f({json:{write:!0}})],Yr.prototype,"size",null),d([f()],Yr.prototype,"spatialReference",void 0),d([f({type:Cs,json:{write:!0}})],Yr.prototype,"viewpoint",null),Yr=Ub=d([k("esri.views.2d.ViewState")],Yr);const G$=Yr;var Wb,Bb;let Xn=Wb=class extends Q{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new Wb({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};d([f()],Xn.prototype,"left",void 0),d([f()],Xn.prototype,"top",void 0),d([f()],Xn.prototype,"right",void 0),d([f()],Xn.prototype,"bottom",void 0),Xn=Wb=d([k("esri.views.2d.PaddedViewState.Padding")],Xn);let Vl=Bb=class extends G${constructor(...e){super(...e),this.paddedViewState=new G$,this._updateContent=(()=>{const t=ot();return()=>{const i=this._get("size"),s=this._get("padding");if(!i||!s)return;const n=this.paddedViewState;Lt(t,s.left+s.right,s.top+s.bottom),Qh(t,i,t),fc(n.size,t);const r=n.viewpoint;r&&(this.viewpoint=r)}})(),this.addHandles(le(()=>[this.size,this.padding],()=>this._updateContent(),Qa)),this.padding=new Xn,this.size=[0,0]}set padding(e){this._set("padding",e||new Xn)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;const t=this._viewpoint2D;if(this._get("padding")){const i=e.clone();lX(i,e,this._get("size"),this._get("padding"));const s=i.targetGeometry;t.center[0]=s.x,t.center[1]=s.y,t.rotation=i.rotation,t.scale=i.scale,t.spatialReference=s.spatialReference}else{const i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}}clone(){return new Bb({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};d([f()],Vl.prototype,"paddedViewState",void 0),d([f({type:Xn})],Vl.prototype,"padding",null),d([f()],Vl.prototype,"viewpoint",null),Vl=Bb=d([k("esri.views.2d.PaddedViewState")],Vl);const x2=Vl;function Pa(e,t,i,s){const n=3*e,r=3*(i-e)-n,o=1-n-r,a=3*t,l=3*(s-t)-a,c=1-a-l;function h(y){return((o*y+r)*y+n)*y}function p(y){return((c*y+l)*y+a)*y}function m(y){return(3*o*y+2*r)*y+n}function g(y,v){let b,w,x,$,S,M;for(x=y,M=0;M<8;M++){if($=h(x)-y,Math.abs($)<v)return x;if(S=m(x),Math.abs(S)<1e-6)break;x-=$/S}if(b=0,w=1,x=y,x<b)return b;if(x>w)return w;for(;b<w;){if($=h(x),Math.abs($-y)<v)return x;y>$?b=x:w=x,x=.5*(w-b)+b}return x}return function(y,v=1e-6){return p(g(y,v))}}const QX=/^cubic-bezier\((.*)\)/,tn={};function eK(e){let t=tn[e]||null;if(!t){const i=QX.exec(e);if(i){const s=i[1].split(",").map(n=>parseFloat(n.trim()));s.length!==4||s.some(n=>isNaN(n))||(t=Pa.apply(Pa,s))}}return t}tn.ease=Pa(.25,.1,.25,1),tn.linear=Pa(0,0,1,1),tn.easeIn=tn["ease-in"]=Pa(.42,0,1,1),tn.easeOut=tn["ease-out"]=Pa(0,0,.58,1),tn.easeInOut=tn["ease-in-out"]=Pa(.42,0,.58,1);class q${constructor(t){this._view=t,this.viewpoint=new Cs({targetGeometry:new ae,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,i]=this._view.size;return Math.sqrt(t*t+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return OL(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotateAtZoom(t){return this.size/2}compareTo(t,i){i.pan=JP(this.center,t.center);let s=Math.abs(t.rotation-this.rotation);s=s>=180?360-s:s,i.rotate=Jg(s),i.sourceZoom=this.scale,i.targetZoom=t.scale}interpolate(t,i,s){const{pan:n,rotate:r,zoom:o,zoomOffset:a}=s,{center:l}=this;l.spatialReference=t.center.spatialReference,l.x=ku(t.center.x,i.center.x,n),l.y=ku(t.center.y,i.center.y,n),this.viewpoint.scale=ku(t.scale,i.scale+a,o);let c=t.rotation;const h=i.rotation;Math.abs(h-c)>=180&&(c+=360*(c<h?1:-1)),this.viewpoint.rotation=ku(c,h,r)}copyFrom(t){Xt(this.viewpoint,t.viewpoint),this._view=t.view}}const HL=e=>e*e,tK=e=>1-HL(1-e),iK=e=>2**(10*(e-1)),sK=e=>1-iK(1-e);function nK(e){const t=2*(e-Math.sqrt((e-1)*e)),i=t/2/e;return s=>s<i?e*s*s:t*s-t+1}function rK(e,t){return(i,s)=>i<t?t*e(i/t,s):1-e((1-i)/(1-t),s)*(1-t)}const Y$=rK(nK(1),.5);class oK{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}}const td={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},GL={...td,maxDuration:4e3};class S2{constructor(t){this._createCamera=t,this.compared=new oK,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:td.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new S2(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,i,s){this.source!==t&&this.source.copyFrom(t),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=s.desiredScreenFlow!=null?s.desiredScreenFlow:td.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const i=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Mi()}get hasFov(){return Math.abs(this.compared.fov)>Mi()}get hasRotate(){return this.compared.rotate>Mi()}}class aK{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}}let lK=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,t)=>e+t.time,0)}interpolateComponentsAt(e,t){e=Math.min(Math.max(e,0),1),e*=this.time;let i=0,s=0;const n=this.definition,r=this.segments.reduce((o,a)=>o||a.definition.hasZoom,!1);for(let o=0;o<this.segments.length;o++){const a=this.segments[o],l=a.definition;if(e<=a.time||o===this.segments.length-1){if(this.segmentInterpolateComponentsAt(a,a.time===0?0:e/a.time,t),n.hasPan&&!isNaN(t.pan)&&isFinite(n.compared.pan)?t.pan=(i+l.compared.pan*t.pan)/n.compared.pan:t.pan=1,n.hasRotate&&!isNaN(t.rotate)&&isFinite(n.compared.rotate)?t.rotate=(s+l.compared.rotate*t.rotate)/n.compared.rotate:t.rotate=1,r&&!isNaN(t.zoom)&&isFinite(l.compared.targetZoom)){const{sourceZoom:c,targetZoom:h}=l.compared,p=t.zoom*(h-c)+c,m=this.segments[0].definition.compared.sourceZoom,g=this.segments[this.segments.length-1].definition.compared.targetZoom,y=Math.abs(h-m)>Math.abs(c-m)?h:c;t.zoomOffset=y-g,t.zoom=(p-m)/(y-m)}else t.zoom=1;return t}e-=a.time,i+=l.compared.pan,s+=l.compared.rotate}}segmentInterpolateComponentsAt(e,t,i){e.interpolateComponentsAt(t,i)}};class S0{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,i=t.compared,s=i.sourceZoom,n=i.targetZoom;this._zoomSign=s>n?1:-1,this._panPixelsAtSource=i.pan*t.source.pixelsPerPanAtZoom(s);const r=(t.source.pixelsPerRotateAtZoom(s)+t.target.pixelsPerRotateAtZoom(n))/2;this._rotatePixels=i.rotate*r}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:s,hasPan:n,hasRotate:r}=this.definition;let o=0,a=0;s&&(n&&(o=(i/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),r&&(a=this._zoomSign*(Math.log(t/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(s&&n&&r){const c=o+a+o*a;this._zoomPixelFlow=o*a/c*l,this._panPixelFlow=a/c*l,this._rotatePixelFlow=o/c*l}else if(s&&n){const c=1+o;this._zoomPixelFlow=o/c*l,this._panPixelFlow=1/c*l}else if(s&&r){const c=1+a;this._zoomPixelFlow=a/c*l,this._rotatePixelFlow=1/c*l}else if(n&&r){const c=this._panPixelsAtSource/this._rotatePixels,h=1+c;this._panPixelFlow=c/h*l,this._rotatePixelFlow=1/h*l}else n?this._panPixelFlow=l:s?this._zoomPixelFlow=l:r&&(this._rotatePixelFlow=l);this._time=this.rotateTime??this.zoomTime??this.panTime??this.fovTime??0}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:null}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:null}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/cK:null}get panTime(){if(this.definition.hasPan){if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=t*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,s=this.definition.compared.targetZoom;return(i*(i/s)**-t-i)/(s-i)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:s}=this.definition;return i+t*(s-i)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*t*this._time)-1))/(i*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,i){t=Math.min(Math.max(t,0),1),i.zoom=this._interpolateComponentsZoom(t),i.pan=this._interpolateComponentsPan(t),i.rotate=this._interpolateComponentsRotate(t),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(t)}}const cK=Jg(90);function uK(e,t,i){const s=t-e.compared.sourceZoom,n=e.halfWindowPanAtZoom(s);return-e.halfWindowSize*(i.ascensionFactor*Math.LN2*e.compared.pan+n)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*n)}function hK(e,t,i){const s=1/t,n=Math.log(e.compared.sourceZoom*s),r=1/e.desiredPixelFlow,o=1/Math.LN2,a=t-e.compared.sourceZoom,l=1/a,c=(i.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(a))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*s*r*o*l*c-e.halfWindowSize*n*r*o*l+e.halfWindowSize*n*r*o*c/(a*a)}function dK(e,t,i){const s=t-e.compared.sourceZoom,n=1/s,r=1/t,o=Math.log(e.compared.sourceZoom*r),a=(i.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(s))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*r*a+2*n*o+2*r-2*o*a/(s*s)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function pK(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function fK(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function mK(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function gK(e,t,i){return-e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function yK(e,t,i){return e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function vK(e,t,i){return-2*e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function bK(e,t,i){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-i.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function _K(e,t,i){const s=Math.log(t/e.compared.targetZoom),n=1/e.desiredPixelFlow,r=1/Math.LN2,o=-t+e.compared.targetZoom,a=1/o,l=(-e.halfWindowPanAtZoom(t)-i.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*s*n*r*a+e.halfWindowSize*s*n*r*l/(o*o)+e.halfWindowSize*n*r*a*l/t}function wK(e,t,i){const s=t-e.compared.targetZoom,n=1/s,r=1/t,o=Math.log(t/e.compared.targetZoom),a=(e.halfWindowPanAtZoom(t)+i.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*r*a-2*n*o+2*r+2*o*a/(s*s)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function xK(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function SK(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function MK(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function $K(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const i=Math.LN2*e.compared.pan,s=t,n=e.halfWindowPanAtZoom(s),r=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*n);return e.compared.sourceZoom<=e.compared.targetZoom?r*(i-n):r*(i+n)}function TK(e,t){let i=kK(e,t);const s={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},n=s.ascensionFactor===0,r=s.descensionFactor===0,o=n?pK:uK,a=n?fK:hK,l=n?mK:dK,c=r?xK:bK,h=r?SK:_K,p=r?MK:wK,m=S=>o(e,S,s)+gK(e,S,s)+c(e,S,s),g=S=>a(e,S,s)+yK(e,S,s)+h(e,S,s),y=S=>l(e,S,s)+vK(e,S,s)+p(e,S,s);let v=m(i);const b=$K(e);let w;const x=t.maximumIterations||20,$=t.maximumDistance!=null?t.maximumDistance:1/0;for(w=0;w<x;w++){const S=t.desiredSlope??1e-6;let M=g(i);Math.abs(M)>S&&(M+=S);const P=M/y(i);if(isNaN(P)||i>=$&&P<0){if(!isFinite($))return null;i=$,v=m(i);break}if(i-=P,i<e.compared.sourceZoom||i<e.compared.targetZoom)return null;const C=m(i);if(Math.abs(C-v)/v<=.005)break;v=C}return v>b*(1-.3)||i<e.compared.sourceZoom||i<e.compared.targetZoom?null:i}function kK(e,t){const i=Math.max(e.compared.sourceZoom,e.compared.targetZoom),s=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return s<i?t.maximumDistance!=null?i+(t.maximumDistance-i)/2:1.5*i:t.maximumDistance?Math.min(t.maximumDistance,s):s}class PK extends lK{constructor(t,i){super(),this._preallocSegments=[new S0,new S0,new S0],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,i)}update(t,i){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const s=i?.apex?TK(t,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,s?this._updateWithApex(s,i?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,i,s){t.interpolateComponentsAt(i,s),t===this._ascensionSegment?s.zoom=tK(s.zoom):t===this._descensionSegment&&(s.zoom=HL(s.zoom))}_updateWithApex(t,i){const[s,n,r]=this._preallocSegments,o=i?.ascensionFactor??.5,a=Math.min(1-o,i?.ascensionFactor!=null&&i.descensionFactor!=null?i.descensionFactor:.5),l=1-o-a;s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.targetZoom=t,s.definition.compared.pan=this.definition.compared.pan*o,s.definition.compared.rotate=this.definition.compared.rotate*o,s.definition.segmentEnd=o,s.update(),this._ascensionSegment=s,this.segments.push(s),l>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=t,n.definition.compared.targetZoom=t,n.definition.compared.pan=this.definition.compared.pan*l,n.definition.compared.rotate=this.definition.compared.rotate*l,n.definition.segmentStart=s.definition.segmentEnd,n.definition.segmentEnd=s.definition.segmentEnd+l,n.update(),this.segments.push(n)),r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.sourceZoom=t,r.definition.compared.pan=this.definition.compared.pan*a,r.definition.compared.rotate=this.definition.compared.rotate*a,r.definition.segmentStart=o+l,r.update(),this._descensionSegment=r,this.segments.push(r)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}}const OK=new aK;let EK=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=Y$,this.definition=new S2(e),this.path=new PK}update(e,t,i){this.definition.update(e,t,i),this.path.update(this.definition,i),this._time=this._applyTimeSettings(b4(isFinite(this.path.time)?this.path.time:0),i),this._easing=i.easing??(this._time>=1e3?Y$:sK)}cameraAt(e,t){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const i=this.path.interpolateComponentsAt(e,OK);t.interpolate(this.definition.source,this.definition.target,i)}_normalizedEasing(e){const t=this._easing(0,this._time),i=this._easing(1,this._time);return(this._easing(e,this._time)-t)/(i-t)}_applyTimeSettings(e,t){const i=t.speedFactor!=null?t.speedFactor:1,s=t.minDuration??td.minDuration/i,n=t.maxDuration??td.maxDuration/i;return e=t.duration!=null?t.duration:Math.min(Math.max(e/i,s),n)}};const Z$=2e3,AK=64;class CK{constructor(t){this._view=t,this._animation=new EK(()=>new q$(this._view)),this._current=new q$(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,i,s={}){Xt(this._current.viewpoint,t),Xt(this._source.viewpoint,t),Xt(this._target.viewpoint,i),this._animation.update(this._source,this._target,s)}applyRatio(t,i){this._animation.cameraAt(i,this._current),Xt(t,this._current.viewpoint)}}let Ul=class extends Q{constructor(e){super(e),this._animation=null,this._destinationViewState=new x2,this.updateFunction=null,this.easing=tn.ease,this.viewpoint=new Cs({targetGeometry:new ae,scale:0,rotation:0}),this._updateTask=gc({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new CK(e.view)}destroy(){this._updateTask=et(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,t,i){this.stop();const s=this.viewpoint;Xt(s,t);const n=(typeof i?.easing=="string"?eK(i.easing):i?.easing)||this.easing,r=e.target;this._transition.update(this.viewpoint,r,{apex:{maximumDistance:Math.min(Math.min(t.scale,r.scale)*AK,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:i?.duration,maxDuration:i?.animationMode==="auto"?1/0:i?.maxDuration??GL.maxDuration,speedFactor:i?.speedFactor,easing:typeof n=="function"?a=>n(a):void 0}),i?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=r,IK(this._transition.animation,i,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,r,{duration:0}));const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const i=new Fb({target:e.clone()}),s=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==Fb.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),this.animation?.update(this.viewpoint);else{const i=performance.now()-this._startTime,s=this._transition.duration,n=s>0?i/s:1,r=n>=1;this._transition.applyRatio(this.viewpoint,n),r&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function IK(e,t,i,s){if(t?.duration!=null)return!0;const{time:n,isLinear:r}=e,o=t?.speedFactor||1,a=t?.maxDuration??GL.maxDuration/o;if(L("esri-goto-debug")&&(console.log("speed factor:",o),console.log("adjusted duration:		",n),console.log("adjusted max duration:	",a),console.log("is linear:",r)),n>a)return L("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${a/1e3}s`),!1;if(r){const c=ot(),h=Ut(...s.toScreen(c,...i.center)),p=Ut(...i.toScreen(c,...s.center)),m=p!=null&&p.x>-(1.5-.5)*i.size[0]&&p.x<(1.5+.5)*i.size[0]&&p.y>-(1.5-.5)*i.size[1]&&p.y<(1.5+.5)*i.size[1],g=h!=null&&h.x>-(1.5-.5)*s.size[0]&&h.x<(1.5+.5)*s.size[0]&&h.y>-(1.5-.5)*s.size[1]&&h.y<(1.5+.5)*s.size[1];if(L("esri-goto-debug")&&(console.log(`dest is within ${1.5} screens at start view:`,m),console.log(`start is within ${1.5} screens at dest view:`,g)),n>Z$/o&&!m&&!g)return L("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${Z$/1e3/o}s, or
  - shorter than ${a/1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${a/1e3}s and the start point is close enough to the destination screen`),!1}return!0}d([f()],Ul.prototype,"easing",void 0),d([f()],Ul.prototype,"view",void 0),d([f()],Ul.prototype,"viewpoint",void 0),Ul=d([k("esri.views.2d.AnimationManager")],Ul);const LK=Ul;class RK{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation&&!("then"in this.view.animation.target)&&(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=()=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:i,graphicsView:s,labelManager:n,state:{id:r}}=this.view;i.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==r&&(n.viewChange(),n.lastUpdateId=r),n.updateRequested&&n.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==r&&(s.viewChange(),s.lastUpdateId=r),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new x2,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=le(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=gc(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){if(!t.attached)return void this.requestUpdate();const i=this.view.state,s=t.lastUpdateId;s!=null&&(this.stationary||t.moving)||(t.moving=!0),s!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews?.forEach(this._updateLayerView,this)}}let Vf=class extends Q{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,t){if(!e)return void B.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new Fb;this.view.animation=i,await Bg(()=>this.view.ready,t);const s={...t,animate:t?.animate??!JI(),animationMode:t?.animationMode??"auto"},{extent:n,spatialReference:r,size:o,viewpoint:a,constraints:l,padding:c,allLayerViews:h}=this.view,p=XJ(e,{extent:n,spatialReference:r,size:o,viewpoint:a,constraints:l,padding:c,allLayerViews:h,pickClosestTarget:t?.pickClosestTarget??!0});return i?.update(p),this._gotoTask={},s.animate?this._gotoAnimated(p,s):this._gotoImmediate(p,s)}_gotoImmediate(e,t){const i=this._gotoTask,s=this.view.animation,n=e.then(r=>{if(pt(t),i!==this._gotoTask)throw new V("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=r,s.finish()});return this._cancellableGoTo(i,s,n,t)}_gotoAnimated(e,t){const i=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const n=e.then(r=>{if(pt(t),i!==this._gotoTask)throw new V("view:goto-interrupted","Goto was interrupted");return s.update(r),this.view.animationManager.animate(s,this.view.viewpoint,t),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,s,n,t)}_cancellableGoTo(e,t,i,s){const n=()=>e===this._gotoTask;return m4(i,s).finally(()=>{n()&&(t.done||t.stop())})}};d([f({constructOnly:!0})],Vf.prototype,"view",void 0),Vf=d([k("esri.views.2d.GoToManager")],Vf);function je(){return Promise.all([W(()=>import("./webglDeps.b50c2df6.js"),["assets/webglDeps.b50c2df6.js","assets/Program.9a92c5ff.js","assets/Texture.7423fe29.js","assets/enums.8929356b.js","assets/programUtils.d6bf54e9.js","assets/NestedMap.9ff460b9.js","assets/ProgramTemplate.7599c672.js"]),W(()=>import("./mapViewDeps.1c2341e0.js"),["assets/mapViewDeps.1c2341e0.js","assets/colorUtils.085072a2.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/OptimizedFeature.32c00f5f.js","assets/GeometryUtils.c6f9b045.js","assets/enums.abef80de.js","assets/utils.dbb84a38.js","assets/definitions.a3a54ed1.js","assets/Rect.ab45bd96.js","assets/LabelMetric.267a8b18.js","assets/Texture.7423fe29.js","assets/enums.8929356b.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/highlightReasons.c3e7cabb.js","assets/OverrideHelper.b5d99b26.js","assets/quantizationUtils.fe6b1e6e.js","assets/SDFHelper.a7a49e03.js","assets/floatRGBA.133c49be.js","assets/PieChartMeshWriter.c11791d1.js","assets/TurboLine.af583914.js","assets/earcut.dc9d94eb.js","assets/constants.344a1358.js","assets/Container.461c0161.js","assets/WGLContainer.a2728de7.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/enums.7f54e43a.js","assets/programUtils.d6bf54e9.js","assets/NestedMap.9ff460b9.js","assets/MagnifierPrograms.0333d37a.js","assets/CircularArray.0c40a6a8.js","assets/testSVGPremultipliedAlpha.3be788db.js","assets/AttributeStore.38266bd6.js","assets/labelUtils.37b9d8d8.js","assets/FieldsIndex.333d0734.js","assets/UnknownTimeZone.4756be49.js","assets/TimeOnly.5d28261e.js","assets/timeSupport.393bd0ba.js","assets/json.20588c22.js","assets/diffUtils.080c04bc.js","assets/RenderingContext.4521dfe8.js","assets/renderState.19e0eaae.js","assets/basicInterfaces.0f925dcd.js","assets/interfaces.98cd2ad6.js","assets/doublePrecisionUtils.4e9c06b3.js","assets/imageUtils.bdf51421.js","assets/rasterizingUtils.9fb61b8b.js","assets/pbf.72af564e.js","assets/utils.ca25804d.js","assets/grouping.811b1171.js","assets/FeatureCommandQueue.f16cbaa3.js","assets/MeshWriterRegistry.6d7fb0c7.js","assets/GraphicsView2D.73f18369.js","assets/normalizeUtilsSync.71a1cb90.js","assets/GraphicContainer.abe27126.js","assets/AGraphicContainer.c019acec.js","assets/TechniqueInstance.254dd815.js","assets/TileContainer.419fd15d.js","assets/requestImageUtils.d1967f3c.js"])])}const cu=()=>je().then(()=>W(()=>import("./TileLayerView2D.0789bc32.js"),["assets/TileLayerView2D.0789bc32.js","assets/colorUtils.085072a2.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/GeometryUtils.c6f9b045.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/OptimizedFeature.32c00f5f.js","assets/enums.abef80de.js","assets/utils.dbb84a38.js","assets/definitions.a3a54ed1.js","assets/Rect.ab45bd96.js","assets/LabelMetric.267a8b18.js","assets/Texture.7423fe29.js","assets/enums.8929356b.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/highlightReasons.c3e7cabb.js","assets/OverrideHelper.b5d99b26.js","assets/quantizationUtils.fe6b1e6e.js","assets/floatRGBA.133c49be.js","assets/Container.461c0161.js","assets/WGLContainer.a2728de7.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/enums.7f54e43a.js","assets/MagnifierPrograms.0333d37a.js","assets/CircularArray.0c40a6a8.js","assets/testSVGPremultipliedAlpha.3be788db.js","assets/AttributeStore.38266bd6.js","assets/labelUtils.37b9d8d8.js","assets/FieldsIndex.333d0734.js","assets/UnknownTimeZone.4756be49.js","assets/TimeOnly.5d28261e.js","assets/timeSupport.393bd0ba.js","assets/json.20588c22.js","assets/diffUtils.080c04bc.js","assets/pbf.72af564e.js","assets/FeatureCommandQueue.f16cbaa3.js","assets/constants.344a1358.js","assets/PieChartMeshWriter.c11791d1.js","assets/TurboLine.af583914.js","assets/renderState.19e0eaae.js","assets/basicInterfaces.0f925dcd.js","assets/interfaces.98cd2ad6.js","assets/GraphicsView2D.73f18369.js","assets/normalizeUtilsSync.71a1cb90.js","assets/imageUtils.aef0a6e4.js","assets/Bitmap.62f36779.js","assets/TileContainer.419fd15d.js","assets/LayerView.649e11dc.js","assets/layerViewUtils.8a0a28d0.js","assets/HighlightGraphicContainer.653a10a6.js","assets/AGraphicContainer.c019acec.js","assets/TechniqueInstance.254dd815.js","assets/RefreshableLayerView.6a9401d3.js","assets/drapedUtils.49438b18.js","assets/scaleUtils.24a7f96d.js","assets/floorFilterUtils.1e9a5f1e.js","assets/sublayerUtils.9912a6d8.js","assets/popupUtils.c8d8e4fb.js"])),yl=()=>je().then(()=>W(()=>import("./FeatureLayerView2D.2eb31764.js").then(function(e){return e.F}),["assets/FeatureLayerView2D.2eb31764.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/definitions.a3a54ed1.js","assets/enums.8929356b.js","assets/Texture.7423fe29.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/FeatureEffect.00e4e7d7.js","assets/timeSupport.a600eb47.js","assets/FeatureSet.78257171.js","assets/LayerView.649e11dc.js","assets/layerViewUtils.8a0a28d0.js","assets/TechniqueInstance.254dd815.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/GeometryUtils.c6f9b045.js","assets/enums.abef80de.js","assets/utils.dbb84a38.js","assets/Rect.ab45bd96.js","assets/LabelMetric.267a8b18.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/TileContainer.419fd15d.js","assets/WGLContainer.a2728de7.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/CircularArray.0c40a6a8.js","assets/tileUtils.91e274f6.js","assets/sizeVariableUtils.34255976.js","assets/OrderByInfo.b53e85dd.js","assets/labelingInfo.41bbc735.js","assets/labelUtils.37b9d8d8.js","assets/jsonUtils.185b82ae.js","assets/heatmapUtils.b763e953.js","assets/SDFHelper.a7a49e03.js","assets/floatRGBA.133c49be.js","assets/FeatureCommandQueue.f16cbaa3.js","assets/constants.344a1358.js","assets/HighlightCounter.5f861618.js","assets/floorFilterUtils.1e9a5f1e.js","assets/popupUtils.c8d8e4fb.js","assets/RefreshableLayerView.6a9401d3.js"])),J$={"base-dynamic":()=>je().then(()=>W(()=>import("./BaseDynamicLayerView2D.8091c32d.js"),["assets/BaseDynamicLayerView2D.8091c32d.js","assets/BitmapContainer.a917eaff.js","assets/WGLContainer.a2728de7.js","assets/definitions.a3a54ed1.js","assets/LabelMetric.267a8b18.js","assets/enums.abef80de.js","assets/Texture.7423fe29.js","assets/enums.8929356b.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/LayerView.649e11dc.js","assets/layerViewUtils.8a0a28d0.js","assets/ExportStrategy.9a603dd1.js","assets/Bitmap.62f36779.js","assets/RefreshableLayerView.6a9401d3.js"])),"base-tile":cu,"bing-maps":cu,catalog:()=>je().then(()=>W(()=>import("./CatalogLayerView2D.c3701304.js"),["assets/CatalogLayerView2D.c3701304.js","assets/LayerView.649e11dc.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/definitions.a3a54ed1.js","assets/enums.8929356b.js","assets/Texture.7423fe29.js","assets/layerViewUtils.8a0a28d0.js"])),"catalog-dynamic-group":()=>je().then(()=>W(()=>import("./CatalogDynamicGroupLayerView2D.b9ec80c7.js"),["assets/CatalogDynamicGroupLayerView2D.b9ec80c7.js","assets/LayerView.649e11dc.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/definitions.a3a54ed1.js","assets/enums.8929356b.js","assets/Texture.7423fe29.js","assets/layerViewUtils.8a0a28d0.js"])),"catalog-footprint":()=>je().then(()=>W(()=>import("./CatalogFootprintLayerView2D.2e426382.js"),["assets/CatalogFootprintLayerView2D.2e426382.js","assets/FeatureLayerView2D.2eb31764.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/definitions.a3a54ed1.js","assets/enums.8929356b.js","assets/Texture.7423fe29.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/FeatureEffect.00e4e7d7.js","assets/timeSupport.a600eb47.js","assets/FeatureSet.78257171.js","assets/LayerView.649e11dc.js","assets/layerViewUtils.8a0a28d0.js","assets/TechniqueInstance.254dd815.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/GeometryUtils.c6f9b045.js","assets/enums.abef80de.js","assets/utils.dbb84a38.js","assets/Rect.ab45bd96.js","assets/LabelMetric.267a8b18.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/TileContainer.419fd15d.js","assets/WGLContainer.a2728de7.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/CircularArray.0c40a6a8.js","assets/tileUtils.91e274f6.js","assets/sizeVariableUtils.34255976.js","assets/OrderByInfo.b53e85dd.js","assets/labelingInfo.41bbc735.js","assets/labelUtils.37b9d8d8.js","assets/jsonUtils.185b82ae.js","assets/heatmapUtils.b763e953.js","assets/SDFHelper.a7a49e03.js","assets/floatRGBA.133c49be.js","assets/FeatureCommandQueue.f16cbaa3.js","assets/constants.344a1358.js","assets/HighlightCounter.5f861618.js","assets/floorFilterUtils.1e9a5f1e.js","assets/popupUtils.c8d8e4fb.js","assets/RefreshableLayerView.6a9401d3.js"])),csv:yl,"geo-rss":()=>je().then(()=>W(()=>import("./GeoRSSLayerView2D.eabe4075.js"),["assets/GeoRSSLayerView2D.eabe4075.js","assets/jsonUtils.93554317.js","assets/UniqueValueRenderer.8069ab57.js","assets/ColorStop.aa8650af.js","assets/diffUtils.080c04bc.js","assets/colorRamps.272b71a1.js","assets/sizeVariableUtils.34255976.js","assets/visualVariableUtils.12ee1cdb.js","assets/jsonUtils.185b82ae.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/styleUtils.7f2b22b0.js","assets/LRUCache.6f8863ed.js","assets/Version.856e86b2.js","assets/FieldsIndex.333d0734.js","assets/UnknownTimeZone.4756be49.js","assets/OverrideHelper.b5d99b26.js","assets/colorUtils.085072a2.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/utils.dbb84a38.js","assets/quantizationUtils.fe6b1e6e.js","assets/heatmapUtils.b763e953.js","assets/FeatureSet.78257171.js","assets/LayerView.649e11dc.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/definitions.a3a54ed1.js","assets/enums.8929356b.js","assets/Texture.7423fe29.js","assets/layerViewUtils.8a0a28d0.js","assets/GraphicContainer.abe27126.js","assets/AGraphicContainer.c019acec.js","assets/TechniqueInstance.254dd815.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/OptimizedFeature.32c00f5f.js","assets/GeometryUtils.c6f9b045.js","assets/enums.abef80de.js","assets/Rect.ab45bd96.js","assets/LabelMetric.267a8b18.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/TileContainer.419fd15d.js","assets/WGLContainer.a2728de7.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/FeatureCommandQueue.f16cbaa3.js","assets/constants.344a1358.js","assets/GraphicsView2D.73f18369.js","assets/AttributeStore.38266bd6.js","assets/labelUtils.37b9d8d8.js","assets/TimeOnly.5d28261e.js","assets/timeSupport.393bd0ba.js","assets/json.20588c22.js","assets/normalizeUtilsSync.71a1cb90.js"])),feature:yl,geojson:yl,graphics:()=>je().then(()=>W(()=>import("./GraphicsLayerView2D.8dc3fe7b.js"),["assets/GraphicsLayerView2D.8dc3fe7b.js","assets/highlightReasons.c3e7cabb.js","assets/LayerView.649e11dc.js","assets/Container.461c0161.js","assets/definitions.a3a54ed1.js","assets/enums.8929356b.js","assets/Texture.7423fe29.js","assets/layerViewUtils.8a0a28d0.js","assets/GraphicContainer.abe27126.js","assets/AGraphicContainer.c019acec.js","assets/TechniqueInstance.254dd815.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/OptimizedFeature.32c00f5f.js","assets/GeometryUtils.c6f9b045.js","assets/enums.abef80de.js","assets/utils.dbb84a38.js","assets/Rect.ab45bd96.js","assets/LabelMetric.267a8b18.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/TileContainer.419fd15d.js","assets/WGLContainer.a2728de7.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/FeatureCommandQueue.f16cbaa3.js","assets/constants.344a1358.js","assets/GraphicsView2D.73f18369.js","assets/FieldsIndex.333d0734.js","assets/UnknownTimeZone.4756be49.js","assets/OverrideHelper.b5d99b26.js","assets/colorUtils.085072a2.js","assets/quantizationUtils.fe6b1e6e.js","assets/AttributeStore.38266bd6.js","assets/labelUtils.37b9d8d8.js","assets/TimeOnly.5d28261e.js","assets/timeSupport.393bd0ba.js","assets/json.20588c22.js","assets/diffUtils.080c04bc.js","assets/normalizeUtilsSync.71a1cb90.js","assets/HighlightCounter.5f861618.js"])),group:()=>je().then(()=>W(()=>import("./GroupLayerView2D.b8e8298f.js"),["assets/GroupLayerView2D.b8e8298f.js","assets/LayerView.649e11dc.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/definitions.a3a54ed1.js","assets/enums.8929356b.js","assets/Texture.7423fe29.js","assets/layerViewUtils.8a0a28d0.js"])),imagery:()=>je().then(()=>W(()=>import("./ImageryLayerView2D.8abd8cc5.js"),["assets/ImageryLayerView2D.8abd8cc5.js","assets/RasterVFDisplayObject.6c3c1598.js","assets/Program.9a92c5ff.js","assets/Texture.7423fe29.js","assets/enums.8929356b.js","assets/ProgramTemplate.7599c672.js","assets/VertexElementDescriptor.c76e1b24.js","assets/dataUtils.a1eaa611.js","assets/WGLContainer.a2728de7.js","assets/definitions.a3a54ed1.js","assets/LabelMetric.267a8b18.js","assets/enums.abef80de.js","assets/vec3f32.788be850.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/LayerView.649e11dc.js","assets/layerViewUtils.8a0a28d0.js","assets/GraphicsView2D.73f18369.js","assets/FieldsIndex.333d0734.js","assets/UnknownTimeZone.4756be49.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/GeometryUtils.c6f9b045.js","assets/utils.dbb84a38.js","assets/Rect.ab45bd96.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/OverrideHelper.b5d99b26.js","assets/colorUtils.085072a2.js","assets/quantizationUtils.fe6b1e6e.js","assets/AttributeStore.38266bd6.js","assets/labelUtils.37b9d8d8.js","assets/TimeOnly.5d28261e.js","assets/timeSupport.393bd0ba.js","assets/json.20588c22.js","assets/diffUtils.080c04bc.js","assets/FeatureCommandQueue.f16cbaa3.js","assets/constants.344a1358.js","assets/normalizeUtilsSync.71a1cb90.js","assets/HighlightGraphicContainer.653a10a6.js","assets/AGraphicContainer.c019acec.js","assets/TechniqueInstance.254dd815.js","assets/TileContainer.419fd15d.js","assets/BitmapContainer.a917eaff.js","assets/Bitmap.62f36779.js","assets/ExportStrategy.9a603dd1.js","assets/rasterProjectionHelper.dd8d9a43.js","assets/timeSupport.a600eb47.js","assets/popupUtils.c8d8e4fb.js","assets/RefreshableLayerView.6a9401d3.js"])),"imagery-tile":()=>je().then(()=>W(()=>import("./ImageryTileLayerView2D.68c70d48.js"),["assets/ImageryTileLayerView2D.68c70d48.js","assets/multidimensionalUtils.4eed3513.js","assets/RasterVFDisplayObject.6c3c1598.js","assets/Program.9a92c5ff.js","assets/Texture.7423fe29.js","assets/enums.8929356b.js","assets/ProgramTemplate.7599c672.js","assets/VertexElementDescriptor.c76e1b24.js","assets/dataUtils.a1eaa611.js","assets/WGLContainer.a2728de7.js","assets/definitions.a3a54ed1.js","assets/LabelMetric.267a8b18.js","assets/enums.abef80de.js","assets/vec3f32.788be850.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/LayerView.649e11dc.js","assets/layerViewUtils.8a0a28d0.js","assets/rasterUtils.97851091.js","assets/TileContainer.419fd15d.js","assets/RawBlockCache.74b3fa1f.js","assets/rasterProjectionHelper.dd8d9a43.js","assets/timeSupport.a600eb47.js","assets/popupUtils.c8d8e4fb.js","assets/RefreshableLayerView.6a9401d3.js"])),kml:()=>je().then(()=>W(()=>import("./KMLLayerView2D.b3a33754.js"),["assets/KMLLayerView2D.b3a33754.js","assets/kmlUtils.04092d85.js","assets/jsonUtils.93554317.js","assets/UniqueValueRenderer.8069ab57.js","assets/ColorStop.aa8650af.js","assets/diffUtils.080c04bc.js","assets/colorRamps.272b71a1.js","assets/sizeVariableUtils.34255976.js","assets/visualVariableUtils.12ee1cdb.js","assets/jsonUtils.185b82ae.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/styleUtils.7f2b22b0.js","assets/LRUCache.6f8863ed.js","assets/Version.856e86b2.js","assets/FieldsIndex.333d0734.js","assets/UnknownTimeZone.4756be49.js","assets/OverrideHelper.b5d99b26.js","assets/colorUtils.085072a2.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/utils.dbb84a38.js","assets/quantizationUtils.fe6b1e6e.js","assets/heatmapUtils.b763e953.js","assets/FeatureSet.78257171.js","assets/Bitmap.62f36779.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/definitions.a3a54ed1.js","assets/enums.8929356b.js","assets/Texture.7423fe29.js","assets/BitmapContainer.a917eaff.js","assets/WGLContainer.a2728de7.js","assets/LabelMetric.267a8b18.js","assets/enums.abef80de.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/LayerView.649e11dc.js","assets/layerViewUtils.8a0a28d0.js","assets/GraphicContainer.abe27126.js","assets/AGraphicContainer.c019acec.js","assets/TechniqueInstance.254dd815.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/GeometryUtils.c6f9b045.js","assets/Rect.ab45bd96.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/TileContainer.419fd15d.js","assets/FeatureCommandQueue.f16cbaa3.js","assets/constants.344a1358.js","assets/GraphicsView2D.73f18369.js","assets/AttributeStore.38266bd6.js","assets/labelUtils.37b9d8d8.js","assets/TimeOnly.5d28261e.js","assets/timeSupport.393bd0ba.js","assets/json.20588c22.js","assets/normalizeUtilsSync.71a1cb90.js","assets/rasterProjectionHelper.dd8d9a43.js","assets/RenderingContext.4521dfe8.js","assets/programUtils.d6bf54e9.js","assets/NestedMap.9ff460b9.js","assets/renderState.19e0eaae.js","assets/basicInterfaces.0f925dcd.js","assets/interfaces.98cd2ad6.js","assets/testSVGPremultipliedAlpha.3be788db.js","assets/floatRGBA.133c49be.js","assets/doublePrecisionUtils.4e9c06b3.js","assets/rasterUtils.97851091.js"])),"knowledge-graph":()=>je().then(()=>W(()=>import("./KnowledgeGraphLayerView2D.e4d204c0.js"),["assets/KnowledgeGraphLayerView2D.e4d204c0.js","assets/LayerView.649e11dc.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/definitions.a3a54ed1.js","assets/enums.8929356b.js","assets/Texture.7423fe29.js","assets/layerViewUtils.8a0a28d0.js"])),"link-chart":()=>je().then(()=>W(()=>import("./KnowledgeGraphLayerView2D.e4d204c0.js"),["assets/KnowledgeGraphLayerView2D.e4d204c0.js","assets/LayerView.649e11dc.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/definitions.a3a54ed1.js","assets/enums.8929356b.js","assets/Texture.7423fe29.js","assets/layerViewUtils.8a0a28d0.js"])),"knowledge-graph-sublayer":yl,"map-image":()=>je().then(()=>W(()=>import("./MapImageLayerView2D.2bf624b6.js"),["assets/MapImageLayerView2D.2bf624b6.js","assets/BitmapContainer.a917eaff.js","assets/WGLContainer.a2728de7.js","assets/definitions.a3a54ed1.js","assets/LabelMetric.267a8b18.js","assets/enums.abef80de.js","assets/Texture.7423fe29.js","assets/enums.8929356b.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/LayerView.649e11dc.js","assets/layerViewUtils.8a0a28d0.js","assets/GraphicsView2D.73f18369.js","assets/FieldsIndex.333d0734.js","assets/UnknownTimeZone.4756be49.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/GeometryUtils.c6f9b045.js","assets/utils.dbb84a38.js","assets/Rect.ab45bd96.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/OverrideHelper.b5d99b26.js","assets/colorUtils.085072a2.js","assets/quantizationUtils.fe6b1e6e.js","assets/AttributeStore.38266bd6.js","assets/labelUtils.37b9d8d8.js","assets/TimeOnly.5d28261e.js","assets/timeSupport.393bd0ba.js","assets/json.20588c22.js","assets/diffUtils.080c04bc.js","assets/FeatureCommandQueue.f16cbaa3.js","assets/constants.344a1358.js","assets/normalizeUtilsSync.71a1cb90.js","assets/HighlightGraphicContainer.653a10a6.js","assets/AGraphicContainer.c019acec.js","assets/TechniqueInstance.254dd815.js","assets/TileContainer.419fd15d.js","assets/ExportStrategy.9a603dd1.js","assets/Bitmap.62f36779.js","assets/ExportImageParameters.03bba3ea.js","assets/scaleUtils.24a7f96d.js","assets/floorFilterUtils.1e9a5f1e.js","assets/sublayerUtils.9912a6d8.js","assets/timeSupport.a600eb47.js","assets/RefreshableLayerView.6a9401d3.js","assets/drapedUtils.49438b18.js","assets/popupUtils.c8d8e4fb.js"])),"map-notes":()=>je().then(()=>W(()=>import("./MapNotesLayerView2D.65e24425.js"),["assets/MapNotesLayerView2D.65e24425.js","assets/highlightReasons.c3e7cabb.js","assets/LayerView.649e11dc.js","assets/Container.461c0161.js","assets/definitions.a3a54ed1.js","assets/enums.8929356b.js","assets/Texture.7423fe29.js","assets/layerViewUtils.8a0a28d0.js","assets/GraphicContainer.abe27126.js","assets/AGraphicContainer.c019acec.js","assets/TechniqueInstance.254dd815.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/OptimizedFeature.32c00f5f.js","assets/GeometryUtils.c6f9b045.js","assets/enums.abef80de.js","assets/utils.dbb84a38.js","assets/Rect.ab45bd96.js","assets/LabelMetric.267a8b18.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/TileContainer.419fd15d.js","assets/WGLContainer.a2728de7.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/FeatureCommandQueue.f16cbaa3.js","assets/constants.344a1358.js","assets/GraphicsView2D.73f18369.js","assets/FieldsIndex.333d0734.js","assets/UnknownTimeZone.4756be49.js","assets/OverrideHelper.b5d99b26.js","assets/colorUtils.085072a2.js","assets/quantizationUtils.fe6b1e6e.js","assets/AttributeStore.38266bd6.js","assets/labelUtils.37b9d8d8.js","assets/TimeOnly.5d28261e.js","assets/timeSupport.393bd0ba.js","assets/json.20588c22.js","assets/diffUtils.080c04bc.js","assets/normalizeUtilsSync.71a1cb90.js"])),media:()=>je().then(()=>W(()=>import("./MediaLayerView2D.a853cc1b.js"),["assets/MediaLayerView2D.a853cc1b.js","assets/UniqueValueRenderer.8069ab57.js","assets/ColorStop.aa8650af.js","assets/diffUtils.080c04bc.js","assets/colorRamps.272b71a1.js","assets/sizeVariableUtils.34255976.js","assets/visualVariableUtils.12ee1cdb.js","assets/jsonUtils.185b82ae.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/styleUtils.7f2b22b0.js","assets/jsonUtils.93554317.js","assets/LRUCache.6f8863ed.js","assets/Version.856e86b2.js","assets/FieldsIndex.333d0734.js","assets/UnknownTimeZone.4756be49.js","assets/OverrideHelper.b5d99b26.js","assets/colorUtils.085072a2.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/utils.dbb84a38.js","assets/quantizationUtils.fe6b1e6e.js","assets/heatmapUtils.b763e953.js","assets/perspectiveUtils.21b722a3.js","assets/normalizeUtilsSync.71a1cb90.js","assets/mat3f64.4564d6a3.js","assets/GeometryUtils.c6f9b045.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/OptimizedFeature.32c00f5f.js","assets/enums.abef80de.js","assets/definitions.a3a54ed1.js","assets/Rect.ab45bd96.js","assets/LabelMetric.267a8b18.js","assets/Texture.7423fe29.js","assets/enums.8929356b.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/highlightReasons.c3e7cabb.js","assets/floatRGBA.133c49be.js","assets/Container.461c0161.js","assets/WGLContainer.a2728de7.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/enums.7f54e43a.js","assets/MagnifierPrograms.0333d37a.js","assets/CircularArray.0c40a6a8.js","assets/testSVGPremultipliedAlpha.3be788db.js","assets/AttributeStore.38266bd6.js","assets/labelUtils.37b9d8d8.js","assets/TimeOnly.5d28261e.js","assets/timeSupport.393bd0ba.js","assets/json.20588c22.js","assets/pbf.72af564e.js","assets/FeatureCommandQueue.f16cbaa3.js","assets/constants.344a1358.js","assets/PieChartMeshWriter.c11791d1.js","assets/TurboLine.af583914.js","assets/renderState.19e0eaae.js","assets/basicInterfaces.0f925dcd.js","assets/interfaces.98cd2ad6.js","assets/GraphicsView2D.73f18369.js","assets/utils.ca25804d.js","assets/grouping.811b1171.js","assets/OverlayContainer.8c088d2d.js","assets/LayerView.649e11dc.js","assets/layerViewUtils.8a0a28d0.js"])),"ogc-feature":()=>je().then(()=>W(()=>import("./OGCFeatureLayerView2D.41605aa6.js"),["assets/OGCFeatureLayerView2D.41605aa6.js","assets/FeatureLayerView2D.2eb31764.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/definitions.a3a54ed1.js","assets/enums.8929356b.js","assets/Texture.7423fe29.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/FeatureEffect.00e4e7d7.js","assets/timeSupport.a600eb47.js","assets/FeatureSet.78257171.js","assets/LayerView.649e11dc.js","assets/layerViewUtils.8a0a28d0.js","assets/TechniqueInstance.254dd815.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/GeometryUtils.c6f9b045.js","assets/enums.abef80de.js","assets/utils.dbb84a38.js","assets/Rect.ab45bd96.js","assets/LabelMetric.267a8b18.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/TileContainer.419fd15d.js","assets/WGLContainer.a2728de7.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/CircularArray.0c40a6a8.js","assets/tileUtils.91e274f6.js","assets/sizeVariableUtils.34255976.js","assets/OrderByInfo.b53e85dd.js","assets/labelingInfo.41bbc735.js","assets/labelUtils.37b9d8d8.js","assets/jsonUtils.185b82ae.js","assets/heatmapUtils.b763e953.js","assets/SDFHelper.a7a49e03.js","assets/floatRGBA.133c49be.js","assets/FeatureCommandQueue.f16cbaa3.js","assets/constants.344a1358.js","assets/HighlightCounter.5f861618.js","assets/floorFilterUtils.1e9a5f1e.js","assets/popupUtils.c8d8e4fb.js","assets/RefreshableLayerView.6a9401d3.js"])),"open-street-map":cu,"oriented-imagery":yl,route:()=>je().then(()=>W(()=>import("./RouteLayerView2D.9256b985.js"),["assets/RouteLayerView2D.9256b985.js","assets/Stop.ca387fec.js","assets/highlightReasons.c3e7cabb.js","assets/LayerView.649e11dc.js","assets/Container.461c0161.js","assets/definitions.a3a54ed1.js","assets/enums.8929356b.js","assets/Texture.7423fe29.js","assets/layerViewUtils.8a0a28d0.js","assets/GraphicContainer.abe27126.js","assets/AGraphicContainer.c019acec.js","assets/TechniqueInstance.254dd815.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/OptimizedFeature.32c00f5f.js","assets/GeometryUtils.c6f9b045.js","assets/enums.abef80de.js","assets/utils.dbb84a38.js","assets/Rect.ab45bd96.js","assets/LabelMetric.267a8b18.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/TileContainer.419fd15d.js","assets/WGLContainer.a2728de7.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/FeatureCommandQueue.f16cbaa3.js","assets/constants.344a1358.js","assets/GraphicsView2D.73f18369.js","assets/FieldsIndex.333d0734.js","assets/UnknownTimeZone.4756be49.js","assets/OverrideHelper.b5d99b26.js","assets/colorUtils.085072a2.js","assets/quantizationUtils.fe6b1e6e.js","assets/AttributeStore.38266bd6.js","assets/labelUtils.37b9d8d8.js","assets/TimeOnly.5d28261e.js","assets/timeSupport.393bd0ba.js","assets/json.20588c22.js","assets/diffUtils.080c04bc.js","assets/normalizeUtilsSync.71a1cb90.js"])),stream:()=>je().then(()=>W(()=>import("./StreamLayerView2D.45ace16d.js"),["assets/StreamLayerView2D.45ace16d.js","assets/FeatureSet.78257171.js","assets/FeatureLayerView2D.2eb31764.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/definitions.a3a54ed1.js","assets/enums.8929356b.js","assets/Texture.7423fe29.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/FeatureEffect.00e4e7d7.js","assets/timeSupport.a600eb47.js","assets/LayerView.649e11dc.js","assets/layerViewUtils.8a0a28d0.js","assets/TechniqueInstance.254dd815.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/GeometryUtils.c6f9b045.js","assets/enums.abef80de.js","assets/utils.dbb84a38.js","assets/Rect.ab45bd96.js","assets/LabelMetric.267a8b18.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/TileContainer.419fd15d.js","assets/WGLContainer.a2728de7.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/CircularArray.0c40a6a8.js","assets/tileUtils.91e274f6.js","assets/sizeVariableUtils.34255976.js","assets/OrderByInfo.b53e85dd.js","assets/labelingInfo.41bbc735.js","assets/labelUtils.37b9d8d8.js","assets/jsonUtils.185b82ae.js","assets/heatmapUtils.b763e953.js","assets/SDFHelper.a7a49e03.js","assets/floatRGBA.133c49be.js","assets/FeatureCommandQueue.f16cbaa3.js","assets/constants.344a1358.js","assets/HighlightCounter.5f861618.js","assets/floorFilterUtils.1e9a5f1e.js","assets/popupUtils.c8d8e4fb.js","assets/RefreshableLayerView.6a9401d3.js"])),"subtype-group":()=>je().then(()=>W(()=>import("./SubtypeGroupLayerView2D.42e9bc5d.js"),["assets/SubtypeGroupLayerView2D.42e9bc5d.js","assets/FeatureLayerView2D.2eb31764.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/definitions.a3a54ed1.js","assets/enums.8929356b.js","assets/Texture.7423fe29.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/FeatureEffect.00e4e7d7.js","assets/timeSupport.a600eb47.js","assets/FeatureSet.78257171.js","assets/LayerView.649e11dc.js","assets/layerViewUtils.8a0a28d0.js","assets/TechniqueInstance.254dd815.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/GeometryUtils.c6f9b045.js","assets/enums.abef80de.js","assets/utils.dbb84a38.js","assets/Rect.ab45bd96.js","assets/LabelMetric.267a8b18.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/TileContainer.419fd15d.js","assets/WGLContainer.a2728de7.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/CircularArray.0c40a6a8.js","assets/tileUtils.91e274f6.js","assets/sizeVariableUtils.34255976.js","assets/OrderByInfo.b53e85dd.js","assets/labelingInfo.41bbc735.js","assets/labelUtils.37b9d8d8.js","assets/jsonUtils.185b82ae.js","assets/heatmapUtils.b763e953.js","assets/SDFHelper.a7a49e03.js","assets/floatRGBA.133c49be.js","assets/FeatureCommandQueue.f16cbaa3.js","assets/constants.344a1358.js","assets/HighlightCounter.5f861618.js","assets/floorFilterUtils.1e9a5f1e.js","assets/popupUtils.c8d8e4fb.js","assets/RefreshableLayerView.6a9401d3.js"])),tile:cu,"vector-tile":()=>je().then(()=>W(()=>import("./VectorTileLayerView2D.607fa891.js"),["assets/VectorTileLayerView2D.607fa891.js","assets/diffUtils.080c04bc.js","assets/enums.7f54e43a.js","assets/Rect.ab45bd96.js","assets/enums.8929356b.js","assets/Texture.7423fe29.js","assets/pbf.72af564e.js","assets/rasterizingUtils.9fb61b8b.js","assets/floatRGBA.133c49be.js","assets/constants.344a1358.js","assets/LRUCache.6f8863ed.js","assets/GeometryUtils.c6f9b045.js","assets/Program.9a92c5ff.js","assets/ProgramTemplate.7599c672.js","assets/config.8224a140.js","assets/WGLContainer.a2728de7.js","assets/definitions.a3a54ed1.js","assets/LabelMetric.267a8b18.js","assets/enums.abef80de.js","assets/VertexElementDescriptor.c76e1b24.js","assets/vec3f32.788be850.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/StyleDefinition.e031dcf6.js","assets/earcut.dc9d94eb.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/TileContainer.419fd15d.js","assets/PooledRBush.0bbb795a.js","assets/SourceLayerData.39b55c8a.js","assets/StyleRepository.baadede2.js","assets/colorUtils.085072a2.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/LayerView.649e11dc.js","assets/layerViewUtils.8a0a28d0.js"])),video:()=>je().then(()=>W(()=>import("./VideoLayerView2D.044c982b.js"),["assets/VideoLayerView2D.044c982b.js","assets/TelemetryDisplay.a0f270e7.js","assets/OverlayContainer.8c088d2d.js","assets/vec3f32.788be850.js","assets/WGLContainer.a2728de7.js","assets/definitions.a3a54ed1.js","assets/LabelMetric.267a8b18.js","assets/enums.abef80de.js","assets/Texture.7423fe29.js","assets/enums.8929356b.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/ProgramTemplate.7599c672.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/LayerView.649e11dc.js","assets/layerViewUtils.8a0a28d0.js","assets/GraphicContainer.abe27126.js","assets/AGraphicContainer.c019acec.js","assets/TechniqueInstance.254dd815.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/GeometryUtils.c6f9b045.js","assets/utils.dbb84a38.js","assets/Rect.ab45bd96.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/TileContainer.419fd15d.js","assets/FeatureCommandQueue.f16cbaa3.js","assets/constants.344a1358.js","assets/GraphicsView2D.73f18369.js","assets/FieldsIndex.333d0734.js","assets/UnknownTimeZone.4756be49.js","assets/OverrideHelper.b5d99b26.js","assets/colorUtils.085072a2.js","assets/quantizationUtils.fe6b1e6e.js","assets/AttributeStore.38266bd6.js","assets/labelUtils.37b9d8d8.js","assets/TimeOnly.5d28261e.js","assets/timeSupport.393bd0ba.js","assets/json.20588c22.js","assets/diffUtils.080c04bc.js","assets/normalizeUtilsSync.71a1cb90.js"])),wcs:()=>je().then(()=>W(()=>import("./ImageryTileLayerView2D.68c70d48.js"),["assets/ImageryTileLayerView2D.68c70d48.js","assets/multidimensionalUtils.4eed3513.js","assets/RasterVFDisplayObject.6c3c1598.js","assets/Program.9a92c5ff.js","assets/Texture.7423fe29.js","assets/enums.8929356b.js","assets/ProgramTemplate.7599c672.js","assets/VertexElementDescriptor.c76e1b24.js","assets/dataUtils.a1eaa611.js","assets/WGLContainer.a2728de7.js","assets/definitions.a3a54ed1.js","assets/LabelMetric.267a8b18.js","assets/enums.abef80de.js","assets/vec3f32.788be850.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/LayerView.649e11dc.js","assets/layerViewUtils.8a0a28d0.js","assets/rasterUtils.97851091.js","assets/TileContainer.419fd15d.js","assets/RawBlockCache.74b3fa1f.js","assets/rasterProjectionHelper.dd8d9a43.js","assets/timeSupport.a600eb47.js","assets/popupUtils.c8d8e4fb.js","assets/RefreshableLayerView.6a9401d3.js"])),"web-tile":cu,wfs:yl,wms:()=>je().then(()=>W(()=>import("./WMSLayerView2D.a39afb8f.js"),["assets/WMSLayerView2D.a39afb8f.js","assets/BitmapContainer.a917eaff.js","assets/WGLContainer.a2728de7.js","assets/definitions.a3a54ed1.js","assets/LabelMetric.267a8b18.js","assets/enums.abef80de.js","assets/Texture.7423fe29.js","assets/enums.8929356b.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/LayerView.649e11dc.js","assets/layerViewUtils.8a0a28d0.js","assets/ExportStrategy.9a603dd1.js","assets/Bitmap.62f36779.js","assets/RefreshableLayerView.6a9401d3.js","assets/ExportWMSImageParameters.f0adca82.js","assets/timeSupport.a600eb47.js"])),wmts:()=>je().then(()=>W(()=>import("./WMTSLayerView2D.1a9b79d4.js"),["assets/WMTSLayerView2D.1a9b79d4.js","assets/imageUtils.aef0a6e4.js","assets/Bitmap.62f36779.js","assets/Container.461c0161.js","assets/highlightReasons.c3e7cabb.js","assets/definitions.a3a54ed1.js","assets/enums.8929356b.js","assets/Texture.7423fe29.js","assets/WGLContainer.a2728de7.js","assets/LabelMetric.267a8b18.js","assets/enums.abef80de.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/earcut.dc9d94eb.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeature.32c00f5f.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/TileContainer.419fd15d.js","assets/LayerView.649e11dc.js","assets/layerViewUtils.8a0a28d0.js","assets/RefreshableLayerView.6a9401d3.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function DK(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new V(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const X$={hasLayerViewModule:e=>J$[e.type]!=null,importLayerView:e=>{const t=J$[e.type];if(t==null)throw DK(e);return t(e)}};function NK(e,t){const{spatialReference:i}=t,s=[t.x,t.y];let n=Number.POSITIVE_INFINITY,r=0,o=0;const a=[0,0],l=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const c of l)for(let h=0;h<c.length-1;h++){hW(a,s,c,h);const p=fy(s,a);p<n&&(n=p,r=a[0],o=a[1])}return{coordinate:new ae({x:r,y:o,spatialReference:i}),distance:n}}var Hb;let Oa=Hb=class extends Nw(Q){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return ll(this.geometry,this.spatialReference)}catch(e){return B.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?vd(this.normalizedGeometry,i):G_(this.normalizedGeometry,i))return e;const{coordinate:s}=NK(this.normalizedGeometry,i);return s&&(e.targetGeometry=s),e}clone(){return new Hb({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};d([f({constructOnly:!0})],Oa.prototype,"geometry",void 0),d([f({readOnly:!0})],Oa.prototype,"normalizedGeometry",null),d([f({constructOnly:!0})],Oa.prototype,"spatialReference",void 0),Oa=Hb=d([k("esri.views.2d.constraints.GeometryConstraint")],Oa);var Gb;let ih=Gb=class extends Nw(Q){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new Gb({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};d([f()],ih.prototype,"enabled",void 0),d([f()],ih.prototype,"rotationEnabled",void 0),ih=Gb=d([k("esri.views.2d.constraints.RotationConstraint")],ih);const qL=ih;var qb;let gi=qb=class extends Nw(Q){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:s,minZoom:n,maxZoom:r}=this,o=-1,a=-1,l=!1,c=!1;if(i!==0&&s!==0&&i<s&&([i,s]=[s,i]),!t?.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",s);t=t.map(h=>h.clone()),t.sort((h,p)=>p.scale-h.scale),t.forEach((h,p)=>h.level=p);for(const h of t)!l&&i>0&&i>=h.scale&&(o=h.level,l=!0),!c&&s>0&&s>=h.scale&&(a=e?e.level:-1,c=!0),e=h;n===-1&&(n=i===0?0:o),r===-1&&(r=s===0?t.length-1:a),n=Math.max(n,0),n=Math.min(n,t.length-1),r=Math.max(r,0),r=Math.min(r,t.length-1),n>r&&([n,r]=[r,n]),i=t[n].scale,s=t[r].scale,t.splice(0,n),t.splice(r-n+1,t.length),t.forEach((h,p)=>{this._lodByScale[h.scale]=h,this._scales[p]=h.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",r),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",s)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,s=this.effectiveMaxScale,n=e.targetGeometry,r=t&&t.targetGeometry,o=s!==0&&e.scale<s,a=i!==0&&e.scale>i;if(o||a){const l=a?i:s;if(t&&r){const c=(l-t.scale)/(e.scale-t.scale);n.x=r.x+(n.x-r.x)*c,n.y=r.y+(n.y-r.y)*c}e.scale=l}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.floor(e),s=Math.ceil(e);return t[i]+(e-i)*(t[s]-t[i])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,s;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(i=t[n],s=t[n+1],s===e)return n+this.effectiveMinZoom+1;if(i>e&&s<e)return n+this.effectiveMinZoom+1-(e-s)/(i-s)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new qb({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};d([f({readOnly:!0})],gi.prototype,"effectiveLODs",void 0),d([f({readOnly:!0})],gi.prototype,"effectiveMinZoom",void 0),d([f({readOnly:!0})],gi.prototype,"effectiveMaxZoom",void 0),d([f({readOnly:!0})],gi.prototype,"effectiveMinScale",void 0),d([f({readOnly:!0})],gi.prototype,"effectiveMaxScale",void 0),d([f()],gi.prototype,"lods",void 0),d([f()],gi.prototype,"minZoom",void 0),d([f()],gi.prototype,"maxZoom",void 0),d([f()],gi.prototype,"minScale",void 0),d([f()],gi.prototype,"maxScale",void 0),d([f()],gi.prototype,"snapToZoom",void 0),gi=qb=d([k("esri.views.2d.constraints.ZoomConstraint")],gi);const YL=gi,FK={base:null,key:"type",typeMap:{extent:tt,polygon:Mo}};let ct=class extends Q{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new ee}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new Oa({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new qL({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this.view?.constraintsInfo.lods,i=this.minZoom,s=this.maxZoom,n=this.minScale,r=this.maxScale,o=this.snapToZoom;return e&&e.lods===t&&e.minZoom===i&&e.maxZoom===s&&e.minScale===n&&e.maxScale===r&&e.snapToZoom===o?e:new YL({lods:t,minZoom:i,maxZoom:s,minScale:n,maxScale:r,snapToZoom:o})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),this.customConstraints.forEach(i=>i.constrain(e,t)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(t=>t.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};d([f({readOnly:!0})],ct.prototype,"effectiveLODs",null),d([f({readOnly:!0})],ct.prototype,"effectiveMinScale",null),d([f({readOnly:!0})],ct.prototype,"effectiveMaxScale",null),d([f({readOnly:!0})],ct.prototype,"effectiveMinZoom",null),d([f({readOnly:!0})],ct.prototype,"effectiveMaxZoom",null),d([f({types:FK,value:null})],ct.prototype,"geometry",null),d([f({type:[io]})],ct.prototype,"lods",void 0),d([f()],ct.prototype,"minScale",void 0),d([f()],ct.prototype,"maxScale",void 0),d([f()],ct.prototype,"minZoom",void 0),d([f()],ct.prototype,"maxZoom",void 0),d([f()],ct.prototype,"rotationEnabled",void 0),d([f()],ct.prototype,"snapToZoom",void 0),d([f({type:ee})],ct.prototype,"customConstraints",void 0),d([f()],ct.prototype,"view",void 0),d([f({readOnly:!0})],ct.prototype,"version",null),d([f({type:Oa,readOnly:!0})],ct.prototype,"_geometry",null),d([f({type:qL})],ct.prototype,"_rotation",null),d([f({readOnly:!0,type:YL})],ct.prototype,"_zoom",null),ct=d([k("esri.views.2d.MapViewConstraints")],ct);const ZL=ct;class ci{static getId(t,i,s,n){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${s}/${n}`}constructor(t,i,s,n){this.set(t,i,s,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,s=63&this.level;return(3&this.world)<<30|i<<22|t<<8|s}acquire(t,i,s,n){this.set(t,i,s,n)}contains(t){const i=t.level-this.level;return i>=0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}containsChild(t){const i=t.level-this.level;return i>0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new ci(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,s,n){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[r,o,a,l]=t.split("/");this.level=parseFloat(r),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+t,this.row=+i,this.col=+s,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new ci(this.level-1,this.row>>1,this.col>>1,this.world)}getNeighborId(t,i){return`${this.level}/${this.row+i}/${this.col+t}/${this.world}`}getChildKeys(){const t=this.level+1,i=this.row<<1,s=this.col<<1,n=this.world;return[new ci(t,i,s,n),new ci(t,i,s+1,n),new ci(t,i+1,s,n),new ci(t,i+1,s+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}ci.pool=new hn(ci,null,null,25,50);function Pr(e,t){return[e,t]}function Wo(e,t,i){return e[0]=t,e[1]=i,e}function jK(e,t,i,s,n){return e[0]=t,e[1]=i,e[2]=s,e[3]=n,e}const ms=new ci("0/0/0/0");class M2{static create(t,i,s=null){const n=Si(t.spatialReference),r=i.origin||Pr(t.origin.x,t.origin.y),o=Pr(t.size[0]*i.resolution,t.size[1]*i.resolution),a=Pr(-1/0,-1/0),l=Pr(1/0,1/0),c=Pr(1/0,1/0);s!=null&&(Wo(a,Math.max(0,Math.floor((s.xmin-r[0])/o[0])),Math.max(0,Math.floor((r[1]-s.ymax)/o[1]))),Wo(l,Math.max(0,Math.floor((s.xmax-r[0])/o[0])),Math.max(0,Math.floor((r[1]-s.ymin)/o[1]))),Wo(c,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:h,rows:p}=i;let m,g,y,v;return!s&&h&&p&&(Wo(a,h[0],p[0]),Wo(l,h[1],p[1]),Wo(c,h[1]-h[0]+1,p[1]-p[0]+1)),t.isWrappable?(m=Pr(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/t.size[0]),c[1]),g=Pr(Math.floor((n.origin[0]-r[0])/o[0]),a[1]),y=Pr(m[0]+g[0]-1,l[1]),v=!0):(g=a,y=l,m=c,v=!1),new M2(i.level,i.resolution,i.scale,r,a,l,c,o,g,y,m,v)}constructor(t,i,s,n,r,o,a,l,c,h,p,m){this.level=t,this.resolution=i,this.scale=s,this.origin=n,this.first=r,this.last=o,this.size=a,this.norm=l,this.worldStart=c,this.worldEnd=h,this.worldSize=p,this.wrap=m}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,s=!1){ms.set(i);const n=s?ms.col:this.denormalizeCol(ms.col,ms.world),r=ms.row;return jK(t,this.getXForColumn(n),this.getYForRow(r+1),this.getXForColumn(n+1),this.getYForRow(r)),t}getTileCoords(t,i,s=!1){ms.set(i);const n=s?ms.col:this.denormalizeCol(ms.col,ms.world);return Array.isArray(t)?Wo(t,this.getXForColumn(n),this.getYForRow(ms.row)):(t.x=this.getXForColumn(n),t.y=this.getYForRow(ms.row)),t}}class id{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:i,colFrom:s,colTo:n}of this.spans)for(let r=s;r<=n;r++){const o=t.getWorldForColumn(r);yield new ci(t.level,i,t.normalizeCol(r),o)}}forEach(t,i){const{spans:s,lodInfo:n}=this,{level:r}=n;if(s.length!==0)for(const{row:o,colFrom:a,colTo:l}of s)for(let c=a;c<=l;c++)t.call(i,r,o,n.normalizeCol(c),n.getWorldForColumn(c))}}id.pool=new hn(id);class M0{constructor(t,i,s){this.row=t,this.colFrom=i,this.colTo=s}}const Ue=new ci("0/0/0/0");class $2{static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[s,n]=t,[r,o]=i,a=r-s,l=o-n,c=l!==0?a/l:0,h=(Math.ceil(n)-n)*c,p=(Math.floor(n)-n)*c;return new $2(s,Math.floor(n),Math.ceil(o),c,a<0?h:p,a<0?p:h,a<0?r:s,a<0?s:r)}constructor(t,i,s,n,r,o,a,l){this.x=t,this.ymin=i,this.ymax=s,this.invM=n,this.leftAdjust=r,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const $i=[[0,0],[0,0],[0,0],[0,0]],zK=1e-6;class VK{constructor(t,i=null,s=t.lods[0].level,n=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const r=t.lods.filter(a=>a.level>=s&&a.level<=n);this.minScale=r[0].scale,this.maxScale=r[r.length-1].scale;const o=this._lodInfos=r.map(a=>M2.create(t,a,i));r.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,s=!1){Ue.set(i);const n=this._infoByLevel[Ue.level];return n?n.getTileBounds(t,Ue,s):t}getTileCoords(t,i,s=!1){Ue.set(i);const n=this._infoByLevel[Ue.level];return n?n.getTileCoords(t,Ue,s):t}getTileCoverage(t,i=192,s=!0,n="closest"){if(!s&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const r=n==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=id.pool.acquire(r),a=this._wrap;let l,c,h,p=1/0,m=-1/0;const g=o.spans;$i[0][0]=$i[0][1]=$i[1][1]=$i[3][0]=-i,$i[1][0]=$i[2][0]=t.size[0]+i,$i[2][1]=$i[3][1]=t.size[1]+i;for(const w of $i)t.toMap(w,w),w[0]=r.getColumnForX(w[0]),w[1]=r.getRowForY(w[1]);const y=[];let v=3;for(let w=0;w<4;w++){if($i[w][1]===$i[v][1]){v=w;continue}const x=$2.create($i[w],$i[v]);p=Math.min(x.ymin,p),m=Math.max(x.ymax,m),y[x.ymin]===void 0&&(y[x.ymin]=[]),y[x.ymin].push(x),v=w}if(p==null||m==null||m-p>100)return null;let b=[];for(l=p;l<m;){y[l]!=null&&(b=b.concat(y[l])),c=1/0,h=-1/0;for(let w=b.length-1;w>=0;w--){const x=b[w];c=Math.min(c,x.getLeftCol()),h=Math.max(h,x.getRightCol())}if(c=Math.floor(c),h=Math.floor(h),l>=r.first[1]&&l<=r.last[1])if(a)if(r.size[0]<r.worldSize[0]){const w=Math.floor(h/r.worldSize[0]);for(let x=Math.floor(c/r.worldSize[0]);x<=w;x++)g.push(new M0(l,Math.max(r.getFirstColumnForWorld(x),c),Math.min(r.getLastColumnForWorld(x),h)))}else g.push(new M0(l,c,h));else c>r.last[0]||h<r.first[0]||(c=Math.max(c,r.first[0]),h=Math.min(h,r.last[0]),g.push(new M0(l,c,h)));l+=1;for(let w=b.length-1;w>=0;w--){const x=b[w];x.ymax>=l?x.incrRow():b.splice(w,1)}}return o}getTileParentId(t){Ue.set(t);const i=this._infoByLevel[Ue.level],s=this._lodInfos.indexOf(i)-1;return s<0?null:(this._getTileIdAtLOD(Ue,this._lodInfos[s],Ue),Ue.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){Ue.set(i);const s=this._infoByLevel[Ue.level],n=t.lodInfo;if(n.resolution>s.resolution){this._getTileIdAtLOD(Ue,n,Ue);const o=n.denormalizeCol(Ue.col,Ue.world);for(const a of t.spans)if(a.row===Ue.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(n.resolution<s.resolution){const[o,a,l,c]=t.spans.reduce((v,b)=>(v[0]=Math.min(v[0],b.row),v[1]=Math.max(v[1],b.row),v[2]=Math.min(v[2],b.colFrom),v[3]=Math.max(v[3],b.colTo),v),[1/0,-1/0,1/0,-1/0]),h=s.denormalizeCol(Ue.col,Ue.world),p=n.getColumnForX(s.getXForColumn(h)),m=n.getRowForY(s.getYForRow(Ue.row)),g=n.getColumnForX(s.getXForColumn(h+1))-1,y=n.getRowForY(s.getYForRow(Ue.row+1))-1;return!(p>c||g<l||m>a||y<o)}const r=n.denormalizeCol(Ue.col,Ue.world);return t.spans.some(o=>o.row===Ue.row&&o.colFrom<=r&&o.colTo>=r)}normalizeBounds(t,i,s){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const n=Si(this.tileInfo.spatialReference),r=-s*(n.valid[1]-n.valid[0]);t[0]+=r,t[2]+=r}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let s=1;s<i.length-1;s++)if(t>i[s]+zK)return this._infoByScale[i[s-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((s,n)=>Math.abs(n-t)<Math.abs(s-t)?n:s,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let s=i.length-1;s>=0;s--)if(t<i[s])return s===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[s]].level+(i[s]-t)/(i[s]-i[s+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,i,s){const n=this._infoByLevel[s.level];return t.set(s),i.resolution<n.resolution?null:(i.resolution===n.resolution||(t.level=i.level,t.col=Math.floor(s.col*n.resolution/i.resolution+.01),t.row=Math.floor(s.row*n.resolution/i.resolution+.01)),t)}}class UK{constructor(t,i){this.item=t,this.controller=i,this.promise=null}}class WK{constructor(t){this._schedule=null,this._task=null,this._deferreds=new Df,this._controllers=new Df,this._processingItems=new Df,this._pausedSignal=NI(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new Hm(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&i&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=et(this._schedule),this._task=et(this._task)}get updating(){return!!this._task?.updating||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,s)=>t(s))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,i){const s=this.get(t);if(s)return s;const n=new AbortController;let r=null;i&&(r=ns(i,()=>n.abort()));const o=()=>{const h=this._processingItems.get(t);h&&h.controller.abort(),a(),c.reject(_t())},a=()=>{l.remove(),r?.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},l=S_(n.signal,o),c=cs();return this._deferreds.set(t,c),this._controllers.set(t,n),c.promise.then(a,a),this._queue.push(t),this._scheduleNext(),c.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){const t=this._queue.popLast();return t&&(this._deferreds.get(t)?.reject(_t("Removed from queue")),this._removeItem(t)),t}reset(){const t=[];this._processingItems.forEach(i=>t.push(i)),this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=md(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let i;const s=new AbortController,n=new UK(t,s);this._processingItems.set(t,n);try{i=this.process(t,s.signal)}catch(r){this._processError(n,r)}Oo(i)?(n.promise=i,i.then(r=>this._processResult(n,r),r=>this._processError(n,r))):this._processResult(n,i)}get test(){}}function BK(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const $0=new Set,Pp=[],vl=new Map,K$=[0,0];let Zr=class extends Q{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:i}=this;this._queue=new WK({concurrency:e,process:(s,n)=>{const r=this._keyToItem.get(s);return t(r,{signal:n})},peeker:i==="scale-first"?s=>this._peekByScaleFirst(s):s=>this._peekByCenterFirst(s)})}destroy(){this.clear(),this._queue=Ke(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const i=this._queue.push(t),s=()=>{this._keyToItem.delete(t)};return this._keyToItem.set(t,e),i.then(s,s),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach(c=>{const h=this._keyToItem.get(c),p=this.tileInfoView.getTileScale(h.key);vl.has(p)||(vl.set(p,[]),i=Math.max(p,i),s=Math.min(p,s)),vl.get(p).push(h.key),$0.add(p)});let n=this.state.scale;vl.has(n)||(BK(Pp,$0),Pp.sort((c,h)=>c-h),n=Pp.reduce((c,h)=>Math.abs(h-n)<Math.abs(c-n)?h:c,Pp[0])),n=Math.min(n,i),n=Math.max(n,s);const r=vl.get(n),o=t.getClosestInfoForScale(n),a=o.getColumnForX(this.state.center[0]),l=o.getRowForY(this.state.center[1]);return r.sort((c,h)=>{const p=o.denormalizeCol(c.col,c.world),m=o.denormalizeCol(h.col,h.world);return Math.sqrt((a-p)*(a-p)+(l-c.row)*(l-c.row))-Math.sqrt((a-m)*(a-m)+(l-h.row)*(l-h.row))}),$0.clear(),vl.clear(),r[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let s,n=Number.POSITIVE_INFINITY;return e.forEach(r=>{const o=this._keyToItem.get(r);t.getTileCoords(K$,o.key);const a=fy(K$,i);a<n&&(n=a,s=o.key)}),s.id}};d([f({constructOnly:!0})],Zr.prototype,"concurrency",void 0),d([f({constructOnly:!0})],Zr.prototype,"process",void 0),d([f()],Zr.prototype,"state",void 0),d([f({constructOnly:!0})],Zr.prototype,"strategy",void 0),d([f({constructOnly:!0})],Zr.prototype,"tileInfoView",void 0),Zr=d([k("esri.views.2d.tiling.TileQueue")],Zr);const vde=Zr;class HK{constructor(t,i,s){this.maxSize=t,this._tileInfoView=i,this._removedFunc=s,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return;const s=i.key.level,n=this._tileKeysPerLevel[s];Q$(this._tilePerId,t);for(let r=0;r<n.length;r++)if(n[r].id===t){n.splice(r,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,s=i.id;if(this._tilePerId.has(s))return;this._tilePerId.set(s,t);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(t,i,s){let n=this._tilePerId.size;if(n<=this.maxSize)return;let r=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&r>=0;)r!==t&&(n=this._pruneAroundCenterTile(n,i,s,r)),r--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,s,t))}_pruneAroundCenterTile(t,i,s,n){const r=this._tileKeysPerLevel[n];if(!r||r.length===0)return t;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=s*o[0],c=s*o[1],h=[0,0],p=[0,0];for(r.sort((m,g)=>(h[0]=a.x+l*(m.col+.5),h[1]=a.y-c*(m.row+.5),p[0]=a.x+l*(g.col+.5),p[1]=a.y-c*(g.row+.5),Zm(h,i)-Zm(p,i)));r.length>0;){const m=r.pop();if(this._removeTile(m.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this._removedFunc&&i&&this._removedFunc(i),Q$(this._tilePerId,t)}}function Q$(e,t){e.delete(t)}const Bo=new ci(0,0,0,0),kn=new Map,Ho=[],T0=[];class bde{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new HK(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:i,tileIndex:s}=this,{scale:n,center:r,resolution:o}=t.state,{minScale:a,maxScale:l}=this.tileInfoView,c=!t.stationary&&n>this._previousScale;if(this._previousScale=n,!i&&(n>a||n<l))return this.tiles.length=0,void this.clear();const h=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!h)return this.tiles.length=0,void this.clear();const{spans:p,lodInfo:m}=h,{level:g}=m;this.tiles.length=0,s.forEach(w=>w.visible=!0);let y=0,v=0;if(p.length>0)for(const{row:w,colFrom:x,colTo:$}of p)for(let S=x;S<=$;S++){y++;const M=Bo.set(g,w,m.normalizeCol(S),m.getWorldForColumn(S)).id;let P=s.get(M);if(P)P.isReady?(kn.set(M,P),v++):c||this._addParentTile(M,kn);else{if(this._tileCache?.has(M)){if(P=this._tileCache.pop(M),this.tileIndex.set(M,P),P.isReady){kn.set(M,P),v++;continue}}else P=this.acquireTile(Bo),this.tileIndex.set(M,P);c||this._addParentTile(M,kn)}}const b=v===y;for(const[w,x]of s){if(kn.has(w))continue;Bo.set(w);const $=this.tileInfoView.intersects(h,Bo),S=this.cachePolicy==="purge"?Bo.level!==g:Bo.level>g;!$||!c&&b?!S&&$||Ho.push(x):x.isReady?S&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Bo,g)?Ho.push(x):T0.push(x):S&&Ho.push(x)}for(const w of T0)w.isReady&&kn.set(w.key.id,w);for(const w of Ho)this._tileCache?this._tileCache.add(w):this.releaseTile(w),s.delete(w.key.id);for(const w of kn.values())this.tiles.push(w);for(const w of s.values())kn.has(w.key.id)||(w.visible=!1);this._tileCache?.prune(g,r,o),id.pool.release(h),T0.length=0,Ho.length=0,kn.clear()}clear(){const{tileIndex:t}=this;for(const i of t.values())this.releaseTile(i);t.clear()}refresh(t){for(const i of this.tileIndex.values())this.tiles.includes(i)?t(i):Ho.push(i);for(const i of Ho)this.releaseTile(i),this.tileIndex.delete(i.key.id);this._tileCache?.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){let s=t,n=null;for(;s=this.tileInfoView.getTileParentId(s),s;)if(this.tileIndex.has(s)){if(n=this.tileIndex.get(s),n?.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if(this._tileCache?.has(s)&&(n=this._tileCache.pop(s),this.tileIndex.set(s,n),n?.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(t,i){const s=xi();this.tileInfoView.getTileBounds(s,t,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<t.level){const r=xi();if(this.tileInfoView.getTileBounds(r,n.key,!0),oB(r,s))return!0}return!1}}let ri=class extends Q{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([le(()=>this.constraints?.version,t=>{this.constraints&&t&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Qa)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return this.state.commitProperty("id"),new ae({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let t;try{t=this._project(e,this.state.spatialReference)}catch(s){return void B.getLogger(this).error(new V("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:s}))}const i=this.viewpoint;zb(i,i,t),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void B.getLogger(this).error(new V("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let t;try{t=this._project(e,this.state.spatialReference)}catch(s){return void B.getLogger(this).error(new V("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const i=this.viewpoint;eX(i,i,t,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;uX(t,t,e),this.viewpoint=t}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const t=this.viewpoint;H$(t,t,e),this.viewpoint=t}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let t,i;try{t=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?i=new V("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(i=new V("mapview:invalid-viewpoint","geometry not defined"))}catch(n){i=new V("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:n})}if(i)return void B.getLogger(this).error(i);this._scaleBeforeChangingSpatialReference=null;const s=new Cs({targetGeometry:new ae,scale:0,rotation:0});Xt(s,t),this.constraints?.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const s=this._get("extent");return void(s&&(this._set("extent",void 0),this._set("center",s.center)))}const t=this.constraints?.zoomToScale(e)??0;if(!t)return void this._set("zoom",-1);const i=this.viewpoint;H$(i,i,t),this.viewpoint=i,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:t,constraints:i}=this,s=this._get("center"),n=this._get("extent"),r=this._get("scale"),o=this._get("rotation"),a=this._get("viewpoint"),l=this._get("zoom"),c=l!=null&&i!=null&&i.zoomToScale(l)||void 0;let h,p,m;const g=a?.rotation,y=a?.targetGeometry;y?.type==="extent"?h=y:y?.type==="point"&&(p=y,m=a?.scale);const v=n??h;return{center:s??p??v?.center,rotation:o??g,scale:(r??c??m??(v&&gy(v,[e[0]-t.left-t.right,e[1]-t.top-t.bottom])))||void 0}}startup(e,t,i,s){const n=e.targetGeometry;try{this._project(e,i)}catch(r){B.getLogger(this).warn(new cr("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:i,error:r})),e.targetGeometry=s||new ae({x:0,y:0,spatialReference:i})}this.constraints?.fit(e),this._set("state",new x2({padding:this.padding,size:t,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,t],spatialReference:i,rotation:s,scale:n}=this.state.paddedViewState,r=new ae({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",r),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("state",null)}changeSpatialReference(e){const t=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=t.scale;else{const a=t.viewpoint.clone();a.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=a}const i=t.clone(),[s,n]=t.center;let r=null;try{r=this._project(new ae({x:s,y:n,spatialReference:t.spatialReference}),e)}catch(a){U_()||B.getLogger(this).warn(new cr("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:r?.toJSON(),spatialReference:e,error:a}))}r||(r=new ae({x:0,y:0,spatialReference:e}));const o=zb(new Cs({targetGeometry:new ae,scale:0,rotation:0}),t.viewpoint,r);i.viewpoint=o;try{const l=[t.size[0]/2,t.size[1]/2],c=[l[0]+20,l[1]],h=t.toMap([0,0],c),{x:p,y:m}=this._project(new ae({x:h[0],y:h[1],spatialReference:t.spatialReference}),e);h[0]=p,h[1]=m,i.toScreen(h,h);const g=aX(l,h,c),y=Math.hypot(h[0]-l[0],h[1]-l[1])/20;!Number.isFinite(y)||Math.abs(y)>4?(o.rotation=0,o.targetGeometry=new ae({x:0,y:0,spatialReference:e})):(o.scale*=y,o.scale>L("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(g)?g:0)}catch{}this._get("constraints")?.constrain(o,void 0),this._get("state").viewpoint=o}resize(e,t){if(!this.ready)return;const i=this.state;let s=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.concat();i.size=[e,t],cX(s,s,n,this.state.paddedViewState.size,this.resizeAlign),s=this.constraints?.constrain(s,void 0)??s,this.state.viewpoint=s}toMap(e){if(!this.ready)return null;const t=[0,0],[i,s]=this.state.toMap(t,[e.x,e.y]),n=this.state.spatialReference;return new ae({x:i,y:s,spatialReference:n})}toScreen(e,t){if(!this.ready)return null;const i=this._project(e,this.state.spatialReference),s=[i.x,i.y];return t?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),Ut(s[0],s[1])}_project(e,t){const i=e?.targetGeometry||e;if(!t)return e;if(!i)return null;if(t.imageCoordinateSystem||i.spatialReference?.imageCoordinateSystem||$t(t,i.spatialReference))return e;const s=ll(i,t);if(!s)throw new V("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:t});return GK(e)?(e.targetGeometry=s,e):s}};function GK(e){return e?.declaredClass==="esri.Viewpoint"}d([f({type:ae})],ri.prototype,"center",null),d([f()],ri.prototype,"constraints",void 0),d([f({type:tt})],ri.prototype,"extent",null),d([f({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],ri.prototype,"padding",null),d([f()],ri.prototype,"ready",void 0),d([f()],ri.prototype,"resizeAlign",void 0),d([f({readOnly:!0})],ri.prototype,"resolution",null),d([f({type:Number})],ri.prototype,"rotation",null),d([f({type:Number})],ri.prototype,"scale",null),d([f({readOnly:!0})],ri.prototype,"state",void 0),d([f({type:Cs})],ri.prototype,"viewpoint",null),d([f()],ri.prototype,"zoom",null),ri=d([k("esri.views.2d.ViewStateManager")],ri);function T2(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}class eT extends Et{constructor(t,i){super(!0),this._view=t,this.registerIncoming("double-click",i,s=>this._handleDoubleClick(s,i))}_handleDoubleClick(t,i){T2(t.data,"primary")&&(t.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class qK extends Et{constructor(t,i,s){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",s,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:s}=i;if(s!==this.pointerType)return;t.stopPropagation();const{action:n,delta:r}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=r,a.begin();break}case"update":{if(this._previousDelta.y===r.y)return;this._previousDelta=r;const l=1.015**r.y,c=this._startScale*l,h=c/this._currentScale;a.setViewpointImmediate(h),this._currentScale=c;break}case"end":{const{constraints:l}=o,{effectiveLODs:c,snapToZoom:h}=l;if(!h||!c)return void a.end();const p=l.snapScale(this._currentScale),m=(r.y>0?Math.max(p,l.snapToPreviousScale(this._startScale)):Math.min(p,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m).then(()=>{a.end()});break}}}}class vy{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const i=t.data,s=i.pointers.size;switch(i.action){case"start":this._currentCount=s,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=s,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=s,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){this._startEvent=t,this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}}class YK extends Et{constructor(t,i,s){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",s,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new vy({start:(i,s)=>{this.view.mapViewNavigation.pan.begin(this.view,s.data),s.stopPropagation()},update:(i,s)=>{this.view.mapViewNavigation.pan.update(this.view,s.data),s.stopPropagation()},end:(i,s)=>{this.view.mapViewNavigation.pan.end(this.view,s.data),s.stopPropagation()},condition:(i,s)=>i===1&&T2(s.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class ZK extends Et{constructor(t,i,s){super(!0),this._view=t,this.pointerAction=i;const n=this._view.mapViewNavigation;this._dragEventSeparator=new vy({start:(r,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(r,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(r,o)=>{n.rotate.end(),o.stopPropagation()},condition:(r,o)=>r===1&&T2(o.data,this.pointerAction)}),this.registerIncoming("drag",s,r=>this._dragEventSeparator.handle(r))}}function gs(e){let t=e*e;return e<0&&(t*=-1),t}function JK(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function XK(e,t,i){const s=i,n=e.state,r=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return r.deviceType==="standard"?(s.translation[0]=gs(n.axes[0]),s.translation[1]=gs(n.axes[1]),s.translation[2]=gs(n.buttons[7])-gs(n.buttons[6]),s.heading=gs(n.axes[2]),s.tilt=gs(n.axes[3])):r.deviceType==="spacemouse"&&(s.translation[0]=1.2*gs(n.axes[0]),s.translation[1]=1.2*gs(n.axes[1]),s.translation[2]=2*-gs(n.axes[2]),s.heading=1.2*gs(n.axes[5]),s.tilt=1.2*gs(n.axes[3])),s.tilt*=o,LA(s.translation,s.translation,a),s}function KK(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}class QK extends Et{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new pd,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([le(()=>this._view.navigation.gamepad?.enabled,i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=gc({update:s=>this._frameUpdate(s.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Qt)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this._view.navigation.gamepad.device;i&&t.data.device!==i||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,JK(this._transformation)):(this._currentDevice=t.data.device,XK(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const i=this._transformation;if(KK(i))return;const s=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,r=tQ*n*t;yy(s,s,[i.translation[0]*r,-i.translation[1]*r]);const o=1+i.translation[2]*iQ*t,a=this._view.constraints.rotationEnabled?-i.heading*eQ*t:0,l=this._view.size,c=[l[0]/2,l[1]];AL(s,s,o,a,c,l);const h=this._view.constraints.constrain(s,this._view.viewpoint);this._view.viewpoint=h}}const eQ=.06,tQ=.7,iQ=6e-4;function JL(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),Ee(()=>document.removeEventListener("visibilitychange",t))}class sQ extends Et{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const r=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(r==null)return;n.stopPropagation(),n.preventDefault();const o=n.type==="key-down";if(this._pressedKeys[o?"add":"delete"](r),o){if(this._direction===r)return;this._direction=r,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",s,this._handleKey),this.registerIncoming("key-up",s,this._handleKey),this.registerIncoming("blur",s,this._stopMovement),this._visibilityHandle=JL(n=>n?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(t){const i=this._currentDirection!=null;if(t!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}}class nQ extends Et{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",s,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",s,n=>this._handleKeyUp(n)),this.registerIncoming("blur",s,()=>this._handleStop()),this._visibilityHandle=JL(n=>n?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const s=t.modifiers;if(s.size>0&&!s.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[t.data.key];if(this._pressed=n!=null,this._pressed){if(t.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}var Kl;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(Kl||(Kl={}));class rQ extends Et{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",s,n=>this._handleKeyDown(n)),i.zoomIn.forEach(n=>this._keysToZoomAction[n]=Kl.IN),i.zoomOut.forEach(n=>this._keysToZoomAction[n]=Kl.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:s}=t.data;if(!(s in this._keysToZoomAction))return;const n=this._keysToZoomAction[s],{mapViewNavigation:r}=this.view;let o=null;switch(n){case Kl.IN:o=r.zoomIn();break;case Kl.OUT:o=r.zoomOut();break;default:return}r.begin(),o.then(()=>r.end()),t.stopPropagation()}}const oQ=.6;class aQ extends Et{constructor(t,i){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,s=>this._handleMouseWheel(s))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:s,y:n,deltaY:r}=t.data,o=1/oQ**(1/60*r),a=i.zoom(o,[s,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}}class lQ extends Et{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new vy({start:(s,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(s,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(s,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:s=>s>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function tT(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value||1:0),axes:t.axes.map(i=>hQ(i,e.axisThreshold))}:{buttons:[],axes:[]}}function cQ(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function uQ(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function hQ(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}class dQ{constructor(t,i){this._element=t,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=r=>{this._connectGamepad(r.gamepad)},this._onDisconnectGamepad=r=>{const o=r.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,tT(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const s="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=s&&n,this.supported&&(iT(r=>this._connectGamepad(r)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const i=new u2(t);i.deviceType!=="unknown"&&(this._inputDevices[t.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=gc({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this._element.contains(document.activeElement),s=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!i;iT(n=>{const r=this._inputDevices[n.index];if(!r)return;const o=this._latestUpdate[n.index],a=tT(r),l=s||uQ(a);o&&(o.timestamp===n.timestamp||!o.active&&l||cQ(o.state,a))||this._emitGamepadEvent(n,a,!l)})}_emitGamepadEvent(t,i,s){const n=this._latestUpdate[t.index],r=n&&n.active;if(!r&&!s)return;const o=!r&&s?"start":r&&s?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:s},this._callback&&this._callback({device:this._inputDevices[t.index],state:i,action:o})}}function pQ(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function iT(e){const t=window.navigator.getGamepads();for(let i=0;i<t.length;i++){const s=t[i];pQ(s)&&e(s)}}const sT=L("edge"),fQ=L("chrome"),mQ=L("ff"),gQ=L("safari"),nT="esri-view-surface",bl={touchNone:`${nT}--touch-none`,touchPan:`${nT}--touch-pan`};class by{constructor(t,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new dQ(t,this._input),this._gamepadSource.onEvent=s=>this._callback("gamepad",s)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=Ke(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const s=this._active[i];this._element.removeEventListener(k0[i],s),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&k0[i]){const s=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(k0[i],s),this._active[i]=s}}),this._gamepadSource.hasEventListeners=t?.has("gamepad")??!1}setPointerCapture(t,i){i?this._setPointerCatpureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?bl.touchNone:bl.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?bl.touchPan:bl.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(bl.touchNone),this._element.classList.remove(bl.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const s=qI(this._element,t);return by.test.disableSubpixelCoordinates&&(s.x=Math.round(s.x),s.y=Math.round(s.y)),i.x=s.x,i.y=s.y,i}_handleKey(t,i){const{key:s}=i;s&&t==="key-up"&&this._keyDownState.delete(s);const n={native:i,key:s,repeat:!!s&&this._keyDownState.has(s)};s&&t==="key-down"&&this._keyDownState.add(n.key),this._callback(t,n)}_handlePointer(t,i){const s=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,s)}_handlePointerPreventDefault(t,i){const s=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,s)}_handleMouseWheel(t,i){let s=i.deltaY;switch(i.deltaMode){case 0:sT&&(s=s/document.documentElement.clientHeight*600);break;case 1:s*=30;break;case 2:s*=900}sT?s*=.7:fQ||gQ?s*=.6:mQ&&(s*=1.375);const n=100,r=Math.abs(s);r>n&&(s=s/r*200/(1+Math.exp(-.02*(r-n))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:s});this._callback(t,o)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const s={native:i};i.preventDefault(),this._callback(t,s)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}by.test={disableSubpixelCoordinates:!1};const k0={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class yQ extends Et{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}}const Vt={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function Xm(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function vQ(e,t){const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)}function bQ(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Ut()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[$,S]=e,[M,P]=[S.x-$.x,S.y-$.y];return t.radius=Math.sqrt(M*M+P*P)/2,t.center.x=($.x+S.x)/2,t.center.y=($.y+S.y)/2,t}let i=0,s=0;for(let $=0;$<e.length;$++)i+=e[$].x,s+=e[$].y;i/=e.length,s/=e.length;const n=e.map($=>$.x-i),r=e.map($=>$.y-s);let o=0,a=0,l=0,c=0,h=0,p=0,m=0;for(let $=0;$<n.length;$++){const S=n[$],M=r[$],P=S*S,C=M*M;o+=P,a+=C,l+=S*M,c+=P*S,h+=C*M,p+=S*C,m+=M*P}const g=.5*(c+p),y=.5*(h+m),v=o*a-l*l,b=(g*a-y*l)/v,w=(o*y-l*g)/v,x=Ut(b+i,w+s);return{radius:Math.sqrt(b*b+w*w+(o+a)/e.length),center:x}}function Va(e){const{native:t}=e,{pointerId:i,button:s,pointerType:n}=t;return n==="mouse"?`${i}:${s}`:`${n}`}class _Q extends Et{constructor(t=Vt.maximumDoubleClickDelay,i=Vt.maximumDoubleClickDistance,s=Vt.maximumDoubleTouchDelay,n=Vt.maximumDoubleTouchDistance,r=Rc){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=n,this._clock=r,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Ut(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new vy({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=et(t.doubleTapTimeout)})}get hasPendingInputs(){return fg(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout=et(i.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:s,modifiers:n}=i,{center:r}=s;this._dragStartCenter=r;const o=P0("begin",Ut(0,0),s);this._doubleTapDrag.emit(o,void 0,n),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=t,{center:n}=i,r=P0("update",Ut(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(r,void 0,s),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=t,{center:n}=i,r=P0("end",Ut(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(r,void 0,s),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,s=Va(i),n=this._pointerState.get(s),{pointerType:r}=i.native;if(n){const o=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(s),Xm(n.event.data,i)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:i}=t,{pointerType:s}=i.native,n=Va(i),r=s==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),r);this._pointerState.set(n,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}}function P0(e,t,i){const{button:s,buttons:n,pointer:r,pointers:o,pointerType:a,timestamp:l}=i;return{action:e,delta:t,button:s,buttons:n,pointer:r,pointers:o,pointerType:a,timestamp:l}}class wQ extends Et{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,s,n){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:n,pointers:xQ(this._activePointerMap),pointer:i,angle:s.angle,radius:s.radius,center:s.center}}_addPointer(t){const i=t.native.pointerId,s=Op(this._activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,n);const r=Uf(n,XL(this._activePointerMap));n.initialAngle=r,n.lastAngle=r,this._updatePointerAngles(s)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,s=this._activePointerMap.get(i);s?s.event=t:this._addPointer(t)}_removePointer(t){const i=Op(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=Op(this._activePointerMap);this._activePointerMap.forEach(s=>{s.initialAngle=Uf(s,i)-t,s.lastAngle=Uf(s,i)-t})}_emitEvent(t,i,s){const n=Op(this._activePointerMap);this._drag.emit(this._createPayload(t,i,n,s),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,s=t.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,s),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,s=i.currentEvent,n=t.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(s.native.pointerId)?(this._updatePointer(s),!this._isCurrentDragSuppressed&&this._emitEvent("update",s,n)):(this._addPointer(s),this._emitEvent("added",s,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(s),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",s,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}}function XL(e){const t=[];return e.forEach(i=>{t.push(Ut(i.event.x,i.event.y))}),bQ(t)}function Op(e){const t=XL(e);let i=0;return e.forEach(s=>{let n=Uf(s,t),r=n-s.lastAngle;for(;r>Math.PI;)r-=2*Math.PI;for(;r<-Math.PI;)r+=2*Math.PI;n=s.lastAngle+r,s.lastAngle=n,i+=n-s.initialAngle}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function xQ(e){const t=new Map;return e.forEach((i,s)=>t.set(s,i.event)),t}function Uf(e,t){const i=e.event,s=i.x-t.center.x,n=i.y-t.center.y;return Math.atan2(n,s)}var rT;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(rT||(rT={}));class SQ extends Et{constructor(t=Vt.maximumDoubleClickDelay,i=Vt.maximumDoubleClickDistance,s=Vt.maximumDoubleTouchDelay,n=Vt.maximumDoubleTouchDistance,r=Rc){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=n,this._clock=r,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,s=Va(i);if(!this._pointerState.has(s)){const n={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(s,n),this.startCapturingPointer(i.native)}}_handlePointerUp(t){const i=t.data,s=Va(i),n=this._pointerState.get(s);if(n&&n.downButton===i.native.button){const r=n.immediateDoubleClick,o=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;r?(r.timeoutHandle.remove(),Xm(r,t.data)>o?this._startImmediateDoubleClick(t,n):(this._immediateDoubleClick.emit(t.data,void 0,r.modifiers),this._removeState(i))):Xm(n,t.data)>o?this._removeState(i):this._startImmediateDoubleClick(t,n)}}_startImmediateDoubleClick(t,i){const s=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),s)}}_removeState(t){const i=Va(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}class MQ extends Et{constructor(t=Vt.maximumClickDelay,i=Vt.movementUntilMouseDrag,s=Vt.movementUntilPenDrag,n=Vt.movementUntilTouchDrag,r=Vt.holdDelay,o=Rc){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=s,this._movementUntilTouchDrag=n,this._holdDelay=r,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=et(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,s=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(s);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const r={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(s,r),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const i=t.data,s=i.native.pointerId,n=this._pointerState.get(s);n&&(n.isDragging?this._pointerDrag.emit(Ep("update",n,i),void 0,n.modifiers):vQ(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),n.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const i=t.data,s=i.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,s===n.startEvent.native.pointerId?this._pointerDrag.emit(Ep("start",n,i)):this._pointerDrag.emit(Ep("start",n,n.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const s=t.data,n=s.native.pointerId,r=this._pointerState.get(n);r&&(r.holdTimeout!=null&&(r.holdTimeout.remove(),r.holdTimeout=null),r.isDragging?this._pointerDrag.emit(Ep("end",r,i==="pointer-up"?s:r.previousEvent),void 0,r.modifiers):i==="pointer-up"&&r.downButton===s.native.button&&t.timestamp-r.startTimestamp<=this._maximumClickDelay&&!r.holdEmitted&&this._immediateClick.emit(s),this._pointerState.delete(n),this.stopCapturingPointer(s.native),this._pointerState.size===0&&this._moveHandle.pause())}}function Ep(e,t,i){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:i}}class $Q extends Et{constructor(t=Vt.maximumDoubleClickDelay,i=Vt.maximumDoubleClickDistance,s=Vt.maximumDoubleTouchDelay,n=Vt.maximumDoubleTouchDistance,r=Rc){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=n,this._clock=r,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=et(t.doubleClickTimer))}get hasPendingInputs(){return fg(this._pointerState,t=>t.doubleClickTimer!=null)}_clearDoubleClickTimer(t,i){const s=this._pointerState.get(t);s&&(s.doubleClickTimer=et(s.doubleClickTimer),i&&this._click.emit(s.event.data,void 0,s.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const i=t.data,{pointerType:s}=i.native,n=TQ(i);if(!this._pointerState.has(n))return void this._startClick(t);const r=this._pointerState.get(n),{data:o,modifiers:a}=r.event,l=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;Xm(o,i)>l?(this._clearDoubleClickTimer(n,!0),this._startClick(t)):(this._clearDoubleClickTimer(n,!1),r.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(t){const i=Va(t.data),s=this._pointerState.get(i);s&&(s.pointerDownCount+=1)}_startClick(t){const{data:i}=t,{native:{pointerType:s}}=i,n=Va(i),r=s==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),r),a=1;this._pointerState.set(n,{event:t,doubleClickTimer:o,pointerDownCount:a}),this.refreshHasPendingInputs()}}function TQ(e){const{pointerId:t,pointerType:i,button:s}=e.native;return i==="mouse"?`${t}:${s}`:`${i}`}const Ap={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let ba=class extends Q{initialize(){const e=()=>this.view?.ready;this.addHandles([hr(()=>!e(),()=>this._disconnect()),hr(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=Ke(this._inputManager)}_connect(){const e=this.view.surface,t=new by(e,this.view.input),i=[new SQ,new MQ,new $Q,new wQ(this.view.navigation),new _Q],s=new Xi({eventSource:t,recognizers:i});s.installHandlers("prevent-context-menu",[new yQ],mo.INTERNAL),s.installHandlers("navigation",[new lQ(this.view),new QK(this.view),new aQ(this.view),new eT(this.view),new eT(this.view,[Ap.counter]),new YK(this.view,"primary"),new sQ(this.view,Ap.pan),new rQ(this.view,Ap.zoom),new nQ(this.view,Ap.rotate),new ZK(this.view,"secondary"),new qK(this.view,"touch")],mo.INTERNAL),this.view.viewEvents.connect(s),this._source=t,this._inputManager=s,le(()=>this.view?.navigation?.browserTouchPanEnabled,n=>{this._source&&(this._source.browserTouchPanningEnabled=!n)},Qt)}get test(){}};d([f()],ba.prototype,"view",void 0),d([f()],ba.prototype,"latestPointerType",null),d([f()],ba.prototype,"latestPointerLocation",null),d([f()],ba.prototype,"multiTouchActive",null),ba=d([k("esri.views.2d.input.MapViewInputManager")],ba);const kQ=ba;var oT,aT,lT,KL={exports:{}};oT=KL,aT=function(){function e(n,r,o,a,l){t(n,r,o||0,a||n.length-1,l||s)}function t(n,r,o,a,l){for(;a>o;){if(a-o>600){var c=a-o+1,h=r-o+1,p=Math.log(c),m=.5*Math.exp(2*p/3),g=.5*Math.sqrt(p*m*(c-m)/c)*(h-c/2<0?-1:1);t(n,r,Math.max(o,Math.floor(r-h*m/c+g)),Math.min(a,Math.floor(r+(c-h)*m/c+g)),l)}var y=n[r],v=o,b=a;for(i(n,o,r),l(n[a],y)>0&&i(n,o,a);v<b;){for(i(n,v,b),v++,b--;l(n[v],y)<0;)v++;for(;l(n[b],y)>0;)b--}l(n[o],y)===0?i(n,o,b):i(n,++b,a),b<=r&&(o=b+1),r<=b&&(a=b-1)}}function i(n,r,o){var a=n[r];n[r]=n[o],n[o]=a}function s(n,r){return n<r?-1:n>r?1:0}return e},(lT=aT())!==void 0&&(oT.exports=lT);const PQ=lH(KL.exports);function Km(e,t){if(!(this instanceof Km))return new Km(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function OQ(e,t,i){if(!i)return t.indexOf(e);for(var s=0;s<t.length;s++)if(i(e,t[s]))return s;return-1}function _l(e,t){sh(e,0,e.children.length,t,e)}function sh(e,t,i,s,n){n||(n=Wl(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var r,o=t;o<i;o++)r=e.children[o],nh(n,e.leaf?s(r):r);return n}function nh(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function cT(e,t){return e.minX-t.minX}function uT(e,t){return e.minY-t.minY}function O0(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Cp(e){return e.maxX-e.minX+(e.maxY-e.minY)}function EQ(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function AQ(e,t){var i=Math.max(e.minX,t.minX),s=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),r=Math.min(e.maxY,t.maxY);return Math.max(0,n-i)*Math.max(0,r-s)}function E0(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Ip(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Wl(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function hT(e,t,i,s,n){for(var r,o=[t,i];o.length;)(i=o.pop())-(t=o.pop())<=s||(r=t+Math.ceil((i-t)/s/2)*s,PQ(e,r,t,i,n),o.push(t,r,r,i))}Km.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],s=this.toBBox;if(!Ip(e,t))return i;for(var n,r,o,a,l=[];t;){for(n=0,r=t.children.length;n<r;n++)o=t.children[n],Ip(e,a=t.leaf?s(o):o)&&(t.leaf?i.push(o):E0(e,a)?this._all(o,i):l.push(o));t=l.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!Ip(e,t))return!1;for(var s,n,r,o,a=[];t;){for(s=0,n=t.children.length;s<n;s++)if(r=t.children[s],Ip(e,o=t.leaf?i(r):r)){if(t.leaf||E0(e,o))return!0;a.push(r)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var s=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===s.height)this._splitRoot(this.data,s);else{if(this.data.height<s.height){var n=this.data;this.data=s,s=n}this._insert(s,this.data.height-s.height-1,!0)}else this.data=s;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Wl([]),this},remove:function(e,t){if(e==null)return this;for(var i,s,n,r,o=this.data,a=this.toBBox(e),l=[],c=[];o||l.length;){if(o||(o=l.pop(),s=l[l.length-1],i=c.pop(),r=!0),o.leaf&&(n=OQ(e,o.children,t))!==-1)return o.children.splice(n,1),l.push(o),this._condense(l),this;r||o.leaf||!E0(o,a)?s?(i++,o=s.children[i],r=!1):o=null:(l.push(o),c.push(i),i=0,s=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:cT,compareMinY:uT,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,s){var n,r=i-t+1,o=this._maxEntries;if(r<=o)return _l(n=Wl(e.slice(t,i+1)),this.toBBox),n;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),(n=Wl([])).leaf=!1,n.height=s;var a,l,c,h,p=Math.ceil(r/o),m=p*Math.ceil(Math.sqrt(o));for(hT(e,t,i,m,this.compareMinX),a=t;a<=i;a+=m)for(hT(e,a,c=Math.min(a+m-1,i),p,this.compareMinY),l=a;l<=c;l+=p)h=Math.min(l+p-1,c),n.children.push(this._build(e,l,h,s-1));return _l(n,this.toBBox),n},_chooseSubtree:function(e,t,i,s){for(var n,r,o,a,l,c,h,p;s.push(t),!t.leaf&&s.length-1!==i;){for(h=p=1/0,n=0,r=t.children.length;n<r;n++)l=O0(o=t.children[n]),(c=EQ(e,o)-l)<p?(p=c,h=l<h?l:h,a=o):c===p&&l<h&&(h=l,a=o);t=a||t.children[0]}return t},_insert:function(e,t,i){var s=this.toBBox,n=i?e:s(e),r=[],o=this._chooseSubtree(n,this.data,t,r);for(o.children.push(e),nh(o,n);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(n,r,t)},_split:function(e,t){var i=e[t],s=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,s);var r=this._chooseSplitIndex(i,n,s),o=Wl(i.children.splice(r,i.children.length-r));o.height=i.height,o.leaf=i.leaf,_l(i,this.toBBox),_l(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(e,t){this.data=Wl([e,t]),this.data.height=e.height+1,this.data.leaf=!1,_l(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var s,n,r,o,a,l,c,h;for(l=c=1/0,s=t;s<=i-t;s++)o=AQ(n=sh(e,0,s,this.toBBox),r=sh(e,s,i,this.toBBox)),a=O0(n)+O0(r),o<l?(l=o,h=s,c=a<c?a:c):o===l&&a<c&&(c=a,h=s);return h},_chooseSplitAxis:function(e,t,i){var s=e.leaf?this.compareMinX:cT,n=e.leaf?this.compareMinY:uT;this._allDistMargin(e,t,i,s)<this._allDistMargin(e,t,i,n)&&e.children.sort(s)},_allDistMargin:function(e,t,i,s){e.children.sort(s);var n,r,o=this.toBBox,a=sh(e,0,t,o),l=sh(e,i-t,i,o),c=Cp(a)+Cp(l);for(n=t;n<i-t;n++)r=e.children[n],nh(a,e.leaf?o(r):r),c+=Cp(a);for(n=i-t-1;n>=t;n--)r=e.children[n],nh(l,e.leaf?o(r):r),c+=Cp(l);return c},_adjustParentBBoxes:function(e,t,i){for(var s=i;s>=0;s--)nh(t[s],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():_l(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};class Qm{constructor(t,i){this.key=new ci(0,0,0,0),this.bounds=xi(),this.objectIds=new Set,this.key.set(i);const s=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=s.resolution,this.level=s.level,this.scale=s.scale,this.minScale=t.zoomToScale(s.level-1),this.maxScale=t.zoomToScale(s.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return tt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return{$view:{scale:this.scale,timeZone:t}}}createChildTiles(){const t=this.key.getChildKeys(),i=li.acquire();for(let s=0;s<t.length;s++)i[s]=new Qm(this.tileInfoView,t[s]);return i}getQuantizationParameters(){return WI.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const Go={added:[],removed:[]},A0=new Set,CQ=new ci(0,0,0,0);function IQ(e,t){const i=Si(t);if(!i)return null;const[s,n]=i.valid;return e[2]>n?[xi([e[0],e[1],n,e[3]]),xi([s,e[1],s+e[2]-n,e[3]])]:e[0]<s?[xi([s,e[1],e[2],e[3]]),xi([n-(s-e[0]),e[1],n,e[3]])]:null}class LQ extends Eo{constructor(t){super(),this._tiles=new Map,this._index=Km(9,L("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||BA(t)===0||HA(t)===0)return[];const i=IQ(t,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const s of t.added)if(!this.has(s)){const n=new Qm(this.tileScheme,s);this._tiles.set(s,n),this._index.insert(n),i.added.push(n)}for(const s of t.removed)if(this.has(s)){const n=this.get(s);this._tiles.delete(s),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach(s=>this.tiles.push(s)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:s,lodInfo:n}=i,{level:r}=n;if(s.length>0)for(const{row:o,colFrom:a,colTo:l}of s)for(let c=a;c<=l;c++){const h=CQ.set(r,o,n.normalizeCol(c),n.getWorldForColumn(c)).id;if(A0.add(h),!this.has(h)){const p=new Qm(this.tileScheme,h);this._tiles.set(h,p),this._index.insert(p),this.tiles.push(p),Go.added.push(p)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];A0.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Go.removed.push(a))}(Go.added.length||Go.removed.length)&&this.emit("update",Go),id.pool.release(i),A0.clear(),Go.added.length=0,Go.removed.length=0}}let Jr=class extends Q{constructor(){super(...arguments),this.color=new _e([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25,this.multiHighlightEnabled=!1}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity&&this.multiHighlightEnabled===e.multiHighlightEnabled}};d([f({type:_e})],Jr.prototype,"color",void 0),d([f({type:_e})],Jr.prototype,"haloColor",void 0),d([f()],Jr.prototype,"haloOpacity",void 0),d([f()],Jr.prototype,"fillOpacity",void 0),d([f()],Jr.prototype,"multiHighlightEnabled",void 0),Jr=d([k("esri.views.2d.support.HighlightOptions")],Jr);const QL=Jr,Lp=e=>parseFloat(e)/100;function RQ(e,t,i){const s=typeof e.left=="string"?Lp(e.left)*t:e.left,n=typeof e.right=="string"?Lp(e.right)*t:e.right,r=typeof e.top=="string"?Lp(e.top)*i:e.top,o=typeof e.bottom=="string"?Lp(e.bottom)*i:e.bottom,a=r;return{xmin:s,xmax:Math.max(t-n,s),ymin:a,ymax:Math.max(i-o,r)}}function DQ(e,t,i,s){switch(t.type){case"rect":{const{width:n,height:r}=e,{xmin:o,xmax:a,ymin:l,ymax:c}=RQ(t,n,r),{x:h,y:p}=i;return h>o&&h<a&&p>l&&p<c}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||q_(t.path,[i.x,i.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?G_(t.geometry,s):vd(t.geometry,s))}}async function NQ(e,t,i){const s=ZI(t)?YI(e,t):t;if(!e.ready||isNaN(s.x)||isNaN(s.y))return{screenPoint:s,results:[]};let n=new Set;const r=new Set;let o=!1,a=null,l=null;i?.include?pT(i.include,dT(e,m=>{n.add(m),C0(m,g=>r.add(g))},(m,g)=>{r.add(m),n.add(g)},m=>{a||(a=new Set),a.add(m)},m=>n.add(m),()=>o=!0)):(o=!0,n=new Set(e.allLayerViews),n.forEach(m=>{C0(m,g=>r.add(g))})),i?.exclude&&pT(i.exclude,dT(e,m=>{n.delete(m),C0(m,g=>r.delete(g))},m=>r.delete(m),m=>{l||(l=new Set),l.add(m)}));const c=e.toMap(s),h=e.allLayerViews.filter(m=>!m.suspended&&n.has(m)&&m.clips.every(g=>DQ(e,g,s,c))).reverse();let p=[...o?e.graphicsView.hitTest(c).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:c})):[],...await Promise.all(h.map(m=>m.hitTest(c,s)).toArray())].filter(Ih).flat().filter(Ih);return p=p.filter(m=>m.type!=="graphic"||m.layer?.type!=="subtype-group"||r.has(m.graphic.layer)),a&&(p=p.filter(m=>!("graphic"in m)||!m.graphic||a?.has(Yb(m.graphic)))),l&&(p=p.filter(m=>!("graphic"in m)||!m.graphic||!l?.has(Yb(m.graphic)))),{screenPoint:s,results:p}}function dT(e,t,i,s,n,r){return o=>{if(o instanceof Yh){if(o.layer===e)r?.();else{const a=e.allLayerViews.find(l=>l.layer===o.layer);a&&n?.(a)}s(Yb(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=e.allLayerViews.find(l=>l.layer===o.parent);a&&i(o,a)}else{const a=e.allLayerViews.find(l=>l.layer===o);a&&t(a)}}}function pT(e,t){if(e)if(sm(e))for(const i of e)if(sm(i))for(const s of i)t(s);else t(i);else t(e)}function Yb(e){const t=e.getObjectId();return t?`${e.layer?.uid??e.sourceLayer?.uid??"MapView"}/${t}`:`"MapView/${e.uid}`}function C0({layer:e},t){e?.type==="subtype-group"&&e.sublayers.forEach(i=>{t(i)})}function FQ(e,t,i){const{ctx:s,canvas:n}=eR(e,i),r=s.getImageData(0,0,e.width,e.height),o=VQ(n,t);return tR(n),{dataUrl:o,data:r}}function jQ(e,t){const{ctx:i,canvas:s}=eR(e,t),n=i.getImageData(0,0,e.width,e.height);return tR(s),n}function eR(e,t){const i=zQ();t.premultipliedAlpha&&GQ(e),i.width=e.width,i.height=e.height;const s=i.getContext("2d",{willReadFrequently:!0});return s.putImageData(e,0,0),t.flipY&&HQ(s),{ctx:s,canvas:i}}function tR(e){e.width=0,e.height=0}function zQ(){return I0==null&&(I0=document.createElement("canvas")),I0}let I0=null;function VQ(e,t){const i=qQ[t.format],s=t.quality/100;return e.toDataURL(i,s)}function UQ(e,t){const i=BQ(e),s=ZQ[i];return{format:i,quality:mn(t??s,0,100)}}function WQ(e,t){return t/Math.max(e[0],e[1])}function _de(e,t,i,s=0,n=0,r=e.width-s,o=e.height-n,a=!1){const{data:l}=e,{width:c,height:h,data:p}=t,m=r/c,g=o/h,y=Math.ceil(m/2),v=Math.ceil(g/2),b=e.width;for(let w=0;w<h;w++)for(let x=0;x<c;x++){const $=4*(x+(a?h-w-1:w)*c);let S=0,M=0,P=0,C=0,I=0,D=0;const N=(w+.5)*g;for(let U=Math.floor(w*g);U<(w+1)*g;U++){const H=Math.abs(N-(U+.5))/v,te=(x+.5)*m,q=H*H;for(let ne=Math.floor(x*m);ne<(x+1)*m;ne++){const ye=Math.abs(te-(ne+.5))/y,de=Math.sqrt(q+ye*ye);if(de>=1)continue;let pe=2*de*de*de-3*de*de+1;const De=4*(s+ne+(n+U)*b);D+=pe*l[De+3],M+=pe,!i&&l[De+3]<255&&(pe=pe*l[De+3]/255),P+=pe*l[De],C+=pe*l[De+1],I+=pe*l[De+2],S+=pe}}p[$]=P/S,p[$+1]=C/S,p[$+2]=I/S,p[$+3]=D/M}return t}function BQ(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return YQ}}function HQ(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function GQ(e){const t=e.data,i=t.length;for(let s=0;s<i;s+=4){const n=t[s+3];if(n!==255&&n>0){const r=255/n;t[s]=t[s]*r,t[s+1]=t[s+1]*r,t[s+2]=t[s+2]*r}}}const qQ={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},fT=98,YQ="png",ZQ={png:100,jpg:fT,jpeg:fT},iR={flipY:!0,premultipliedAlpha:!0};async function JQ(e,t){const i=await sR(e,t),{format:s,quality:n}=UQ(t?.format,t?.quality);return FQ(i,{format:s,quality:n,rotation:0,disableDecorations:!1},iR)}async function XQ(e,t){const i=await sR(e,t);return jQ(i,iR)}function sR(e,t){const i=eee(t||{},QQ(e.stage,e.size),e.size,e.padding),s=KQ(t,e.allLayerViews);return e.stage.takeScreenshot(i,s,e.backgroundColor,t?.rotation)}function KQ(e={},t){if(!e.layers)return;const i=[];return e.layers.forEach(s=>{const n=t.find(r=>r.layer.id===s.id);n?.container&&i.push(n.container)}),i}function QQ(e,t){return Math.min(4,WQ(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function eee(e,t,i,s){e.ignorePadding&&(s={left:0,right:0,top:0,bottom:0});let n=null;e.width!=null&&e.height!=null?n=[e.width,e.height]:e.width==null&&e.height!=null?n=[e.height,e.height]:e.width!=null&&e.height==null?n=[e.width,e.width]:e.width==null&&e.height==null&&(n=null);const r=i[0]-(s.left+s.right),o=i[1]-(s.top+s.bottom);let a,l,c=e.area||{x:0,y:0,width:r,height:o};if(n){const h=r/o,p=n[0]/n[1];if(p>h){const m=c.width/p;c={x:c.x,y:Math.round(c.y+(c.height-m)/2),width:c.width,height:Math.round(m)}}else{const m=c.height*p;c={x:Math.round(c.x+(c.width-m)/2),y:c.y,width:Math.round(m),height:c.height}}}else n=[c.width,c.height];return n[0]>c.width?(a=Math.min(n[0]/c.width,t),l=n[0]/c.width/a):(a=1,l=n[0]/c.width),{cropArea:{x:Math.round((c.x+s.left)*a),y:Math.round((c.y+s.top)*a),width:Math.round(c.width*a),height:Math.round(c.height*a)},outputScale:l,resolutionScale:a}}const mT=160;let rh=class extends Q{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=mT&&this.clear()},mT))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};d([f()],rh.prototype,"_timer",void 0),d([f()],rh.prototype,"stationary",null),rh=d([k("esri.views.2d.support.StationaryManager")],rh);const tee=e=>e.includes("Brush");class nR{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),tee(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}function gT(e,t={}){return e.getContext("webgl2",t)||null}let L0;function iee(){return L0||(L0=ree()),L0}class see{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}function nee(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let i=gT(t,{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=gT(t),i!=null&&(e.majorPerformanceCaveat=!0)),i==null)return i;e.available=!0,e.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const s=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return s&&(e.supportsHighPrecisionFragment=s.precision>0),i}function ree(){const e=new see,t=nee(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function oee(e){const t=iee();return t.available?e==="3d"&&t.majorPerformanceCaveat?new V("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new V("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new V("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new V("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function aee(e){return e&&"nodeType"in e}function lee(e){return e&&typeof e.render=="function"}const yT={component:"esri-component"};let _a=class extends Q{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(yT.component),t&&t.classList.remove(yT.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||aee(e)?(this._set("widget",null),dw(e)):(lee(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};d([f()],_a.prototype,"id",null),d([f()],_a.prototype,"node",null),d([Mt("node")],_a.prototype,"castNode",null),d([f({readOnly:!0})],_a.prototype,"widget",void 0),_a=d([k("esri.views.ui.Component")],_a);const Wf=_a,rR="calcite-mode-";function cee(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function uee(){return cee().startsWith("dark")}function hee(){return`${rR}${uee()?"dark":"light"}`}function dee(e){pee(e),e.classList.add(hee())}function pee(e){Array.from(e.classList).forEach(t=>{t.startsWith(rR)&&e.classList.remove(t)})}const fee={left:0,top:0,bottom:0,right:0},oR={bottom:30,top:15,right:15,left:15},Pn="esri-ui",pi={ui:Pn,corner:`${Pn}-corner`,innerContainer:`${Pn}-inner-container`,manualContainer:`${Pn}-manual-container`,cornerContainer:`${Pn}-corner-container`,topLeft:`${Pn}-top-left`,topRight:`${Pn}-top-right`,bottomLeft:`${Pn}-bottom-left`,bottomRight:`${Pn}-bottom-right`};function mee(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function Rp(e){return e===0?"0":`${e}px`}function R0(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function D0(e,{top:t,bottom:i,left:s,right:n}){e.style.top=t,e.style.bottom=i,e.style.left=s,e.style.right=n}let Qs=class extends Eo.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Di(),this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&D0(t,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&D0(t,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([le(()=>[this.view?.padding,this.container],this._applyViewPadding,Qt),le(()=>this.padding,this._applyUIPadding,Qt),le(()=>[this.container,this._locale],([e,t])=>{e&&e.setAttribute("lang",t)},Qt),iO(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(pi.ui),dee(e),this._attachContainers(e)),t&&(t.classList.remove(pi.ui),D0(t,{top:"",bottom:"",left:"",right:""}),EE(t)),this._set("container",e))}get height(){const e=this.view?.height??0;if(e===0)return e;const t=this._getViewPadding(),{top:i,bottom:s}=t;return Math.max(e-i-s,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...oR,...e}}get width(){const e=this.view?.width??0;if(e===0)return e;const t=this._getViewPadding(),{left:i,right:s}=t;return Math.max(e-i-s,0)}add(e,t){let i,s,n;if(Array.isArray(e))return void e.forEach(o=>this.add(o,t));const r=R0(e);r&&({index:i,position:t,component:e,key:s}=r),t&&typeof t=="object"&&({index:i,key:s,position:t,internal:n}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,s,n)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,t));const i=this._find(e);if(i){if(this._componentMap.has(i)&&this._componentMap.get(i)?.key!==t)return;const s=this._components.indexOf(i);return i.node.parentNode?.removeChild(i.node),this._componentMap.delete(i),i.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(s,1)[0]}}empty(e,t={removeInternal:!1}){if(Array.isArray(e)){for(const n of e)this.empty(n,t);return}const i=this._positionNameToContainerLookup[e??"manual"],s=Array.prototype.slice.call(i.children).map(n=>this._findByNode(n)).filter(n=>n==null?!1:!(this._componentMap.get(n)?.internal??!1)||t.removeInternal);for(const n of s)this.remove(n)}move(e,t){if(Array.isArray(e)&&e.forEach(r=>this.move(r,t)),!e)return;let i;const s=R0(e)||R0(t);if(s&&(i=s.index,t=s.position,e=s.component||e),t&&!this._isValidPosition(t))return;const n=this.remove(e);n&&this.add(n,{position:t,index:i})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getComponents(e,t={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(i=>this._getComponentsAtPosition(i,t)):this._getComponentsAtPosition(e,t):this._components.filter(i=>t.includeInternal||!this._componentMap.get(i)?.internal).map(({widget:i,node:s})=>i??s)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,i,s,n){e instanceof Wf||(e=new Wf({node:e}));const{widget:r}=e;r!=null&&r instanceof Q&&r.addHandles(Ee(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey),this._place({component:e,position:t,index:i}),this._components.push(e),this._componentMap.set(e,{key:s,internal:n})}_find(e){return e?e instanceof Wf?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.view?.padding??fee}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(pi.innerContainer,pi.cornerContainer);const t=document.createElement("div");t.classList.add(pi.innerContainer,pi.manualContainer);const i=document.createElement("div");i.classList.add(pi.topLeft,pi.corner),e.appendChild(i);const s=document.createElement("div");s.classList.add(pi.topRight,pi.corner),e.appendChild(s);const n=document.createElement("div");n.classList.add(pi.bottomLeft,pi.corner),e.appendChild(n);const r=document.createElement("div");r.classList.add(pi.bottomRight,pi.corner),e.appendChild(r),this._innerContainer=e,this._manualContainer=t;const o=AV();this._cornerNameToContainerLookup={"top-left":i,"top-right":s,"bottom-left":n,"bottom-right":r,"top-leading":o?s:i,"top-trailing":o?i:s,"bottom-leading":o?r:n,"bottom-trailing":o?n:r},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.position??"manual",{component:i,index:s}=e,n=this._positionNameToContainerLookup[t],r=s!=null&&s>-1;if(mee(i.widget)&&i.widget.startup(),!r)return void n.appendChild(i.node);const o=Array.from(n.children);if(s===0)return void(n.firstChild?ZS(i.node,n.firstChild):n.appendChild(i.node));s>=o.length?n.appendChild(i.node):ZS(i.node,o[s])}_toPixelPosition(e){return{top:Rp(e.top),left:Rp(e.left),right:Rp(e.right),bottom:Rp(e.bottom)}}_findByComponent(e){return this._components.find(t=>t===e)??null}_findById(e){return this._components.find(({id:t})=>t===e)??null}_findByNode(e){return this._components.find(({node:t})=>t===e)??null}_getComponentsAtPosition(e,t){const i=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(i.children).map(s=>this._findByNode(s)).filter(Ih).filter(s=>t.includeInternal||!this._componentMap.get(s)?.internal).map(({widget:s,node:n})=>s??n)}};d([f()],Qs.prototype,"_locale",void 0),d([f()],Qs.prototype,"container",null),d([f()],Qs.prototype,"height",null),d([f({value:oR})],Qs.prototype,"padding",null),d([Mt("padding")],Qs.prototype,"castPadding",null),d([f()],Qs.prototype,"view",void 0),d([f()],Qs.prototype,"width",null),Qs=d([k("esri.views.ui.UI")],Qs);const gee=Qs,yee=new Map;function vee(e){return yee.get(e)}function vT(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function bee(e,t){return e.length!==t.length||e.some((i,s)=>i.text!==t[s].text)}function uu(e,t,i){!i||!t||e.find(s=>s.layerView===t&&s.text===i)||e.push({text:i,layerView:t})}function _ee(e){return e.type==="bing-maps"}const On=[];let Bl=class extends Q{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new ee,this.view=null,this._allLayerViewsChange=t=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const i=this.view?.allLayerViews;i&&(this.addHandles(i.map(s=>le(()=>[s.suspended,s.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),i.forEach(s=>{s.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),t?.removed&&t.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([Ka(()=>this.view?.allLayerViews,"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),hr(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,t=e?.allLayerViews;if(On.length=0,!e||!t)return void this._clear();t.forEach(s=>{if(s.suspended||!s.layer?.attributionVisible)return;const n=s.layer;if(vT(n,"user"))return void uu(On,s,n.copyright);if(n.hasAttributionData){if(this._fetchedAttributionData.has(s)){const o=this._fetchedAttributionData.get(s);return void(o?uu(On,s,this._getDynamicAttribution(o,e,n)):vT(n)&&uu(On,s,n.copyright))}return void this._fetchAttributionData(s)}const r="portalItem"in n?n.portalItem?.accessInformation:void 0;uu(On,s,r||n.copyright)});const i=t.find(s=>s.layer?.type==="integrated-mesh-3dtiles");if(this.view&&i){const s=vee(this.view);if(s){const n=s.getAttributionText();for(let r=0;r<n.length;++r)uu(On,i,n[r])}}bee(this.items,On)&&(this.items.removeAll(),this.items.addMany(On)),On.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await AP(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=t.ok?this._createContributionIndex(t.value,_ee(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,t){const i=e.contributors,s={};if(!i)return s;for(let n=0;n<i.length;n++){const r=i[n],o=r.coverageAreas;if(!o)return;for(const a of o){const l=a.bbox,c=a.zoomMin-(t&&a.zoomMin?1:0),h=a.zoomMax-(t&&a.zoomMax?1:0),p=new tt({xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:ge.WGS84}),m={extent:Da(p),attribution:r.attribution||"",score:a.score!=null?a.score:100,id:n};for(let g=c;g<=h;g++)s[g]??=[],s[g].push(m)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(e,t,i){const{extent:s,scale:n}=t;let r=i.tileInfo?.scaleToZoom(n)??0;if(r=Math.min(e.maxKey??0,Math.round(r)),!s||r==null||r<=-1)return"";const o=e[r],a=Tg(s.center.clone().normalize(),t.spatialReference),l=new Set;return o?o.filter(c=>{const h=c.id,p=!l.has(h)&&a&&c.extent&&vd(c.extent,a);return p&&l.add(h),p}).sort((c,h)=>h.score-c.score||c.objectId-h.objectId).map(c=>c.attribution).join(", "):""}};d([f({readOnly:!0,type:ee})],Bl.prototype,"items",void 0),d([f({readOnly:!0})],Bl.prototype,"state",null),d([f()],Bl.prototype,"view",void 0),Bl=d([k("esri.widgets.Attribution.AttributionViewModel")],Bl);const aR=Bl;function wee(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:See(e[t])}}}function xee(e){const t=e?.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function See(e){return function(t,...i){xee(t)?RV(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}const wl="esri-attribution",xl={base:wl,poweredBy:`${wl}__powered-by`,sources:`${wl}__sources`,open:`${wl}--open`,sourcesOpen:`${wl}__sources--open`,link:`${wl}__link`};let oi=class extends kd{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:s})=>this._checkSourceTextOverflow(s))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new aR}initialize(){this.addHandles(Ka(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[xl.open]:this._isOpen};return ze("div",{bind:this,class:this.classes(xl.base,as.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return ze("div",{class:xl.poweredBy},"Powered by"," ",ze("a",{class:xl.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?0:void 0,{attributionText:s}=this,n={[xl.sourcesOpen]:e,[as.interactive]:t};return ze("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(xl.sources,n),innerHTML:s,tabIndex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:i,clientWidth:s,scrollWidth:n}=e,r=n>s,o=this._attributionTextOverflowed!==r;if(this._attributionTextOverflowed=r,o&&(t=!0),this._isOpen){const a=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,a&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};d([f()],oi.prototype,"_isOpen",void 0),d([f()],oi.prototype,"_isInteractive",null),d([f()],oi.prototype,"_attributionTextOverflowed",void 0),d([f()],oi.prototype,"_prevSourceNodeHeight",void 0),d([f({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],oi.prototype,"attributionText",null),d([f()],oi.prototype,"icon",null),d([f()],oi.prototype,"itemDelimiter",void 0),d([f()],oi.prototype,"label",null),d([f(),Od("esri/widgets/Attribution/t9n/Attribution")],oi.prototype,"messages",void 0),d([f()],oi.prototype,"view",null),d([f({type:aR})],oi.prototype,"viewModel",void 0),d([wee()],oi.prototype,"_toggleState",null),oi=d([k("esri.widgets.Attribution")],oi);const Mee=oi;function $ee(e){return e?.spatialReference?.isWebMercator||e?.spatialReference?.isGeographic||!1}const Tee=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:s}=this;return H3(s),this.goToOverride?this.goToOverride(s,i):s.goTo(i.target,i.options)}};return d([f()],t.prototype,"goToOverride",void 0),d([f()],t.prototype,"view",void 0),t=d([k("esri.widgets.support.GoTo")],t),t};let wa=class extends Tee(Q){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(le(()=>this.view,this._updateRotationWatcher,Qt))}destroy(){this.view=null}get canShowNorth(){return $ee(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:L("mapview-essential-goto-duration")}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this._set("orientation",{x:0,y:0,z:t})}_updateRotationWatcher(e){this.removeAllHandles(),e&&this.addHandles(e.type==="2d"?le(()=>e?.rotation,this._updateForRotation,Qt):le(()=>e?.camera,this._updateForCamera,Qt))}};d([f({readOnly:!0})],wa.prototype,"canShowNorth",null),d([f({readOnly:!0})],wa.prototype,"orientation",void 0),d([f({readOnly:!0})],wa.prototype,"state",null),d([f()],wa.prototype,"view",void 0),wa=d([k("esri.widgets.Compass.CompassViewModel")],wa);const lR=wa,bT="esri-compass",_T={base:bT,iconContainer:`${bT}__icon-container`};let Un=class extends kd{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new lR,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=i=>({transform:`rotateZ(${i.z}deg)`})}loadDependencies(){return Yg({button:()=>W(()=>import("./calcite-button.9d3728df.js"),["assets/calcite-button.9d3728df.js","assets/form.fb46e9d3.js","assets/dom.fb88ae35.js","assets/guid.bddc4052.js","assets/interactive.97d78cc9.js","assets/label.692e1b0c.js","assets/component.86cabc11.js","assets/loadable.242c5db2.js","assets/t9n.5bb2be1c.js","assets/observers.7dfa93c8.js","assets/icon.cd760d37.js","assets/loader.9a33bba7.js"]),icon:()=>W(()=>import("./calcite-icon.042918cf.js"),["assets/calcite-icon.042918cf.js","assets/icon.cd760d37.js","assets/dom.fb88ae35.js","assets/guid.bddc4052.js","assets/observers.7dfa93c8.js"])})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,{messages:i}=this;return ze("div",{class:this.classes(_T.base,as.widget)},ze("calcite-button",{class:as.widgetButton,disabled:t==="disabled",kind:"neutral",label:i.reset,onclick:this._reset,round:!0,scale:"s",title:i.reset},ze("div",{"aria-hidden":"true",class:_T.iconContainer,title:i.reset},ze("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};d([f()],Un.prototype,"goToOverride",null),d([f()],Un.prototype,"icon",null),d([f()],Un.prototype,"label",null),d([f(),Od("esri/widgets/Compass/t9n/Compass")],Un.prototype,"messages",void 0),d([f()],Un.prototype,"view",null),d([f({type:lR})],Un.prototype,"viewModel",void 0),Un=d([k("esri.widgets.Compass")],Un);const kee=Un,wT="esri-navigation-toggle",xT={base:wT,isLayoutHorizontal:`${wT}--horizontal`};let Hl=class extends Q{constructor(e){super(e),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(hr(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._setNavigationMode()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_setNavigationMode(){const e=this.view?.inputManager;e&&(e.primaryDragAction=this._navigationMode==="pan"?"pan":"rotate")}};d([f({readOnly:!0})],Hl.prototype,"state",null),d([f()],Hl.prototype,"_navigationMode",void 0),d([f()],Hl.prototype,"view",void 0),Hl=d([k("esri.widgets.NavigationToggle.NavigationToggleViewModel")],Hl);const cR=Hl;let Wn=class extends kd{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new cR,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{(this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton)?.setFocus(),this.toggle()}}loadDependencies(){return Yg({button:()=>W(()=>import("./calcite-button.9d3728df.js"),["assets/calcite-button.9d3728df.js","assets/form.fb46e9d3.js","assets/dom.fb88ae35.js","assets/guid.bddc4052.js","assets/interactive.97d78cc9.js","assets/label.692e1b0c.js","assets/component.86cabc11.js","assets/loadable.242c5db2.js","assets/t9n.5bb2be1c.js","assets/observers.7dfa93c8.js","assets/icon.cd760d37.js","assets/loader.9a33bba7.js"])})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.viewModel?.state==="disabled",t=this.viewModel?.navigationMode==="pan",i=this.messages.toggle;return ze("div",{class:this.classes(xT.base,as.widget,{[xT.isLayoutHorizontal]:this.layout==="horizontal"})},ze("calcite-button",{afterCreate:s=>{this._panButton=s},appearance:t?"outline-fill":"solid",class:as.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:i,onclick:this._toggle,tabIndex:t?void 0:-1,title:i}),ze("calcite-button",{afterCreate:s=>{this._rotateButton=s},appearance:t?"solid":"outline-fill",class:as.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:i,onclick:this._toggle,tabIndex:t?-1:void 0,title:i}))}};d([f()],Wn.prototype,"icon",null),d([f()],Wn.prototype,"label",null),d([f({value:"vertical"})],Wn.prototype,"layout",null),d([f(),Od("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Wn.prototype,"messages",void 0),d([f()],Wn.prototype,"view",null),d([f({type:cR})],Wn.prototype,"viewModel",void 0),Wn=d([k("esri.widgets.NavigationToggle")],Wn);const Pee=Wn;let xa=class extends Q{get canZoomIn(){if(!this.view?.ready)return!1;const t=this.view?.constraints?.effectiveMaxScale;return t===0||this._scale>t}get canZoomOut(){const{view:e}=this;if(!e?.ready)return!1;const i=e.constraints?.effectiveMinScale;return i===0||this._scale<i}get _scale(){const e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};d([f({readOnly:!0})],xa.prototype,"canZoomIn",null),d([f({readOnly:!0})],xa.prototype,"canZoomOut",null),d([f()],xa.prototype,"view",void 0),d([f()],xa.prototype,"_scale",null),xa=d([k("esri.widgets.Zoom.ZoomConditions2D")],xa);const Oee=xa;let Gl=class extends Q{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};d([f({readOnly:!0})],Gl.prototype,"canZoomIn",null),d([f({readOnly:!0})],Gl.prototype,"canZoomOut",null),d([f()],Gl.prototype,"view",void 0),Gl=d([k("esri.widgets.Zoom.ZoomConditions3D")],Gl);const Eee=Gl;let Xr=class extends Q{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new Oee({view:e}):e.type==="3d"&&(this._zoomConditions=new Eee({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():Ax(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():Ax(e.goTo({zoomFactor:.5}))}};d([f()],Xr.prototype,"_zoomConditions",void 0),d([f()],Xr.prototype,"canZoomIn",null),d([f()],Xr.prototype,"canZoomOut",null),d([f({readOnly:!0})],Xr.prototype,"state",null),d([f()],Xr.prototype,"view",null),Xr=d([k("esri.widgets.Zoom.ZoomViewModel")],Xr);const uR=Xr,ST={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let Bn=class extends kd{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new uR,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return Yg({button:()=>W(()=>import("./calcite-button.9d3728df.js"),["assets/calcite-button.9d3728df.js","assets/form.fb46e9d3.js","assets/dom.fb88ae35.js","assets/guid.bddc4052.js","assets/interactive.97d78cc9.js","assets/label.692e1b0c.js","assets/component.86cabc11.js","assets/loadable.242c5db2.js","assets/t9n.5bb2be1c.js","assets/observers.7dfa93c8.js","assets/icon.cd760d37.js","assets/loader.9a33bba7.js"])})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[ST.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:t,canZoomOut:i}=this.viewModel,{zoomIn:s,zoomOut:n}=this.messages;return ze("div",{class:this.classes(ST.base,as.widget,e)},ze("calcite-button",{class:as.widgetButton,disabled:!t,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),ze("calcite-button",{class:as.widgetButton,disabled:!i,iconStart:"minus",kind:"neutral",label:n,onclick:this.zoomOut,title:n}))}};d([f()],Bn.prototype,"icon",null),d([f()],Bn.prototype,"label",null),d([f({value:"vertical"})],Bn.prototype,"layout",null),d([f(),Od("esri/widgets/Zoom/t9n/Zoom")],Bn.prototype,"messages",void 0),d([f()],Bn.prototype,"view",null),d([f({type:uR})],Bn.prototype,"viewModel",void 0),Bn=d([k("esri.widgets.Zoom")],Bn);const Aee=Bn;function Cee(e){return e?.view!==void 0}let Bf=class extends gee{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=t=>{this.components.forEach(i=>{const s=this._find(i),n=s?.widget;Cee(n)&&(n.view=t)})},this._componentsWatcher=(t,i)=>{this._removeComponents(i),this._addComponents(t),this._adjustPadding(t)}}initialize(){this.addHandles([le(()=>this.components,this._componentsWatcher,Qt),le(()=>this.view,this._updateViewAwareWidgets,Qt)])}_add(e,t,i,s,n){let r=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;r=this._createComponent(e)}super._add(r,t,i,s,n)}_removeComponents(e){e.forEach(t=>{const i=this._find(t);i&&(this.remove(i),i.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.constructed&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);return new Wf({id:e,node:t})}_createWidget(e){const t=this.view;switch(e){case"attribution":return new Mee({view:t});case"compass":return new kee({view:t});case"navigation-toggle":return new Pee({view:t});case"zoom":return new Aee({view:t})}}};d([f()],Bf.prototype,"components",void 0),Bf=d([k("esri.views.ui.DefaultUI")],Bf);const hR=Bf;let Hf=class extends hR{constructor(e){super(e),this.components=["attribution","zoom"]}};d([f()],Hf.prototype,"components",void 0),Hf=d([k("esri.views.ui.2d.DefaultUI2D")],Hf);const dR=Hf;function MT(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}var Zb;let Gf=Zb=class extends Z{constructor(e){super(e),this.color=new _e([0,0,0,1])}clone(){return new Zb(F({color:this.color}))}};d([f({type:_e,json:{write:!0}})],Gf.prototype,"color",void 0),Gf=Zb=d([k("esri.webmap.background.ColorBackground")],Gf);const Iee=Gf;let pR,fR,mR,gR,yR,vR;async function Lee(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:s,MagnifierView2D:n,Stage:r}]=await Promise.all([W(()=>import("./webglDeps.b50c2df6.js"),["assets/webglDeps.b50c2df6.js","assets/Program.9a92c5ff.js","assets/Texture.7423fe29.js","assets/enums.8929356b.js","assets/programUtils.d6bf54e9.js","assets/NestedMap.9ff460b9.js","assets/ProgramTemplate.7599c672.js"]),W(()=>import("./mapViewDeps.1c2341e0.js"),["assets/mapViewDeps.1c2341e0.js","assets/colorUtils.085072a2.js","assets/vec42.faaf2b1c.js","assets/vec4f64.7b667e97.js","assets/UpdateTracking2D.571bdffb.js","assets/BidiEngine.5f10619c.js","assets/OptimizedFeature.32c00f5f.js","assets/GeometryUtils.c6f9b045.js","assets/enums.abef80de.js","assets/utils.dbb84a38.js","assets/definitions.a3a54ed1.js","assets/Rect.ab45bd96.js","assets/LabelMetric.267a8b18.js","assets/Texture.7423fe29.js","assets/enums.8929356b.js","assets/Program.9a92c5ff.js","assets/VertexElementDescriptor.c76e1b24.js","assets/defaults.e5a1167a.js","assets/defaultsJSON.ba72df2f.js","assets/BindType.597c7f67.js","assets/Util.00c6201e.js","assets/highlightReasons.c3e7cabb.js","assets/OverrideHelper.b5d99b26.js","assets/quantizationUtils.fe6b1e6e.js","assets/SDFHelper.a7a49e03.js","assets/floatRGBA.133c49be.js","assets/PieChartMeshWriter.c11791d1.js","assets/TurboLine.af583914.js","assets/earcut.dc9d94eb.js","assets/constants.344a1358.js","assets/Container.461c0161.js","assets/WGLContainer.a2728de7.js","assets/ProgramTemplate.7599c672.js","assets/vec3f32.788be850.js","assets/StyleDefinition.e031dcf6.js","assets/config.8224a140.js","assets/featureConversionUtils.c6dfa488.js","assets/OptimizedFeatureSet.6fd3bcb1.js","assets/enums.7f54e43a.js","assets/programUtils.d6bf54e9.js","assets/NestedMap.9ff460b9.js","assets/MagnifierPrograms.0333d37a.js","assets/CircularArray.0c40a6a8.js","assets/testSVGPremultipliedAlpha.3be788db.js","assets/AttributeStore.38266bd6.js","assets/labelUtils.37b9d8d8.js","assets/FieldsIndex.333d0734.js","assets/UnknownTimeZone.4756be49.js","assets/TimeOnly.5d28261e.js","assets/timeSupport.393bd0ba.js","assets/json.20588c22.js","assets/diffUtils.080c04bc.js","assets/RenderingContext.4521dfe8.js","assets/renderState.19e0eaae.js","assets/basicInterfaces.0f925dcd.js","assets/interfaces.98cd2ad6.js","assets/doublePrecisionUtils.4e9c06b3.js","assets/imageUtils.bdf51421.js","assets/rasterizingUtils.9fb61b8b.js","assets/pbf.72af564e.js","assets/utils.ca25804d.js","assets/grouping.811b1171.js","assets/FeatureCommandQueue.f16cbaa3.js","assets/MeshWriterRegistry.6d7fb0c7.js","assets/GraphicsView2D.73f18369.js","assets/normalizeUtilsSync.71a1cb90.js","assets/GraphicContainer.abe27126.js","assets/AGraphicContainer.c019acec.js","assets/TechniqueInstance.254dd815.js","assets/TileContainer.419fd15d.js","assets/requestImageUtils.d1967f3c.js"])]);fR=e,mR=t,gR=i,yR=s,vR=n,pR=r}let re=class extends vY(NY(SY(zZ))){constructor(e){super(e),this._magnifierView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Zh({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new Vf({view:this}),this.graphicsView=null,this.stateManager=new ri({constraints:new ZL({view:this})}),this.stationaryManager=new rh,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new RK(this),this.floors=new ee,this.highlightOptions=new QL,this.inputManager=new kQ({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new nR,this.type="2d",this.ui=new dR,this.test={takeScreenshot:async t=>XQ(this._getScreenshotView(t),t)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([le(()=>this.viewpoint,()=>this.stationaryManager.flip(),Qa),this.on("resize",t=>this.stateManager.resize(t.width,t.height))]),fY()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Ke(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new LQ(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,t=this.spatialReference;return{lods:e?.spatialReference?.equals(t)?e.lods:null,spatialReference:t}}get state(){return this.stateManager.state}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:t,center:i,viewpoint:s,extent:n}=this;let r=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!n&&(t?.effectiveLODs||(r=-1),(!i||e===0&&r===-1)&&(s?.targetGeometry==null||s.targetGeometry.type!=="extent"&&!s.scale))}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=e.targetGeometry,i=this.spatialReference;return uC(t.spatialReference,i)}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),e!==this.animationManager.animation&&this.animationManager.stop(),!e||e.isFulfilled())return this._set("animation",null),void(this.frameTask.animationInProgress=!1);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{this.destroyed||(e===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame()),this.frameTask.animationInProgress=!1)};e.when(i,i)}get background(){return MT(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return this.stateManager?.constraints}set constraints(e){e.view=this;const t=this.stateManager.constraints;this.stateManager.constraints=e,t?.destroy()}get extent(){return this.stateManager?.extent??null}set extent(e){this.stateManager.extent=e}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){const{rotationEnabled:t}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=e,this.constraints.rotationEnabled=t}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(i=>!i.destroyed&&!("layerViews"in i)&&i.updating===!0)||e);if(L("esri-2d-log-updating")){const i=this.allLayerViews.reduce((s,n)=>({...s,[`${n.layer.id}(${n.layer.type})`]:!n.destroyed&&!("layerViews"in n)&&n.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(i)}
-> updatingMagnifier: ${e}
`)}return t}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}goTo(e,t){return this.goToManager.goTo(e,t)}async hitTest(e,t){return NQ(this,e,t)}async takeScreenshot(e){return JQ(this._getScreenshotView(e),e)}toMap(e){if(!this.ready)return null;const t=ZI(e)?YI(this,e):e;return this.stateManager.toMap(t)}toScreen(e,t){return this.stateManager.toScreen(e,t)}on(e,t,i,s){return this.inputManager&&this.viewEvents.on(e,t,i,s)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return MT(this.map)?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(e){return X$.hasLayerViewModule(e)}importLayerView(e){return X$.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(B.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const t=this.toMap(e),i=await this.hitTest(e),s=this.allLayerViews.toArray().reverse(),n=new globalThis.Map(s.map(l=>[l.layer.uid,l])),r=[];let o=0,a=0;for(;o<i.results.length||a<s.length;){const l=i.results.at(o);if(l&&l.type!=="graphic"){++o;continue}const c=n.get((l?.layer??l?.graphic.layer)?.uid);if((!l||c)&&a<s.length&&s.at(a)!==c){const h=s.at(a);"fetchPopupFeaturesAtLocation"in h&&r.push({mapPoint:t,layerView:h}),++a}else l&&(r.push({graphic:l.graphic,layerView:c}),++o)}return{hits:r,location:t}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=oee(this.type);if(L("safari")&&L("safari")<9&&(e=new V("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:L("safari")})),e!=null)throw B.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return Lee()}_getDefaultViewpoint(){const{constraints:e,initialExtent:t,map:i,padding:s,size:n}=this;if(!e)return null;const r=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),a=r?.viewpoint,l=a?.targetGeometry?.extent??t,c=l?.center,h=a?.rotation??0,p=a?.scale||l&&gy(l,[n[0]-s.left-s.right,n[1]-s.top-s.bottom]),m=o.center??c,g=o.rotation??h,y=o.scale??p;return m&&y?new Cs({targetGeometry:m,scale:y,rotation:g}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const t=new pR(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=t,this._magnifierView=new vR,this._magnifierView.magnifier=this.magnifier;const i=new gR({view:this});this._set("labelManager",i);const s=new LK({view:this});this._set("animationManager",s);const n=new yR({view:this,animationManager:s});this._set("mapViewNavigation",n),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("webgl-error",o=>this.fatalError=o.error),le(()=>this.stationary,o=>t.stationary=o,es),le(()=>this.background,o=>{t.backgroundColor=o?.color,this._magnifierView.backgroundColor=o?.color},es),le(()=>this.magnifier,o=>this._magnifierView.magnifier=o,es),le(()=>this.renderingOptions,o=>t.renderingOptions=o,es),le(()=>this.highlightOptions,o=>t.highlightOptions=o,es),le(()=>this.state.id,()=>t.state=this.state,es)],"map-view"),this._updateStageChildren();const r=this._resolveWhenReady;this._resolveWhenReady=[],r.forEach(o=>o(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this.stage.addChild(t.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new VK(gY.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new fR({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new mR(e)});this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:t,padding:i,size:s,stage:n}=this;return{allLayerViews:t,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:i,size:s,stage:n}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const t of this.allLayerViews)t.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const t of this.allLayerViews)t.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};re.type="2d",d([f({readOnly:!0})],re.prototype,"animationManager",void 0),d([f({constructOnly:!0})],re.prototype,"deactivatedWebGLExtensions",void 0),d([f({constructOnly:!0})],re.prototype,"debugWebGLExtensions",void 0),d([f({readOnly:!0})],re.prototype,"featuresTilingScheme",void 0),d([f({readOnly:!0})],re.prototype,"fullOpacity",void 0),d([f()],re.prototype,"goToManager",void 0),d([f({readOnly:!0})],re.prototype,"graphicsTileStore",null),d([f()],re.prototype,"graphicsView",void 0),d([f()],re.prototype,"stateManager",void 0),d([f()],re.prototype,"constraintsInfo",null),d([f({readOnly:!0})],re.prototype,"state",null),d([f()],re.prototype,"initialExtentRequired",null),d([f()],re.prototype,"labelManager",void 0),d([f({readOnly:!0})],re.prototype,"mapViewNavigation",void 0),d([f({constructOnly:!0})],re.prototype,"renderCanvas",void 0),d([f()],re.prototype,"renderingOptions",void 0),d([f({constructOnly:!0})],re.prototype,"supersampleScreenshotsEnabled",void 0),d([f({readOnly:!0})],re.prototype,"supportsGround",void 0),d([f()],re.prototype,"_defaultsFromMapSettings",null),d([f({readOnly:!0})],re.prototype,"typeSpecificPreconditionsReady",null),d([f()],re.prototype,"animation",null),d([f({type:Iee})],re.prototype,"background",null),d([f()],re.prototype,"center",null),d([f({type:ZL})],re.prototype,"constraints",null),d([f()],re.prototype,"extent",null),d([f()],re.prototype,"floors",void 0),d([f({type:QL})],re.prototype,"highlightOptions",void 0),d([f({readOnly:!0})],re.prototype,"inputManager",void 0),d([f()],re.prototype,"map",void 0),d([f()],re.prototype,"padding",null),d([f({readOnly:!0})],re.prototype,"rendering",null),d([f()],re.prototype,"resizeAlign",null),d([f({readOnly:!0})],re.prototype,"resolution",null),d([f()],re.prototype,"rotation",null),d([f()],re.prototype,"scale",null),d([f({constructOnly:!0})],re.prototype,"spatialReferenceLocked",void 0),d([f()],re.prototype,"stationary",null),d([f({readOnly:!0})],re.prototype,"tileInfo",null),d([f({type:nR,readOnly:!0})],re.prototype,"timeline",void 0),d([f({readOnly:!0})],re.prototype,"type",void 0),d([f({readOnly:!0})],re.prototype,"updating",null),d([f()],re.prototype,"viewpoint",null),d([f()],re.prototype,"zoom",null),d([f({readOnly:!0})],re.prototype,"navigating",null),d([f(),Mt(e=>e instanceof hR?e:mg(dR,e))],re.prototype,"ui",void 0),re=d([k("esri.views.MapView")],re);const Ree=re;class Dee{static getPointLayer(t,i){const s=[];for(let r=0;r<i.length;r++){const o=i[r],l={geometry:new ae({longitude:o[1],latitude:o[0],spatialReference:new ge({wkid:4326})}),symbol:this.getPointSymbol(t),attributes:{},popupTemplate:{title:"Segment",content:[{type:"fields",fieldInfos:[]}]}},c=new Yh(l);s.push(c)}const n=new PI({});return s.forEach(function(r){n.add(r)}),n}static getPointSymbol(t){return{type:"simple-marker",color:t,size:8,outline:{color:t,width:2}}}static getPointGraphicDefinition(t,i){return{geometry:new ae({longitude:t[0],latitude:t[1],spatialReference:new ge({wkid:4326})}),symbol:this.getPointSymbol(i),attributes:{},popupTemplate:{title:"Segment",content:[{type:"fields",fieldInfos:[]}]}}}static getPointGraphic(t,i){const s=this.getPointGraphicDefinition(t,i);return new Yh(s)}}class Nee{domParser=new DOMParser;getActivitiesFromResult(t){const i=this.domParser.parseFromString(t,"text/xml"),s=i.getElementsByTagName("trkpt"),n=[];let r=i.getElementsByTagName("name")[0].innerHTML,o=new Date,a=null,l;for(let c=0;c<s.length;c++){const h=this.getFloatVal(s[c],"lon"),p=this.getFloatVal(s[c],"lat"),m=[h,p],g=this.getTimeVal(s[c]),y=this.getHRVal(s[c]);if(c===0)n.push([h,p,g?.getTime()||0,y,0]),g&&(l=g);else{const v=this.getDerivedLatLongs(a,m,g,o,y);for(let b=0;b<v.length;b++)n.push(v[b])}o=g,a=[h,p]}return{title:r,points:n,visible:!0,startDateTime:l}}getFloatVal(t,i){const s=this.getAttrVal(t,i);return parseFloat(s)}getAttrVal(t,i){return t.attributes.getNamedItem(i)?.value||""}getTimeVal(t){return new Date(this.getChildElementValue(t,"time")||0)}getHRVal(t){for(let i=0;i<t.childNodes.length;i++){let s=t.childNodes[i];if(s.nodeName==="extensions"){for(let n=0;n<s.childNodes.length;n++)if(s.childNodes[n].nodeName==="gpxtpx:TrackPointExtension"){for(let r=0;r<s.childNodes[n].childNodes.length;r++)if(s.childNodes[n].childNodes[r].nodeName==="gpxtpx:hr")return parseInt(s.childNodes[n].childNodes[r].innerHTML)}}}return 0}getChildElementValue(t,i){let s=0;for(s=0;s<t.childNodes.length;s++){let n=t.childNodes[s];if(n.nodeName===i)return n.innerHTML}return null}getDerivedLatLongs(t,i,s,n,r){const o=[];let a=1;n&&s&&(a=(s.valueOf()-n.valueOf())/1e3);const l=this.getSequenceOfNumbers(t[0],i[0],a),c=this.getSequenceOfNumbers(t[1],i[1],a);for(let h=0;h<a;h++)o.push([l[h],c[h],s.getTime()+h*1e3,r,0]);return o}getSequenceOfNumbers(t,i,s){const r=(i-t)/s;let o;const a=[];for(o=1;o<=s;o++){const l=t+r*o;a.push(l)}return a}}class Fee{activities=[];multiplier=10;seconds=0;startDateTime;currentDateTime;maxSecondsOfAnyActivity=0;timerEventName="player-tick";timerEvent=new Event(this.timerEventName);timer=null;paused=!0;done=!1;get started(){return!this.paused||this.seconds!==0}clearActivities(){this.activities.length=0,this.reset()}addActivity(t){const i=this.activities?.map(n=>n.id||0),s=i.length?Math.max(...i):0;t.id=s+1,this.activities.push(t),this.reset()}appendActivity(t,i){const s=this.activities.filter(n=>n.id===t)[0];s.points=s.points.concat(i.points),this.reset()}deleteActivity(t){this.activities=this.activities.filter(i=>i.id!==t),this.reset}reset(){this.toggleStartPause(!0),this.seconds=0,this.currentDateTime=void 0,this.startDateTime=void 0,this.refreshCalculations()}resetActivityCounters(){for(const i of this.activities)i.accumulatedDistance=0,i.lastTimeUsedForDistance=0,i.averagePace="";const t=this.activities.filter(i=>i.visible).map(i=>i.points.length);this.maxSecondsOfAnyActivity=Math.max.apply(Math,t)-1}refreshCalculations(){this.resetActivityCounters(),this.calculateDistances(),this.setCurrentDateTime()}restartTimer(){this.paused||(this.timer&&clearInterval(this.timer),this.timer=setInterval(()=>{this.done=this.seconds>=this.maxSecondsOfAnyActivity,this.done?this.paused=!0:this.seconds++,(this.seconds%10===0||this.done)&&this.calculateDistances(),this.setCurrentDateTime(),document.dispatchEvent(this.timerEvent),this.done&&clearInterval(this.timer)},1e3/this.multiplier))}toggleStartPause(t){t===void 0?this.paused=!this.paused:this.paused=t,this.timer&&clearInterval(this.timer),this.refreshCalculations(),this.restartTimer()}adjustSpeed(t){let i=this.multiplier;t?i>=50?i=i+10:i>=10?i=i+5:i++:i>50||i>10?i=i-5:i>1?i--:i=1,this.multiplier=i,this.restartTimer()}goBackward(){this.seconds=this.seconds-this.multiplier,this.seconds<0&&(this.seconds=0),this.refreshCalculations()}goForward(){this.seconds=this.seconds+this.multiplier,this.seconds<0&&(this.seconds=0),this.refreshCalculations()}getCenter(){let t=0,i=0,s=0;for(let n=0;n<this.activities.length;n++){const r=this.activities[n];r.visible&&r.points.length>this.seconds&&(i+=this.activities[n].points[this.seconds][0],t+=this.activities[n].points[this.seconds][1],s++)}return s?[i/s,t/s]:null}calculateDistances(){for(let t=0;t<this.activities.length;t++){let i=this.activities[t],s=i.points.length-1;if(this.started&&(s=this.seconds),(!i.lastTimeUsedForDistance||!i.accumulatedDistance)&&(i.lastTimeUsedForDistance=1,i.accumulatedDistance=0),i.lastTimeUsedForDistance<=s){for(let n=i.lastTimeUsedForDistance;n<s;n++)if(i.points.length>n){const r=i.points[n-1],o=i.points[n];i.accumulatedDistance||(i.accumulatedDistance=0),i.accumulatedDistance+=this.calcCrow(r[1],r[0],o[1],o[0]),i.hr=i.points[n][3]}i.lastTimeUsedForDistance=s}s>0&&(i.points.length>=s?i.averagePace=this.getAveragePace(s,i.accumulatedDistance):i.averagePace=this.getAveragePace(i.points.length-1,i.accumulatedDistance)),i.points.length<=s?i.timeDisplay=this.getMinutesSeconds(i.points.length-1):this.started||(i.timeDisplay=this.getMinutesSeconds(i.points.length-1))}}setCurrentDateTime(){if(this.startDateTime){var t=new Date(this.startDateTime);t.setSeconds(this.startDateTime?.getSeconds()+this.seconds),this.currentDateTime=t}}toRad(t){return t*Math.PI/180}calcCrow(l,i,c,n){var r=6371,o=this.toRad(c-l),a=this.toRad(n-i),l=this.toRad(l),c=this.toRad(c),h=Math.sin(o/2)*Math.sin(o/2)+Math.sin(a/2)*Math.sin(a/2)*Math.cos(l)*Math.cos(c),p=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),m=r*p;return m}getMinutesSeconds(t){const i=Math.floor(t/3600);let s=t;i>0&&(s=s-i*3600);const n=Math.floor(s/60),r=t-n*60;return`${i>0?i.toString()+":":""}${this.getPaddedValue(n)}:${this.getPaddedValue(r)}`}getAveragePace(t,i){const s=t/i/60,n=Math.trunc(s),r=Math.trunc((s-n)*60);return`${this.getPaddedValue(n)}:${this.getPaddedValue(r)}`}getPaddedValue(t){return("00"+t).slice(-2)}}class jee{refresh(){}getById(t){return document.getElementById(t)}getButtonById(t){return this.getById(t)}getInputById(t){return this.getById(t)}getSelectValue(t){return this.getById(t).value}showOrHide(t,i,s="block"){const n=this.getById(t).style;n.display=i?s:"none"}addClickHandler(t,i){this.getById(t)?.addEventListener("click",async s=>{this.refresh(),await i(s),this.refresh()})}getParameterByName(t){var i=RegExp("[?&]"+t+"=([^&]*)").exec(window.location.search);return i&&decodeURIComponent(i[1].replace(/\+/g," "))}}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Nd(e){return e+.5|0}const uo=(e,t,i)=>Math.max(Math.min(e,i),t);function oh(e){return uo(Nd(e*2.55),0,255)}function go(e){return uo(Nd(e*255),0,255)}function Kn(e){return uo(Nd(e/2.55)/100,0,1)}function $T(e){return uo(Nd(e*100),0,100)}const Ui={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Jb=[..."0123456789ABCDEF"],zee=e=>Jb[e&15],Vee=e=>Jb[(e&240)>>4]+Jb[e&15],Dp=e=>(e&240)>>4===(e&15),Uee=e=>Dp(e.r)&&Dp(e.g)&&Dp(e.b)&&Dp(e.a);function Wee(e){var t=e.length,i;return e[0]==="#"&&(t===4||t===5?i={r:255&Ui[e[1]]*17,g:255&Ui[e[2]]*17,b:255&Ui[e[3]]*17,a:t===5?Ui[e[4]]*17:255}:(t===7||t===9)&&(i={r:Ui[e[1]]<<4|Ui[e[2]],g:Ui[e[3]]<<4|Ui[e[4]],b:Ui[e[5]]<<4|Ui[e[6]],a:t===9?Ui[e[7]]<<4|Ui[e[8]]:255})),i}const Bee=(e,t)=>e<255?t(e):"";function Hee(e){var t=Uee(e)?zee:Vee;return e?"#"+t(e.r)+t(e.g)+t(e.b)+Bee(e.a,t):void 0}const Gee=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function bR(e,t,i){const s=t*Math.min(i,1-i),n=(r,o=(r+e/30)%12)=>i-s*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function qee(e,t,i){const s=(n,r=(n+e/60)%6)=>i-i*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function Yee(e,t,i){const s=bR(e,1,.5);let n;for(t+i>1&&(n=1/(t+i),t*=n,i*=n),n=0;n<3;n++)s[n]*=1-t-i,s[n]+=t;return s}function Zee(e,t,i,s,n){return e===n?(t-i)/s+(t<i?6:0):t===n?(i-e)/s+2:(e-t)/s+4}function k2(e){const i=e.r/255,s=e.g/255,n=e.b/255,r=Math.max(i,s,n),o=Math.min(i,s,n),a=(r+o)/2;let l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=Zee(i,s,n,h,r),l=l*60+.5),[l|0,c||0,a]}function P2(e,t,i,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,s)).map(go)}function O2(e,t,i){return P2(bR,e,t,i)}function Jee(e,t,i){return P2(Yee,e,t,i)}function Xee(e,t,i){return P2(qee,e,t,i)}function _R(e){return(e%360+360)%360}function Kee(e){const t=Gee.exec(e);let i=255,s;if(!t)return;t[5]!==s&&(i=t[6]?oh(+t[5]):go(+t[5]));const n=_R(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=Jee(n,r,o):t[1]==="hsv"?s=Xee(n,r,o):s=O2(n,r,o),{r:s[0],g:s[1],b:s[2],a:i}}function Qee(e,t){var i=k2(e);i[0]=_R(i[0]+t),i=O2(i),e.r=i[0],e.g=i[1],e.b=i[2]}function ete(e){if(!e)return;const t=k2(e),i=t[0],s=$T(t[1]),n=$T(t[2]);return e.a<255?`hsla(${i}, ${s}%, ${n}%, ${Kn(e.a)})`:`hsl(${i}, ${s}%, ${n}%)`}const TT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},kT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function tte(){const e={},t=Object.keys(kT),i=Object.keys(TT);let s,n,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],n=0;n<i.length;n++)r=i[n],a=a.replace(r,TT[r]);r=parseInt(kT[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let Np;function ite(e){Np||(Np=tte(),Np.transparent=[0,0,0,0]);const t=Np[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const ste=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function nte(e){const t=ste.exec(e);let i=255,s,n,r;if(!!t){if(t[7]!==s){const o=+t[7];i=t[8]?oh(o):uo(o*255,0,255)}return s=+t[1],n=+t[3],r=+t[5],s=255&(t[2]?oh(s):uo(s,0,255)),n=255&(t[4]?oh(n):uo(n,0,255)),r=255&(t[6]?oh(r):uo(r,0,255)),{r:s,g:n,b:r,a:i}}}function rte(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Kn(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const N0=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Sl=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function ote(e,t,i){const s=Sl(Kn(e.r)),n=Sl(Kn(e.g)),r=Sl(Kn(e.b));return{r:go(N0(s+i*(Sl(Kn(t.r))-s))),g:go(N0(n+i*(Sl(Kn(t.g))-n))),b:go(N0(r+i*(Sl(Kn(t.b))-r))),a:e.a+i*(t.a-e.a)}}function Fp(e,t,i){if(e){let s=k2(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*i,t===0?360:1)),s=O2(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function wR(e,t){return e&&Object.assign(t||{},e)}function PT(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=go(e[3]))):(t=wR(e,{r:0,g:0,b:0,a:1}),t.a=go(t.a)),t}function ate(e){return e.charAt(0)==="r"?nte(e):Kee(e)}class sd{constructor(t){if(t instanceof sd)return t;const i=typeof t;let s;i==="object"?s=PT(t):i==="string"&&(s=Wee(t)||ite(t)||ate(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=wR(this._rgb);return t&&(t.a=Kn(t.a)),t}set rgb(t){this._rgb=PT(t)}rgbString(){return this._valid?rte(this._rgb):void 0}hexString(){return this._valid?Hee(this._rgb):void 0}hslString(){return this._valid?ete(this._rgb):void 0}mix(t,i){if(t){const s=this.rgb,n=t.rgb;let r;const o=i===r?.5:i,a=2*o-1,l=s.a-n.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,s.r=255&c*s.r+r*n.r+.5,s.g=255&c*s.g+r*n.g+.5,s.b=255&c*s.b+r*n.b+.5,s.a=o*s.a+(1-o)*n.a,this.rgb=s}return this}interpolate(t,i){return t&&(this._rgb=ote(this._rgb,t._rgb,i)),this}clone(){return new sd(this.rgb)}alpha(t){return this._rgb.a=go(t),this}clearer(t){const i=this._rgb;return i.a*=1-t,this}greyscale(){const t=this._rgb,i=Nd(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=i,this}opaquer(t){const i=this._rgb;return i.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Fp(this._rgb,2,t),this}darken(t){return Fp(this._rgb,2,-t),this}saturate(t){return Fp(this._rgb,1,t),this}desaturate(t){return Fp(this._rgb,1,-t),this}rotate(t){return Qee(this._rgb,t),this}}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function En(){}const lte=(()=>{let e=0;return()=>e++})();function Te(e){return e===null||typeof e>"u"}function Ye(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function be(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function ht(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Ai(e,t){return ht(e)?e:t}function fe(e,t){return typeof e>"u"?t:e}const cte=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,xR=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Ve(e,t,i){if(e&&typeof e.call=="function")return e.apply(i,t)}function Re(e,t,i,s){let n,r,o;if(Ye(e))if(r=e.length,s)for(n=r-1;n>=0;n--)t.call(i,e[n],n);else for(n=0;n<r;n++)t.call(i,e[n],n);else if(be(e))for(o=Object.keys(e),r=o.length,n=0;n<r;n++)t.call(i,e[o[n]],o[n])}function eg(e,t){let i,s,n,r;if(!e||!t||e.length!==t.length)return!1;for(i=0,s=e.length;i<s;++i)if(n=e[i],r=t[i],n.datasetIndex!==r.datasetIndex||n.index!==r.index)return!1;return!0}function tg(e){if(Ye(e))return e.map(tg);if(be(e)){const t=Object.create(null),i=Object.keys(e),s=i.length;let n=0;for(;n<s;++n)t[i[n]]=tg(e[i[n]]);return t}return e}function SR(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function ute(e,t,i,s){if(!SR(e))return;const n=t[e],r=i[e];be(n)&&be(r)?nd(n,r,s):t[e]=tg(r)}function nd(e,t,i){const s=Ye(t)?t:[t],n=s.length;if(!be(e))return e;i=i||{};const r=i.merger||ute;let o;for(let a=0;a<n;++a){if(o=s[a],!be(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],e,o,i)}return e}function Ph(e,t){return nd(e,t,{merger:hte})}function hte(e,t,i){if(!SR(e))return;const s=t[e],n=i[e];be(s)&&be(n)?Ph(s,n):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=tg(n))}const OT={"":e=>e,x:e=>e.x,y:e=>e.y};function dte(e){const t=e.split("."),i=[];let s="";for(const n of t)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(i.push(s),s="");return i}function pte(e){const t=dte(e);return i=>{for(const s of t){if(s==="")break;i=i&&i[s]}return i}}function ko(e,t){return(OT[t]||(OT[t]=pte(t)))(e)}function E2(e){return e.charAt(0).toUpperCase()+e.slice(1)}const rd=e=>typeof e<"u",Po=e=>typeof e=="function",ET=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0};function fte(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Je=Math.PI,Ze=2*Je,mte=Ze+Je,ig=Number.POSITIVE_INFINITY,gte=Je/180,yt=Je/2,qo=Je/4,AT=Je*2/3,ho=Math.log10,un=Math.sign;function Oh(e,t,i){return Math.abs(e-t)<i}function CT(e){const t=Math.round(e);e=Oh(e,t,e/1e3)?t:e;const i=Math.pow(10,Math.floor(ho(e))),s=e/i;return(s<=1?1:s<=2?2:s<=5?5:10)*i}function yte(e){const t=[],i=Math.sqrt(e);let s;for(s=1;s<i;s++)e%s===0&&(t.push(s),t.push(e/s));return i===(i|0)&&t.push(i),t.sort((n,r)=>n-r).pop(),t}function Ac(e){return!isNaN(parseFloat(e))&&isFinite(e)}function vte(e,t){const i=Math.round(e);return i-t<=e&&i+t>=e}function MR(e,t,i){let s,n,r;for(s=0,n=e.length;s<n;s++)r=e[s][i],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Es(e){return e*(Je/180)}function A2(e){return e*(180/Je)}function IT(e){if(!ht(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function $R(e,t){const i=t.x-e.x,s=t.y-e.y,n=Math.sqrt(i*i+s*s);let r=Math.atan2(s,i);return r<-.5*Je&&(r+=Ze),{angle:r,distance:n}}function Xb(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function bte(e,t){return(e-t+mte)%Ze-Je}function Ii(e){return(e%Ze+Ze)%Ze}function od(e,t,i,s){const n=Ii(e),r=Ii(t),o=Ii(i),a=Ii(r-n),l=Ii(o-n),c=Ii(n-r),h=Ii(n-o);return n===r||n===o||s&&r===o||a>l&&c<h}function Nt(e,t,i){return Math.max(t,Math.min(i,e))}function _te(e){return Nt(e,-32768,32767)}function tr(e,t,i,s=1e-6){return e>=Math.min(t,i)-s&&e<=Math.max(t,i)+s}function C2(e,t,i){i=i||(o=>e[o]<t);let s=e.length-1,n=0,r;for(;s-n>1;)r=n+s>>1,i(r)?n=r:s=r;return{lo:n,hi:s}}const ir=(e,t,i,s)=>C2(e,i,s?n=>{const r=e[n][t];return r<i||r===i&&e[n+1][t]===i}:n=>e[n][t]<i),wte=(e,t,i)=>C2(e,i,s=>e[s][t]>=i);function xte(e,t,i){let s=0,n=e.length;for(;s<n&&e[s]<t;)s++;for(;n>s&&e[n-1]>i;)n--;return s>0||n<e.length?e.slice(s,n):e}const TR=["push","pop","shift","splice","unshift"];function Ste(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),TR.forEach(i=>{const s="_onData"+E2(i),n=e[i];Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value(...r){const o=n.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function LT(e,t){const i=e._chartjs;if(!i)return;const s=i.listeners,n=s.indexOf(t);n!==-1&&s.splice(n,1),!(s.length>0)&&(TR.forEach(r=>{delete e[r]}),delete e._chartjs)}function kR(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const PR=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function OR(e,t){let i=[],s=!1;return function(...n){i=n,s||(s=!0,PR.call(window,()=>{s=!1,e.apply(t,i)}))}}function Mte(e,t){let i;return function(...s){return t?(clearTimeout(i),i=setTimeout(e,t,s)):e.apply(this,s),t}}const I2=e=>e==="start"?"left":e==="end"?"right":"center",Ht=(e,t,i)=>e==="start"?t:e==="end"?i:(t+i)/2,$te=(e,t,i,s)=>e===(s?"left":"right")?i:e==="center"?(t+i)/2:t;function ER(e,t,i){const s=t.length;let n=0,r=s;if(e._sorted){const{iScale:o,_parsed:a}=e,l=o.axis,{min:c,max:h,minDefined:p,maxDefined:m}=o.getUserBounds();p&&(n=Nt(Math.min(ir(a,l,c).lo,i?s:ir(t,l,o.getPixelForValue(c)).lo),0,s-1)),m?r=Nt(Math.max(ir(a,o.axis,h,!0).hi+1,i?0:ir(t,l,o.getPixelForValue(h),!0).hi+1),n,s)-n:r=s-n}return{start:n,count:r}}function AR(e){const{xScale:t,yScale:i,_scaleRanges:s}=e,n={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!s)return e._scaleRanges=n,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==i.min||s.ymax!==i.max;return Object.assign(s,n),r}const jp=e=>e===0||e===1,RT=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ze/i)),DT=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ze/i)+1,Eh={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*yt)+1,easeOutSine:e=>Math.sin(e*yt),easeInOutSine:e=>-.5*(Math.cos(Je*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>jp(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>jp(e)?e:RT(e,.075,.3),easeOutElastic:e=>jp(e)?e:DT(e,.075,.3),easeInOutElastic(e){return jp(e)?e:e<.5?.5*RT(e*2,.1125,.45):.5+.5*DT(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Eh.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Eh.easeInBounce(e*2)*.5:Eh.easeOutBounce(e*2-1)*.5+.5};function L2(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function NT(e){return L2(e)?e:new sd(e)}function F0(e){return L2(e)?e:new sd(e).saturate(.5).darken(.1).hexString()}const Tte=["x","y","borderWidth","radius","tension"],kte=["color","borderColor","backgroundColor"];function Pte(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:kte},numbers:{type:"number",properties:Tte}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Ote(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const FT=new Map;function Ete(e,t){t=t||{};const i=e+JSON.stringify(t);let s=FT.get(i);return s||(s=new Intl.NumberFormat(e,t),FT.set(i,s)),s}function Fd(e,t,i){return Ete(t,i).format(e)}const CR={values(e){return Ye(e)?e:""+e},numeric(e,t,i){if(e===0)return"0";const s=this.chart.options.locale;let n,r=e;if(i.length>1){const c=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(c<1e-4||c>1e15)&&(n="scientific"),r=Ate(e,i)}const o=ho(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Fd(e,s,l)},logarithmic(e,t,i){if(e===0)return"0";const s=i[t].significand||e/Math.pow(10,Math.floor(ho(e)));return[1,2,3,5,10,15].includes(s)||t>.8*i.length?CR.numeric.call(this,e,t,i):""}};function Ate(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e)),i}var _y={formatters:CR};function Cte(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,i)=>i.lineWidth,tickColor:(t,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:_y.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const tl=Object.create(null),Kb=Object.create(null);function Ah(e,t){if(!t)return e;const i=t.split(".");for(let s=0,n=i.length;s<n;++s){const r=i[s];e=e[r]||(e[r]=Object.create(null))}return e}function j0(e,t,i){return typeof t=="string"?nd(Ah(e,t),i):nd(Ah(e,""),t)}class Ite{constructor(t,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>F0(n.backgroundColor),this.hoverBorderColor=(s,n)=>F0(n.borderColor),this.hoverColor=(s,n)=>F0(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(i)}set(t,i){return j0(this,t,i)}get(t){return Ah(this,t)}describe(t,i){return j0(Kb,t,i)}override(t,i){return j0(tl,t,i)}route(t,i,s,n){const r=Ah(this,t),o=Ah(this,s),a="_"+i;Object.defineProperties(r,{[a]:{value:r[i],writable:!0},[i]:{enumerable:!0,get(){const l=this[a],c=o[n];return be(l)?Object.assign({},c,l):fe(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(i=>i(this))}}var dt=new Ite({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Pte,Ote,Cte]);function Lte(e){return!e||Te(e.size)||Te(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function sg(e,t,i,s,n){let r=t[n];return r||(r=t[n]=e.measureText(n).width,i.push(n)),r>s&&(s=r),s}function Rte(e,t,i,s){s=s||{};let n=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(n=s.data={},r=s.garbageCollect=[],s.font=t),e.save(),e.font=t;let o=0;const a=i.length;let l,c,h,p,m;for(l=0;l<a;l++)if(p=i[l],p!=null&&!Ye(p))o=sg(e,n,r,o,p);else if(Ye(p))for(c=0,h=p.length;c<h;c++)m=p[c],m!=null&&!Ye(m)&&(o=sg(e,n,r,o,m));e.restore();const g=r.length/2;if(g>i.length){for(l=0;l<g;l++)delete n[r[l]];r.splice(0,g)}return o}function Yo(e,t,i){const s=e.currentDevicePixelRatio,n=i!==0?Math.max(i/2,.5):0;return Math.round((t-n)*s)/s+n}function jT(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Qb(e,t,i,s){IR(e,t,i,s,null)}function IR(e,t,i,s,n){let r,o,a,l,c,h,p,m;const g=t.pointStyle,y=t.rotation,v=t.radius;let b=(y||0)*gte;if(g&&typeof g=="object"&&(r=g.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(i,s),e.rotate(b),e.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),e.restore();return}if(!(isNaN(v)||v<=0)){switch(e.beginPath(),g){default:n?e.ellipse(i,s,n/2,v,0,0,Ze):e.arc(i,s,v,0,Ze),e.closePath();break;case"triangle":h=n?n/2:v,e.moveTo(i+Math.sin(b)*h,s-Math.cos(b)*v),b+=AT,e.lineTo(i+Math.sin(b)*h,s-Math.cos(b)*v),b+=AT,e.lineTo(i+Math.sin(b)*h,s-Math.cos(b)*v),e.closePath();break;case"rectRounded":c=v*.516,l=v-c,o=Math.cos(b+qo)*l,p=Math.cos(b+qo)*(n?n/2-c:l),a=Math.sin(b+qo)*l,m=Math.sin(b+qo)*(n?n/2-c:l),e.arc(i-p,s-a,c,b-Je,b-yt),e.arc(i+m,s-o,c,b-yt,b),e.arc(i+p,s+a,c,b,b+yt),e.arc(i-m,s+o,c,b+yt,b+Je),e.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*v,h=n?n/2:l,e.rect(i-h,s-l,2*h,2*l);break}b+=qo;case"rectRot":p=Math.cos(b)*(n?n/2:v),o=Math.cos(b)*v,a=Math.sin(b)*v,m=Math.sin(b)*(n?n/2:v),e.moveTo(i-p,s-a),e.lineTo(i+m,s-o),e.lineTo(i+p,s+a),e.lineTo(i-m,s+o),e.closePath();break;case"crossRot":b+=qo;case"cross":p=Math.cos(b)*(n?n/2:v),o=Math.cos(b)*v,a=Math.sin(b)*v,m=Math.sin(b)*(n?n/2:v),e.moveTo(i-p,s-a),e.lineTo(i+p,s+a),e.moveTo(i+m,s-o),e.lineTo(i-m,s+o);break;case"star":p=Math.cos(b)*(n?n/2:v),o=Math.cos(b)*v,a=Math.sin(b)*v,m=Math.sin(b)*(n?n/2:v),e.moveTo(i-p,s-a),e.lineTo(i+p,s+a),e.moveTo(i+m,s-o),e.lineTo(i-m,s+o),b+=qo,p=Math.cos(b)*(n?n/2:v),o=Math.cos(b)*v,a=Math.sin(b)*v,m=Math.sin(b)*(n?n/2:v),e.moveTo(i-p,s-a),e.lineTo(i+p,s+a),e.moveTo(i+m,s-o),e.lineTo(i-m,s+o);break;case"line":o=n?n/2:Math.cos(b)*v,a=Math.sin(b)*v,e.moveTo(i-o,s-a),e.lineTo(i+o,s+a);break;case"dash":e.moveTo(i,s),e.lineTo(i+Math.cos(b)*(n?n/2:v),s+Math.sin(b)*v);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function sr(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function wy(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function xy(e){e.restore()}function Dte(e,t,i,s,n){if(!t)return e.lineTo(i.x,i.y);if(n==="middle"){const r=(t.x+i.x)/2;e.lineTo(r,t.y),e.lineTo(r,i.y)}else n==="after"!=!!s?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function Nte(e,t,i,s){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?i.cp2x:i.cp1x,s?i.cp2y:i.cp1y,i.x,i.y)}function Fte(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Te(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function jte(e,t,i,s,n){if(n.strikethrough||n.underline){const r=e.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=i-r.actualBoundingBoxAscent,c=i+r.actualBoundingBoxDescent,h=n.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=n.decorationWidth||2,e.moveTo(o,h),e.lineTo(a,h),e.stroke()}}function zte(e,t){const i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function il(e,t,i,s,n,r={}){const o=Ye(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=n.string,Fte(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&zte(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),Te(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,i,s,r.maxWidth)),e.fillText(c,i,s,r.maxWidth),jte(e,i,s,c,r),s+=Number(n.lineHeight);e.restore()}function ad(e,t){const{x:i,y:s,w:n,h:r,radius:o}=t;e.arc(i+o.topLeft,s+o.topLeft,o.topLeft,1.5*Je,Je,!0),e.lineTo(i,s+r-o.bottomLeft),e.arc(i+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,Je,yt,!0),e.lineTo(i+n-o.bottomRight,s+r),e.arc(i+n-o.bottomRight,s+r-o.bottomRight,o.bottomRight,yt,0,!0),e.lineTo(i+n,s+o.topRight),e.arc(i+n-o.topRight,s+o.topRight,o.topRight,0,-yt,!0),e.lineTo(i+o.topLeft,s)}const Vte=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Ute=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Wte(e,t){const i=(""+e).match(Vte);if(!i||i[1]==="normal")return t*1.2;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100;break}return t*e}const Bte=e=>+e||0;function R2(e,t){const i={},s=be(t),n=s?Object.keys(t):t,r=be(e)?s?o=>fe(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of n)i[o]=Bte(r(o));return i}function LR(e){return R2(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Ua(e){return R2(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ei(e){const t=LR(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ot(e,t){e=e||{},t=t||dt.font;let i=fe(e.size,t.size);typeof i=="string"&&(i=parseInt(i,10));let s=fe(e.style,t.style);s&&!(""+s).match(Ute)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:fe(e.family,t.family),lineHeight:Wte(fe(e.lineHeight,t.lineHeight),i),size:i,style:s,weight:fe(e.weight,t.weight),string:""};return n.string=Lte(n),n}function ah(e,t,i,s){let n=!0,r,o,a;for(r=0,o=e.length;r<o;++r)if(a=e[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),n=!1),i!==void 0&&Ye(a)&&(a=a[i%a.length],n=!1),a!==void 0))return s&&!n&&(s.cacheable=!1),a}function Hte(e,t,i){const{min:s,max:n}=e,r=xR(t,(n-s)/2),o=(a,l)=>i&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(n,r)}}function Do(e,t){return Object.assign(Object.create(e),t)}function D2(e,t=[""],i,s,n=()=>e[0]){const r=i||e;typeof s>"u"&&(s=FR("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:s,_getTarget:n,override:a=>D2([a,...e],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return DR(a,l,()=>Qte(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return VT(a).includes(l)},ownKeys(a){return VT(a)},set(a,l,c){const h=a._storage||(a._storage=n());return a[l]=h[l]=c,delete a._keys,!0}})}function Cc(e,t,i,s){const n={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:RR(e,s),setContext:r=>Cc(e,r,i,s),override:r=>Cc(e.override(r),t,i,s)};return new Proxy(n,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return DR(r,o,()=>qte(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function RR(e,t={scriptable:!0,indexable:!0}){const{_scriptable:i=t.scriptable,_indexable:s=t.indexable,_allKeys:n=t.allKeys}=e;return{allKeys:n,scriptable:i,indexable:s,isScriptable:Po(i)?i:()=>i,isIndexable:Po(s)?s:()=>s}}const Gte=(e,t)=>e?e+E2(t):t,N2=(e,t)=>be(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function DR(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=i();return e[t]=s,s}function qte(e,t,i){const{_proxy:s,_context:n,_subProxy:r,_descriptors:o}=e;let a=s[t];return Po(a)&&o.isScriptable(t)&&(a=Yte(t,a,e,i)),Ye(a)&&a.length&&(a=Zte(t,a,e,o.isIndexable)),N2(t,a)&&(a=Cc(a,n,r&&r[t],o)),a}function Yte(e,t,i,s){const{_proxy:n,_context:r,_subProxy:o,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||s);return a.delete(e),N2(e,l)&&(l=F2(n._scopes,n,e,l)),l}function Zte(e,t,i,s){const{_proxy:n,_context:r,_subProxy:o,_descriptors:a}=i;if(typeof r.index<"u"&&s(e))return t[r.index%t.length];if(be(t[0])){const l=t,c=n._scopes.filter(h=>h!==l);t=[];for(const h of l){const p=F2(c,n,e,h);t.push(Cc(p,r,o&&o[e],a))}}return t}function NR(e,t,i){return Po(e)?e(t,i):e}const Jte=(e,t)=>e===!0?t:typeof e=="string"?ko(t,e):void 0;function Xte(e,t,i,s,n){for(const r of t){const o=Jte(i,r);if(o){e.add(o);const a=NR(o._fallback,i,n);if(typeof a<"u"&&a!==i&&a!==s)return a}else if(o===!1&&typeof s<"u"&&i!==s)return null}return!1}function F2(e,t,i,s){const n=t._rootScopes,r=NR(t._fallback,i,s),o=[...e,...n],a=new Set;a.add(s);let l=zT(a,o,i,r||i,s);return l===null||typeof r<"u"&&r!==i&&(l=zT(a,o,r,l,s),l===null)?!1:D2(Array.from(a),[""],n,r,()=>Kte(t,i,s))}function zT(e,t,i,s,n){for(;i;)i=Xte(e,t,i,s,n);return i}function Kte(e,t,i){const s=e._getTarget();t in s||(s[t]={});const n=s[t];return Ye(n)&&be(i)?i:n||{}}function Qte(e,t,i,s){let n;for(const r of t)if(n=FR(Gte(r,e),i),typeof n<"u")return N2(e,n)?F2(i,s,e,n):n}function FR(e,t){for(const i of t){if(!i)continue;const s=i[e];if(typeof s<"u")return s}}function VT(e){let t=e._keys;return t||(t=e._keys=eie(e._scopes)),t}function eie(e){const t=new Set;for(const i of e)for(const s of Object.keys(i).filter(n=>!n.startsWith("_")))t.add(s);return Array.from(t)}function jR(e,t,i,s){const{iScale:n}=e,{key:r="r"}=this._parsing,o=new Array(s);let a,l,c,h;for(a=0,l=s;a<l;++a)c=a+i,h=t[c],o[a]={r:n.parse(ko(h,r),c)};return o}const tie=Number.EPSILON||1e-14,Ic=(e,t)=>t<e.length&&!e[t].skip&&e[t],zR=e=>e==="x"?"y":"x";function iie(e,t,i,s){const n=e.skip?t:e,r=t,o=i.skip?t:i,a=Xb(r,n),l=Xb(o,r);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const p=s*c,m=s*h;return{previous:{x:r.x-p*(o.x-n.x),y:r.y-p*(o.y-n.y)},next:{x:r.x+m*(o.x-n.x),y:r.y+m*(o.y-n.y)}}}function sie(e,t,i){const s=e.length;let n,r,o,a,l,c=Ic(e,0);for(let h=0;h<s-1;++h)if(l=c,c=Ic(e,h+1),!(!l||!c)){if(Oh(t[h],0,tie)){i[h]=i[h+1]=0;continue}n=i[h]/t[h],r=i[h+1]/t[h],a=Math.pow(n,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),i[h]=n*o*t[h],i[h+1]=r*o*t[h])}}function nie(e,t,i="x"){const s=zR(i),n=e.length;let r,o,a,l=Ic(e,0);for(let c=0;c<n;++c){if(o=a,a=l,l=Ic(e,c+1),!a)continue;const h=a[i],p=a[s];o&&(r=(h-o[i])/3,a[`cp1${i}`]=h-r,a[`cp1${s}`]=p-r*t[c]),l&&(r=(l[i]-h)/3,a[`cp2${i}`]=h+r,a[`cp2${s}`]=p+r*t[c])}}function rie(e,t="x"){const i=zR(t),s=e.length,n=Array(s).fill(0),r=Array(s);let o,a,l,c=Ic(e,0);for(o=0;o<s;++o)if(a=l,l=c,c=Ic(e,o+1),!!l){if(c){const h=c[t]-l[t];n[o]=h!==0?(c[i]-l[i])/h:0}r[o]=a?c?un(n[o-1])!==un(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}sie(e,n,r),nie(e,r,t)}function zp(e,t,i){return Math.max(Math.min(e,i),t)}function oie(e,t){let i,s,n,r,o,a=sr(e[0],t);for(i=0,s=e.length;i<s;++i)o=r,r=a,a=i<s-1&&sr(e[i+1],t),r&&(n=e[i],o&&(n.cp1x=zp(n.cp1x,t.left,t.right),n.cp1y=zp(n.cp1y,t.top,t.bottom)),a&&(n.cp2x=zp(n.cp2x,t.left,t.right),n.cp2y=zp(n.cp2y,t.top,t.bottom)))}function aie(e,t,i,s,n){let r,o,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")rie(e,n);else{let c=s?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],l=iie(c,a,e[Math.min(r+1,o-(s?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&oie(e,i)}function j2(){return typeof window<"u"&&typeof document<"u"}function z2(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function ng(e,t,i){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[i])):s=e,s}const Sy=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function lie(e,t){return Sy(e).getPropertyValue(t)}const cie=["top","right","bottom","left"];function Wa(e,t,i){const s={};i=i?"-"+i:"";for(let n=0;n<4;n++){const r=cie[n];s[r]=parseFloat(e[t+"-"+r+i])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const uie=(e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot);function hie(e,t){const i=e.touches,s=i&&i.length?i[0]:e,{offsetX:n,offsetY:r}=s;let o=!1,a,l;if(uie(n,r,e.target))a=n,l=r;else{const c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Sa(e,t){if("native"in e)return e;const{canvas:i,currentDevicePixelRatio:s}=t,n=Sy(i),r=n.boxSizing==="border-box",o=Wa(n,"padding"),a=Wa(n,"border","width"),{x:l,y:c,box:h}=hie(e,i),p=o.left+(h&&a.left),m=o.top+(h&&a.top);let{width:g,height:y}=t;return r&&(g-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-p)/g*i.width/s),y:Math.round((c-m)/y*i.height/s)}}function die(e,t,i){let s,n;if(t===void 0||i===void 0){const r=e&&z2(e);if(!r)t=e.clientWidth,i=e.clientHeight;else{const o=r.getBoundingClientRect(),a=Sy(r),l=Wa(a,"border","width"),c=Wa(a,"padding");t=o.width-c.width-l.width,i=o.height-c.height-l.height,s=ng(a.maxWidth,r,"clientWidth"),n=ng(a.maxHeight,r,"clientHeight")}}return{width:t,height:i,maxWidth:s||ig,maxHeight:n||ig}}const Vp=e=>Math.round(e*10)/10;function pie(e,t,i,s){const n=Sy(e),r=Wa(n,"margin"),o=ng(n.maxWidth,e,"clientWidth")||ig,a=ng(n.maxHeight,e,"clientHeight")||ig,l=die(e,t,i);let{width:c,height:h}=l;if(n.boxSizing==="content-box"){const m=Wa(n,"border","width"),g=Wa(n,"padding");c-=g.width+m.width,h-=g.height+m.height}return c=Math.max(0,c-r.width),h=Math.max(0,s?c/s:h-r.height),c=Vp(Math.min(c,o,l.maxWidth)),h=Vp(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Vp(c/2)),(t!==void 0||i!==void 0)&&s&&l.height&&h>l.height&&(h=l.height,c=Vp(Math.floor(h*s))),{width:c,height:h}}function UT(e,t,i){const s=t||1,n=Math.floor(e.height*s),r=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(i||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==n||o.width!==r?(e.currentDevicePixelRatio=s,o.height=n,o.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const fie=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};j2()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function WT(e,t){const i=lie(e,t),s=i&&i.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Ma(e,t,i,s){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function mie(e,t,i,s){return{x:e.x+i*(t.x-e.x),y:s==="middle"?i<.5?e.y:t.y:s==="after"?i<1?e.y:t.y:i>0?t.y:e.y}}function gie(e,t,i,s){const n={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=Ma(e,n,i),a=Ma(n,r,i),l=Ma(r,t,i),c=Ma(o,a,i),h=Ma(a,l,i);return Ma(c,h,i)}const yie=function(e,t){return{x(i){return e+e+t-i},setWidth(i){t=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,s){return i-s},leftForLtr(i,s){return i-s}}},vie=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function mc(e,t,i){return e?yie(t,i):vie()}function VR(e,t){let i,s;(t==="ltr"||t==="rtl")&&(i=e.canvas.style,s=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=s)}function UR(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function WR(e){return e==="angle"?{between:od,compare:bte,normalize:Ii}:{between:tr,compare:(t,i)=>t-i,normalize:t=>t}}function BT({start:e,end:t,count:i,loop:s,style:n}){return{start:e%i,end:t%i,loop:s&&(t-e+1)%i===0,style:n}}function bie(e,t,i){const{property:s,start:n,end:r}=i,{between:o,normalize:a}=WR(s),l=t.length;let{start:c,end:h,loop:p}=e,m,g;if(p){for(c+=l,h+=l,m=0,g=l;m<g&&o(a(t[c%l][s]),n,r);++m)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:p,style:e.style}}function BR(e,t,i){if(!i)return[e];const{property:s,start:n,end:r}=i,o=t.length,{compare:a,between:l,normalize:c}=WR(s),{start:h,end:p,loop:m,style:g}=bie(e,t,i),y=[];let v=!1,b=null,w,x,$;const S=()=>l(n,$,w)&&a(n,$)!==0,M=()=>a(r,w)===0||l(r,$,w),P=()=>v||S(),C=()=>!v||M();for(let I=h,D=h;I<=p;++I)x=t[I%o],!x.skip&&(w=c(x[s]),w!==$&&(v=l(w,n,r),b===null&&P()&&(b=a(w,n)===0?I:D),b!==null&&C()&&(y.push(BT({start:b,end:I,loop:m,count:o,style:g})),b=null),D=I,$=w));return b!==null&&y.push(BT({start:b,end:p,loop:m,count:o,style:g})),y}function HR(e,t){const i=[],s=e.segments;for(let n=0;n<s.length;n++){const r=BR(s[n],e.points,t);r.length&&i.push(...r)}return i}function _ie(e,t,i,s){let n=0,r=t-1;if(i&&!s)for(;n<t&&!e[n].skip;)n++;for(;n<t&&e[n].skip;)n++;for(n%=t,i&&(r+=n);r>n&&e[r%t].skip;)r--;return r%=t,{start:n,end:r}}function wie(e,t,i,s){const n=e.length,r=[];let o=t,a=e[t],l;for(l=t+1;l<=i;++l){const c=e[l%n];c.skip||c.stop?a.skip||(s=!1,r.push({start:t%n,end:(l-1)%n,loop:s}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%n,end:o%n,loop:s}),r}function xie(e,t){const i=e.points,s=e.options.spanGaps,n=i.length;if(!n)return[];const r=!!e._loop,{start:o,end:a}=_ie(i,n,r,s);if(s===!0)return HT(e,[{start:o,end:a,loop:r}],i,t);const l=a<o?a+n:a,c=!!e._fullLoop&&o===0&&a===n-1;return HT(e,wie(i,o,l,c),i,t)}function HT(e,t,i,s){return!s||!s.setContext||!i?t:Sie(e,t,i,s)}function Sie(e,t,i,s){const n=e._chart.getContext(),r=GT(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=i.length,c=[];let h=r,p=t[0].start,m=p;function g(y,v,b,w){const x=a?-1:1;if(y!==v){for(y+=l;i[y%l].skip;)y-=x;for(;i[v%l].skip;)v+=x;y%l!==v%l&&(c.push({start:y%l,end:v%l,loop:b,style:w}),h=w,p=v%l)}}for(const y of t){p=a?p:y.start;let v=i[p%l],b;for(m=p+1;m<=y.end;m++){const w=i[m%l];b=GT(s.setContext(Do(n,{type:"segment",p0:v,p1:w,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:o}))),Mie(b,h)&&g(p,m-1,y.loop,h),v=w,h=b}p<m-1&&g(p,m-1,y.loop,h)}return c}function GT(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Mie(e,t){if(!t)return!1;const i=[],s=function(n,r){return L2(r)?(i.includes(r)||i.push(r),i.indexOf(r)):r};return JSON.stringify(e,s)!==JSON.stringify(t,s)}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class $ie{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,i,s,n){const r=i.listeners[n],o=i.duration;r.forEach(a=>a({chart:t,initial:i.initial,numSteps:o,currentStep:Math.min(s-i.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=PR.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let i=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(n.draw(),this._notify(n,s,t,"progress")),r.length||(s.running=!1,this._notify(n,s,t,"complete"),s.initial=!1),i+=r.length}),this._lastDate=t,i===0&&(this._running=!1)}_getAnims(t){const i=this._charts;let s=i.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(t,s)),s}listen(t,i,s){this._getAnims(t).listeners[i].push(s)}add(t,i){!i||!i.length||this._getAnims(t).items.push(...i)}has(t){return this._getAnims(t).items.length>0}start(t){const i=this._charts.get(t);!i||(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const i=this._charts.get(t);return!(!i||!i.running||!i.items.length)}stop(t){const i=this._charts.get(t);if(!i||!i.items.length)return;const s=i.items;let n=s.length-1;for(;n>=0;--n)s[n].cancel();i.items=[],this._notify(t,i,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Hn=new $ie;const qT="transparent",Tie={boolean(e,t,i){return i>.5?t:e},color(e,t,i){const s=NT(e||qT),n=s.valid&&NT(t||qT);return n&&n.valid?n.mix(s,i).hexString():t},number(e,t,i){return e+(t-e)*i}};class kie{constructor(t,i,s,n){const r=i[s];n=ah([t.to,n,r,t.from]);const o=ah([t.from,r,n]);this._active=!0,this._fn=t.fn||Tie[t.type||typeof o],this._easing=Eh[t.easing]||Eh.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=i,this._prop=s,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(t,i,s){if(this._active){this._notify(!1);const n=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=ah([t.to,i,n,t.from]),this._from=ah([t.from,n,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const i=t-this._start,s=this._duration,n=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||i<s),!this._active){this._target[n]=a,this._notify(!0);return}if(i<0){this._target[n]=r;return}l=i/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((i,s)=>{t.push({res:i,rej:s})})}_notify(t){const i=t?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][i]()}}class GR{constructor(t,i){this._chart=t,this._properties=new Map,this.configure(i)}configure(t){if(!be(t))return;const i=Object.keys(dt.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const r=t[n];if(!be(r))return;const o={};for(const a of i)o[a]=r[a];(Ye(r.properties)&&r.properties||[n]).forEach(a=>{(a===n||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,i){const s=i.options,n=Oie(t,s);if(!n)return[];const r=this._createAnimations(n,s);return s.$shared&&Pie(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,i){const s=this._properties,n=[],r=t.$animations||(t.$animations={}),o=Object.keys(i),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){n.push(...this._animateOptions(t,i));continue}const h=i[c];let p=r[c];const m=s.get(c);if(p)if(m&&p.active()){p.update(m,h,a);continue}else p.cancel();if(!m||!m.duration){t[c]=h;continue}r[c]=p=new kie(m,t,c,h),n.push(p)}return n}update(t,i){if(this._properties.size===0){Object.assign(t,i);return}const s=this._createAnimations(t,i);if(s.length)return Hn.add(this._chart,s),!0}}function Pie(e,t){const i=[],s=Object.keys(t);for(let n=0;n<s.length;n++){const r=e[s[n]];r&&r.active()&&i.push(r.wait())}return Promise.all(i)}function Oie(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function YT(e,t){const i=e&&e.options||{},s=i.reverse,n=i.min===void 0?t:0,r=i.max===void 0?t:0;return{start:s?r:n,end:s?n:r}}function Eie(e,t,i){if(i===!1)return!1;const s=YT(e,i),n=YT(t,i);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}function Aie(e){let t,i,s,n;return be(e)?(t=e.top,i=e.right,s=e.bottom,n=e.left):t=i=s=n=e,{top:t,right:i,bottom:s,left:n,disabled:e===!1}}function qR(e,t){const i=[],s=e._getSortedDatasetMetas(t);let n,r;for(n=0,r=s.length;n<r;++n)i.push(s[n].index);return i}function ZT(e,t,i,s={}){const n=e.keys,r=s.mode==="single";let o,a,l,c;if(t!==null){for(o=0,a=n.length;o<a;++o){if(l=+n[o],l===i){if(s.all)continue;break}c=e.values[l],ht(c)&&(r||t===0||un(t)===un(c))&&(t+=c)}return t}}function Cie(e,t){const{iScale:i,vScale:s}=t,n=i.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[n]:h,[r]:e[h]};return a}function JT(e,t){const i=e&&e.options.stacked;return i||i===void 0&&t.stack!==void 0}function Iie(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}function Lie(e){const{min:t,max:i,minDefined:s,maxDefined:n}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:n?i:Number.POSITIVE_INFINITY}}function Rie(e,t,i){const s=e[t]||(e[t]={});return s[i]||(s[i]={})}function XT(e,t,i,s){for(const n of t.getMatchingVisibleMetas(s).reverse()){const r=e[n.index];if(i&&r>0||!i&&r<0)return n.index}return null}function KT(e,t){const{chart:i,_cachedMeta:s}=e,n=i._stacks||(i._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,c=o.axis,h=Iie(r,o,s),p=t.length;let m;for(let g=0;g<p;++g){const y=t[g],{[l]:v,[c]:b}=y,w=y._stacks||(y._stacks={});m=w[c]=Rie(n,h,v),m[a]=b,m._top=XT(m,o,!0,s.type),m._bottom=XT(m,o,!1,s.type);const x=m._visualValues||(m._visualValues={});x[a]=b}}function z0(e,t){const i=e.scales;return Object.keys(i).filter(s=>i[s].axis===t).shift()}function Die(e,t){return Do(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Nie(e,t,i){return Do(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}function hu(e,t){const i=e.controller.index,s=e.vScale&&e.vScale.axis;if(!!s){t=t||e._parsed;for(const n of t){const r=n._stacks;if(!r||r[s]===void 0||r[s][i]===void 0)return;delete r[s][i],r[s]._visualValues!==void 0&&r[s]._visualValues[i]!==void 0&&delete r[s]._visualValues[i]}}}const V0=e=>e==="reset"||e==="none",QT=(e,t)=>t?e:Object.assign({},e),Fie=(e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:qR(i,!0),values:null};class No{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=JT(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&hu(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,i=this._cachedMeta,s=this.getDataset(),n=(p,m,g,y)=>p==="x"?m:p==="r"?y:g,r=i.xAxisID=fe(s.xAxisID,z0(t,"x")),o=i.yAxisID=fe(s.yAxisID,z0(t,"y")),a=i.rAxisID=fe(s.rAxisID,z0(t,"r")),l=i.indexAxis,c=i.iAxisID=n(l,r,o,a),h=i.vAxisID=n(l,o,r,a);i.xScale=this.getScaleForId(r),i.yScale=this.getScaleForId(o),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(c),i.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&LT(this._data,this),t._stacked&&hu(t)}_dataCheck(){const t=this.getDataset(),i=t.data||(t.data=[]),s=this._data;if(be(i)){const n=this._cachedMeta;this._data=Cie(i,n)}else if(s!==i){if(s){LT(s,this);const n=this._cachedMeta;hu(n),n._parsed=[]}i&&Object.isExtensible(i)&&Ste(i,this),this._syncList=[],this._data=i}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const i=this._cachedMeta,s=this.getDataset();let n=!1;this._dataCheck();const r=i._stacked;i._stacked=JT(i.vScale,i),i.stack!==s.stack&&(n=!0,hu(i),i.stack=s.stack),this._resyncElements(t),(n||r!==i._stacked)&&KT(this,i._parsed)}configure(){const t=this.chart.config,i=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){const{_cachedMeta:s,_data:n}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&i===n.length?!0:s._sorted,c=t>0&&s._parsed[t-1],h,p,m;if(this._parsing===!1)s._parsed=n,s._sorted=!0,m=n;else{Ye(n[t])?m=this.parseArrayData(s,n,t,i):be(n[t])?m=this.parseObjectData(s,n,t,i):m=this.parsePrimitiveData(s,n,t,i);const g=()=>p[a]===null||c&&p[a]<c[a];for(h=0;h<i;++h)s._parsed[h+t]=p=m[h],l&&(g()&&(l=!1),c=p);s._sorted=l}o&&KT(this,m)}parsePrimitiveData(t,i,s,n){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),h=r===o,p=new Array(n);let m,g,y;for(m=0,g=n;m<g;++m)y=m+s,p[m]={[a]:h||r.parse(c[y],y),[l]:o.parse(i[y],y)};return p}parseArrayData(t,i,s,n){const{xScale:r,yScale:o}=t,a=new Array(n);let l,c,h,p;for(l=0,c=n;l<c;++l)h=l+s,p=i[h],a[l]={x:r.parse(p[0],h),y:o.parse(p[1],h)};return a}parseObjectData(t,i,s,n){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(n);let h,p,m,g;for(h=0,p=n;h<p;++h)m=h+s,g=i[m],c[h]={x:r.parse(ko(g,a),m),y:o.parse(ko(g,l),m)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,s){const n=this.chart,r=this._cachedMeta,o=i[t.axis],a={keys:qR(n,!0),values:i._stacks[t.axis]._visualValues};return ZT(a,o,r.index,{mode:s})}updateRangeFromParsed(t,i,s,n){const r=s[i.axis];let o=r===null?NaN:r;const a=n&&s._stacks[i.axis];n&&a&&(n.values=a,o=ZT(n,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,i){const s=this._cachedMeta,n=s._parsed,r=s._sorted&&t===s.iScale,o=n.length,a=this._getOtherScale(t),l=Fie(i,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:p}=Lie(a);let m,g;function y(){g=n[m];const v=g[a.axis];return!ht(g[t.axis])||h>v||p<v}for(m=0;m<o&&!(!y()&&(this.updateRangeFromParsed(c,t,g,l),r));++m);if(r){for(m=o-1;m>=0;--m)if(!y()){this.updateRangeFromParsed(c,t,g,l);break}}return c}getAllParsedValues(t){const i=this._cachedMeta._parsed,s=[];let n,r,o;for(n=0,r=i.length;n<r;++n)o=i[n][t.axis],ht(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const i=this._cachedMeta,s=i.iScale,n=i.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:n?""+n.getLabelForValue(r[n.axis]):""}}_update(t){const i=this._cachedMeta;this.update(t||"default"),i._clip=Aie(fe(this.options.clip,Eie(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,i=this.chart,s=this._cachedMeta,n=s.data||[],r=i.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||n.length-a,c=this.options.drawActiveElementsOnTop;let h;for(s.dataset&&s.dataset.draw(t,r,a,l),h=a;h<a+l;++h){const p=n[h];p.hidden||(p.active&&c?o.push(p):p.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,i){const s=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,i,s){const n=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=Nie(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=n.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=Die(this.chart.getContext(),this.index)),r.dataset=n,r.index=r.datasetIndex=this.index;return r.active=!!i,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",s){const n=i==="active",r=this._cachedDataOpts,o=t+"-"+i,a=r[o],l=this.enableOptionSharing&&rd(s);if(a)return QT(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),p=n?[`${t}Hover`,"hover",t,""]:[t,""],m=c.getOptionScopes(this.getDataset(),h),g=Object.keys(dt.elements[t]),y=()=>this.getContext(s,n,i),v=c.resolveNamedOptions(m,g,y,p);return v.$shared&&(v.$shared=l,r[o]=Object.freeze(QT(v,l))),v}_resolveAnimations(t,i,s){const n=this.chart,r=this._cachedDataOpts,o=`animation-${i}`,a=r[o];if(a)return a;let l;if(n.options.animation!==!1){const h=this.chart.config,p=h.datasetAnimationScopeKeys(this._type,i),m=h.getOptionScopes(this.getDataset(),p);l=h.createResolver(m,this.getContext(t,s,i))}const c=new GR(n,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(!!t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||V0(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){const s=this.resolveDataElementOptions(t,i),n=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(i,r)||r!==n;return this.updateSharedOptions(r,i,s),{sharedOptions:r,includeOptions:o}}updateElement(t,i,s,n){V0(n)?Object.assign(t,s):this._resolveAnimations(i,n).update(t,s)}updateSharedOptions(t,i,s){t&&!V0(i)&&this._resolveAnimations(void 0,i).update(t,s)}_setStyle(t,i,s,n){t.active=n;const r=this.getStyle(i,n);this._resolveAnimations(i,s,n).update(t,{options:!n&&this.getSharedOptions(r)||r})}removeHoverStyle(t,i,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,i,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const i=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const n=s.length,r=i.length,o=Math.min(r,n);o&&this.parse(0,o),r>n?this._insertElements(n,r-n,t):r<n&&this._removeElements(r,n-r)}_insertElements(t,i,s=!0){const n=this._cachedMeta,r=n.data,o=t+i;let a;const l=c=>{for(c.length+=i,a=c.length-1;a>=o;a--)c[a]=c[a-i]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(n._parsed),this.parse(t,i),s&&this.updateElements(r,t,i,"reset")}updateElements(t,i,s,n){}_removeElements(t,i){const s=this._cachedMeta;if(this._parsing){const n=s._parsed.splice(t,i);s._stacked&&hu(s,n)}s.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[i,s,n]=t;this[i](s,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function jie(e,t){if(!e._cache.$bar){const i=e.getMatchingVisibleMetas(t);let s=[];for(let n=0,r=i.length;n<r;n++)s=s.concat(i[n].controller.getAllParsedValues(e));e._cache.$bar=kR(s.sort((n,r)=>n-r))}return e._cache.$bar}function zie(e){const t=e.iScale,i=jie(t,e.type);let s=t._length,n,r,o,a;const l=()=>{o===32767||o===-32768||(rd(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(n=0,r=i.length;n<r;++n)o=t.getPixelForValue(i[n]),l();for(a=void 0,n=0,r=t.ticks.length;n<r;++n)o=t.getPixelForTick(n),l();return s}function Vie(e,t,i,s){const n=i.barThickness;let r,o;return Te(n)?(r=t.min*i.categoryPercentage,o=i.barPercentage):(r=n*s,o=1),{chunk:r/s,ratio:o,start:t.pixels[e]-r/2}}function Uie(e,t,i,s){const n=t.pixels,r=n[e];let o=e>0?n[e-1]:null,a=e<n.length-1?n[e+1]:null;const l=i.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/s,ratio:i.barPercentage,start:c}}function Wie(e,t,i,s){const n=i.parse(e[0],s),r=i.parse(e[1],s),o=Math.min(n,r),a=Math.max(n,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[i.axis]=c,t._custom={barStart:l,barEnd:c,start:n,end:r,min:o,max:a}}function YR(e,t,i,s){return Ye(e)?Wie(e,t,i,s):t[i.axis]=i.parse(e,s),t}function ek(e,t,i,s){const n=e.iScale,r=e.vScale,o=n.getLabels(),a=n===r,l=[];let c,h,p,m;for(c=i,h=i+s;c<h;++c)m=t[c],p={},p[n.axis]=a||n.parse(o[c],c),l.push(YR(m,p,r,c));return l}function U0(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function Bie(e,t,i){return e!==0?un(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}function Hie(e){let t,i,s,n,r;return e.horizontal?(t=e.base>e.x,i="left",s="right"):(t=e.base<e.y,i="bottom",s="top"),t?(n="end",r="start"):(n="start",r="end"),{start:i,end:s,reverse:t,top:n,bottom:r}}function Gie(e,t,i,s){let n=t.borderSkipped;const r={};if(!n){e.borderSkipped=r;return}if(n===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=Hie(e);n==="middle"&&i&&(e.enableBorderRadius=!0,(i._top||0)===s?n=c:(i._bottom||0)===s?n=h:(r[tk(h,o,a,l)]=!0,n=c)),r[tk(n,o,a,l)]=!0,e.borderSkipped=r}function tk(e,t,i,s){return s?(e=qie(e,t,i),e=ik(e,i,t)):e=ik(e,t,i),e}function qie(e,t,i){return e===t?i:e===i?t:e}function ik(e,t,i){return e==="start"?t:e==="end"?i:e}function Yie(e,{inflateAmount:t},i){e.inflateAmount=t==="auto"?i===1?.33:0:t}class Zie extends No{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,i,s,n){return ek(t,i,s,n)}parseArrayData(t,i,s,n){return ek(t,i,s,n)}parseObjectData(t,i,s,n){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,h=o.axis==="x"?a:l,p=[];let m,g,y,v;for(m=s,g=s+n;m<g;++m)v=i[m],y={},y[r.axis]=r.parse(ko(v,c),m),p.push(YR(ko(v,h),y,o,m));return p}updateRangeFromParsed(t,i,s,n){super.updateRangeFromParsed(t,i,s,n);const r=s._custom;r&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const i=this._cachedMeta,{iScale:s,vScale:n}=i,r=this.getParsed(t),o=r._custom,a=U0(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(r[n.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,s,n){const r=n==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:p,includeOptions:m}=this._getSharedOptions(i,n);for(let g=i;g<i+s;g++){const y=this.getParsed(g),v=r||Te(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),b=this._calculateBarIndexPixels(g,h),w=(y._stacks||{})[a.axis],x={horizontal:c,base:v.base,enableBorderRadius:!w||U0(y._custom)||o===w._top||o===w._bottom,x:c?v.head:b.center,y:c?b.center:v.head,height:c?b.size:Math.abs(v.size),width:c?Math.abs(v.size):b.size};m&&(x.options=p||this.resolveDataElementOptions(g,t[g].active?"active":n));const $=x.options||t[g].options;Gie(x,$,w,o),Yie(x,$,h.ratio),this.updateElement(t[g],g,x,n)}}_getStacks(t,i){const{iScale:s}=this._cachedMeta,n=s.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),r=s.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(i),h=c&&c[l.vScale.axis];if(Te(h)||isNaN(h))return!0};for(const l of n)if(!(i!==void 0&&a(l))&&((r===!1||o.indexOf(l.stack)===-1||r===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,s){const n=this._getStacks(t,s),r=i!==void 0?n.indexOf(i):-1;return r===-1?n.length-1:r}_getRuler(){const t=this.options,i=this._cachedMeta,s=i.iScale,n=[];let r,o;for(r=0,o=i.data.length;r<o;++r)n.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const a=t.barThickness;return{min:a||zie(i),pixels:n,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:i,_stacked:s,index:n},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),c=l._custom,h=U0(c);let p=l[i.axis],m=0,g=s?this.applyStack(i,l,s):p,y,v;g!==p&&(m=g-p,g=p),h&&(p=c.barStart,g=c.barEnd-c.barStart,p!==0&&un(p)!==un(c.barEnd)&&(m=0),m+=p);const b=!Te(r)&&!h?r:m;let w=i.getPixelForValue(b);if(this.chart.getDataVisibility(t)?y=i.getPixelForValue(m+g):y=w,v=y-w,Math.abs(v)<o){v=Bie(v,i,a)*o,p===a&&(w-=v/2);const x=i.getPixelForDecimal(0),$=i.getPixelForDecimal(1),S=Math.min(x,$),M=Math.max(x,$);w=Math.max(Math.min(w,M),S),y=w+v,s&&!h&&(l._stacks[i.axis]._visualValues[n]=i.getValueForPixel(y)-i.getValueForPixel(w))}if(w===i.getPixelForValue(a)){const x=un(v)*i.getLineWidthForValue(a)/2;w+=x,v-=x}return{size:v,base:w,head:y,center:y+v/2}}_calculateBarIndexPixels(t,i){const s=i.scale,n=this.options,r=n.skipNull,o=fe(n.maxBarThickness,1/0);let a,l;if(i.grouped){const c=r?this._getStackCount(t):i.stackCount,h=n.barThickness==="flex"?Uie(t,i,n,c):Vie(t,i,n,c),p=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=h.start+h.chunk*p+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=s.getPixelForValue(this.getParsed(t)[s.axis],t),l=Math.min(o,i.min*i.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,i=t.vScale,s=t.data,n=s.length;let r=0;for(;r<n;++r)this.getParsed(r)[i.axis]!==null&&!s[r].hidden&&s[r].draw(this._ctx)}}class Jie extends No{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,s,n){const r=super.parsePrimitiveData(t,i,s,n);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+s).radius;return r}parseArrayData(t,i,s,n){const r=super.parseArrayData(t,i,s,n);for(let o=0;o<r.length;o++){const a=i[s+o];r[o]._custom=fe(a[2],this.resolveDataElementOptions(o+s).radius)}return r}parseObjectData(t,i,s,n){const r=super.parseObjectData(t,i,s,n);for(let o=0;o<r.length;o++){const a=i[s+o];r[o]._custom=fe(a&&a.r&&+a.r,this.resolveDataElementOptions(o+s).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let i=0;for(let s=t.length-1;s>=0;--s)i=Math.max(i,t[s].size(this.resolveDataElementOptions(s))/2);return i>0&&i}getLabelAndValue(t){const i=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:r}=i,o=this.getParsed(t),a=n.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:s[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,s,n){const r=n==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(i,n),h=o.axis,p=a.axis;for(let m=i;m<i+s;m++){const g=t[m],y=!r&&this.getParsed(m),v={},b=v[h]=r?o.getPixelForDecimal(.5):o.getPixelForValue(y[h]),w=v[p]=r?a.getBasePixel():a.getPixelForValue(y[p]);v.skip=isNaN(b)||isNaN(w),c&&(v.options=l||this.resolveDataElementOptions(m,g.active?"active":n),r&&(v.options.radius=0)),this.updateElement(g,m,v,n)}}resolveDataElementOptions(t,i){const s=this.getParsed(t);let n=super.resolveDataElementOptions(t,i);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const r=n.radius;return i!=="active"&&(n.radius=0),n.radius+=fe(s&&s._custom,r),n}}function Xie(e,t,i){let s=1,n=1,r=0,o=0;if(t<Ze){const a=e,l=a+t,c=Math.cos(a),h=Math.sin(a),p=Math.cos(l),m=Math.sin(l),g=($,S,M)=>od($,a,l,!0)?1:Math.max(S,S*i,M,M*i),y=($,S,M)=>od($,a,l,!0)?-1:Math.min(S,S*i,M,M*i),v=g(0,c,p),b=g(yt,h,m),w=y(Je,c,p),x=y(Je+yt,h,m);s=(v-w)/2,n=(b-x)/2,r=-(v+w)/2,o=-(b+x)/2}return{ratioX:s,ratioY:n,offsetX:r,offsetY:o}}class V2 extends No{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const i=t.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:s,color:n}}=t.legend.options;return i.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,i,s){s.chart.toggleDataVisibility(i.index),s.chart.update()}}}};constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){const s=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=s;else{let r=l=>+s[l];if(be(s[t])){const{key:l="value"}=this._parsing;r=c=>+ko(s[c],l)}let o,a;for(o=t,a=t+i;o<a;++o)n._parsed[o]=r(o)}}_getRotation(){return Es(this.options.rotation-90)}_getCircumference(){return Es(this.options.circumference)}_getRotationExtents(){let t=Ze,i=-Ze;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const n=this.chart.getDatasetMeta(s).controller,r=n._getRotation(),o=n._getCircumference();t=Math.min(t,r),i=Math.max(i,r+o)}return{rotation:t,circumference:i-t}}update(t){const i=this.chart,{chartArea:s}=i,n=this._cachedMeta,r=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(cte(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:p}=this._getRotationExtents(),{ratioX:m,ratioY:g,offsetX:y,offsetY:v}=Xie(p,h,l),b=(s.width-o)/m,w=(s.height-o)/g,x=Math.max(Math.min(b,w)/2,0),$=xR(this.options.radius,x),S=Math.max($*l,0),M=($-S)/this._getVisibleDatasetWeightTotal();this.offsetX=y*$,this.offsetY=v*$,n.total=this.calculateTotal(),this.outerRadius=$-M*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-M*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,i){const s=this.options,n=this._cachedMeta,r=this._getCircumference();return i&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*r/Ze)}updateElements(t,i,s,n){const r=n==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,p=(a.top+a.bottom)/2,m=r&&c.animateScale,g=m?0:this.innerRadius,y=m?0:this.outerRadius,{sharedOptions:v,includeOptions:b}=this._getSharedOptions(i,n);let w=this._getRotation(),x;for(x=0;x<i;++x)w+=this._circumference(x,r);for(x=i;x<i+s;++x){const $=this._circumference(x,r),S=t[x],M={x:h+this.offsetX,y:p+this.offsetY,startAngle:w,endAngle:w+$,circumference:$,outerRadius:y,innerRadius:g};b&&(M.options=v||this.resolveDataElementOptions(x,S.active?"active":n)),w+=$,this.updateElement(S,x,M,n)}}calculateTotal(){const t=this._cachedMeta,i=t.data;let s=0,n;for(n=0;n<i.length;n++){const r=t._parsed[n];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(n)&&!i[n].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const i=this._cachedMeta.total;return i>0&&!isNaN(t)?Ze*(Math.abs(t)/i):0}getLabelAndValue(t){const i=this._cachedMeta,s=this.chart,n=s.data.labels||[],r=Fd(i._parsed[t],s.options.locale);return{label:n[t]||"",value:r}}getMaxBorderWidth(t){let i=0;const s=this.chart;let n,r,o,a,l;if(!t){for(n=0,r=s.data.datasets.length;n<r;++n)if(s.isDatasetVisible(n)){o=s.getDatasetMeta(n),t=o.data,a=o.controller;break}}if(!t)return 0;for(n=0,r=t.length;n<r;++n)l=a.resolveDataElementOptions(n),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let s=0,n=t.length;s<n;++s){const r=this.resolveDataElementOptions(s);i=Math.max(i,r.offset||0,r.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(i+=this._getRingWeight(s));return i}_getRingWeight(t){return Math.max(fe(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Kie extends No{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const i=this._cachedMeta,{dataset:s,data:n=[],_dataset:r}=i,o=this.chart._animationsDisabled;let{start:a,count:l}=ER(i,n,o);this._drawStart=a,this._drawCount=l,AR(i)&&(a=0,l=n.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=n;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:c},t),this.updateElements(n,a,l,t)}updateElements(t,i,s,n){const r=n==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:p}=this._getSharedOptions(i,n),m=o.axis,g=a.axis,{spanGaps:y,segment:v}=this.options,b=Ac(y)?y:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||r||n==="none",x=i+s,$=t.length;let S=i>0&&this.getParsed(i-1);for(let M=0;M<$;++M){const P=t[M],C=w?P:{};if(M<i||M>=x){C.skip=!0;continue}const I=this.getParsed(M),D=Te(I[g]),N=C[m]=o.getPixelForValue(I[m],M),U=C[g]=r||D?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,I,l):I[g],M);C.skip=isNaN(N)||isNaN(U)||D,C.stop=M>0&&Math.abs(I[m]-S[m])>b,v&&(C.parsed=I,C.raw=c.data[M]),p&&(C.options=h||this.resolveDataElementOptions(M,P.active?"active":n)),w||this.updateElement(P,M,C,n),S=I}}getMaxOverflow(){const t=this._cachedMeta,i=t.dataset,s=i.options&&i.options.borderWidth||0,n=t.data||[];if(!n.length)return s;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class ZR extends No{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const i=t.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:s,color:n}}=t.legend.options;return i.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,i,s){s.chart.toggleDataVisibility(i.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const i=this._cachedMeta,s=this.chart,n=s.data.labels||[],r=Fd(i._parsed[t].r,s.options.locale);return{label:n[t]||"",value:r}}parseObjectData(t,i,s,n){return jR.bind(this)(t,i,s,n)}update(t){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){const t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((s,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<i.min&&(i.min=r),r>i.max&&(i.max=r))}),i}_updateRadius(){const t=this.chart,i=t.chartArea,s=t.options,n=Math.min(i.right-i.left,i.bottom-i.top),r=Math.max(n/2,0),o=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,i,s,n){const r=n==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,p=c.yCenter,m=c.getIndexAngle(0)-.5*Je;let g=m,y;const v=360/this.countVisibleElements();for(y=0;y<i;++y)g+=this._computeAngle(y,n,v);for(y=i;y<i+s;y++){const b=t[y];let w=g,x=g+this._computeAngle(y,n,v),$=o.getDataVisibility(y)?c.getDistanceFromCenterForValue(this.getParsed(y).r):0;g=x,r&&(l.animateScale&&($=0),l.animateRotate&&(w=x=m));const S={x:h,y:p,innerRadius:0,outerRadius:$,startAngle:w,endAngle:x,options:this.resolveDataElementOptions(y,b.active?"active":n)};this.updateElement(b,y,S,n)}}countVisibleElements(){const t=this._cachedMeta;let i=0;return t.data.forEach((s,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&i++}),i}_computeAngle(t,i,s){return this.chart.getDataVisibility(t)?Es(this.resolveDataElementOptions(t,i).angle||s):0}}class Qie extends V2{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class ese extends No{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const i=this._cachedMeta.vScale,s=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(s[i.axis])}}parseObjectData(t,i,s,n){return jR.bind(this)(t,i,s,n)}update(t){const i=this._cachedMeta,s=i.dataset,n=i.data||[],r=i.iScale.getLabels();if(s.points=n,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===n.length,options:o};this.updateElement(s,void 0,a,t)}this.updateElements(n,0,n.length,t)}updateElements(t,i,s,n){const r=this._cachedMeta.rScale,o=n==="reset";for(let a=i;a<i+s;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":n),h=r.getPointPositionForValue(a,this.getParsed(a).r),p=o?r.xCenter:h.x,m=o?r.yCenter:h.y,g={x:p,y:m,angle:h.angle,skip:isNaN(p)||isNaN(m),options:c};this.updateElement(l,a,g,n)}}}class tse extends No{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const i=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:r}=i,o=this.getParsed(t),a=n.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:s[t]||"",value:"("+a+", "+l+")"}}update(t){const i=this._cachedMeta,{data:s=[]}=i,n=this.chart._animationsDisabled;let{start:r,count:o}=ER(i,s,n);if(this._drawStart=r,this._drawCount=o,AR(i)&&(r=0,o=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=i;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=s;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!n,options:c},t)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(s,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,i,s,n){const r=n==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(i,n),p=this.getSharedOptions(h),m=this.includeOptions(n,p),g=o.axis,y=a.axis,{spanGaps:v,segment:b}=this.options,w=Ac(v)?v:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||r||n==="none";let $=i>0&&this.getParsed(i-1);for(let S=i;S<i+s;++S){const M=t[S],P=this.getParsed(S),C=x?M:{},I=Te(P[y]),D=C[g]=o.getPixelForValue(P[g],S),N=C[y]=r||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,P,l):P[y],S);C.skip=isNaN(D)||isNaN(N)||I,C.stop=S>0&&Math.abs(P[g]-$[g])>w,b&&(C.parsed=P,C.raw=c.data[S]),m&&(C.options=p||this.resolveDataElementOptions(S,M.active?"active":n)),x||this.updateElement(M,S,C,n),$=P}this.updateSharedOptions(p,n,h)}getMaxOverflow(){const t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let a=0;for(let l=i.length-1;l>=0;--l)a=Math.max(a,i[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const s=t.dataset,n=s.options&&s.options.borderWidth||0;if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,o)/2}}var ise=Object.freeze({__proto__:null,BarController:Zie,BubbleController:Jie,DoughnutController:V2,LineController:Kie,PieController:Qie,PolarAreaController:ZR,RadarController:ese,ScatterController:tse});function Zo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class U2{static override(t){Object.assign(U2.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Zo()}parse(){return Zo()}format(){return Zo()}add(){return Zo()}diff(){return Zo()}startOf(){return Zo()}endOf(){return Zo()}}var JR={_date:U2};function sse(e,t,i,s){const{controller:n,data:r,_sorted:o}=e,a=n._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const l=a._reversePixels?wte:ir;if(s){if(n._sharedOptions){const c=r[0],h=typeof c.getRange=="function"&&c.getRange(t);if(h){const p=l(r,t,i-h),m=l(r,t,i+h);return{lo:p.lo,hi:m.hi}}}}else return l(r,t,i)}return{lo:0,hi:r.length-1}}function jd(e,t,i,s,n){const r=e.getSortedVisibleDatasetMetas(),o=i[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:h}=r[a],{lo:p,hi:m}=sse(r[a],t,o,n);for(let g=p;g<=m;++g){const y=h[g];y.skip||s(y,c,g)}}}function nse(e){const t=e.indexOf("x")!==-1,i=e.indexOf("y")!==-1;return function(s,n){const r=t?Math.abs(s.x-n.x):0,o=i?Math.abs(s.y-n.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function W0(e,t,i,s,n){const r=[];return!n&&!e.isPointInArea(t)||jd(e,i,t,function(a,l,c){!n&&!sr(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function rse(e,t,i,s){let n=[];function r(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],s),{angle:p}=$R(o,{x:t.x,y:t.y});od(p,c,h)&&n.push({element:o,datasetIndex:a,index:l})}return jd(e,i,t,r),n}function ose(e,t,i,s,n,r){let o=[];const a=nse(i);let l=Number.POSITIVE_INFINITY;function c(h,p,m){const g=h.inRange(t.x,t.y,n);if(s&&!g)return;const y=h.getCenterPoint(n);if(!(!!r||e.isPointInArea(y))&&!g)return;const b=a(t,y);b<l?(o=[{element:h,datasetIndex:p,index:m}],l=b):b===l&&o.push({element:h,datasetIndex:p,index:m})}return jd(e,i,t,c),o}function B0(e,t,i,s,n,r){return!r&&!e.isPointInArea(t)?[]:i==="r"&&!s?rse(e,t,i,n):ose(e,t,i,s,n,r)}function sk(e,t,i,s,n){const r=[],o=i==="x"?"inXRange":"inYRange";let a=!1;return jd(e,i,t,(l,c,h)=>{l[o](t[i],n)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,n))}),s&&!a?[]:r}var ase={evaluateInteractionItems:jd,modes:{index(e,t,i,s){const n=Sa(t,e),r=i.axis||"x",o=i.includeInvisible||!1,a=i.intersect?W0(e,n,r,s,o):B0(e,n,r,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,p=c.data[h];p&&!p.skip&&l.push({element:p,datasetIndex:c.index,index:h})}),l):[]},dataset(e,t,i,s){const n=Sa(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;let a=i.intersect?W0(e,n,r,s,o):B0(e,n,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(e,t,i,s){const n=Sa(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;return W0(e,n,r,s,o)},nearest(e,t,i,s){const n=Sa(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;return B0(e,n,r,i.intersect,s,o)},x(e,t,i,s){const n=Sa(t,e);return sk(e,n,"x",i.intersect,s)},y(e,t,i,s){const n=Sa(t,e);return sk(e,n,"y",i.intersect,s)}}};const XR=["left","top","right","bottom"];function du(e,t){return e.filter(i=>i.pos===t)}function nk(e,t){return e.filter(i=>XR.indexOf(i.pos)===-1&&i.box.axis===t)}function pu(e,t){return e.sort((i,s)=>{const n=t?s:i,r=t?i:s;return n.weight===r.weight?n.index-r.index:n.weight-r.weight})}function lse(e){const t=[];let i,s,n,r,o,a;for(i=0,s=(e||[]).length;i<s;++i)n=e[i],{position:r,options:{stack:o,stackWeight:a=1}}=n,t.push({index:i,box:n,pos:r,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&r+o,stackWeight:a});return t}function cse(e){const t={};for(const i of e){const{stack:s,pos:n,stackWeight:r}=i;if(!s||!XR.includes(n))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function use(e,t){const i=cse(e),{vBoxMaxWidth:s,hBoxMaxHeight:n}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=i[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*s:l&&t.availableWidth,a.height=n):(a.width=s,a.height=h?h*n:l&&t.availableHeight)}return i}function hse(e){const t=lse(e),i=pu(t.filter(c=>c.box.fullSize),!0),s=pu(du(t,"left"),!0),n=pu(du(t,"right")),r=pu(du(t,"top"),!0),o=pu(du(t,"bottom")),a=nk(t,"x"),l=nk(t,"y");return{fullSize:i,leftAndTop:s.concat(r),rightAndBottom:n.concat(l).concat(o).concat(a),chartArea:du(t,"chartArea"),vertical:s.concat(n).concat(l),horizontal:r.concat(o).concat(a)}}function rk(e,t,i,s){return Math.max(e[i],t[i])+Math.max(e[s],t[s])}function KR(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function dse(e,t,i,s){const{pos:n,box:r}=i,o=e.maxPadding;if(!be(n)){i.size&&(e[n]-=i.size);const p=s[i.stack]||{size:0,count:1};p.size=Math.max(p.size,i.horizontal?r.height:r.width),i.size=p.size/p.count,e[n]+=i.size}r.getPadding&&KR(o,r.getPadding());const a=Math.max(0,t.outerWidth-rk(o,e,"left","right")),l=Math.max(0,t.outerHeight-rk(o,e,"top","bottom")),c=a!==e.w,h=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:c,other:h}:{same:h,other:c}}function pse(e){const t=e.maxPadding;function i(s){const n=Math.max(t[s]-e[s],0);return e[s]+=n,n}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}function fse(e,t){const i=t.maxPadding;function s(n){const r={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{r[o]=Math.max(t[o],i[o])}),r}return s(e?["left","right"]:["top","bottom"])}function lh(e,t,i,s){const n=[];let r,o,a,l,c,h;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,fse(a.horizontal,t));const{same:p,other:m}=dse(t,i,a,s);c|=p&&n.length,h=h||m,l.fullSize||n.push(a)}return c&&lh(n,t,i,s)||h}function Up(e,t,i,s,n){e.top=i,e.left=t,e.right=t+s,e.bottom=i+n,e.width=s,e.height=n}function ok(e,t,i,s){const n=i.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=s[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const p=t.w*h,m=c.size||l.height;rd(c.start)&&(o=c.start),l.fullSize?Up(l,n.left,o,i.outerWidth-n.right-n.left,m):Up(l,t.left+c.placed,o,p,m),c.start=o,c.placed+=p,o=l.bottom}else{const p=t.h*h,m=c.size||l.width;rd(c.start)&&(r=c.start),l.fullSize?Up(l,r,n.top,m,i.outerHeight-n.bottom-n.top):Up(l,r,t.top+c.placed,m,p),c.start=r,c.placed+=p,r=l.right}}t.x=r,t.y=o}var Kt={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(i){t.draw(i)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;i!==-1&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,s){if(!e)return;const n=ei(e.options.layout.padding),r=Math.max(t-n.width,0),o=Math.max(i-n.height,0),a=hse(e.boxes),l=a.vertical,c=a.horizontal;Re(e.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const h=l.reduce((v,b)=>b.box.options&&b.box.options.display===!1?v:v+1,0)||1,p=Object.freeze({outerWidth:t,outerHeight:i,padding:n,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),m=Object.assign({},n);KR(m,ei(s));const g=Object.assign({maxPadding:m,w:r,h:o,x:n.left,y:n.top},n),y=use(l.concat(c),p);lh(a.fullSize,g,p,y),lh(l,g,p,y),lh(c,g,p,y)&&lh(l,g,p,y),pse(g),ok(a.leftAndTop,g,p,y),g.x+=g.w,g.y+=g.h,ok(a.rightAndBottom,g,p,y),e.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Re(a.chartArea,v=>{const b=v.box;Object.assign(b,e.chartArea),b.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class QR{acquireContext(t,i){}releaseContext(t){return!1}addEventListener(t,i,s){}removeEventListener(t,i,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,i,s,n){return i=Math.max(0,i||t.width),s=s||t.height,{width:i,height:Math.max(0,n?Math.floor(i/n):s)}}isAttached(t){return!0}updateConfig(t){}}class mse extends QR{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const qf="$chartjs",gse={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ak=e=>e===null||e==="";function yse(e,t){const i=e.style,s=e.getAttribute("height"),n=e.getAttribute("width");if(e[qf]={initial:{height:s,width:n,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",ak(n)){const r=WT(e,"width");r!==void 0&&(e.width=r)}if(ak(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=WT(e,"height");r!==void 0&&(e.height=r)}return e}const eD=fie?{passive:!0}:!1;function vse(e,t,i){e&&e.addEventListener(t,i,eD)}function bse(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,eD)}function _se(e,t){const i=gse[e.type]||e.type,{x:s,y:n}=Sa(e,t);return{type:i,chart:t,native:e,x:s!==void 0?s:null,y:n!==void 0?n:null}}function rg(e,t){for(const i of e)if(i===t||i.contains(t))return!0}function wse(e,t,i){const s=e.canvas,n=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||rg(a.addedNodes,s),o=o&&!rg(a.removedNodes,s);o&&i()});return n.observe(document,{childList:!0,subtree:!0}),n}function xse(e,t,i){const s=e.canvas,n=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||rg(a.removedNodes,s),o=o&&!rg(a.addedNodes,s);o&&i()});return n.observe(document,{childList:!0,subtree:!0}),n}const ld=new Map;let lk=0;function tD(){const e=window.devicePixelRatio;e!==lk&&(lk=e,ld.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function Sse(e,t){ld.size||window.addEventListener("resize",tD),ld.set(e,t)}function Mse(e){ld.delete(e),ld.size||window.removeEventListener("resize",tD)}function $se(e,t,i){const s=e.canvas,n=s&&z2(s);if(!n)return;const r=OR((a,l)=>{const c=n.clientWidth;i(a,l),c<n.clientWidth&&i()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(n),Sse(e,r),o}function H0(e,t,i){i&&i.disconnect(),t==="resize"&&Mse(e)}function Tse(e,t,i){const s=e.canvas,n=OR(r=>{e.ctx!==null&&i(_se(r,e))},e);return vse(s,t,n),n}class kse extends QR{acquireContext(t,i){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(yse(t,i),s):null}releaseContext(t){const i=t.canvas;if(!i[qf])return!1;const s=i[qf].initial;["height","width"].forEach(r=>{const o=s[r];Te(o)?i.removeAttribute(r):i.setAttribute(r,o)});const n=s.style||{};return Object.keys(n).forEach(r=>{i.style[r]=n[r]}),i.width=i.width,delete i[qf],!0}addEventListener(t,i,s){this.removeEventListener(t,i);const n=t.$proxies||(t.$proxies={}),o={attach:wse,detach:xse,resize:$se}[i]||Tse;n[i]=o(t,i,s)}removeEventListener(t,i){const s=t.$proxies||(t.$proxies={}),n=s[i];if(!n)return;({attach:H0,detach:H0,resize:H0}[i]||bse)(t,i,n),s[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,i,s,n){return pie(t,i,s,n)}isAttached(t){const i=t&&z2(t);return!!(i&&i.isConnected)}}function Pse(e){return!j2()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?mse:kse}class mr{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:i,y:s}=this.getProps(["x","y"],t);return{x:i,y:s}}hasValue(){return Ac(this.x)&&Ac(this.y)}getProps(t,i){const s=this.$animations;if(!i||!s)return this;const n={};return t.forEach(r=>{n[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),n}}function Ose(e,t){const i=e.options.ticks,s=Ese(e),n=Math.min(i.maxTicksLimit||s,s),r=i.major.enabled?Cse(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>n)return Ise(t,c,r,o/n),c;const h=Ase(r,t,n);if(o>0){let p,m;const g=o>1?Math.round((l-a)/(o-1)):null;for(Wp(t,c,h,Te(g)?0:a-g,a),p=0,m=o-1;p<m;p++)Wp(t,c,h,r[p],r[p+1]);return Wp(t,c,h,l,Te(g)?t.length:l+g),c}return Wp(t,c,h),c}function Ese(e){const t=e.options.offset,i=e._tickSize(),s=e._length/i+(t?0:1),n=e._maxLength/i;return Math.floor(Math.min(s,n))}function Ase(e,t,i){const s=Lse(e),n=t.length/i;if(!s)return Math.max(n,1);const r=yte(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>n)return l}return Math.max(n,1)}function Cse(e){const t=[];let i,s;for(i=0,s=e.length;i<s;i++)e[i].major&&t.push(i);return t}function Ise(e,t,i,s){let n=0,r=i[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===r&&(t.push(e[o]),n++,r=i[n*s])}function Wp(e,t,i,s,n){const r=fe(s,0),o=Math.min(fe(n,e.length),e.length);let a=0,l,c,h;for(i=Math.ceil(i),n&&(l=n-s,i=l/Math.floor(l/i)),h=r;h<0;)a++,h=Math.round(r+a*i);for(c=Math.max(r,0);c<o;c++)c===h&&(t.push(e[c]),a++,h=Math.round(r+a*i))}function Lse(e){const t=e.length;let i,s;if(t<2)return!1;for(s=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==s)return!1;return s}const Rse=e=>e==="left"?"right":e==="right"?"left":e,ck=(e,t,i)=>t==="top"||t==="left"?e[t]+i:e[t]-i,uk=(e,t)=>Math.min(t||e,e);function hk(e,t){const i=[],s=e.length/t,n=e.length;let r=0;for(;r<n;r+=s)i.push(e[Math.floor(r)]);return i}function Dse(e,t,i){const s=e.ticks.length,n=Math.min(t,s-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(n),c;if(!(i&&(s===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(n-1))/2,l+=n<t?c:-c,l<r-a||l>o+a)))return l}function Nse(e,t){Re(e,i=>{const s=i.gc,n=s.length/2;let r;if(n>t){for(r=0;r<n;++r)delete i.data[s[r]];s.splice(0,n)}})}function fu(e){return e.drawTicks?e.tickLength:0}function dk(e,t){if(!e.display)return 0;const i=Ot(e.font,t),s=ei(e.padding);return(Ye(e.text)?e.text.length:1)*i.lineHeight+s.height}function Fse(e,t){return Do(e,{scale:t,type:"scale"})}function jse(e,t,i){return Do(e,{tick:i,index:t,type:"tick"})}function zse(e,t,i){let s=I2(e);return(i&&t!=="right"||!i&&t==="right")&&(s=Rse(s)),s}function Vse(e,t,i,s){const{top:n,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:h}=l;let p=0,m,g,y;const v=o-n,b=a-r;if(e.isHorizontal()){if(g=Ht(s,r,a),be(i)){const w=Object.keys(i)[0],x=i[w];y=h[w].getPixelForValue(x)+v-t}else i==="center"?y=(c.bottom+c.top)/2+v-t:y=ck(e,i,t);m=a-r}else{if(be(i)){const w=Object.keys(i)[0],x=i[w];g=h[w].getPixelForValue(x)-b+t}else i==="center"?g=(c.left+c.right)/2-b+t:g=ck(e,i,t);y=Ht(s,o,n),p=i==="left"?-yt:yt}return{titleX:g,titleY:y,maxWidth:m,rotation:p}}class hl extends mr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,i){return t}getUserBounds(){let{_userMin:t,_userMax:i,_suggestedMin:s,_suggestedMax:n}=this;return t=Ai(t,Number.POSITIVE_INFINITY),i=Ai(i,Number.NEGATIVE_INFINITY),s=Ai(s,Number.POSITIVE_INFINITY),n=Ai(n,Number.NEGATIVE_INFINITY),{min:Ai(t,s),max:Ai(i,n),minDefined:ht(t),maxDefined:ht(i)}}getMinMax(t){let{min:i,max:s,minDefined:n,maxDefined:r}=this.getUserBounds(),o;if(n&&r)return{min:i,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),n||(i=Math.min(i,o.min)),r||(s=Math.max(s,o.max));return i=r&&i>s?s:i,s=n&&i>s?i:s,{min:Ai(i,Ai(s,i)),max:Ai(s,Ai(i,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ve(this.options.beforeUpdate,[this])}update(t,i,s){const{beginAtZero:n,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=i,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Hte(this,r,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?hk(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Ose(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,i,s;this.isHorizontal()?(i=this.left,s=this.right):(i=this.top,s=this.bottom,t=!t),this._startPixel=i,this._endPixel=s,this._reversePixels=t,this._length=s-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ve(this.options.afterUpdate,[this])}beforeSetDimensions(){Ve(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ve(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ve(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ve(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const i=this.options.ticks;let s,n,r;for(s=0,n=t.length;s<n;s++)r=t[s],r.label=Ve(i.callback,[r.value,s,t],this)}afterTickToLabelConversion(){Ve(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ve(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,i=t.ticks,s=uk(this.ticks.length,t.ticks.maxTicksLimit),n=i.minRotation||0,r=i.maxRotation;let o=n,a,l,c;if(!this._isVisible()||!i.display||n>=r||s<=1||!this.isHorizontal()){this.labelRotation=n;return}const h=this._getLabelSizes(),p=h.widest.width,m=h.highest.height,g=Nt(this.chart.width-p,0,this.maxWidth);a=t.offset?this.maxWidth/s:g/(s-1),p+6>a&&(a=g/(s-(t.offset?.5:1)),l=this.maxHeight-fu(t.grid)-i.padding-dk(t.title,this.chart.options.font),c=Math.sqrt(p*p+m*m),o=A2(Math.min(Math.asin(Nt((h.highest.height+6)/a,-1,1)),Math.asin(Nt(l/c,-1,1))-Math.asin(Nt(m/c,-1,1)))),o=Math.max(n,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ve(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ve(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:i,options:{ticks:s,title:n,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=dk(n,i.options.font);if(a?(t.width=this.maxWidth,t.height=fu(r)+l):(t.height=this.maxHeight,t.width=fu(r)+l),s.display&&this.ticks.length){const{first:c,last:h,widest:p,highest:m}=this._getLabelSizes(),g=s.padding*2,y=Es(this.labelRotation),v=Math.cos(y),b=Math.sin(y);if(a){const w=s.mirror?0:b*p.width+v*m.height;t.height=Math.min(this.maxHeight,t.height+w+g)}else{const w=s.mirror?0:v*p.width+b*m.height;t.width=Math.min(this.maxWidth,t.width+w+g)}this._calculatePadding(c,h,b,v)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,i,s,n){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,g=0;l?c?(m=n*t.width,g=s*i.height):(m=s*t.height,g=n*i.width):r==="start"?g=i.width:r==="end"?m=t.width:r!=="inner"&&(m=t.width/2,g=i.width/2),this.paddingLeft=Math.max((m-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-p+o)*this.width/(this.width-p),0)}else{let h=i.height/2,p=t.height/2;r==="start"?(h=0,p=t.height):r==="end"&&(h=i.height,p=0),this.paddingTop=h+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ve(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:i}=this.options;return i==="top"||i==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let i,s;for(i=0,s=t.length;i<s;i++)Te(t[i].label)&&(t.splice(i,1),s--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const i=this.options.ticks.sampleSize;let s=this.ticks;i<s.length&&(s=hk(s,i)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,i,s){const{ctx:n,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(i/uk(i,s));let c=0,h=0,p,m,g,y,v,b,w,x,$,S,M;for(p=0;p<i;p+=l){if(y=t[p].label,v=this._resolveTickFontOptions(p),n.font=b=v.string,w=r[b]=r[b]||{data:{},gc:[]},x=v.lineHeight,$=S=0,!Te(y)&&!Ye(y))$=sg(n,w.data,w.gc,$,y),S=x;else if(Ye(y))for(m=0,g=y.length;m<g;++m)M=y[m],!Te(M)&&!Ye(M)&&($=sg(n,w.data,w.gc,$,M),S+=x);o.push($),a.push(S),c=Math.max($,c),h=Math.max(S,h)}Nse(r,i);const P=o.indexOf(c),C=a.indexOf(h),I=D=>({width:o[D]||0,height:a[D]||0});return{first:I(0),last:I(i-1),widest:I(P),highest:I(C),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,i){return NaN}getValueForPixel(t){}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const i=this._startPixel+t*this._length;return _te(this._alignToPixels?Yo(this.chart,i,0):i)}getDecimalForPixel(t){const i=(t-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:i}=this;return t<0&&i<0?i:t>0&&i>0?t:0}getContext(t){const i=this.ticks||[];if(t>=0&&t<i.length){const s=i[t];return s.$context||(s.$context=jse(this.getContext(),t,s))}return this.$context||(this.$context=Fse(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,i=Es(this.labelRotation),s=Math.abs(Math.cos(i)),n=Math.abs(Math.sin(i)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*n?a/s:l/n:l*n<a*s?l/s:a/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const i=this.axis,s=this.chart,n=this.options,{grid:r,position:o,border:a}=n,l=r.offset,c=this.isHorizontal(),p=this.ticks.length+(l?1:0),m=fu(r),g=[],y=a.setContext(this.getContext()),v=y.display?y.width:0,b=v/2,w=function(ye){return Yo(s,ye,v)};let x,$,S,M,P,C,I,D,N,U,H,te;if(o==="top")x=w(this.bottom),C=this.bottom-m,D=x-b,U=w(t.top)+b,te=t.bottom;else if(o==="bottom")x=w(this.top),U=t.top,te=w(t.bottom)-b,C=x+b,D=this.top+m;else if(o==="left")x=w(this.right),P=this.right-m,I=x-b,N=w(t.left)+b,H=t.right;else if(o==="right")x=w(this.left),N=t.left,H=w(t.right)-b,P=x+b,I=this.left+m;else if(i==="x"){if(o==="center")x=w((t.top+t.bottom)/2+.5);else if(be(o)){const ye=Object.keys(o)[0],de=o[ye];x=w(this.chart.scales[ye].getPixelForValue(de))}U=t.top,te=t.bottom,C=x+b,D=C+m}else if(i==="y"){if(o==="center")x=w((t.left+t.right)/2);else if(be(o)){const ye=Object.keys(o)[0],de=o[ye];x=w(this.chart.scales[ye].getPixelForValue(de))}P=x-b,I=P-m,N=t.left,H=t.right}const q=fe(n.ticks.maxTicksLimit,p),ne=Math.max(1,Math.ceil(p/q));for($=0;$<p;$+=ne){const ye=this.getContext($),de=r.setContext(ye),pe=a.setContext(ye),De=de.lineWidth,gr=de.color,Fo=pe.dash||[],yr=pe.dashOffset,vr=de.tickWidth,_n=de.tickColor,jo=de.tickBorderDash||[],wn=de.tickBorderDashOffset;S=Dse(this,$,l),S!==void 0&&(M=Yo(s,S,De),c?P=I=N=H=M:C=D=U=te=M,g.push({tx1:P,ty1:C,tx2:I,ty2:D,x1:N,y1:U,x2:H,y2:te,width:De,color:gr,borderDash:Fo,borderDashOffset:yr,tickWidth:vr,tickColor:_n,tickBorderDash:jo,tickBorderDashOffset:wn}))}return this._ticksLength=p,this._borderValue=x,g}_computeLabelItems(t){const i=this.axis,s=this.options,{position:n,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:p}=r,m=fu(s.grid),g=m+h,y=p?-h:g,v=-Es(this.labelRotation),b=[];let w,x,$,S,M,P,C,I,D,N,U,H,te="middle";if(n==="top")P=this.bottom-y,C=this._getXAxisLabelAlignment();else if(n==="bottom")P=this.top+y,C=this._getXAxisLabelAlignment();else if(n==="left"){const ne=this._getYAxisLabelAlignment(m);C=ne.textAlign,M=ne.x}else if(n==="right"){const ne=this._getYAxisLabelAlignment(m);C=ne.textAlign,M=ne.x}else if(i==="x"){if(n==="center")P=(t.top+t.bottom)/2+g;else if(be(n)){const ne=Object.keys(n)[0],ye=n[ne];P=this.chart.scales[ne].getPixelForValue(ye)+g}C=this._getXAxisLabelAlignment()}else if(i==="y"){if(n==="center")M=(t.left+t.right)/2-g;else if(be(n)){const ne=Object.keys(n)[0],ye=n[ne];M=this.chart.scales[ne].getPixelForValue(ye)}C=this._getYAxisLabelAlignment(m).textAlign}i==="y"&&(l==="start"?te="top":l==="end"&&(te="bottom"));const q=this._getLabelSizes();for(w=0,x=a.length;w<x;++w){$=a[w],S=$.label;const ne=r.setContext(this.getContext(w));I=this.getPixelForTick(w)+r.labelOffset,D=this._resolveTickFontOptions(w),N=D.lineHeight,U=Ye(S)?S.length:1;const ye=U/2,de=ne.color,pe=ne.textStrokeColor,De=ne.textStrokeWidth;let gr=C;o?(M=I,C==="inner"&&(w===x-1?gr=this.options.reverse?"left":"right":w===0?gr=this.options.reverse?"right":"left":gr="center"),n==="top"?c==="near"||v!==0?H=-U*N+N/2:c==="center"?H=-q.highest.height/2-ye*N+N:H=-q.highest.height+N/2:c==="near"||v!==0?H=N/2:c==="center"?H=q.highest.height/2-ye*N:H=q.highest.height-U*N,p&&(H*=-1),v!==0&&!ne.showLabelBackdrop&&(M+=N/2*Math.sin(v))):(P=I,H=(1-U)*N/2);let Fo;if(ne.showLabelBackdrop){const yr=ei(ne.backdropPadding),vr=q.heights[w],_n=q.widths[w];let jo=H-yr.top,wn=0-yr.left;switch(te){case"middle":jo-=vr/2;break;case"bottom":jo-=vr;break}switch(C){case"center":wn-=_n/2;break;case"right":wn-=_n;break;case"inner":w===x-1?wn-=_n:w>0&&(wn-=_n/2);break}Fo={left:wn,top:jo,width:_n+yr.width,height:vr+yr.height,color:ne.backdropColor}}b.push({label:S,font:D,textOffset:H,options:{rotation:v,color:de,strokeColor:pe,strokeWidth:De,textAlign:gr,textBaseline:te,translation:[M,P],backdrop:Fo}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:i}=this.options;if(-Es(this.labelRotation))return t==="top"?"left":"right";let n="center";return i.align==="start"?n="left":i.align==="end"?n="right":i.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:i,ticks:{crossAlign:s,mirror:n,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,h;return i==="left"?n?(h=this.right+r,s==="near"?c="left":s==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,s==="near"?c="right":s==="center"?(c="center",h-=l/2):(c="left",h=this.left)):i==="right"?n?(h=this.left+r,s==="near"?c="right":s==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,s==="near"?c="left":s==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:i},left:s,top:n,width:r,height:o}=this;i&&(t.save(),t.fillStyle=i,t.fillRect(s,n,r,o),t.restore())}getLineWidthForValue(t){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const n=this.ticks.findIndex(r=>r.value===t);return n>=0?i.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const i=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,h)=>{!h.width||!h.color||(s.save(),s.lineWidth=h.width,s.strokeStyle=h.color,s.setLineDash(h.borderDash||[]),s.lineDashOffset=h.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(i.display)for(r=0,o=n.length;r<o;++r){const l=n[r];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:i,options:{border:s,grid:n}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,p,m;this.isHorizontal()?(c=Yo(t,this.left,o)-o/2,h=Yo(t,this.right,a)+a/2,p=m=l):(p=Yo(t,this.top,o)-o/2,m=Yo(t,this.bottom,a)+a/2,c=h=l),i.save(),i.lineWidth=r.width,i.strokeStyle=r.color,i.beginPath(),i.moveTo(c,p),i.lineTo(h,m),i.stroke(),i.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,n=this._computeLabelArea();n&&wy(s,n);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,h=o.textOffset;il(s,c,0,h,l,a)}n&&xy(s)}drawTitle(){const{ctx:t,options:{position:i,title:s,reverse:n}}=this;if(!s.display)return;const r=Ot(s.font),o=ei(s.padding),a=s.align;let l=r.lineHeight/2;i==="bottom"||i==="center"||be(i)?(l+=o.bottom,Ye(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:p,rotation:m}=Vse(this,l,i,a);il(t,s.text,0,0,r,{color:s.color,maxWidth:p,rotation:m,textAlign:zse(a,i,n),textBaseline:"middle",translation:[c,h]})}draw(t){!this._isVisible()||(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,i=t.ticks&&t.ticks.z||0,s=fe(t.grid&&t.grid.z,-1),n=fe(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==hl.prototype.draw?[{z:i,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:i,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const i=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[];let r,o;for(r=0,o=i.length;r<o;++r){const a=i[r];a[s]===this.id&&(!t||a.type===t)&&n.push(a)}return n}_resolveTickFontOptions(t){const i=this.options.ticks.setContext(this.getContext(t));return Ot(i.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Bp{constructor(t,i,s){this.type=t,this.scope=i,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const i=Object.getPrototypeOf(t);let s;Bse(i)&&(s=this.register(i));const n=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in n||(n[r]=t,Use(t,o,s),this.override&&dt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const i=this.items,s=t.id,n=this.scope;s in i&&delete i[s],n&&s in dt[n]&&(delete dt[n][s],this.override&&delete tl[s])}}function Use(e,t,i){const s=nd(Object.create(null),[i?dt.get(i):{},dt.get(t),e.defaults]);dt.set(t,s),e.defaultRoutes&&Wse(t,e.defaultRoutes),e.descriptors&&dt.describe(t,e.descriptors)}function Wse(e,t){Object.keys(t).forEach(i=>{const s=i.split("."),n=s.pop(),r=[e].concat(s).join("."),o=t[i].split("."),a=o.pop(),l=o.join(".");dt.route(r,n,l,a)})}function Bse(e){return"id"in e&&"defaults"in e}class Hse{constructor(){this.controllers=new Bp(No,"datasets",!0),this.elements=new Bp(mr,"elements"),this.plugins=new Bp(Object,"plugins"),this.scales=new Bp(hl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,i,s){[...i].forEach(n=>{const r=s||this._getRegistryForType(n);s||r.isForType(n)||r===this.plugins&&n.id?this._exec(t,r,n):Re(n,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,i,s){const n=E2(t);Ve(s["before"+n],[],s),i[t](s),Ve(s["after"+n],[],s)}_getRegistryForType(t){for(let i=0;i<this._typedRegistries.length;i++){const s=this._typedRegistries[i];if(s.isForType(t))return s}return this.plugins}_get(t,i,s){const n=i.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return n}}var sn=new Hse;class Gse{constructor(){this._init=[]}notify(t,i,s,n){i==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=n?this._descriptors(t).filter(n):this._descriptors(t),o=this._notify(r,t,i,s);return i==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,i,s,n){n=n||{};for(const r of t){const o=r.plugin,a=o[s],l=[i,n,r.options];if(Ve(a,l,o)===!1&&n.cancelable)return!1}return!0}invalidate(){Te(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),i}_createDescriptors(t,i){const s=t&&t.config,n=fe(s.options&&s.options.plugins,{}),r=qse(s);return n===!1&&!i?[]:Zse(t,r,n,i)}_notifyStateChanges(t){const i=this._oldCache||[],s=this._cache,n=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(n(i,s),t,"stop"),this._notify(n(s,i),t,"start")}}function qse(e){const t={},i=[],s=Object.keys(sn.plugins.items);for(let r=0;r<s.length;r++)i.push(sn.getPlugin(s[r]));const n=e.plugins||[];for(let r=0;r<n.length;r++){const o=n[r];i.indexOf(o)===-1&&(i.push(o),t[o.id]=!0)}return{plugins:i,localIds:t}}function Yse(e,t){return!t&&e===!1?null:e===!0?{}:e}function Zse(e,{plugins:t,localIds:i},s,n){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=Yse(s[l],n);c!==null&&r.push({plugin:a,options:Jse(e.config,{plugin:a,local:i[l]},c,o)})}return r}function Jse(e,{plugin:t,local:i},s,n){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(s,r);return i&&t.defaults&&o.push(t.defaults),e.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function e_(e,t){const i=dt.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function Xse(e,t){let i=e;return e==="_index_"?i=t:e==="_value_"&&(i=t==="x"?"y":"x"),i}function Kse(e,t){return e===t?"_index_":"_value_"}function pk(e){if(e==="x"||e==="y"||e==="r")return e}function Qse(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function t_(e,...t){if(pk(e))return e;for(const i of t){const s=i.axis||Qse(i.position)||e.length>1&&pk(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function fk(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function ene(e,t){if(t.data&&t.data.datasets){const i=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(i.length)return fk(e,"x",i[0])||fk(e,"y",i[0])}return{}}function tne(e,t){const i=tl[e.type]||{scales:{}},s=t.scales||{},n=e_(e.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!be(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=t_(o,a,ene(o,e),dt.scales[a.type]),c=Kse(l,n),h=i.scales||{};r[o]=Ph(Object.create(null),[{axis:l},a,h[l],h[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||e_(a,t),h=(tl[a]||{}).scales||{};Object.keys(h).forEach(p=>{const m=Xse(p,l),g=o[m+"AxisID"]||m;r[g]=r[g]||Object.create(null),Ph(r[g],[{axis:m},s[g],h[p]])})}),Object.keys(r).forEach(o=>{const a=r[o];Ph(a,[dt.scales[a.type],dt.scale])}),r}function iD(e){const t=e.options||(e.options={});t.plugins=fe(t.plugins,{}),t.scales=tne(e,t)}function sD(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function ine(e){return e=e||{},e.data=sD(e.data),iD(e),e}const mk=new Map,nD=new Set;function Hp(e,t){let i=mk.get(e);return i||(i=t(),mk.set(e,i),nD.add(i)),i}const mu=(e,t,i)=>{const s=ko(t,i);s!==void 0&&e.add(s)};class sne{constructor(t){this._config=ine(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=sD(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),iD(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Hp(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,i){return Hp(`${t}.transition.${i}`,()=>[[`datasets.${t}.transitions.${i}`,`transitions.${i}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,i){return Hp(`${t}-${i}`,()=>[[`datasets.${t}.elements.${i}`,`datasets.${t}`,`elements.${i}`,""]])}pluginScopeKeys(t){const i=t.id,s=this.type;return Hp(`${s}-plugin-${i}`,()=>[[`plugins.${i}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,i){const s=this._scopeCache;let n=s.get(t);return(!n||i)&&(n=new Map,s.set(t,n)),n}getOptionScopes(t,i,s){const{options:n,type:r}=this,o=this._cachedScopes(t,s),a=o.get(i);if(a)return a;const l=new Set;i.forEach(h=>{t&&(l.add(t),h.forEach(p=>mu(l,t,p))),h.forEach(p=>mu(l,n,p)),h.forEach(p=>mu(l,tl[r]||{},p)),h.forEach(p=>mu(l,dt,p)),h.forEach(p=>mu(l,Kb,p))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),nD.has(i)&&o.set(i,c),c}chartOptionScopes(){const{options:t,type:i}=this;return[t,tl[i]||{},dt.datasets[i]||{},{type:i},dt,Kb]}resolveNamedOptions(t,i,s,n=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=gk(this._resolverCache,t,n);let l=o;if(rne(o,i)){r.$shared=!1,s=Po(s)?s():s;const c=this.createResolver(t,s,a);l=Cc(o,s,c)}for(const c of i)r[c]=l[c];return r}createResolver(t,i,s=[""],n){const{resolver:r}=gk(this._resolverCache,t,s);return be(i)?Cc(r,i,void 0,n):r}}function gk(e,t,i){let s=e.get(t);s||(s=new Map,e.set(t,s));const n=i.join();let r=s.get(n);return r||(r={resolver:D2(t,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},s.set(n,r)),r}const nne=e=>be(e)&&Object.getOwnPropertyNames(e).some(t=>Po(e[t]));function rne(e,t){const{isScriptable:i,isIndexable:s}=RR(e);for(const n of t){const r=i(n),o=s(n),a=(o||r)&&e[n];if(r&&(Po(a)||nne(a))||o&&Ye(a))return!0}return!1}var one="4.4.3";const ane=["top","bottom","left","right","chartArea"];function yk(e,t){return e==="top"||e==="bottom"||ane.indexOf(e)===-1&&t==="x"}function vk(e,t){return function(i,s){return i[e]===s[e]?i[t]-s[t]:i[e]-s[e]}}function bk(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),Ve(i&&i.onComplete,[e],t)}function lne(e){const t=e.chart,i=t.options.animation;Ve(i&&i.onProgress,[e],t)}function rD(e){return j2()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Yf={},_k=e=>{const t=rD(e);return Object.values(Yf).filter(i=>i.canvas===t).pop()};function cne(e,t,i){const s=Object.keys(e);for(const n of s){const r=+n;if(r>=t){const o=e[n];delete e[n],(i>0||r>t)&&(e[r+i]=o)}}}function une(e,t,i,s){return!i||e.type==="mouseout"?null:s?t:e}function Gp(e,t,i){return e.options.clip?e[i]:t[i]}function hne(e,t){const{xScale:i,yScale:s}=e;return i&&s?{left:Gp(i,t,"left"),right:Gp(i,t,"right"),top:Gp(s,t,"top"),bottom:Gp(s,t,"bottom")}:t}class W2{static defaults=dt;static instances=Yf;static overrides=tl;static registry=sn;static version=one;static getChart=_k;static register(...t){sn.add(...t),wk()}static unregister(...t){sn.remove(...t),wk()}constructor(t,i){const s=this.config=new sne(i),n=rD(t),r=_k(n);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||Pse(n)),this.platform.updateConfig(s);const a=this.platform.acquireContext(n,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=lte(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Gse,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Mte(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],Yf[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Hn.listen(this,"complete",bk),Hn.listen(this,"progress",lne),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:i},width:s,height:n,_aspectRatio:r}=this;return Te(t)?i&&r?r:n?s/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return sn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():UT(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return jT(this.canvas,this.ctx),this}stop(){return Hn.stop(this),this}resize(t,i){Hn.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){const s=this.options,n=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,t,i,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,UT(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ve(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};Re(i,(s,n)=>{s.id=n})}buildOrUpdateScales(){const t=this.options,i=t.scales,s=this.scales,n=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];i&&(r=r.concat(Object.keys(i).map(o=>{const a=i[o],l=t_(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Re(r,o=>{const a=o.options,l=a.id,c=t_(l,a),h=fe(a.type,o.dtype);(a.position===void 0||yk(a.position,c)!==yk(o.dposition))&&(a.position=o.dposition),n[l]=!0;let p=null;if(l in s&&s[l].type===h)p=s[l];else{const m=sn.getScale(h);p=new m({id:l,type:h,ctx:this.ctx,chart:this}),s[p.id]=p}p.init(a,t)}),Re(n,(o,a)=>{o||delete s[a]}),Re(s,o=>{Kt.configure(this,o,o.options),Kt.addBox(this,o)})}_updateMetasets(){const t=this._metasets,i=this.data.datasets.length,s=t.length;if(t.sort((n,r)=>n.index-r.index),s>i){for(let n=i;n<s;++n)this._destroyDatasetMeta(n);t.splice(i,s-i)}this._sortedMetasets=t.slice(0).sort(vk("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((s,n)=>{i.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],i=this.data.datasets;let s,n;for(this._removeUnreferencedMetasets(),s=0,n=i.length;s<n;s++){const r=i[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||e_(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=sn.getController(a),{datasetElementType:c,dataElementType:h}=dt.datasets[a];Object.assign(l,{dataElementType:sn.getElement(h),datasetElementType:c&&sn.getElement(c)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Re(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const i=this.config;i.update();const s=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:p}=this.getDatasetMeta(c),m=!n&&r.indexOf(p)===-1;p.buildOrUpdateElements(m),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),n||Re(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(vk("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Re(this.scales,t=>{Kt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,i=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!ET(i,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(const{method:s,start:n,count:r}of i){const o=s==="_removeElements"?-r:r;cne(t,n,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const i=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),n=s(0);for(let r=1;r<i;r++)if(!ET(n,s(r)))return;return Array.from(n).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Kt.update(this,this.width,this.height,t);const i=this.chartArea,s=i.width<=0||i.height<=0;this._layers=[],Re(this.boxes,n=>{s&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,r)=>{n._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,s=this.data.datasets.length;i<s;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,s=this.data.datasets.length;i<s;++i)this._updateDataset(i,Po(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){const s=this.getDatasetMeta(t),n={meta:s,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(s.controller._update(i),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Hn.has(this)?this.attached&&!Hn.running(this)&&Hn.start(this):(this.draw(),bk({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:n}=this._resizeBeforeDraw;this._resize(s,n),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const i=this._sortedMetasets,s=[];let n,r;for(n=0,r=i.length;n<r;++n){const o=i[n];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const i=this.ctx,s=t._clip,n=!s.disabled,r=hne(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(n&&wy(i,{left:s.left===!1?0:r.left-s.left,right:s.right===!1?this.width:r.right+s.right,top:s.top===!1?0:r.top-s.top,bottom:s.bottom===!1?this.height:r.bottom+s.bottom}),t.controller.draw(),n&&xy(i),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return sr(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,s,n){const r=ase.modes[i];return typeof r=="function"?r(this,t,s,n):[]}getDatasetMeta(t){const i=this.data.datasets[t],s=this._metasets;let n=s.filter(r=>r&&r._dataset===i).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=Do(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const i=this.data.datasets[t];if(!i)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!i.hidden}setDatasetVisibility(t,i){const s=this.getDatasetMeta(t);s.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,s){const n=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,n);rd(i)?(r.data[i].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?n:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){const i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),Hn.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),jT(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete Yf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,i=this.platform,s=(r,o)=>{i.addEventListener(this,r,o),t[r]=o},n=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Re(this.options.events,r=>s(r,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,i=this.platform,s=(l,c)=>{i.addEventListener(this,l,c),t[l]=c},n=(l,c)=>{t[l]&&(i.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{n("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,n("resize",r),this._stop(),this._resize(0,0),s("attach",a)},i.isAttached(this.canvas)?a():o()}unbindEvents(){Re(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},Re(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,s){const n=s?"set":"remove";let r,o,a,l;for(i==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+n+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const i=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!eg(s,i)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,i))}notifyPlugins(t,i,s){return this._plugins.notify(this,t,i,s)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,s){const n=this.options.hover,r=(l,c)=>l.filter(h=>!c.some(p=>h.datasetIndex===p.datasetIndex&&h.index===p.index)),o=r(i,t),a=s?t:r(t,i);o.length&&this.updateHoverStyle(o,n.mode,!1),a.length&&n.mode&&this.updateHoverStyle(a,n.mode,!0)}_eventHandler(t,i){const s={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},n=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,n)===!1)return;const r=this._handleEvent(t,i,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(r||s.changed)&&this.render(),this}_handleEvent(t,i,s){const{_active:n=[],options:r}=this,o=i,a=this._getActiveElements(t,n,s,o),l=fte(t),c=une(t,this._lastEvent,s,l);s&&(this._lastEvent=null,Ve(r.onHover,[t,a,this],this),l&&Ve(r.onClick,[t,a,this],this));const h=!eg(a,n);return(h||i)&&(this._active=a,this._updateHoverStyles(a,n,i)),this._lastEvent=c,h}_getActiveElements(t,i,s,n){if(t.type==="mouseout")return[];if(!s)return i;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,n)}}function wk(){return Re(W2.instances,e=>e._plugins.invalidate())}function dne(e,t,i){const{startAngle:s,pixelMargin:n,x:r,y:o,outerRadius:a,innerRadius:l}=t;let c=n/a;e.beginPath(),e.arc(r,o,a,s-c,i+c),l>n?(c=n/l,e.arc(r,o,l,i+c,s-c,!0)):e.arc(r,o,n,i+yt,s-yt),e.closePath(),e.clip()}function pne(e){return R2(e,["outerStart","outerEnd","innerStart","innerEnd"])}function fne(e,t,i,s){const n=pne(e.options.borderRadius),r=(i-t)/2,o=Math.min(r,s*t/2),a=l=>{const c=(i-Math.min(r,l))*s/2;return Nt(l,0,Math.min(r,c))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:Nt(n.innerStart,0,o),innerEnd:Nt(n.innerEnd,0,o)}}function Ml(e,t,i,s){return{x:i+e*Math.cos(t),y:s+e*Math.sin(t)}}function og(e,t,i,s,n,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=t,p=Math.max(t.outerRadius+s+i-c,0),m=h>0?h+s+i+c:0;let g=0;const y=n-l;if(s){const ne=h>0?h-s:0,ye=p>0?p-s:0,de=(ne+ye)/2,pe=de!==0?y*de/(de+s):y;g=(y-pe)/2}const v=Math.max(.001,y*p-i/Je)/p,b=(y-v)/2,w=l+b+g,x=n-b-g,{outerStart:$,outerEnd:S,innerStart:M,innerEnd:P}=fne(t,m,p,x-w),C=p-$,I=p-S,D=w+$/C,N=x-S/I,U=m+M,H=m+P,te=w+M/U,q=x-P/H;if(e.beginPath(),r){const ne=(D+N)/2;if(e.arc(o,a,p,D,ne),e.arc(o,a,p,ne,N),S>0){const De=Ml(I,N,o,a);e.arc(De.x,De.y,S,N,x+yt)}const ye=Ml(H,x,o,a);if(e.lineTo(ye.x,ye.y),P>0){const De=Ml(H,q,o,a);e.arc(De.x,De.y,P,x+yt,q+Math.PI)}const de=(x-P/m+(w+M/m))/2;if(e.arc(o,a,m,x-P/m,de,!0),e.arc(o,a,m,de,w+M/m,!0),M>0){const De=Ml(U,te,o,a);e.arc(De.x,De.y,M,te+Math.PI,w-yt)}const pe=Ml(C,w,o,a);if(e.lineTo(pe.x,pe.y),$>0){const De=Ml(C,D,o,a);e.arc(De.x,De.y,$,w-yt,D)}}else{e.moveTo(o,a);const ne=Math.cos(D)*p+o,ye=Math.sin(D)*p+a;e.lineTo(ne,ye);const de=Math.cos(N)*p+o,pe=Math.sin(N)*p+a;e.lineTo(de,pe)}e.closePath()}function mne(e,t,i,s,n){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){og(e,t,i,s,l,n);for(let c=0;c<r;++c)e.fill();isNaN(a)||(l=o+(a%Ze||Ze))}return og(e,t,i,s,l,n),e.fill(),l}function gne(e,t,i,s,n){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:h,borderDash:p,borderDashOffset:m}=l,g=l.borderAlign==="inner";if(!c)return;e.setLineDash(p||[]),e.lineDashOffset=m,g?(e.lineWidth=c*2,e.lineJoin=h||"round"):(e.lineWidth=c,e.lineJoin=h||"bevel");let y=t.endAngle;if(r){og(e,t,i,s,y,n);for(let v=0;v<r;++v)e.stroke();isNaN(a)||(y=o+(a%Ze||Ze))}g&&dne(e,t,y),r||(og(e,t,i,s,y,n),e.stroke())}class yne extends mr{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,s){const n=this.getProps(["x","y"],s),{angle:r,distance:o}=$R(n,{x:t,y:i}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:h,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),m=(this.options.spacing+this.options.borderWidth)/2,y=fe(p,l-a)>=Ze||od(r,a,l),v=tr(o,c+m,h+m);return y&&v}getCenterPoint(t){const{x:i,y:s,startAngle:n,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,h=(n+r)/2,p=(o+a+c+l)/2;return{x:i+Math.cos(h)*p,y:s+Math.sin(h)*p}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:i,circumference:s}=this,n=(i.offset||0)/4,r=(i.spacing||0)/2,o=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>Ze?Math.floor(s/Ze):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*n,Math.sin(a)*n);const l=1-Math.sin(Math.min(Je,s||0)),c=n*l;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,mne(t,this,c,r,o),gne(t,this,c,r,o),t.restore()}}function oD(e,t,i=t){e.lineCap=fe(i.borderCapStyle,t.borderCapStyle),e.setLineDash(fe(i.borderDash,t.borderDash)),e.lineDashOffset=fe(i.borderDashOffset,t.borderDashOffset),e.lineJoin=fe(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=fe(i.borderWidth,t.borderWidth),e.strokeStyle=fe(i.borderColor,t.borderColor)}function vne(e,t,i){e.lineTo(i.x,i.y)}function bne(e){return e.stepped?Dte:e.tension||e.cubicInterpolationMode==="monotone"?Nte:vne}function aD(e,t,i={}){const s=e.length,{start:n=0,end:r=s-1}=i,{start:o,end:a}=t,l=Math.max(n,o),c=Math.min(r,a),h=n<o&&r<o||n>a&&r>a;return{count:s,start:l,loop:t.loop,ilen:c<l&&!h?s+c-l:c-l}}function _ne(e,t,i,s){const{points:n,options:r}=t,{count:o,start:a,loop:l,ilen:c}=aD(n,i,s),h=bne(r);let{move:p=!0,reverse:m}=s||{},g,y,v;for(g=0;g<=c;++g)y=n[(a+(m?c-g:g))%o],!y.skip&&(p?(e.moveTo(y.x,y.y),p=!1):h(e,v,y,m,r.stepped),v=y);return l&&(y=n[(a+(m?c:0))%o],h(e,v,y,m,r.stepped)),!!l}function wne(e,t,i,s){const n=t.points,{count:r,start:o,ilen:a}=aD(n,i,s),{move:l=!0,reverse:c}=s||{};let h=0,p=0,m,g,y,v,b,w;const x=S=>(o+(c?a-S:S))%r,$=()=>{v!==b&&(e.lineTo(h,b),e.lineTo(h,v),e.lineTo(h,w))};for(l&&(g=n[x(0)],e.moveTo(g.x,g.y)),m=0;m<=a;++m){if(g=n[x(m)],g.skip)continue;const S=g.x,M=g.y,P=S|0;P===y?(M<v?v=M:M>b&&(b=M),h=(p*h+S)/++p):($(),e.lineTo(S,M),y=P,p=0,v=b=M),w=M}$()}function i_(e){const t=e.options,i=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!i?wne:_ne}function xne(e){return e.stepped?mie:e.tension||e.cubicInterpolationMode==="monotone"?gie:Ma}function Sne(e,t,i,s){let n=t._path;n||(n=t._path=new Path2D,t.path(n,i,s)&&n.closePath()),oD(e,t.options),e.stroke(n)}function Mne(e,t,i,s){const{segments:n,options:r}=t,o=i_(t);for(const a of n)oD(e,r,a.style),e.beginPath(),o(e,t,a,{start:i,end:i+s-1})&&e.closePath(),e.stroke()}const $ne=typeof Path2D=="function";function Tne(e,t,i,s){$ne&&!t.options.segment?Sne(e,t,i,s):Mne(e,t,i,s)}class My extends mr{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const n=s.spanGaps?this._loop:this._fullLoop;aie(this._points,s,t,n,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=xie(this,this.options.segment))}first(){const t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){const t=this.segments,i=this.points,s=t.length;return s&&i[t[s-1].end]}interpolate(t,i){const s=this.options,n=t[i],r=this.points,o=HR(this,{property:i,start:n,end:n});if(!o.length)return;const a=[],l=xne(s);let c,h;for(c=0,h=o.length;c<h;++c){const{start:p,end:m}=o[c],g=r[p],y=r[m];if(g===y){a.push(g);continue}const v=Math.abs((n-g[i])/(y[i]-g[i])),b=l(g,y,v,s.stepped);b[i]=t[i],a.push(b)}return a.length===1?a[0]:a}pathSegment(t,i,s){return i_(this)(t,this,i,s)}path(t,i,s){const n=this.segments,r=i_(this);let o=this._loop;i=i||0,s=s||this.points.length-i;for(const a of n)o&=r(t,this,a,{start:i,end:i+s-1});return!!o}draw(t,i,s,n){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),Tne(t,this,s,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function xk(e,t,i,s){const n=e.options,{[i]:r}=e.getProps([i],s);return Math.abs(t-r)<n.radius+n.hitRadius}class kne extends mr{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,s){const n=this.options,{x:r,y:o}=this.getProps(["x","y"],s);return Math.pow(t-r,2)+Math.pow(i-o,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,i){return xk(this,t,"x",i)}inYRange(t,i){return xk(this,t,"y",i)}getCenterPoint(t){const{x:i,y:s}=this.getProps(["x","y"],t);return{x:i,y:s}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const s=i&&t.borderWidth||0;return(i+s)*2}draw(t,i){const s=this.options;this.skip||s.radius<.1||!sr(this,i,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,Qb(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function lD(e,t){const{x:i,y:s,base:n,width:r,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,h,p;return e.horizontal?(p=o/2,a=Math.min(i,n),l=Math.max(i,n),c=s-p,h=s+p):(p=r/2,a=i-p,l=i+p,c=Math.min(s,n),h=Math.max(s,n)),{left:a,top:c,right:l,bottom:h}}function po(e,t,i,s){return e?0:Nt(t,i,s)}function Pne(e,t,i){const s=e.options.borderWidth,n=e.borderSkipped,r=LR(s);return{t:po(n.top,r.top,0,i),r:po(n.right,r.right,0,t),b:po(n.bottom,r.bottom,0,i),l:po(n.left,r.left,0,t)}}function One(e,t,i){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),n=e.options.borderRadius,r=Ua(n),o=Math.min(t,i),a=e.borderSkipped,l=s||be(n);return{topLeft:po(!l||a.top||a.left,r.topLeft,0,o),topRight:po(!l||a.top||a.right,r.topRight,0,o),bottomLeft:po(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:po(!l||a.bottom||a.right,r.bottomRight,0,o)}}function Ene(e){const t=lD(e),i=t.right-t.left,s=t.bottom-t.top,n=Pne(e,i/2,s/2),r=One(e,i/2,s/2);return{outer:{x:t.left,y:t.top,w:i,h:s,radius:r},inner:{x:t.left+n.l,y:t.top+n.t,w:i-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,r.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(n.b,n.r))}}}}function G0(e,t,i,s){const n=t===null,r=i===null,a=e&&!(n&&r)&&lD(e,s);return a&&(n||tr(t,a.left,a.right))&&(r||tr(i,a.top,a.bottom))}function Ane(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function Cne(e,t){e.rect(t.x,t.y,t.w,t.h)}function q0(e,t,i={}){const s=e.x!==i.x?-t:0,n=e.y!==i.y?-t:0,r=(e.x+e.w!==i.x+i.w?t:0)-s,o=(e.y+e.h!==i.y+i.h?t:0)-n;return{x:e.x+s,y:e.y+n,w:e.w+r,h:e.h+o,radius:e.radius}}class Ine extends mr{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:i,options:{borderColor:s,backgroundColor:n}}=this,{inner:r,outer:o}=Ene(this),a=Ane(o.radius)?ad:Cne;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,q0(o,i,r)),t.clip(),a(t,q0(r,-i,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,q0(r,i)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,i,s){return G0(this,t,i,s)}inXRange(t,i){return G0(this,t,null,i)}inYRange(t,i){return G0(this,null,t,i)}getCenterPoint(t){const{x:i,y:s,base:n,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(i+n)/2:i,y:r?s:(s+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}var Lne=Object.freeze({__proto__:null,ArcElement:yne,BarElement:Ine,LineElement:My,PointElement:kne});const s_=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Sk=s_.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function cD(e){return s_[e%s_.length]}function uD(e){return Sk[e%Sk.length]}function Rne(e,t){return e.borderColor=cD(t),e.backgroundColor=uD(t),++t}function Dne(e,t){return e.backgroundColor=e.data.map(()=>cD(t++)),t}function Nne(e,t){return e.backgroundColor=e.data.map(()=>uD(t++)),t}function Fne(e){let t=0;return(i,s)=>{const n=e.getDatasetMeta(s).controller;n instanceof V2?t=Dne(i,t):n instanceof ZR?t=Nne(i,t):n&&(t=Rne(i,t))}}function Mk(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function jne(e){return e&&(e.borderColor||e.backgroundColor)}var zne={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,i){if(!i.enabled)return;const{data:{datasets:s},options:n}=e.config,{elements:r}=n;if(!i.forceOverride&&(Mk(s)||jne(n)||r&&Mk(r)))return;const o=Fne(e);s.forEach(o)}};function Vne(e,t,i,s,n){const r=n.samples||s;if(r>=i)return e.slice(t,t+i);const o=[],a=(i-2)/(r-2);let l=0;const c=t+i-1;let h=t,p,m,g,y,v;for(o[l++]=e[h],p=0;p<r-2;p++){let b=0,w=0,x;const $=Math.floor((p+1)*a)+1+t,S=Math.min(Math.floor((p+2)*a)+1,i)+t,M=S-$;for(x=$;x<S;x++)b+=e[x].x,w+=e[x].y;b/=M,w/=M;const P=Math.floor(p*a)+1+t,C=Math.min(Math.floor((p+1)*a)+1,i)+t,{x:I,y:D}=e[h];for(g=y=-1,x=P;x<C;x++)y=.5*Math.abs((I-b)*(e[x].y-D)-(I-e[x].x)*(w-D)),y>g&&(g=y,m=e[x],v=x);o[l++]=m,h=v}return o[l++]=e[c],o}function Une(e,t,i,s){let n=0,r=0,o,a,l,c,h,p,m,g,y,v;const b=[],w=t+i-1,x=e[t].x,S=e[w].x-x;for(o=t;o<t+i;++o){a=e[o],l=(a.x-x)/S*s,c=a.y;const M=l|0;if(M===h)c<y?(y=c,p=o):c>v&&(v=c,m=o),n=(r*n+a.x)/++r;else{const P=o-1;if(!Te(p)&&!Te(m)){const C=Math.min(p,m),I=Math.max(p,m);C!==g&&C!==P&&b.push({...e[C],x:n}),I!==g&&I!==P&&b.push({...e[I],x:n})}o>0&&P!==g&&b.push(e[P]),b.push(a),h=M,r=0,y=v=c,p=m=g=o}}return b}function hD(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function $k(e){e.data.datasets.forEach(t=>{hD(t)})}function Wne(e,t){const i=t.length;let s=0,n;const{iScale:r}=e,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(s=Nt(ir(t,r.axis,o).lo,0,i-1)),c?n=Nt(ir(t,r.axis,a).hi+1,s,i)-s:n=i-s,{start:s,count:n}}var Bne={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,i)=>{if(!i.enabled){$k(e);return}const s=e.width;e.data.datasets.forEach((n,r)=>{const{_data:o,indexAxis:a}=n,l=e.getDatasetMeta(r),c=o||n.data;if(ah([a,e.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=e.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||e.options.parsing)return;let{start:p,count:m}=Wne(l,c);const g=i.threshold||4*s;if(m<=g){hD(n);return}Te(o)&&(n._data=c,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(v){this._data=v}}));let y;switch(i.algorithm){case"lttb":y=Vne(c,p,m,s,i);break;case"min-max":y=Une(c,p,m,s);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}n._decimated=y})},destroy(e){$k(e)}};function Hne(e,t,i){const s=e.segments,n=e.points,r=t.points,o=[];for(const a of s){let{start:l,end:c}=a;c=B2(l,c,n);const h=n_(i,n[l],n[c],a.loop);if(!t.segments){o.push({source:a,target:h,start:n[l],end:n[c]});continue}const p=HR(t,h);for(const m of p){const g=n_(i,r[m.start],r[m.end],m.loop),y=BR(a,n,g);for(const v of y)o.push({source:v,target:m,start:{[i]:Tk(h,g,"start",Math.max)},end:{[i]:Tk(h,g,"end",Math.min)}})}}return o}function n_(e,t,i,s){if(s)return;let n=t[e],r=i[e];return e==="angle"&&(n=Ii(n),r=Ii(r)),{property:e,start:n,end:r}}function Gne(e,t){const{x:i=null,y:s=null}=e||{},n=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=B2(o,a,n);const l=n[o],c=n[a];s!==null?(r.push({x:l.x,y:s}),r.push({x:c.x,y:s})):i!==null&&(r.push({x:i,y:l.y}),r.push({x:i,y:c.y}))}),r}function B2(e,t,i){for(;t>e;t--){const s=i[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function Tk(e,t,i,s){return e&&t?s(e[i],t[i]):e?e[i]:t?t[i]:0}function dD(e,t){let i=[],s=!1;return Ye(e)?(s=!0,i=e):i=Gne(e,t),i.length?new My({points:i,options:{tension:0},_loop:s,_fullLoop:s}):null}function kk(e){return e&&e.fill!==!1}function qne(e,t,i){let n=e[t].fill;const r=[t];let o;if(!i)return n;for(;n!==!1&&r.indexOf(n)===-1;){if(!ht(n))return n;if(o=e[n],!o)return!1;if(o.visible)return n;r.push(n),n=o.fill}return!1}function Yne(e,t,i){const s=Kne(e);if(be(s))return isNaN(s.value)?!1:s;let n=parseFloat(s);return ht(n)&&Math.floor(n)===n?Zne(s[0],t,n,i):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function Zne(e,t,i,s){return(e==="-"||e==="+")&&(i=t+i),i===t||i<0||i>=s?!1:i}function Jne(e,t){let i=null;return e==="start"?i=t.bottom:e==="end"?i=t.top:be(e)?i=t.getPixelForValue(e.value):t.getBasePixel&&(i=t.getBasePixel()),i}function Xne(e,t,i){let s;return e==="start"?s=i:e==="end"?s=t.options.reverse?t.min:t.max:be(e)?s=e.value:s=t.getBaseValue(),s}function Kne(e){const t=e.options,i=t.fill;let s=fe(i&&i.target,i);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function Qne(e){const{scale:t,index:i,line:s}=e,n=[],r=s.segments,o=s.points,a=ere(t,i);a.push(dD({x:null,y:t.bottom},s));for(let l=0;l<r.length;l++){const c=r[l];for(let h=c.start;h<=c.end;h++)tre(n,o[h],a)}return new My({points:n,options:{}})}function ere(e,t){const i=[],s=e.getMatchingVisibleMetas("line");for(let n=0;n<s.length;n++){const r=s[n];if(r.index===t)break;r.hidden||i.unshift(r.dataset)}return i}function tre(e,t,i){const s=[];for(let n=0;n<i.length;n++){const r=i[n],{first:o,last:a,point:l}=ire(r,t,"x");if(!(!l||o&&a)){if(o)s.unshift(l);else if(e.push(l),!a)break}}e.push(...s)}function ire(e,t,i){const s=e.interpolate(t,i);if(!s)return{};const n=s[i],r=e.segments,o=e.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const h=r[c],p=o[h.start][i],m=o[h.end][i];if(tr(n,p,m)){a=n===p,l=n===m;break}}return{first:a,last:l,point:s}}class pD{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,i,s){const{x:n,y:r,radius:o}=this;return i=i||{start:0,end:Ze},t.arc(n,r,o,i.end,i.start,!0),!s.bounds}interpolate(t){const{x:i,y:s,radius:n}=this,r=t.angle;return{x:i+Math.cos(r)*n,y:s+Math.sin(r)*n,angle:r}}}function sre(e){const{chart:t,fill:i,line:s}=e;if(ht(i))return nre(t,i);if(i==="stack")return Qne(e);if(i==="shape")return!0;const n=rre(e);return n instanceof pD?n:dD(n,s)}function nre(e,t){const i=e.getDatasetMeta(t);return i&&e.isDatasetVisible(t)?i.dataset:null}function rre(e){return(e.scale||{}).getPointPositionForValue?are(e):ore(e)}function ore(e){const{scale:t={},fill:i}=e,s=Jne(i,t);if(ht(s)){const n=t.isHorizontal();return{x:n?s:null,y:n?null:s}}return null}function are(e){const{scale:t,fill:i}=e,s=t.options,n=t.getLabels().length,r=s.reverse?t.max:t.min,o=Xne(i,t,r),a=[];if(s.grid.circular){const l=t.getPointPositionForValue(0,r);return new pD({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<n;++l)a.push(t.getPointPositionForValue(l,o));return a}function Y0(e,t,i){const s=sre(t),{line:n,scale:r,axis:o}=t,a=n.options,l=a.fill,c=a.backgroundColor,{above:h=c,below:p=c}=l||{};s&&n.points.length&&(wy(e,i),lre(e,{line:n,target:s,above:h,below:p,area:i,scale:r,axis:o}),xy(e))}function lre(e,t){const{line:i,target:s,above:n,below:r,area:o,scale:a}=t,l=i._loop?"angle":t.axis;e.save(),l==="x"&&r!==n&&(Pk(e,s,o.top),Ok(e,{line:i,target:s,color:n,scale:a,property:l}),e.restore(),e.save(),Pk(e,s,o.bottom)),Ok(e,{line:i,target:s,color:r,scale:a,property:l}),e.restore()}function Pk(e,t,i){const{segments:s,points:n}=t;let r=!0,o=!1;e.beginPath();for(const a of s){const{start:l,end:c}=a,h=n[l],p=n[B2(l,c,n)];r?(e.moveTo(h.x,h.y),r=!1):(e.lineTo(h.x,i),e.lineTo(h.x,h.y)),o=!!t.pathSegment(e,a,{move:o}),o?e.closePath():e.lineTo(p.x,i)}e.lineTo(t.first().x,i),e.closePath(),e.clip()}function Ok(e,t){const{line:i,target:s,property:n,color:r,scale:o}=t,a=Hne(i,s,n);for(const{source:l,target:c,start:h,end:p}of a){const{style:{backgroundColor:m=r}={}}=l,g=s!==!0;e.save(),e.fillStyle=m,cre(e,o,g&&n_(n,h,p)),e.beginPath();const y=!!i.pathSegment(e,l);let v;if(g){y?e.closePath():Ek(e,s,p,n);const b=!!s.pathSegment(e,c,{move:y,reverse:!0});v=y&&b,v||Ek(e,s,h,n)}e.closePath(),e.fill(v?"evenodd":"nonzero"),e.restore()}}function cre(e,t,i){const{top:s,bottom:n}=t.chart.chartArea,{property:r,start:o,end:a}=i||{};r==="x"&&(e.beginPath(),e.rect(o,s,a-o,n-s),e.clip())}function Ek(e,t,i,s){const n=t.interpolate(i,s);n&&e.lineTo(n.x,n.y)}var ure={id:"filler",afterDatasetsUpdate(e,t,i){const s=(e.data.datasets||[]).length,n=[];let r,o,a,l;for(o=0;o<s;++o)r=e.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof My&&(l={visible:e.isDatasetVisible(o),index:o,fill:Yne(a,o,s),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,n.push(l);for(o=0;o<s;++o)l=n[o],!(!l||l.fill===!1)&&(l.fill=qne(n,o,i.propagate))},beforeDraw(e,t,i){const s=i.drawTime==="beforeDraw",n=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let o=n.length-1;o>=0;--o){const a=n[o].$filler;!a||(a.line.updateControlPoints(r,a.axis),s&&a.fill&&Y0(e.ctx,a,r))}},beforeDatasetsDraw(e,t,i){if(i.drawTime!=="beforeDatasetsDraw")return;const s=e.getSortedVisibleDatasetMetas();for(let n=s.length-1;n>=0;--n){const r=s[n].$filler;kk(r)&&Y0(e.ctx,r,e.chartArea)}},beforeDatasetDraw(e,t,i){const s=t.meta.$filler;!kk(s)||i.drawTime!=="beforeDatasetDraw"||Y0(e.ctx,s,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ak=(e,t)=>{let{boxHeight:i=t,boxWidth:s=t}=e;return e.usePointStyle&&(i=Math.min(i,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:i,itemHeight:Math.max(t,i)}},hre=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Ck extends mr{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i,s){this.maxWidth=t,this.maxHeight=i,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let i=Ve(t.generateLabels,[this.chart],this)||[];t.filter&&(i=i.filter(s=>t.filter(s,this.chart.data))),t.sort&&(i=i.sort((s,n)=>t.sort(s,n,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:t,ctx:i}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,n=Ot(s.font),r=n.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Ak(s,r);let c,h;i.font=n.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,n,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,i,s,n){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=n+a;let p=t;r.textAlign="left",r.textBaseline="middle";let m=-1,g=-h;return this.legendItems.forEach((y,v)=>{const b=s+i/2+r.measureText(y.text).width;(v===0||c[c.length-1]+b+2*a>o)&&(p+=h,c[c.length-(v>0?0:1)]=0,g+=h,m++),l[v]={left:0,top:g,row:m,width:b,height:n},c[c.length-1]+=b+a}),p}_fitCols(t,i,s,n){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-t;let p=a,m=0,g=0,y=0,v=0;return this.legendItems.forEach((b,w)=>{const{itemWidth:x,itemHeight:$}=dre(s,i,r,b,n);w>0&&g+$+2*a>h&&(p+=m+a,c.push({width:m,height:g}),y+=m+a,v++,m=g=0),l[w]={left:y,top:g,col:v,width:x,height:$},m=Math.max(m,x),g+=$+a}),p+=m,c.push({width:m,height:g}),p}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:s,labels:{padding:n},rtl:r}}=this,o=mc(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ht(s,this.left+n,this.right-this.lineWidths[a]);for(const c of i)a!==c.row&&(a=c.row,l=Ht(s,this.left+n,this.right-this.lineWidths[a])),c.top+=this.top+t+n,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+n}else{let a=0,l=Ht(s,this.top+t+n,this.bottom-this.columnSizes[a].height);for(const c of i)c.col!==a&&(a=c.col,l=Ht(s,this.top+t+n,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+n,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;wy(t,this),this._draw(),xy(t)}}_draw(){const{options:t,columnSizes:i,lineWidths:s,ctx:n}=this,{align:r,labels:o}=t,a=dt.color,l=mc(t.rtl,this.left,this.width),c=Ot(o.font),{padding:h}=o,p=c.size,m=p/2;let g;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=c.string;const{boxWidth:y,boxHeight:v,itemHeight:b}=Ak(o,p),w=function(P,C,I){if(isNaN(y)||y<=0||isNaN(v)||v<0)return;n.save();const D=fe(I.lineWidth,1);if(n.fillStyle=fe(I.fillStyle,a),n.lineCap=fe(I.lineCap,"butt"),n.lineDashOffset=fe(I.lineDashOffset,0),n.lineJoin=fe(I.lineJoin,"miter"),n.lineWidth=D,n.strokeStyle=fe(I.strokeStyle,a),n.setLineDash(fe(I.lineDash,[])),o.usePointStyle){const N={radius:v*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:D},U=l.xPlus(P,y/2),H=C+m;IR(n,N,U,H,o.pointStyleWidth&&y)}else{const N=C+Math.max((p-v)/2,0),U=l.leftForLtr(P,y),H=Ua(I.borderRadius);n.beginPath(),Object.values(H).some(te=>te!==0)?ad(n,{x:U,y:N,w:y,h:v,radius:H}):n.rect(U,N,y,v),n.fill(),D!==0&&n.stroke()}n.restore()},x=function(P,C,I){il(n,I.text,P,C+b/2,c,{strikethrough:I.hidden,textAlign:l.textAlign(I.textAlign)})},$=this.isHorizontal(),S=this._computeTitleHeight();$?g={x:Ht(r,this.left+h,this.right-s[0]),y:this.top+h+S,line:0}:g={x:this.left+h,y:Ht(r,this.top+S+h,this.bottom-i[0].height),line:0},VR(this.ctx,t.textDirection);const M=b+h;this.legendItems.forEach((P,C)=>{n.strokeStyle=P.fontColor,n.fillStyle=P.fontColor;const I=n.measureText(P.text).width,D=l.textAlign(P.textAlign||(P.textAlign=o.textAlign)),N=y+m+I;let U=g.x,H=g.y;l.setWidth(this.width),$?C>0&&U+N+h>this.right&&(H=g.y+=M,g.line++,U=g.x=Ht(r,this.left+h,this.right-s[g.line])):C>0&&H+M>this.bottom&&(U=g.x=U+i[g.line].width+h,g.line++,H=g.y=Ht(r,this.top+S+h,this.bottom-i[g.line].height));const te=l.x(U);if(w(te,H,P),U=$te(D,U+y+m,$?U+N:this.right,t.rtl),x(l.x(U),H,P),$)g.x+=N+h;else if(typeof P.text!="string"){const q=c.lineHeight;g.y+=fD(P,q)+h}else g.y+=M}),UR(this.ctx,t.textDirection)}drawTitle(){const t=this.options,i=t.title,s=Ot(i.font),n=ei(i.padding);if(!i.display)return;const r=mc(t.rtl,this.left,this.width),o=this.ctx,a=i.position,l=s.size/2,c=n.top+l;let h,p=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),h=this.top+c,p=Ht(t.align,p,this.right-m);else{const y=this.columnSizes.reduce((v,b)=>Math.max(v,b.height),0);h=c+Ht(t.align,this.top,this.bottom-y-t.labels.padding-this._computeTitleHeight())}const g=Ht(a,p,p+m);o.textAlign=r.textAlign(I2(a)),o.textBaseline="middle",o.strokeStyle=i.color,o.fillStyle=i.color,o.font=s.string,il(o,i.text,g,h,s)}_computeTitleHeight(){const t=this.options.title,i=Ot(t.font),s=ei(t.padding);return t.display?i.lineHeight+s.height:0}_getLegendItemAt(t,i){let s,n,r;if(tr(t,this.left,this.right)&&tr(i,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(n=r[s],tr(t,n.left,n.left+n.width)&&tr(i,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(t){const i=this.options;if(!mre(t.type,i))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,r=hre(n,s);n&&!r&&Ve(i.onLeave,[t,n,this],this),this._hoveredItem=s,s&&!r&&Ve(i.onHover,[t,s,this],this)}else s&&Ve(i.onClick,[t,s,this],this)}}function dre(e,t,i,s,n){const r=pre(s,e,t,i),o=fre(n,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function pre(e,t,i,s){let n=e.text;return n&&typeof n!="string"&&(n=n.reduce((r,o)=>r.length>o.length?r:o)),t+i.size/2+s.measureText(n).width}function fre(e,t,i){let s=e;return typeof t.text!="string"&&(s=fD(t,i)),s}function fD(e,t){const i=e.text?e.text.length:0;return t*i}function mre(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var gre={id:"legend",_element:Ck,start(e,t,i){const s=e.legend=new Ck({ctx:e.ctx,options:i,chart:e});Kt.configure(e,s,i),Kt.addBox(e,s)},stop(e){Kt.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const s=e.legend;Kt.configure(e,s,i),s.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const s=t.datasetIndex,n=i.chart;n.isDatasetVisible(s)?(n.hide(s),t.hidden=!0):(n.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:s,textAlign:n,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(i?0:void 0),h=ei(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:n||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class H2 extends mr{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=i;const n=Ye(s.text)?s.text.length:1;this._padding=ei(s.padding);const r=n*Ot(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:i,left:s,bottom:n,right:r,options:o}=this,a=o.align;let l=0,c,h,p;return this.isHorizontal()?(h=Ht(a,s,r),p=i+t,c=r-s):(o.position==="left"?(h=s+t,p=Ht(a,n,i),l=Je*-.5):(h=r-t,p=Ht(a,i,n),l=Je*.5),c=n-i),{titleX:h,titleY:p,maxWidth:c,rotation:l}}draw(){const t=this.ctx,i=this.options;if(!i.display)return;const s=Ot(i.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);il(t,i.text,0,0,s,{color:i.color,maxWidth:l,rotation:c,textAlign:I2(i.align),textBaseline:"middle",translation:[o,a]})}}function yre(e,t){const i=new H2({ctx:e.ctx,options:t,chart:e});Kt.configure(e,i,t),Kt.addBox(e,i),e.titleBlock=i}var vre={id:"title",_element:H2,start(e,t,i){yre(e,i)},stop(e){const t=e.titleBlock;Kt.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){const s=e.titleBlock;Kt.configure(e,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qp=new WeakMap;var bre={id:"subtitle",start(e,t,i){const s=new H2({ctx:e.ctx,options:i,chart:e});Kt.configure(e,s,i),Kt.addBox(e,s),qp.set(e,s)},stop(e){Kt.removeBox(e,qp.get(e)),qp.delete(e)},beforeUpdate(e,t,i){const s=qp.get(e);Kt.configure(e,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ch={average(e){if(!e.length)return!1;let t,i,s=new Set,n=0,r=0;for(t=0,i=e.length;t<i;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),n+=l.y,++r}}return{x:[...s].reduce((a,l)=>a+l)/s.size,y:n/r}},nearest(e,t){if(!e.length)return!1;let i=t.x,s=t.y,n=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Xb(t,c);h<n&&(n=h,a=l)}}if(a){const l=a.tooltipPosition();i=l.x,s=l.y}return{x:i,y:s}}};function en(e,t){return t&&(Ye(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Gn(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function _re(e,t){const{element:i,datasetIndex:s,index:n}=t,r=e.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(n);return{chart:e,label:o,parsed:r.getParsed(n),raw:e.data.datasets[s].data[n],formattedValue:a,dataset:r.getDataset(),dataIndex:n,datasetIndex:s,element:i}}function Ik(e,t){const i=e.chart.ctx,{body:s,footer:n,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=Ot(t.bodyFont),c=Ot(t.titleFont),h=Ot(t.footerFont),p=r.length,m=n.length,g=s.length,y=ei(t.padding);let v=y.height,b=0,w=s.reduce((S,M)=>S+M.before.length+M.lines.length+M.after.length,0);if(w+=e.beforeBody.length+e.afterBody.length,p&&(v+=p*c.lineHeight+(p-1)*t.titleSpacing+t.titleMarginBottom),w){const S=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=g*S+(w-g)*l.lineHeight+(w-1)*t.bodySpacing}m&&(v+=t.footerMarginTop+m*h.lineHeight+(m-1)*t.footerSpacing);let x=0;const $=function(S){b=Math.max(b,i.measureText(S).width+x)};return i.save(),i.font=c.string,Re(e.title,$),i.font=l.string,Re(e.beforeBody.concat(e.afterBody),$),x=t.displayColors?o+2+t.boxPadding:0,Re(s,S=>{Re(S.before,$),Re(S.lines,$),Re(S.after,$)}),x=0,i.font=h.string,Re(e.footer,$),i.restore(),b+=y.width,{width:b,height:v}}function wre(e,t){const{y:i,height:s}=t;return i<s/2?"top":i>e.height-s/2?"bottom":"center"}function xre(e,t,i,s){const{x:n,width:r}=s,o=i.caretSize+i.caretPadding;if(e==="left"&&n+r+o>t.width||e==="right"&&n-r-o<0)return!0}function Sre(e,t,i,s){const{x:n,width:r}=i,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return s==="center"?c=n<=(a+l)/2?"left":"right":n<=r/2?c="left":n>=o-r/2&&(c="right"),xre(c,e,t,i)&&(c="center"),c}function Lk(e,t,i){const s=i.yAlign||t.yAlign||wre(e,i);return{xAlign:i.xAlign||t.xAlign||Sre(e,t,i,s),yAlign:s}}function Mre(e,t){let{x:i,width:s}=e;return t==="right"?i-=s:t==="center"&&(i-=s/2),i}function $re(e,t,i){let{y:s,height:n}=e;return t==="top"?s+=i:t==="bottom"?s-=n+i:s-=n/2,s}function Rk(e,t,i,s){const{caretSize:n,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=i,c=n+r,{topLeft:h,topRight:p,bottomLeft:m,bottomRight:g}=Ua(o);let y=Mre(t,a);const v=$re(t,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(h,m)+n:a==="right"&&(y+=Math.max(p,g)+n),{x:Nt(y,0,s.width-t.width),y:Nt(v,0,s.height-t.height)}}function Yp(e,t,i){const s=ei(i.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function Dk(e){return en([],Gn(e))}function Tre(e,t,i){return Do(e,{tooltip:t,tooltipItems:i,type:"tooltip"})}function Nk(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}const mD={beforeTitle:En,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,s=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return i[t.dataIndex]}return""},afterTitle:En,beforeBody:En,beforeLabel:En,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return Te(i)||(t+=i),t},labelColor(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:En,afterBody:En,beforeFooter:En,footer:En,afterFooter:En};function fi(e,t,i,s){const n=e[t].call(i,s);return typeof n>"u"?mD[t].call(i,s):n}class Fk extends mr{static positioners=ch;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const i=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&i.options.animation&&s.animations,r=new GR(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=Tre(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){const{callbacks:s}=i,n=fi(s,"beforeTitle",this,t),r=fi(s,"title",this,t),o=fi(s,"afterTitle",this,t);let a=[];return a=en(a,Gn(n)),a=en(a,Gn(r)),a=en(a,Gn(o)),a}getBeforeBody(t,i){return Dk(fi(i.callbacks,"beforeBody",this,t))}getBody(t,i){const{callbacks:s}=i,n=[];return Re(t,r=>{const o={before:[],lines:[],after:[]},a=Nk(s,r);en(o.before,Gn(fi(a,"beforeLabel",this,r))),en(o.lines,fi(a,"label",this,r)),en(o.after,Gn(fi(a,"afterLabel",this,r))),n.push(o)}),n}getAfterBody(t,i){return Dk(fi(i.callbacks,"afterBody",this,t))}getFooter(t,i){const{callbacks:s}=i,n=fi(s,"beforeFooter",this,t),r=fi(s,"footer",this,t),o=fi(s,"afterFooter",this,t);let a=[];return a=en(a,Gn(n)),a=en(a,Gn(r)),a=en(a,Gn(o)),a}_createItems(t){const i=this._active,s=this.chart.data,n=[],r=[],o=[];let a=[],l,c;for(l=0,c=i.length;l<c;++l)a.push(_re(this.chart,i[l]));return t.filter&&(a=a.filter((h,p,m)=>t.filter(h,p,m,s))),t.itemSort&&(a=a.sort((h,p)=>t.itemSort(h,p,s))),Re(a,h=>{const p=Nk(t.callbacks,h);n.push(fi(p,"labelColor",this,h)),r.push(fi(p,"labelPointStyle",this,h)),o.push(fi(p,"labelTextColor",this,h))}),this.labelColors=n,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,i){const s=this.options.setContext(this.getContext()),n=this._active;let r,o=[];if(!n.length)this.opacity!==0&&(r={opacity:0});else{const a=ch[s.position].call(this,n,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=Ik(this,s),c=Object.assign({},a,l),h=Lk(this.chart,s,c),p=Rk(s,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,s,n){const r=this.getCaretPosition(t,s,n);i.lineTo(r.x1,r.y1),i.lineTo(r.x2,r.y2),i.lineTo(r.x3,r.y3)}getCaretPosition(t,i,s){const{xAlign:n,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:p}=Ua(a),{x:m,y:g}=t,{width:y,height:v}=i;let b,w,x,$,S,M;return r==="center"?(S=g+v/2,n==="left"?(b=m,w=b-o,$=S+o,M=S-o):(b=m+y,w=b+o,$=S-o,M=S+o),x=b):(n==="left"?w=m+Math.max(l,h)+o:n==="right"?w=m+y-Math.max(c,p)-o:w=this.caretX,r==="top"?($=g,S=$-o,b=w-o,x=w+o):($=g+v,S=$+o,b=w+o,x=w-o),M=$),{x1:b,x2:w,x3:x,y1:$,y2:S,y3:M}}drawTitle(t,i,s){const n=this.title,r=n.length;let o,a,l;if(r){const c=mc(s.rtl,this.x,this.width);for(t.x=Yp(this,s.titleAlign,s),i.textAlign=c.textAlign(s.titleAlign),i.textBaseline="middle",o=Ot(s.titleFont),a=s.titleSpacing,i.fillStyle=s.titleColor,i.font=o.string,l=0;l<r;++l)i.fillText(n[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,i,s,n,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=r,h=Ot(r.bodyFont),p=Yp(this,"left",r),m=n.x(p),g=l<h.lineHeight?(h.lineHeight-l)/2:0,y=i.y+g;if(r.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=n.leftForLtr(m,c)+c/2,w=y+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Qb(t,v,b,w),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Qb(t,v,b,w)}else{t.lineWidth=be(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const v=n.leftForLtr(m,c),b=n.leftForLtr(n.xPlus(m,1),c-2),w=Ua(o.borderRadius);Object.values(w).some(x=>x!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,ad(t,{x:v,y,w:c,h:l,radius:w}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),ad(t,{x:b,y:y+1,w:c-2,h:l-2,radius:w}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(v,y,c,l),t.strokeRect(v,y,c,l),t.fillStyle=o.backgroundColor,t.fillRect(b,y+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,i,s){const{body:n}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=s,p=Ot(s.bodyFont);let m=p.lineHeight,g=0;const y=mc(s.rtl,this.x,this.width),v=function(I){i.fillText(I,y.x(t.x+g),t.y+m/2),t.y+=m+r},b=y.textAlign(o);let w,x,$,S,M,P,C;for(i.textAlign=o,i.textBaseline="middle",i.font=p.string,t.x=Yp(this,b,s),i.fillStyle=s.bodyColor,Re(this.beforeBody,v),g=a&&b!=="right"?o==="center"?c/2+h:c+2+h:0,S=0,P=n.length;S<P;++S){for(w=n[S],x=this.labelTextColors[S],i.fillStyle=x,Re(w.before,v),$=w.lines,a&&$.length&&(this._drawColorBox(i,t,S,y,s),m=Math.max(p.lineHeight,l)),M=0,C=$.length;M<C;++M)v($[M]),m=p.lineHeight;Re(w.after,v)}g=0,m=p.lineHeight,Re(this.afterBody,v),t.y-=r}drawFooter(t,i,s){const n=this.footer,r=n.length;let o,a;if(r){const l=mc(s.rtl,this.x,this.width);for(t.x=Yp(this,s.footerAlign,s),t.y+=s.footerMarginTop,i.textAlign=l.textAlign(s.footerAlign),i.textBaseline="middle",o=Ot(s.footerFont),i.fillStyle=s.footerColor,i.font=o.string,a=0;a<r;++a)i.fillText(n[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,i,s,n){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:h}=s,{topLeft:p,topRight:m,bottomLeft:g,bottomRight:y}=Ua(n.cornerRadius);i.fillStyle=n.backgroundColor,i.strokeStyle=n.borderColor,i.lineWidth=n.borderWidth,i.beginPath(),i.moveTo(a+p,l),o==="top"&&this.drawCaret(t,i,s,n),i.lineTo(a+c-m,l),i.quadraticCurveTo(a+c,l,a+c,l+m),o==="center"&&r==="right"&&this.drawCaret(t,i,s,n),i.lineTo(a+c,l+h-y),i.quadraticCurveTo(a+c,l+h,a+c-y,l+h),o==="bottom"&&this.drawCaret(t,i,s,n),i.lineTo(a+g,l+h),i.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&r==="left"&&this.drawCaret(t,i,s,n),i.lineTo(a,l+p),i.quadraticCurveTo(a,l,a+p,l),i.closePath(),i.fill(),n.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){const i=this.chart,s=this.$animations,n=s&&s.x,r=s&&s.y;if(n||r){const o=ch[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Ik(this,t),l=Object.assign({},o,this._size),c=Lk(i,t,l),h=Rk(t,l,c,i);(n._to!==h.x||r._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const i=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(i);const n={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=ei(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,n,i),VR(t,i.textDirection),r.y+=o.top,this.drawTitle(r,t,i),this.drawBody(r,t,i),this.drawFooter(r,t,i),UR(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){const s=this._active,n=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!eg(s,n),o=this._positionChanged(n,i);(r||o)&&(this._active=n,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,s=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,r=this._active||[],o=this._getActiveElements(t,r,i,s),a=this._positionChanged(o,t),l=i||!eg(o,r)||a;return l&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,s,n){const r=this.options;if(t.type==="mouseout")return[];if(!n)return i.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,i){const{caretX:s,caretY:n,options:r}=this,o=ch[r.position].call(this,t,i);return o!==!1&&(s!==o.x||n!==o.y)}}var kre={id:"tooltip",_element:Fk,positioners:ch,afterInit(e,t,i){i&&(e.tooltip=new Fk({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const i={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:mD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Pre=Object.freeze({__proto__:null,Colors:zne,Decimation:Bne,Filler:ure,Legend:gre,SubTitle:bre,Title:vre,Tooltip:kre});const Ore=(e,t,i,s)=>(typeof t=="string"?(i=e.push(t)-1,s.unshift({index:i,label:t})):isNaN(t)&&(i=null),i);function Ere(e,t,i,s){const n=e.indexOf(t);if(n===-1)return Ore(e,t,i,s);const r=e.lastIndexOf(t);return n!==r?i:n}const Are=(e,t)=>e===null?null:Nt(Math.round(e),0,t);function jk(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Cre extends hl{static id="category";static defaults={ticks:{callback:jk}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const i=this._addedLabels;if(i.length){const s=this.getLabels();for(const{index:n,label:r}of i)s[n]===r&&s.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(Te(t))return null;const s=this.getLabels();return i=isFinite(i)&&s[i]===t?i:Ere(s,t,fe(i,t),this._addedLabels),Are(i,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),i||(n=this.getLabels().length-1)),this.min=s,this.max=n}buildTicks(){const t=this.min,i=this.max,s=this.options.offset,n=[];let r=this.getLabels();r=t===0&&i===r.length-1?r:r.slice(t,i+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=i;o++)n.push({value:o});return n}getLabelForValue(t){return jk.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Ire(e,t){const i=[],{bounds:n,step:r,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:p,includeBounds:m}=e,g=r||1,y=h-1,{min:v,max:b}=t,w=!Te(o),x=!Te(a),$=!Te(c),S=(b-v)/(p+1);let M=CT((b-v)/y/g)*g,P,C,I,D;if(M<1e-14&&!w&&!x)return[{value:v},{value:b}];D=Math.ceil(b/M)-Math.floor(v/M),D>y&&(M=CT(D*M/y/g)*g),Te(l)||(P=Math.pow(10,l),M=Math.ceil(M*P)/P),n==="ticks"?(C=Math.floor(v/M)*M,I=Math.ceil(b/M)*M):(C=v,I=b),w&&x&&r&&vte((a-o)/r,M/1e3)?(D=Math.round(Math.min((a-o)/M,h)),M=(a-o)/D,C=o,I=a):$?(C=w?o:C,I=x?a:I,D=c-1,M=(I-C)/D):(D=(I-C)/M,Oh(D,Math.round(D),M/1e3)?D=Math.round(D):D=Math.ceil(D));const N=Math.max(IT(M),IT(C));P=Math.pow(10,Te(l)?N:l),C=Math.round(C*P)/P,I=Math.round(I*P)/P;let U=0;for(w&&(m&&C!==o?(i.push({value:o}),C<o&&U++,Oh(Math.round((C+U*M)*P)/P,o,zk(o,S,e))&&U++):C<o&&U++);U<D;++U){const H=Math.round((C+U*M)*P)/P;if(x&&H>a)break;i.push({value:H})}return x&&m&&I!==a?i.length&&Oh(i[i.length-1].value,a,zk(a,S,e))?i[i.length-1].value=a:i.push({value:a}):(!x||I===a)&&i.push({value:I}),i}function zk(e,t,{horizontal:i,minRotation:s}){const n=Es(s),r=(i?Math.sin(n):Math.cos(n))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class ag extends hl{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,i){return Te(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:i,maxDefined:s}=this.getUserBounds();let{min:n,max:r}=this;const o=l=>n=i?n:l,a=l=>r=s?r:l;if(t){const l=un(n),c=un(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(n===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(n-l)}this.min=n,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:i,stepSize:s}=t,n;return s?(n=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),i=i||11),i&&(n=Math.min(i,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,i=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const n={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},r=this._range||this,o=Ire(n,r);return t.bounds==="ticks"&&MR(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let i=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const n=(s-i)/Math.max(t.length-1,1)/2;i-=n,s+=n}this._startValue=i,this._endValue=s,this._valueRange=s-i}getLabelForValue(t){return Fd(t,this.chart.options.locale,this.options.ticks.format)}}class Lre extends ag{static id="linear";static defaults={ticks:{callback:_y.formatters.numeric}};determineDataLimits(){const{min:t,max:i}=this.getMinMax(!0);this.min=ht(t)?t:0,this.max=ht(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),i=t?this.width:this.height,s=Es(this.options.ticks.minRotation),n=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,r.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const cd=e=>Math.floor(ho(e)),Jo=(e,t)=>Math.pow(10,cd(e)+t);function Vk(e){return e/Math.pow(10,cd(e))===1}function Uk(e,t,i){const s=Math.pow(10,i),n=Math.floor(e/s);return Math.ceil(t/s)-n}function Rre(e,t){const i=t-e;let s=cd(i);for(;Uk(e,t,s)>10;)s++;for(;Uk(e,t,s)<10;)s--;return Math.min(s,cd(e))}function Dre(e,{min:t,max:i}){t=Ai(e.min,t);const s=[],n=cd(t);let r=Rre(t,i),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=n>r?Math.pow(10,n):0,c=Math.round((t-l)*o)/o,h=Math.floor((t-l)/a/10)*a*10;let p=Math.floor((c-h)/Math.pow(10,r)),m=Ai(e.min,Math.round((l+h+p*Math.pow(10,r))*o)/o);for(;m<i;)s.push({value:m,major:Vk(m),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(r++,p=2,o=r>=0?1:o),m=Math.round((l+h+p*Math.pow(10,r))*o)/o;const g=Ai(e.max,m);return s.push({value:g,major:Vk(g),significand:p}),s}class Nre extends hl{static id="logarithmic";static defaults={ticks:{callback:_y.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,i){const s=ag.prototype.parse.apply(this,[t,i]);if(s===0){this._zero=!0;return}return ht(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:i}=this.getMinMax(!0);this.min=ht(t)?Math.max(0,t):null,this.max=ht(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ht(this._userMin)&&(this.min=t===Jo(this.min,0)?Jo(this.min,-1):Jo(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let s=this.min,n=this.max;const r=a=>s=t?s:a,o=a=>n=i?n:a;s===n&&(s<=0?(r(1),o(10)):(r(Jo(s,-1)),o(Jo(n,1)))),s<=0&&r(Jo(n,-1)),n<=0&&o(Jo(s,1)),this.min=s,this.max=n}buildTicks(){const t=this.options,i={min:this._userMin,max:this._userMax},s=Dre(i,this);return t.bounds==="ticks"&&MR(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":Fd(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=ho(t),this._valueRange=ho(this.max)-ho(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(ho(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const i=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+i*this._valueRange)}}function r_(e){const t=e.ticks;if(t.display&&e.display){const i=ei(t.backdropPadding);return fe(t.font&&t.font.size,dt.font.size)+i.height}return 0}function Fre(e,t,i){return i=Ye(i)?i:[i],{w:Rte(e,t.string,i),h:i.length*t.lineHeight}}function Wk(e,t,i,s,n){return e===s||e===n?{start:t-i/2,end:t+i/2}:e<s||e>n?{start:t-i,end:t}:{start:t,end:t+i}}function jre(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),s=[],n=[],r=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?Je/r:0;for(let l=0;l<r;l++){const c=o.setContext(e.getPointLabelContext(l));n[l]=c.padding;const h=e.getPointPosition(l,e.drawingArea+n[l],a),p=Ot(c.font),m=Fre(e.ctx,p,e._pointLabels[l]);s[l]=m;const g=Ii(e.getIndexAngle(l)+a),y=Math.round(A2(g)),v=Wk(y,h.x,m.w,0,180),b=Wk(y,h.y,m.h,90,270);zre(i,t,g,v,b)}e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=Wre(e,s,n)}function zre(e,t,i,s,n){const r=Math.abs(Math.sin(i)),o=Math.abs(Math.cos(i));let a=0,l=0;s.start<t.l?(a=(t.l-s.start)/r,e.l=Math.min(e.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/r,e.r=Math.max(e.r,t.r+a)),n.start<t.t?(l=(t.t-n.start)/o,e.t=Math.min(e.t,t.t-l)):n.end>t.b&&(l=(n.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function Vre(e,t,i){const s=e.drawingArea,{extra:n,additionalAngle:r,padding:o,size:a}=i,l=e.getPointPosition(t,s+n+o,r),c=Math.round(A2(Ii(l.angle+yt))),h=Gre(l.y,a.h,c),p=Bre(c),m=Hre(l.x,a.w,p);return{visible:!0,x:l.x,y:h,textAlign:p,left:m,top:h,right:m+a.w,bottom:h+a.h}}function Ure(e,t){if(!t)return!0;const{left:i,top:s,right:n,bottom:r}=e;return!(sr({x:i,y:s},t)||sr({x:i,y:r},t)||sr({x:n,y:s},t)||sr({x:n,y:r},t))}function Wre(e,t,i){const s=[],n=e._pointLabels.length,r=e.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:r_(r)/2,additionalAngle:o?Je/n:0};let c;for(let h=0;h<n;h++){l.padding=i[h],l.size=t[h];const p=Vre(e,h,l);s.push(p),a==="auto"&&(p.visible=Ure(p,c),p.visible&&(c=p))}return s}function Bre(e){return e===0||e===180?"center":e<180?"left":"right"}function Hre(e,t,i){return i==="right"?e-=t:i==="center"&&(e-=t/2),e}function Gre(e,t,i){return i===90||i===270?e-=t/2:(i>270||i<90)&&(e-=t),e}function qre(e,t,i){const{left:s,top:n,right:r,bottom:o}=i,{backdropColor:a}=t;if(!Te(a)){const l=Ua(t.borderRadius),c=ei(t.backdropPadding);e.fillStyle=a;const h=s-c.left,p=n-c.top,m=r-s+c.width,g=o-n+c.height;Object.values(l).some(y=>y!==0)?(e.beginPath(),ad(e,{x:h,y:p,w:m,h:g,radius:l}),e.fill()):e.fillRect(h,p,m,g)}}function Yre(e,t){const{ctx:i,options:{pointLabels:s}}=e;for(let n=t-1;n>=0;n--){const r=e._pointLabelItems[n];if(!r.visible)continue;const o=s.setContext(e.getPointLabelContext(n));qre(i,o,r);const a=Ot(o.font),{x:l,y:c,textAlign:h}=r;il(i,e._pointLabels[n],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function gD(e,t,i,s){const{ctx:n}=e;if(i)n.arc(e.xCenter,e.yCenter,t,0,Ze);else{let r=e.getPointPosition(0,t);n.moveTo(r.x,r.y);for(let o=1;o<s;o++)r=e.getPointPosition(o,t),n.lineTo(r.x,r.y)}}function Zre(e,t,i,s,n){const r=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!s||!a||!l||i<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(n.dash),r.lineDashOffset=n.dashOffset,r.beginPath(),gD(e,i,o,s),r.closePath(),r.stroke(),r.restore())}function Jre(e,t,i){return Do(e,{label:i,index:t,type:"pointLabel"})}class Xre extends ag{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:_y.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ei(r_(this.options)/2),i=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+i/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(i,s)/2)}determineDataLimits(){const{min:t,max:i}=this.getMinMax(!1);this.min=ht(t)&&!isNaN(t)?t:0,this.max=ht(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/r_(this.options))}generateTickLabels(t){ag.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((i,s)=>{const n=Ve(this.options.pointLabels.callback,[i,s],this);return n||n===0?n:""}).filter((i,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?jre(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,i,s,n){this.xCenter+=Math.floor((t-i)/2),this.yCenter+=Math.floor((s-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,i,s,n))}getIndexAngle(t){const i=Ze/(this._pointLabels.length||1),s=this.options.startAngle||0;return Ii(t*i+Es(s))}getDistanceFromCenterForValue(t){if(Te(t))return NaN;const i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*i:(t-this.min)*i}getValueForDistanceFromCenter(t){if(Te(t))return NaN;const i=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(t){const i=this._pointLabels||[];if(t>=0&&t<i.length){const s=i[t];return Jre(this.getContext(),t,s)}}getPointPosition(t,i,s=0){const n=this.getIndexAngle(t)-yt+s;return{x:Math.cos(n)*i+this.xCenter,y:Math.sin(n)*i+this.yCenter,angle:n}}getPointPositionForValue(t,i){return this.getPointPosition(t,this.getDistanceFromCenterForValue(i))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:i,top:s,right:n,bottom:r}=this._pointLabelItems[t];return{left:i,top:s,right:n,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:i}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),gD(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,i=this.options,{angleLines:s,grid:n,border:r}=i,o=this._pointLabels.length;let a,l,c;if(i.pointLabels.display&&Yre(this,o),n.display&&this.ticks.forEach((h,p)=>{if(p!==0||p===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const m=this.getContext(p),g=n.setContext(m),y=r.setContext(m);Zre(this,g,l,o,y)}}),s.display){for(t.save(),a=o-1;a>=0;a--){const h=s.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:m}=h;!m||!p||(t.lineWidth=m,t.strokeStyle=p,t.setLineDash(h.borderDash),t.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(i.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,i=this.options,s=i.ticks;if(!s.display)return;const n=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!i.reverse)return;const c=s.setContext(this.getContext(l)),h=Ot(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=h.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const p=ei(c.backdropPadding);t.fillRect(-o/2-p.left,-r-h.size/2-p.top,o+p.width,h.size+p.height)}il(t,a.label,0,-r,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}const $y={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},wi=Object.keys($y);function Bk(e,t){return e-t}function Hk(e,t){if(Te(t))return null;const i=e._adapter,{parser:s,round:n,isoWeekday:r}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),ht(o)||(o=typeof s=="string"?i.parse(o,s):i.parse(o)),o===null?null:(n&&(o=n==="week"&&(Ac(r)||r===!0)?i.startOf(o,"isoWeek",r):i.startOf(o,n)),+o)}function Gk(e,t,i,s){const n=wi.length;for(let r=wi.indexOf(e);r<n-1;++r){const o=$y[wi[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((i-t)/(a*o.size))<=s)return wi[r]}return wi[n-1]}function Kre(e,t,i,s,n){for(let r=wi.length-1;r>=wi.indexOf(i);r--){const o=wi[r];if($y[o].common&&e._adapter.diff(n,s,o)>=t-1)return o}return wi[i?wi.indexOf(i):0]}function Qre(e){for(let t=wi.indexOf(e)+1,i=wi.length;t<i;++t)if($y[wi[t]].common)return wi[t]}function qk(e,t,i){if(!i)e[t]=!0;else if(i.length){const{lo:s,hi:n}=C2(i,t),r=i[s]>=t?i[s]:i[n];e[r]=!0}}function eoe(e,t,i,s){const n=e._adapter,r=+n.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+n.add(a,1,s))l=i[a],l>=0&&(t[l].major=!0);return t}function Yk(e,t,i){const s=[],n={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],n[a]=o,s.push({value:a,major:!1});return r===0||!i?s:eoe(e,s,n,i)}class o_ extends hl{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){const s=t.time||(t.time={}),n=this._adapter=new JR._date(t.adapters.date);n.init(i),Ph(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:Hk(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,i=this._adapter,s=t.time.unit||"day";let{min:n,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(n=Math.min(n,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),n=ht(n)&&!isNaN(n)?n:+i.startOf(Date.now(),s),r=ht(r)&&!isNaN(r)?r:+i.endOf(Date.now(),s)+1,this.min=Math.min(n,r-1),this.max=Math.max(n+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],s=t[t.length-1]),{min:i,max:s}}buildTicks(){const t=this.options,i=t.time,s=t.ticks,n=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const r=this.min,o=this.max,a=xte(n,r,o);return this._unit=i.unit||(s.autoSkip?Gk(i.minUnit,this.min,this.max,this._getLabelCapacity(r)):Kre(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Qre(this._unit),this.initOffsets(n),t.reverse&&a.reverse(),Yk(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,s=0,n,r;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?i=1-n:i=(this.getDecimalForValue(t[1])-n)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;i=Nt(i,0,o),s=Nt(s,0,o),this._offsets={start:i,end:s,factor:1/(i+1+s)}}_generate(){const t=this._adapter,i=this.min,s=this.max,n=this.options,r=n.time,o=r.unit||Gk(r.minUnit,i,s,this._getLabelCapacity(i)),a=fe(n.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Ac(l)||l===!0,h={};let p=i,m,g;if(c&&(p=+t.startOf(p,"isoWeek",l)),p=+t.startOf(p,c?"day":o),t.diff(s,i,o)>1e5*a)throw new Error(i+" and "+s+" are too far apart with stepSize of "+a+" "+o);const y=n.ticks.source==="data"&&this.getDataTimestamps();for(m=p,g=0;m<s;m=+t.add(m,a,o),g++)qk(h,m,y);return(m===s||n.bounds==="ticks"||g===1)&&qk(h,m,y),Object.keys(h).sort(Bk).map(v=>+v)}getLabelForValue(t){const i=this._adapter,s=this.options.time;return s.tooltipFormat?i.format(t,s.tooltipFormat):i.format(t,s.displayFormats.datetime)}format(t,i){const n=this.options.time.displayFormats,r=this._unit,o=i||n[r];return this._adapter.format(t,o)}_tickFormatFunction(t,i,s,n){const r=this.options,o=r.ticks.callback;if(o)return Ve(o,[t,i,s],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],p=c&&a[c],m=s[i],g=c&&p&&m&&m.major;return this._adapter.format(t,n||(g?p:h))}generateTickLabels(t){let i,s,n;for(i=0,s=t.length;i<s;++i)n=t[i],n.label=this._tickFormatFunction(n.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const i=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+s)*i.factor)}getValueForPixel(t){const i=this._offsets,s=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const i=this.options.ticks,s=this.ctx.measureText(t).width,n=Es(this.isHorizontal()?i.maxRotation:i.minRotation),r=Math.cos(n),o=Math.sin(n),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const i=this.options.time,s=i.displayFormats,n=s[i.unit]||s.millisecond,r=this._tickFormatFunction(t,0,Yk(this,[t],this._majorUnit),n),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],i,s;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(i=0,s=n.length;i<s;++i)t=t.concat(n[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let i,s;if(t.length)return t;const n=this.getLabels();for(i=0,s=n.length;i<s;++i)t.push(Hk(this,n[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return kR(t.sort(Bk))}}function Zp(e,t,i){let s=0,n=e.length-1,r,o,a,l;i?(t>=e[s].pos&&t<=e[n].pos&&({lo:s,hi:n}=ir(e,"pos",t)),{pos:r,time:a}=e[s],{pos:o,time:l}=e[n]):(t>=e[s].time&&t<=e[n].time&&({lo:s,hi:n}=ir(e,"time",t)),{time:r,pos:a}=e[s],{time:o,pos:l}=e[n]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class toe extends o_{static id="timeseries";static defaults=o_.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(t);this._minPos=Zp(i,this.min),this._tableRange=Zp(i,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:i,max:s}=this,n=[],r=[];let o,a,l,c,h;for(o=0,a=t.length;o<a;++o)c=t[o],c>=i&&c<=s&&n.push(c);if(n.length<2)return[{time:i,pos:0},{time:s,pos:1}];for(o=0,a=n.length;o<a;++o)h=n[o+1],l=n[o-1],c=n[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,i=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(i)||s.length===1)&&s.push(i),s.sort((n,r)=>n-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const i=this.getDataTimestamps(),s=this.getLabelTimestamps();return i.length&&s.length?t=this.normalize(i.concat(s)):t=i.length?i:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Zp(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const i=this._offsets,s=this.getDecimalForPixel(t)/i.factor-i.end;return Zp(this._table,s*this._tableRange+this._minPos,!0)}}var ioe=Object.freeze({__proto__:null,CategoryScale:Cre,LinearScale:Lre,LogarithmicScale:Nre,RadialLinearScale:Xre,TimeScale:o_,TimeSeriesScale:toe});const soe=[ise,Lne,Pre,ioe];function ie(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ge(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Ty(e,t){const i=ie(e);return isNaN(t)?Ge(e,NaN):(t&&i.setDate(i.getDate()+t),i)}function G2(e,t){const i=ie(e);if(isNaN(t))return Ge(e,NaN);if(!t)return i;const s=i.getDate(),n=Ge(e,i.getTime());n.setMonth(i.getMonth()+t+1,0);const r=n.getDate();return s>=r?n:(i.setFullYear(n.getFullYear(),n.getMonth(),s),i)}function ky(e,t){const i=+ie(e);return Ge(e,i+t)}const yD=6048e5,noe=864e5,zd=6e4,Vd=36e5,roe=1e3;function ooe(e,t){return ky(e,t*Vd)}let aoe={};function dl(){return aoe}function yn(e,t){const i=dl(),s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,n=ie(e),r=n.getDay(),o=(r<s?7:0)+r-s;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function Lc(e){return yn(e,{weekStartsOn:1})}function vD(e){const t=ie(e),i=t.getFullYear(),s=Ge(e,0);s.setFullYear(i+1,0,4),s.setHours(0,0,0,0);const n=Lc(s),r=Ge(e,0);r.setFullYear(i,0,4),r.setHours(0,0,0,0);const o=Lc(r);return t.getTime()>=n.getTime()?i+1:t.getTime()>=o.getTime()?i:i-1}function a_(e){const t=ie(e);return t.setHours(0,0,0,0),t}function lg(e){const t=ie(e),i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return i.setUTCFullYear(t.getFullYear()),+e-+i}function bD(e,t){const i=a_(e),s=a_(t),n=+i-lg(i),r=+s-lg(s);return Math.round((n-r)/noe)}function loe(e){const t=vD(e),i=Ge(e,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),Lc(i)}function coe(e,t){return ky(e,t*zd)}function uoe(e,t){const i=t*3;return G2(e,i)}function hoe(e,t){return ky(e,t*1e3)}function doe(e,t){const i=t*7;return Ty(e,i)}function poe(e,t){return G2(e,t*12)}function Ch(e,t){const i=ie(e),s=ie(t),n=i.getTime()-s.getTime();return n<0?-1:n>0?1:n}function foe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function _D(e){if(!foe(e)&&typeof e!="number")return!1;const t=ie(e);return!isNaN(Number(t))}function moe(e,t){const i=ie(e),s=ie(t),n=i.getFullYear()-s.getFullYear(),r=i.getMonth()-s.getMonth();return n*12+r}function goe(e,t){const i=ie(e),s=ie(t);return i.getFullYear()-s.getFullYear()}function wD(e,t){const i=ie(e),s=ie(t),n=Zk(i,s),r=Math.abs(bD(i,s));i.setDate(i.getDate()-n*r);const o=Number(Zk(i,s)===-n),a=n*(r-o);return a===0?0:a}function Zk(e,t){const i=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return i<0?-1:i>0?1:i}function Ud(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function Py(e,t){return+ie(e)-+ie(t)}function yoe(e,t,i){const s=Py(e,t)/Vd;return Ud(i?.roundingMethod)(s)}function voe(e,t,i){const s=Py(e,t)/zd;return Ud(i?.roundingMethod)(s)}function xD(e){const t=ie(e);return t.setHours(23,59,59,999),t}function SD(e){const t=ie(e),i=t.getMonth();return t.setFullYear(t.getFullYear(),i+1,0),t.setHours(23,59,59,999),t}function boe(e){const t=ie(e);return+xD(t)==+SD(t)}function MD(e,t){const i=ie(e),s=ie(t),n=Ch(i,s),r=Math.abs(moe(i,s));let o;if(r<1)o=0;else{i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-n*r);let a=Ch(i,s)===-n;boe(ie(e))&&r===1&&Ch(e,s)===1&&(a=!1),o=n*(r-Number(a))}return o===0?0:o}function _oe(e,t,i){const s=MD(e,t)/3;return Ud(i?.roundingMethod)(s)}function woe(e,t,i){const s=Py(e,t)/1e3;return Ud(i?.roundingMethod)(s)}function xoe(e,t,i){const s=wD(e,t)/7;return Ud(i?.roundingMethod)(s)}function Soe(e,t){const i=ie(e),s=ie(t),n=Ch(i,s),r=Math.abs(goe(i,s));i.setFullYear(1584),s.setFullYear(1584);const o=Ch(i,s)===-n,a=n*(r-+o);return a===0?0:a}function Moe(e){const t=ie(e);return t.setSeconds(0,0),t}function $oe(e){const t=ie(e),i=t.getMonth(),s=i-i%3;return t.setMonth(s,1),t.setHours(0,0,0,0),t}function Toe(e){const t=ie(e);return t.setDate(1),t.setHours(0,0,0,0),t}function koe(e){const t=ie(e),i=t.getFullYear();return t.setFullYear(i+1,0,0),t.setHours(23,59,59,999),t}function $D(e){const t=ie(e),i=Ge(e,0);return i.setFullYear(t.getFullYear(),0,1),i.setHours(0,0,0,0),i}function Poe(e){const t=ie(e);return t.setMinutes(59,59,999),t}function Ooe(e,t){const i=dl(),s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,n=ie(e),r=n.getDay(),o=(r<s?-7:0)+6-(r-s);return n.setDate(n.getDate()+o),n.setHours(23,59,59,999),n}function Eoe(e){const t=ie(e);return t.setSeconds(59,999),t}function Aoe(e){const t=ie(e),i=t.getMonth(),s=i-i%3+3;return t.setMonth(s,0),t.setHours(23,59,59,999),t}function Coe(e){const t=ie(e);return t.setMilliseconds(999),t}const Ioe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Loe=(e,t,i)=>{let s;const n=Ioe[e];return typeof n=="string"?s=n:t===1?s=n.one:s=n.other.replace("{{count}}",t.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"in "+s:s+" ago":s};function Z0(e){return(t={})=>{const i=t.width?String(t.width):e.defaultWidth;return e.formats[i]||e.formats[e.defaultWidth]}}const Roe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Doe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Noe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Foe={date:Z0({formats:Roe,defaultWidth:"full"}),time:Z0({formats:Doe,defaultWidth:"full"}),dateTime:Z0({formats:Noe,defaultWidth:"full"})},joe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zoe=(e,t,i,s)=>joe[e];function gu(e){return(t,i)=>{const s=i?.context?String(i.context):"standalone";let n;if(s==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,a=i?.width?String(i.width):o;n=e.formattingValues[a]||e.formattingValues[o]}else{const o=e.defaultWidth,a=i?.width?String(i.width):e.defaultWidth;n=e.values[a]||e.values[o]}const r=e.argumentCallback?e.argumentCallback(t):t;return n[r]}}const Voe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Uoe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Woe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Boe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Hoe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Goe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},qoe=(e,t)=>{const i=Number(e),s=i%100;if(s>20||s<10)switch(s%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},Yoe={ordinalNumber:qoe,era:gu({values:Voe,defaultWidth:"wide"}),quarter:gu({values:Uoe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:gu({values:Woe,defaultWidth:"wide"}),day:gu({values:Boe,defaultWidth:"wide"}),dayPeriod:gu({values:Hoe,defaultWidth:"wide",formattingValues:Goe,defaultFormattingWidth:"wide"})};function yu(e){return(t,i={})=>{const s=i.width,n=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],r=t.match(n);if(!r)return null;const o=r[0],a=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?Joe(a,p=>p.test(o)):Zoe(a,p=>p.test(o));let c;c=e.valueCallback?e.valueCallback(l):l,c=i.valueCallback?i.valueCallback(c):c;const h=t.slice(o.length);return{value:c,rest:h}}}function Zoe(e,t){for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return i}function Joe(e,t){for(let i=0;i<e.length;i++)if(t(e[i]))return i}function Xoe(e){return(t,i={})=>{const s=t.match(e.matchPattern);if(!s)return null;const n=s[0],r=t.match(e.parsePattern);if(!r)return null;let o=e.valueCallback?e.valueCallback(r[0]):r[0];o=i.valueCallback?i.valueCallback(o):o;const a=t.slice(n.length);return{value:o,rest:a}}}const Koe=/^(\d+)(th|st|nd|rd)?/i,Qoe=/\d+/i,eae={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},tae={any:[/^b/i,/^(a|c)/i]},iae={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},sae={any:[/1/i,/2/i,/3/i,/4/i]},nae={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},rae={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oae={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},aae={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},lae={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cae={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},uae={ordinalNumber:Xoe({matchPattern:Koe,parsePattern:Qoe,valueCallback:e=>parseInt(e,10)}),era:yu({matchPatterns:eae,defaultMatchWidth:"wide",parsePatterns:tae,defaultParseWidth:"any"}),quarter:yu({matchPatterns:iae,defaultMatchWidth:"wide",parsePatterns:sae,defaultParseWidth:"any",valueCallback:e=>e+1}),month:yu({matchPatterns:nae,defaultMatchWidth:"wide",parsePatterns:rae,defaultParseWidth:"any"}),day:yu({matchPatterns:oae,defaultMatchWidth:"wide",parsePatterns:aae,defaultParseWidth:"any"}),dayPeriod:yu({matchPatterns:lae,defaultMatchWidth:"any",parsePatterns:cae,defaultParseWidth:"any"})},TD={code:"en-US",formatDistance:Loe,formatLong:Foe,formatRelative:zoe,localize:Yoe,match:uae,options:{weekStartsOn:0,firstWeekContainsDate:1}};function hae(e){const t=ie(e);return bD(t,$D(t))+1}function kD(e){const t=ie(e),i=+Lc(t)-+loe(t);return Math.round(i/yD)+1}function q2(e,t){const i=ie(e),s=i.getFullYear(),n=dl(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=Ge(e,0);o.setFullYear(s+1,0,r),o.setHours(0,0,0,0);const a=yn(o,t),l=Ge(e,0);l.setFullYear(s,0,r),l.setHours(0,0,0,0);const c=yn(l,t);return i.getTime()>=a.getTime()?s+1:i.getTime()>=c.getTime()?s:s-1}function dae(e,t){const i=dl(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,n=q2(e,t),r=Ge(e,0);return r.setFullYear(n,0,s),r.setHours(0,0,0,0),yn(r,t)}function PD(e,t){const i=ie(e),s=+yn(i,t)-+dae(i,t);return Math.round(s/yD)+1}function Le(e,t){const i=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return i+s}const Or={y(e,t){const i=e.getFullYear(),s=i>0?i:1-i;return Le(t==="yy"?s%100:s,t.length)},M(e,t){const i=e.getMonth();return t==="M"?String(i+1):Le(i+1,2)},d(e,t){return Le(e.getDate(),t.length)},a(e,t){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h(e,t){return Le(e.getHours()%12||12,t.length)},H(e,t){return Le(e.getHours(),t.length)},m(e,t){return Le(e.getMinutes(),t.length)},s(e,t){return Le(e.getSeconds(),t.length)},S(e,t){const i=t.length,s=e.getMilliseconds(),n=Math.trunc(s*Math.pow(10,i-3));return Le(n,t.length)}},$l={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Jk={G:function(e,t,i){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return i.era(s,{width:"abbreviated"});case"GGGGG":return i.era(s,{width:"narrow"});case"GGGG":default:return i.era(s,{width:"wide"})}},y:function(e,t,i){if(t==="yo"){const s=e.getFullYear(),n=s>0?s:1-s;return i.ordinalNumber(n,{unit:"year"})}return Or.y(e,t)},Y:function(e,t,i,s){const n=q2(e,s),r=n>0?n:1-n;if(t==="YY"){const o=r%100;return Le(o,2)}return t==="Yo"?i.ordinalNumber(r,{unit:"year"}):Le(r,t.length)},R:function(e,t){const i=vD(e);return Le(i,t.length)},u:function(e,t){const i=e.getFullYear();return Le(i,t.length)},Q:function(e,t,i){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return Le(s,2);case"Qo":return i.ordinalNumber(s,{unit:"quarter"});case"QQQ":return i.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,i){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return Le(s,2);case"qo":return i.ordinalNumber(s,{unit:"quarter"});case"qqq":return i.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,i){const s=e.getMonth();switch(t){case"M":case"MM":return Or.M(e,t);case"Mo":return i.ordinalNumber(s+1,{unit:"month"});case"MMM":return i.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,i){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return Le(s+1,2);case"Lo":return i.ordinalNumber(s+1,{unit:"month"});case"LLL":return i.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,i,s){const n=PD(e,s);return t==="wo"?i.ordinalNumber(n,{unit:"week"}):Le(n,t.length)},I:function(e,t,i){const s=kD(e);return t==="Io"?i.ordinalNumber(s,{unit:"week"}):Le(s,t.length)},d:function(e,t,i){return t==="do"?i.ordinalNumber(e.getDate(),{unit:"date"}):Or.d(e,t)},D:function(e,t,i){const s=hae(e);return t==="Do"?i.ordinalNumber(s,{unit:"dayOfYear"}):Le(s,t.length)},E:function(e,t,i){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return i.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(s,{width:"short",context:"formatting"});case"EEEE":default:return i.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,i,s){const n=e.getDay(),r=(n-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return Le(r,2);case"eo":return i.ordinalNumber(r,{unit:"day"});case"eee":return i.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,i,s){const n=e.getDay(),r=(n-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return Le(r,t.length);case"co":return i.ordinalNumber(r,{unit:"day"});case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,i){const s=e.getDay(),n=s===0?7:s;switch(t){case"i":return String(n);case"ii":return Le(n,t.length);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return i.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(s,{width:"short",context:"formatting"});case"iiii":default:return i.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,i){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,i){const s=e.getHours();let n;switch(s===12?n=$l.noon:s===0?n=$l.midnight:n=s/12>=1?"pm":"am",t){case"b":case"bb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,i){const s=e.getHours();let n;switch(s>=17?n=$l.evening:s>=12?n=$l.afternoon:s>=4?n=$l.morning:n=$l.night,t){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,i){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),i.ordinalNumber(s,{unit:"hour"})}return Or.h(e,t)},H:function(e,t,i){return t==="Ho"?i.ordinalNumber(e.getHours(),{unit:"hour"}):Or.H(e,t)},K:function(e,t,i){const s=e.getHours()%12;return t==="Ko"?i.ordinalNumber(s,{unit:"hour"}):Le(s,t.length)},k:function(e,t,i){let s=e.getHours();return s===0&&(s=24),t==="ko"?i.ordinalNumber(s,{unit:"hour"}):Le(s,t.length)},m:function(e,t,i){return t==="mo"?i.ordinalNumber(e.getMinutes(),{unit:"minute"}):Or.m(e,t)},s:function(e,t,i){return t==="so"?i.ordinalNumber(e.getSeconds(),{unit:"second"}):Or.s(e,t)},S:function(e,t){return Or.S(e,t)},X:function(e,t,i){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return Kk(s);case"XXXX":case"XX":return $a(s);case"XXXXX":case"XXX":default:return $a(s,":")}},x:function(e,t,i){const s=e.getTimezoneOffset();switch(t){case"x":return Kk(s);case"xxxx":case"xx":return $a(s);case"xxxxx":case"xxx":default:return $a(s,":")}},O:function(e,t,i){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Xk(s,":");case"OOOO":default:return"GMT"+$a(s,":")}},z:function(e,t,i){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Xk(s,":");case"zzzz":default:return"GMT"+$a(s,":")}},t:function(e,t,i){const s=Math.trunc(e.getTime()/1e3);return Le(s,t.length)},T:function(e,t,i){const s=e.getTime();return Le(s,t.length)}};function Xk(e,t=""){const i=e>0?"-":"+",s=Math.abs(e),n=Math.trunc(s/60),r=s%60;return r===0?i+String(n):i+String(n)+t+Le(r,2)}function Kk(e,t){return e%60===0?(e>0?"-":"+")+Le(Math.abs(e)/60,2):$a(e,t)}function $a(e,t=""){const i=e>0?"-":"+",s=Math.abs(e),n=Le(Math.trunc(s/60),2),r=Le(s%60,2);return i+n+t+r}const Qk=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},OD=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},pae=(e,t)=>{const i=e.match(/(P+)(p+)?/)||[],s=i[1],n=i[2];if(!n)return Qk(e,t);let r;switch(s){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;case"PPPP":default:r=t.dateTime({width:"full"});break}return r.replace("{{date}}",Qk(s,t)).replace("{{time}}",OD(n,t))},l_={p:OD,P:pae},fae=/^D+$/,mae=/^Y+$/,gae=["D","DD","YY","YYYY"];function ED(e){return fae.test(e)}function AD(e){return mae.test(e)}function c_(e,t,i){const s=yae(e,t,i);if(console.warn(s),gae.includes(e))throw new RangeError(s)}function yae(e,t,i){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const vae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,bae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_ae=/^'([^]*?)'?$/,wae=/''/g,xae=/[a-zA-Z]/;function Sae(e,t,i){const s=dl(),n=i?.locale??s.locale??TD,r=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,a=ie(e);if(!_D(a))throw new RangeError("Invalid time value");let l=t.match(bae).map(h=>{const p=h[0];if(p==="p"||p==="P"){const m=l_[p];return m(h,n.formatLong)}return h}).join("").match(vae).map(h=>{if(h==="''")return{isToken:!1,value:"'"};const p=h[0];if(p==="'")return{isToken:!1,value:Mae(h)};if(Jk[p])return{isToken:!0,value:h};if(p.match(xae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:h}});n.localize.preprocessor&&(l=n.localize.preprocessor(a,l));const c={firstWeekContainsDate:r,weekStartsOn:o,locale:n};return l.map(h=>{if(!h.isToken)return h.value;const p=h.value;(!i?.useAdditionalWeekYearTokens&&AD(p)||!i?.useAdditionalDayOfYearTokens&&ED(p))&&c_(p,t,String(e));const m=Jk[p[0]];return m(a,p,n.localize,c)}).join("")}function Mae(e){const t=e.match(_ae);return t?t[1].replace(wae,"'"):e}function $ae(){return Object.assign({},dl())}function Tae(e){let i=ie(e).getDay();return i===0&&(i=7),i}function kae(e,t){const i=t instanceof Date?Ge(t,0):new t(0);return i.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),i.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),i}const Pae=10;class CD{subPriority=0;validate(t,i){return!0}}class Oae extends CD{constructor(t,i,s,n,r){super(),this.value=t,this.validateValue=i,this.setValue=s,this.priority=n,r&&(this.subPriority=r)}validate(t,i){return this.validateValue(t,this.value,i)}set(t,i,s){return this.setValue(t,i,this.value,s)}}class Eae extends CD{priority=Pae;subPriority=-1;set(t,i){return i.timestampIsSet?t:Ge(t,kae(t,Date))}}class Ae{run(t,i,s,n){const r=this.parse(t,i,s,n);return r?{setter:new Oae(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}validate(t,i,s){return!0}}class Aae extends Ae{priority=140;parse(t,i,s){switch(i){case"G":case"GG":case"GGG":return s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"});case"GGGGG":return s.era(t,{width:"narrow"});case"GGGG":default:return s.era(t,{width:"wide"})||s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"})}}set(t,i,s){return i.era=s,t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]}const vt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},rn={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function bt(e,t){return e&&{value:t(e.value),rest:e.rest}}function nt(e,t){const i=t.match(e);return i?{value:parseInt(i[0],10),rest:t.slice(i[0].length)}:null}function on(e,t){const i=t.match(e);if(!i)return null;if(i[0]==="Z")return{value:0,rest:t.slice(1)};const s=i[1]==="+"?1:-1,n=i[2]?parseInt(i[2],10):0,r=i[3]?parseInt(i[3],10):0,o=i[5]?parseInt(i[5],10):0;return{value:s*(n*Vd+r*zd+o*roe),rest:t.slice(i[0].length)}}function ID(e){return nt(vt.anyDigitsSigned,e)}function ft(e,t){switch(e){case 1:return nt(vt.singleDigit,t);case 2:return nt(vt.twoDigits,t);case 3:return nt(vt.threeDigits,t);case 4:return nt(vt.fourDigits,t);default:return nt(new RegExp("^\\d{1,"+e+"}"),t)}}function cg(e,t){switch(e){case 1:return nt(vt.singleDigitSigned,t);case 2:return nt(vt.twoDigitsSigned,t);case 3:return nt(vt.threeDigitsSigned,t);case 4:return nt(vt.fourDigitsSigned,t);default:return nt(new RegExp("^-?\\d{1,"+e+"}"),t)}}function Y2(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function LD(e,t){const i=t>0,s=i?t:1-t;let n;if(s<=50)n=e||100;else{const r=s+50,o=Math.trunc(r/100)*100,a=e>=r%100;n=e+o-(a?100:0)}return i?n:1-n}function RD(e){return e%400===0||e%4===0&&e%100!==0}class Cae extends Ae{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,i,s){const n=r=>({year:r,isTwoDigitYear:i==="yy"});switch(i){case"y":return bt(ft(4,t),n);case"yo":return bt(s.ordinalNumber(t,{unit:"year"}),n);default:return bt(ft(i.length,t),n)}}validate(t,i){return i.isTwoDigitYear||i.year>0}set(t,i,s){const n=t.getFullYear();if(s.isTwoDigitYear){const o=LD(s.year,n);return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}const r=!("era"in i)||i.era===1?s.year:1-s.year;return t.setFullYear(r,0,1),t.setHours(0,0,0,0),t}}class Iae extends Ae{priority=130;parse(t,i,s){const n=r=>({year:r,isTwoDigitYear:i==="YY"});switch(i){case"Y":return bt(ft(4,t),n);case"Yo":return bt(s.ordinalNumber(t,{unit:"year"}),n);default:return bt(ft(i.length,t),n)}}validate(t,i){return i.isTwoDigitYear||i.year>0}set(t,i,s,n){const r=q2(t,n);if(s.isTwoDigitYear){const a=LD(s.year,r);return t.setFullYear(a,0,n.firstWeekContainsDate),t.setHours(0,0,0,0),yn(t,n)}const o=!("era"in i)||i.era===1?s.year:1-s.year;return t.setFullYear(o,0,n.firstWeekContainsDate),t.setHours(0,0,0,0),yn(t,n)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Lae extends Ae{priority=130;parse(t,i){return cg(i==="R"?4:i.length,t)}set(t,i,s){const n=Ge(t,0);return n.setFullYear(s,0,4),n.setHours(0,0,0,0),Lc(n)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class Rae extends Ae{priority=130;parse(t,i){return cg(i==="u"?4:i.length,t)}set(t,i,s){return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class Dae extends Ae{priority=120;parse(t,i,s){switch(i){case"Q":case"QQ":return ft(i.length,t);case"Qo":return s.ordinalNumber(t,{unit:"quarter"});case"QQQ":return s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(t,{width:"wide",context:"formatting"})||s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=1&&i<=4}set(t,i,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Nae extends Ae{priority=120;parse(t,i,s){switch(i){case"q":case"qq":return ft(i.length,t);case"qo":return s.ordinalNumber(t,{unit:"quarter"});case"qqq":return s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(t,{width:"wide",context:"standalone"})||s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,i){return i>=1&&i<=4}set(t,i,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class Fae extends Ae{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(t,i,s){const n=r=>r-1;switch(i){case"M":return bt(nt(vt.month,t),n);case"MM":return bt(ft(2,t),n);case"Mo":return bt(s.ordinalNumber(t,{unit:"month"}),n);case"MMM":return s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(t,{width:"wide",context:"formatting"})||s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=0&&i<=11}set(t,i,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}}class jae extends Ae{priority=110;parse(t,i,s){const n=r=>r-1;switch(i){case"L":return bt(nt(vt.month,t),n);case"LL":return bt(ft(2,t),n);case"Lo":return bt(s.ordinalNumber(t,{unit:"month"}),n);case"LLL":return s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(t,{width:"wide",context:"standalone"})||s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"})}}validate(t,i){return i>=0&&i<=11}set(t,i,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function zae(e,t,i){const s=ie(e),n=PD(s,i)-t;return s.setDate(s.getDate()-n*7),s}class Vae extends Ae{priority=100;parse(t,i,s){switch(i){case"w":return nt(vt.week,t);case"wo":return s.ordinalNumber(t,{unit:"week"});default:return ft(i.length,t)}}validate(t,i){return i>=1&&i<=53}set(t,i,s,n){return yn(zae(t,s,n),n)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function Uae(e,t){const i=ie(e),s=kD(i)-t;return i.setDate(i.getDate()-s*7),i}class Wae extends Ae{priority=100;parse(t,i,s){switch(i){case"I":return nt(vt.week,t);case"Io":return s.ordinalNumber(t,{unit:"week"});default:return ft(i.length,t)}}validate(t,i){return i>=1&&i<=53}set(t,i,s){return Lc(Uae(t,s))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const Bae=[31,28,31,30,31,30,31,31,30,31,30,31],Hae=[31,29,31,30,31,30,31,31,30,31,30,31];class Gae extends Ae{priority=90;subPriority=1;parse(t,i,s){switch(i){case"d":return nt(vt.date,t);case"do":return s.ordinalNumber(t,{unit:"date"});default:return ft(i.length,t)}}validate(t,i){const s=t.getFullYear(),n=RD(s),r=t.getMonth();return n?i>=1&&i<=Hae[r]:i>=1&&i<=Bae[r]}set(t,i,s){return t.setDate(s),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class qae extends Ae{priority=90;subpriority=1;parse(t,i,s){switch(i){case"D":case"DD":return nt(vt.dayOfYear,t);case"Do":return s.ordinalNumber(t,{unit:"date"});default:return ft(i.length,t)}}validate(t,i){const s=t.getFullYear();return RD(s)?i>=1&&i<=366:i>=1&&i<=365}set(t,i,s){return t.setMonth(0,s),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function Z2(e,t,i){const s=dl(),n=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,r=ie(e),o=r.getDay(),l=(t%7+7)%7,c=7-n,h=t<0||t>6?t-(o+c)%7:(l+c)%7-(o+c)%7;return Ty(r,h)}class Yae extends Ae{priority=90;parse(t,i,s){switch(i){case"E":case"EE":case"EEE":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=0&&i<=6}set(t,i,s,n){return t=Z2(t,s,n),t.setHours(0,0,0,0),t}incompatibleTokens=["D","i","e","c","t","T"]}class Zae extends Ae{priority=90;parse(t,i,s,n){const r=o=>{const a=Math.floor((o-1)/7)*7;return(o+n.weekStartsOn+6)%7+a};switch(i){case"e":case"ee":return bt(ft(i.length,t),r);case"eo":return bt(s.ordinalNumber(t,{unit:"day"}),r);case"eee":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeeee":return s.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=0&&i<=6}set(t,i,s,n){return t=Z2(t,s,n),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Jae extends Ae{priority=90;parse(t,i,s,n){const r=o=>{const a=Math.floor((o-1)/7)*7;return(o+n.weekStartsOn+6)%7+a};switch(i){case"c":case"cc":return bt(ft(i.length,t),r);case"co":return bt(s.ordinalNumber(t,{unit:"day"}),r);case"ccc":return s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});case"ccccc":return s.day(t,{width:"narrow",context:"standalone"});case"cccccc":return s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(t,{width:"wide",context:"standalone"})||s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"})}}validate(t,i){return i>=0&&i<=6}set(t,i,s,n){return t=Z2(t,s,n),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function Xae(e,t){const i=ie(e),s=Tae(i),n=t-s;return Ty(i,n)}class Kae extends Ae{priority=90;parse(t,i,s){const n=r=>r===0?7:r;switch(i){case"i":case"ii":return ft(i.length,t);case"io":return s.ordinalNumber(t,{unit:"day"});case"iii":return bt(s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),n);case"iiiii":return bt(s.day(t,{width:"narrow",context:"formatting"}),n);case"iiiiii":return bt(s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),n);case"iiii":default:return bt(s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),n)}}validate(t,i){return i>=1&&i<=7}set(t,i,s){return t=Xae(t,s),t.setHours(0,0,0,0),t}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class Qae extends Ae{priority=80;parse(t,i,s){switch(i){case"a":case"aa":case"aaa":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,i,s){return t.setHours(Y2(s),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]}class ele extends Ae{priority=80;parse(t,i,s){switch(i){case"b":case"bb":case"bbb":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,i,s){return t.setHours(Y2(s),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]}class tle extends Ae{priority=80;parse(t,i,s){switch(i){case"B":case"BB":case"BBB":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,i,s){return t.setHours(Y2(s),0,0,0),t}incompatibleTokens=["a","b","t","T"]}class ile extends Ae{priority=70;parse(t,i,s){switch(i){case"h":return nt(vt.hour12h,t);case"ho":return s.ordinalNumber(t,{unit:"hour"});default:return ft(i.length,t)}}validate(t,i){return i>=1&&i<=12}set(t,i,s){const n=t.getHours()>=12;return n&&s<12?t.setHours(s+12,0,0,0):!n&&s===12?t.setHours(0,0,0,0):t.setHours(s,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]}class sle extends Ae{priority=70;parse(t,i,s){switch(i){case"H":return nt(vt.hour23h,t);case"Ho":return s.ordinalNumber(t,{unit:"hour"});default:return ft(i.length,t)}}validate(t,i){return i>=0&&i<=23}set(t,i,s){return t.setHours(s,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]}class nle extends Ae{priority=70;parse(t,i,s){switch(i){case"K":return nt(vt.hour11h,t);case"Ko":return s.ordinalNumber(t,{unit:"hour"});default:return ft(i.length,t)}}validate(t,i){return i>=0&&i<=11}set(t,i,s){return t.getHours()>=12&&s<12?t.setHours(s+12,0,0,0):t.setHours(s,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]}class rle extends Ae{priority=70;parse(t,i,s){switch(i){case"k":return nt(vt.hour24h,t);case"ko":return s.ordinalNumber(t,{unit:"hour"});default:return ft(i.length,t)}}validate(t,i){return i>=1&&i<=24}set(t,i,s){const n=s<=24?s%24:s;return t.setHours(n,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]}class ole extends Ae{priority=60;parse(t,i,s){switch(i){case"m":return nt(vt.minute,t);case"mo":return s.ordinalNumber(t,{unit:"minute"});default:return ft(i.length,t)}}validate(t,i){return i>=0&&i<=59}set(t,i,s){return t.setMinutes(s,0,0),t}incompatibleTokens=["t","T"]}class ale extends Ae{priority=50;parse(t,i,s){switch(i){case"s":return nt(vt.second,t);case"so":return s.ordinalNumber(t,{unit:"second"});default:return ft(i.length,t)}}validate(t,i){return i>=0&&i<=59}set(t,i,s){return t.setSeconds(s,0),t}incompatibleTokens=["t","T"]}class lle extends Ae{priority=30;parse(t,i){const s=n=>Math.trunc(n*Math.pow(10,-i.length+3));return bt(ft(i.length,t),s)}set(t,i,s){return t.setMilliseconds(s),t}incompatibleTokens=["t","T"]}class cle extends Ae{priority=10;parse(t,i){switch(i){case"X":return on(rn.basicOptionalMinutes,t);case"XX":return on(rn.basic,t);case"XXXX":return on(rn.basicOptionalSeconds,t);case"XXXXX":return on(rn.extendedOptionalSeconds,t);case"XXX":default:return on(rn.extended,t)}}set(t,i,s){return i.timestampIsSet?t:Ge(t,t.getTime()-lg(t)-s)}incompatibleTokens=["t","T","x"]}class ule extends Ae{priority=10;parse(t,i){switch(i){case"x":return on(rn.basicOptionalMinutes,t);case"xx":return on(rn.basic,t);case"xxxx":return on(rn.basicOptionalSeconds,t);case"xxxxx":return on(rn.extendedOptionalSeconds,t);case"xxx":default:return on(rn.extended,t)}}set(t,i,s){return i.timestampIsSet?t:Ge(t,t.getTime()-lg(t)-s)}incompatibleTokens=["t","T","X"]}class hle extends Ae{priority=40;parse(t){return ID(t)}set(t,i,s){return[Ge(t,s*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class dle extends Ae{priority=20;parse(t){return ID(t)}set(t,i,s){return[Ge(t,s),{timestampIsSet:!0}]}incompatibleTokens="*"}const ple={G:new Aae,y:new Cae,Y:new Iae,R:new Lae,u:new Rae,Q:new Dae,q:new Nae,M:new Fae,L:new jae,w:new Vae,I:new Wae,d:new Gae,D:new qae,E:new Yae,e:new Zae,c:new Jae,i:new Kae,a:new Qae,b:new ele,B:new tle,h:new ile,H:new sle,K:new nle,k:new rle,m:new ole,s:new ale,S:new lle,X:new cle,x:new ule,t:new hle,T:new dle},fle=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mle=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,gle=/^'([^]*?)'?$/,yle=/''/g,vle=/\S/,ble=/[a-zA-Z]/;function _le(e,t,i,s){const n=$ae(),r=s?.locale??n.locale??TD,o=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0;if(t==="")return e===""?ie(i):Ge(i,NaN);const l={firstWeekContainsDate:o,weekStartsOn:a,locale:r},c=[new Eae],h=t.match(mle).map(v=>{const b=v[0];if(b in l_){const w=l_[b];return w(v,r.formatLong)}return v}).join("").match(fle),p=[];for(let v of h){!s?.useAdditionalWeekYearTokens&&AD(v)&&c_(v,t,e),!s?.useAdditionalDayOfYearTokens&&ED(v)&&c_(v,t,e);const b=v[0],w=ple[b];if(w){const{incompatibleTokens:x}=w;if(Array.isArray(x)){const S=p.find(M=>x.includes(M.token)||M.token===b);if(S)throw new RangeError(`The format string mustn't contain \`${S.fullToken}\` and \`${v}\` at the same time`)}else if(w.incompatibleTokens==="*"&&p.length>0)throw new RangeError(`The format string mustn't contain \`${v}\` and any other token at the same time`);p.push({token:b,fullToken:v});const $=w.run(e,v,r.match,l);if(!$)return Ge(i,NaN);c.push($.setter),e=$.rest}else{if(b.match(ble))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");if(v==="''"?v="'":b==="'"&&(v=wle(v)),e.indexOf(v)===0)e=e.slice(v.length);else return Ge(i,NaN)}}if(e.length>0&&vle.test(e))return Ge(i,NaN);const m=c.map(v=>v.priority).sort((v,b)=>b-v).filter((v,b,w)=>w.indexOf(v)===b).map(v=>c.filter(b=>b.priority===v).sort((b,w)=>w.subPriority-b.subPriority)).map(v=>v[0]);let g=ie(i);if(isNaN(g.getTime()))return Ge(i,NaN);const y={};for(const v of m){if(!v.validate(g,l))return Ge(i,NaN);const b=v.set(g,y,l);Array.isArray(b)?(g=b[0],Object.assign(y,b[1])):g=b}return Ge(i,g)}function wle(e){return e.match(gle)[1].replace(yle,"'")}function xle(e){const t=ie(e);return t.setMinutes(0,0,0),t}function Sle(e){const t=ie(e);return t.setMilliseconds(0),t}function Mle(e,t){const i=t?.additionalDigits??2,s=Ple(e);let n;if(s.date){const l=Ole(s.date,i);n=Ele(l.restDateString,l.year)}if(!n||isNaN(n.getTime()))return new Date(NaN);const r=n.getTime();let o=0,a;if(s.time&&(o=Ale(s.time),isNaN(o)))return new Date(NaN);if(s.timezone){if(a=Cle(s.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(r+o),c=new Date(0);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return new Date(r+o+a)}const Jp={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},$le=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Tle=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,kle=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Ple(e){const t={},i=e.split(Jp.dateTimeDelimiter);let s;if(i.length>2)return t;if(/:/.test(i[0])?s=i[0]:(t.date=i[0],s=i[1],Jp.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Jp.timeZoneDelimiter)[0],s=e.substr(t.date.length,e.length))),s){const n=Jp.timezone.exec(s);n?(t.time=s.replace(n[1],""),t.timezone=n[1]):t.time=s}return t}function Ole(e,t){const i=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(i);if(!s)return{year:NaN,restDateString:""};const n=s[1]?parseInt(s[1]):null,r=s[2]?parseInt(s[2]):null;return{year:r===null?n:r*100,restDateString:e.slice((s[1]||s[2]).length)}}function Ele(e,t){if(t===null)return new Date(NaN);const i=e.match($le);if(!i)return new Date(NaN);const s=!!i[4],n=vu(i[1]),r=vu(i[2])-1,o=vu(i[3]),a=vu(i[4]),l=vu(i[5])-1;if(s)return Nle(t,a,l)?Ile(t,a,l):new Date(NaN);{const c=new Date(0);return!Rle(t,r,o)||!Dle(t,n)?new Date(NaN):(c.setUTCFullYear(t,r,Math.max(n,o)),c)}}function vu(e){return e?parseInt(e):1}function Ale(e){const t=e.match(Tle);if(!t)return NaN;const i=J0(t[1]),s=J0(t[2]),n=J0(t[3]);return Fle(i,s,n)?i*Vd+s*zd+n*1e3:NaN}function J0(e){return e&&parseFloat(e.replace(",","."))||0}function Cle(e){if(e==="Z")return 0;const t=e.match(kle);if(!t)return 0;const i=t[1]==="+"?-1:1,s=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;return jle(s,n)?i*(s*Vd+n*zd):NaN}function Ile(e,t,i){const s=new Date(0);s.setUTCFullYear(e,0,4);const n=s.getUTCDay()||7,r=(t-1)*7+i+1-n;return s.setUTCDate(s.getUTCDate()+r),s}const Lle=[31,null,31,30,31,30,31,31,30,31,30,31];function DD(e){return e%400===0||e%4===0&&e%100!==0}function Rle(e,t,i){return t>=0&&t<=11&&i>=1&&i<=(Lle[t]||(DD(e)?29:28))}function Dle(e,t){return t>=1&&t<=(DD(e)?366:365)}function Nle(e,t,i){return t>=1&&t<=53&&i>=0&&i<=6}function Fle(e,t,i){return e===24?t===0&&i===0:i>=0&&i<60&&t>=0&&t<60&&e>=0&&e<25}function jle(e,t){return t>=0&&t<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const zle={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};JR._date.override({_id:"date-fns",formats:function(){return zle},parse:function(e,t){if(e===null||typeof e>"u")return null;const i=typeof e;return i==="number"||e instanceof Date?e=ie(e):i==="string"&&(typeof t=="string"?e=_le(e,t,new Date,this.options):e=Mle(e,this.options)),_D(e)?e.getTime():null},format:function(e,t){return Sae(e,t,this.options)},add:function(e,t,i){switch(i){case"millisecond":return ky(e,t);case"second":return hoe(e,t);case"minute":return coe(e,t);case"hour":return ooe(e,t);case"day":return Ty(e,t);case"week":return doe(e,t);case"month":return G2(e,t);case"quarter":return uoe(e,t);case"year":return poe(e,t);default:return e}},diff:function(e,t,i){switch(i){case"millisecond":return Py(e,t);case"second":return woe(e,t);case"minute":return voe(e,t);case"hour":return yoe(e,t);case"day":return wD(e,t);case"week":return xoe(e,t);case"month":return MD(e,t);case"quarter":return _oe(e,t);case"year":return Soe(e,t);default:return 0}},startOf:function(e,t,i){switch(t){case"second":return Sle(e);case"minute":return Moe(e);case"hour":return xle(e);case"day":return a_(e);case"week":return yn(e);case"isoWeek":return yn(e,{weekStartsOn:+i});case"month":return Toe(e);case"quarter":return $oe(e);case"year":return $D(e);default:return e}},endOf:function(e,t){switch(t){case"second":return Coe(e);case"minute":return Eoe(e);case"hour":return Poe(e);case"day":return xD(e);case"week":return Ooe(e);case"month":return SD(e);case"quarter":return Aoe(e);case"year":return koe(e);default:return e}}});W2.register(...soe);var Vle=W2;class Ule extends jee{player=new Fee;gpxParser=new Nee;view;map;colors;pointLayer;appendActivityId;chart;async run(){const t=new Proxy(new URLSearchParams(window.location.search),{get:(a,l)=>a.get(l)});let i=[-76,42],s=6;t.load==="rwvm"&&(this.loadGpxFromUrl("./20240510.gpx"),this.loadGpxFromUrl("./20240715.gpx"),this.loadGpxFromUrl("./20240716.gpx"),this.loadGpxFromUrl("./20240717.gpx"),this.loadGpxFromUrl("./20240719.gpx"),i=[-3.786464,-38.552803],s=17);const n=new EI({basemap:"streets-vector"});this.view=new Ree({map:n,container:"viewDiv",center:i,zoom:s});const r=new eH({view:this.view,nextBasemap:"hybrid"});this.view.ui.add(r,"bottom-left"),this.pointLayer=new PI({}),n.add(this.pointLayer),this.colors=[[200,0,0],[0,200,0],[0,0,200],[200,120,0],[100,0,0],[0,100,0],[0,0,100],[255,165,0]],document.addEventListener("player-tick",()=>{this.refresh()}),this.addClickHandler("upload",()=>{this.getById("gpxFile").click()}),this.addClickHandler("clear",()=>{this.player.clearActivities(),this.refreshActivities(),this.gaEvent("clear_activities")}),this.addClickHandler("reset",()=>{this.player.toggleStartPause(!0),this.player.reset(),this.gaEvent("reset")}),this.addClickHandler("slower",()=>{this.player.adjustSpeed(!1),this.gaEvent("slower")}),this.addClickHandler("faster",()=>{this.player.adjustSpeed(!0),this.gaEvent("faster")}),this.addClickHandler("back",()=>{this.player.goBackward(),this.gaEvent("back")}),this.addClickHandler("forward",()=>{this.player.goForward(),this.gaEvent("forward")}),this.addClickHandler("pause",()=>{this.player.toggleStartPause(!0),this.gaEvent("pause")}),this.addClickHandler("start",()=>{this.player.toggleStartPause(!1),this.gaEvent("start")});const o=this.getById("center");this.addClickHandler("center",()=>{this.isAutoCenterButtonActive()?o.classList.remove("active"):o.classList.add("active"),this.gaEvent("auto_center")}),this.getById("gpxFile")?.addEventListener("change",()=>{this.closeModal();let a=new FileReader;a.addEventListener("load",()=>{this.createActivityFromTextResult(a.result)},!1);const l=this.getById("gpxFile").files;if(l)for(let c=0;c<l.length;c++)a.readAsText(l[c])}),this.addClickHandler("activities",a=>{const l=a.target;if(l.tagName==="INPUT"){const c=l,h=c.id.split("-")[1],p=this.player.activities.filter(m=>m.id===parseInt(h));p.length&&(p[0].visible=c.checked,this.gaEvent("toggle_visibility"))}}),this.addClickHandler("close-modal",()=>{this.closeModal()}),this.addClickHandler("upload-gpx-from-modal",()=>{this.getById("gpxFile").click()}),this.player.restartTimer(),this.refresh(),this.showOrHide("panel",!0),t.load||this.showModal()}createActivityFromTextResult(t){const i=this.gpxParser.getActivitiesFromResult(t),s=this.player.activities?.map(r=>r.id||0),n=s.length?Math.max(...s):0;i.id=n+1,this.player.activities.push(i),this.player.reset(),!this.player.startDateTime&&i.startDateTime&&(this.player.startDateTime=i.startDateTime,this.player.currentDateTime=i.startDateTime),this.refreshActivities(),this.refresh(),this.player.activities.length===1&&this.center(16),this.gaEvent("load_activity")}loadGpxFromUrl(t){const i=new XMLHttpRequest;i.open("GET",t,!0),i.send(null),i.onreadystatechange=()=>{if(i.readyState===4&&i.status===200&&i.getResponseHeader("Content-Type")?.indexOf("text")!==1){const n=i.responseText;this.createActivityFromTextResult(n)}}}enableDisableButtons(){const t=!this.player.activities.length,i=["clear","reset","back","start","pause","forward","center","faster","slower"];for(const s of i)this.getButtonById(s).disabled=t}refreshActivities(){this.rebuildActivityTable(),this.addActivitiesSettingsHandlers(),this.enableDisableButtons()}startAppendToActivity(t){this.getById("gpxFile").click(),this.appendActivityId=t}deleteActivity(t){this.player.deleteActivity(t),this.refreshActivities()}rebuildActivityTable(){let t="";for(let n=0;n<this.player.activities.length;n++){let r=this.player.activities[n];t+=`<tr id="tr-${r.id}">
                    <td><input type="checkbox" id="toggle-${r.id}" ${r.visible?"checked":""}/></td>
                    <td class="icon"><span style="background-color: rgb(${this.colors[n].join(",")})"></td>
                    <td>${r.title}</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>
                      <button class="settings" id="settings-button-${r.id}"><i class="bi bi-gear"></i></button>                      
                        <div id="settings-list-${r.id}" class="settings-list">
                            <button id="append-activity-${r.id}">Append</button>
                            <button id="delete-activity-${r.id}">Delete</button>
                        </div>                     
                    </td>
                </tr>`}t=`<table class="table">
                <thead>
                  <th></th>
                  <th></th>
                  <th>Data</th>
                  <th>KMs</th>
                  <th>Pace</th>
                  <th>Tempo</th>
                  <th>HR</th>
                  <th>Edit</th>
                </thhead>
                <tbody>${t}</tboday>
              </table>`,this.getById("activities").innerHTML=t,this.enableDisableButtons();let i=[];for(let n=0;n<this.player.activities.length;n++){let r=this.player.activities[0].startDateTime?.getTime()||0;const o=this.player.activities[n];i.push({borderColor:"rgb("+this.colors[n].join()+")",data:o.points.map(a=>({x:r++,y:a[3]}))})}const s=this.getById("chart").getContext("2d");this.chart&&this.chart.destroy(),this.chart=new Vle(s,{type:"line",data:{datasets:i},options:{scales:{x:{type:"timeseries",display:!1}},elements:{point:{radius:0}},plugins:{legend:{display:!1}}}})}addActivitiesSettingsHandlers(){for(let t of this.player.activities)this.getById(`settings-button-${t.id}`).addEventListener("click",()=>{this.toggleSettings(t.id)}),this.addClickHandler(`append-activity-${t.id}`,()=>{this.startAppendToActivity(t.id),this.showOrHide(`settings-list-${t.id}`,!1)}),this.addClickHandler(`delete-activity-${t.id}`,()=>{this.deleteActivity(t.id)})}setActivityText(){for(let t=0;t<this.player.activities.length;t++){let i=this.player.activities[t];if(i){const s=this.getById("tr-"+i.id?.toString());s&&(i.accumulatedDistance===void 0&&(i.accumulatedDistance=0),s.children[3].innerHTML=i.accumulatedDistance?.toFixed(2),s.children[4].innerHTML=i.averagePace||"",i.points.length-1<=this.player.seconds||!this.player.started?s.children[5].innerHTML=i.timeDisplay||"":s.children[5].innerHTML="",s.children[6].innerHTML=i.hr?.toString()||"")}}}setSpeedText(){this.getById("multiplier").innerHTML=`${this.player.multiplier}`}setStartPauseText(){this.showOrHide("start",this.player.paused,"inline-block"),this.showOrHide("pause",!this.player.paused,"inline-block")}setTimeText(){this.getById("time").innerHTML=this.player.getMinutesSeconds(this.player.seconds),this.player.currentDateTime?(this.showOrHide("current-time-label",!0,"inline"),this.getById("current-time-text").innerHTML=this.player.currentDateTime.toLocaleTimeString()):(this.showOrHide("current-time-label",!1,"inline"),this.getById("current-time-text").innerHTML="")}setLatLongText(){if(this.player.activities.length){this.showOrHide("lat-long-label",!0,"inline");const i=this.player.activities[0].points[this.player.seconds];this.getById("lat-long-text").innerHTML=i[0].toFixed(5).toString()+", "+i[1].toFixed(5).toString()}else this.showOrHide("lat-long-label",!1),this.getById("lat-long-text").innerHTML=""}refreshGraphics(){this.pointLayer.removeAll();for(let t=0;t<this.player.activities.length;t++){let i=this.player.activities[t];if(i.visible&&i.points?.length>this.player.seconds){const s=Dee.getPointGraphic(i.points[this.player.seconds],this.colors[t]);this.pointLayer.add(s)}}}resizeMap(){if(window.innerWidth<500){const t=this.getById("panel"),i=this.getById("map-container");t&&i&&(i.style.height=(window.innerHeight-t.offsetHeight).toString()+"px")}}gaEvent(t){window.gtag("event",t)}refresh(){this.refreshGraphics(),this.setActivityText(),this.setStartPauseText(),this.setTimeText(),this.setLatLongText(),this.setSpeedText(),this.isAutoCenterButtonActive()&&this.center(),this.resizeMap()}center(t){const i=this.player.getCenter();t?this.view.goTo({center:i,zoom:t}):this.view.center=i}isAutoCenterButtonActive(){return this.getById("center")?.classList.contains("active")}showModal(){this.getById("modal")?.setAttribute("style","display:block"),this.getById("modal")?.classList.add("show"),this.getById("modal-backdrop")?.setAttribute("style","display:block"),this.getById("modal-backdrop")?.classList.add("show")}closeModal(){this.getById("modal")?.setAttribute("style","display:none"),this.getById("modal")?.classList.remove("show"),this.getById("modal-backdrop")?.setAttribute("style","display:none"),this.getById("modal-backdrop")?.classList.remove("show")}toggleSettings(t){const i=`settings-list-${t}`,n=this.getById(i)?.style?.display==="block";this.showOrHide(i,!n)}}const ND=new Ule;window.main=ND;ND.run();export{W as $,ed as A,or as B,Ex as C,ns as D,_t as E,pt as F,us as G,gue as H,Me as I,S_ as J,Ao as K,cs as L,zf as M,EA as N,MX as O,xX as P,FL as Q,Vb as R,Rd as S,ew as T,Dt as U,NI as V,nR as W,gc as X,et as Y,_de as Z,WK as _,pU as a,VW as a$,pd as a0,za as a1,Ke as a2,Dh as a3,le as a4,Qt as a5,mn as a6,z_ as a7,Pce as a8,Q as a9,mW as aA,xi as aB,wue as aC,xC as aD,mde as aE,zue as aF,Km as aG,Si as aH,Wue as aI,Dw as aJ,Ih as aK,Ax as aL,$C as aM,Iw as aN,H3 as aO,EC as aP,rj as aQ,oj as aR,rl as aS,Ft as aT,ci as aU,DL as aV,w2 as aW,wJ as aX,LL as aY,vL as aZ,bX as a_,d as aa,f as ab,k as ac,mo as ad,Ut as ae,dce as af,Tw as ag,LA as ah,Cs as ai,ae as aj,hr as ak,yy as al,Xce as am,_d as an,Lt as ao,PL as ap,hL as aq,AL as ar,ot as as,KJ as at,gde as au,aX as av,fc as aw,yde as ax,Lw as ay,gW as az,c3 as b,FH as b$,Tue as b0,zL as b1,Ec as b2,RQ as b3,Wle as b4,Ts as b5,Qe as b6,iee as b7,kI as b8,bL as b9,_ue as bA,Bue as bB,lB as bC,Sue as bD,dW as bE,P1 as bF,Mue as bG,Bhe as bH,mX as bI,nn as bJ,Mo as bK,Iue as bL,hn as bM,ry as bN,Due as bO,pg as bP,Df as bQ,she as bR,_e as bS,uy as bT,ul as bU,n2 as bV,hy as bW,HH as bX,uw as bY,eue as bZ,rue as b_,d2 as ba,jb as bb,Dd as bc,nce as bd,tP as be,jh as bf,l6 as bg,whe as bh,bG as bi,$he as bj,The as bk,bhe as bl,Bh as bm,cw as bn,Jt as bo,b3 as bp,Ls as bq,Mhe as br,p1 as bs,rhe as bt,wz as bu,vue as bv,SC as bw,MC as bx,cW as by,ge as bz,Z5 as c,T1 as c$,Vhe as c0,O$ as c1,Pc as c2,fn as c3,NL as c4,wd as c5,bue as c6,ee as c7,yo as c8,QL as c9,kp as cA,xL as cB,pW as cC,Ia as cD,Ee as cE,h2 as cF,CZ as cG,kce as cH,hi as cI,Gce as cJ,oO as cK,xo as cL,eP as cM,qe as cN,AP as cO,cr as cP,wu as cQ,ll as cR,Rue as cS,jue as cT,Tg as cU,Lue as cV,m4 as cW,mY as cX,Zg as cY,Os as cZ,oB as c_,t$ as ca,Mi as cb,Q_ as cc,Pe as cd,ql as ce,kg as cf,$t as cg,tf as ch,pn as ci,sv as cj,pC as ck,Li as cl,Gue as cm,qJ as cn,Rs as co,qP as cp,Sg as cq,VP as cr,XF as cs,n8 as ct,vd as cu,Bce as cv,y3 as cw,oe as cx,Di as cy,tt as cz,L as d,bo as d$,Qce as d0,E8 as d1,Ehe as d2,RC as d3,Ahe as d4,nue as d5,Mt as d6,Yh as d7,Od as d8,kd as d9,yd as dA,X as dB,rM as dC,Hw as dD,zG as dE,VG as dF,Tee as dG,Qa as dH,Da as dI,PC as dJ,oce as dK,Bg as dL,Ghe as dM,Hhe as dN,Lce as dO,t9 as dP,ls as dQ,xhe as dR,She as dS,sue as dT,iue as dU,tue as dV,Z as dW,rt as dX,ve as dY,ui as dZ,Yn as d_,Ka as da,Yg as db,ze as dc,as as dd,cue as de,lue as df,AV as dg,EV as dh,NG as di,WC as dj,Hle as dk,M_ as dl,iZ as dm,IG as dn,JI as dp,uee as dq,AG as dr,Vm as ds,Wm as dt,zm as du,sce as dv,vn as dw,v4 as dx,VB as dy,Xue as dz,F as e,_c as e$,N_ as e0,ode as e1,Kue as e2,kP as e3,RH as e4,DH as e5,sl as e6,xg as e7,ohe as e8,lde as e9,Tce as eA,Qn as eB,nhe as eC,cl as eD,To as eE,rN as eF,se as eG,md as eH,iy as eI,v_ as eJ,KC as eK,Khe as eL,ede as eM,Q5 as eN,ti as eO,ide as eP,ks as eQ,bd as eR,Pg as eS,uce as eT,xe as eU,Z4 as eV,e6 as eW,Y3 as eX,o1 as eY,s6 as eZ,an as e_,iL as ea,the as eb,ahe as ec,$e as ed,r2 as ee,HG as ef,XC as eg,DJ as eh,XY as ei,Qg as ej,Rw as ek,X3 as el,ly as em,oy as en,cy as eo,i2 as ep,Ad as eq,JG as er,Cd as es,dy as et,ay as eu,t2 as ev,qce as ew,Xhe as ex,Id as ey,rr as ez,pue as f,dhe as f$,Rq as f0,qY as f1,YY as f2,JC as f3,ar as f4,qh as f5,mce as f6,Lx as f7,OG as f8,Kce as f9,jm as fA,uhe as fB,yhe as fC,FP as fD,Xx as fE,LB as fF,kH as fG,PH as fH,nde as fI,ja as fJ,VK as fK,vde as fL,bde as fM,pr as fN,vo as fO,es as fP,mg as fQ,NJ as fR,fde as fS,Fce as fT,n0 as fU,mhe as fV,SX as fW,lhe as fX,vhe as fY,hhe as fZ,phe as f_,zce as fa,Vce as fb,c2 as fc,hde as fd,dde as fe,ude as ff,aue as fg,Jhe as fh,g_ as fi,bce as fj,vce as fk,I_ as fl,Zce as fm,xce as fn,sO as fo,x6 as fp,R4 as fq,Rce as fr,Uw as fs,Qhe as ft,tde as fu,cde as fv,di as fw,nH as fx,ghe as fy,CG as fz,iU as g,xue as g$,fhe as g0,ox as g1,che as g2,r0 as g3,gY as g4,OP as g5,fr as g6,dr as g7,_1 as g8,He as g9,PQ as gA,e3 as gB,PI as gC,hee as gD,u3 as gE,ur as gF,yc as gG,tc as gH,Sce as gI,a6 as gJ,pP as gK,wg as gL,ts as gM,Ace as gN,B5 as gO,cce as gP,Ix as gQ,Xle as gR,fce as gS,Oce as gT,wF as gU,zM as gV,_he as gW,zhe as gX,ZY as gY,_G as gZ,sC as g_,b1 as ga,x1 as gb,ym as gc,dC as gd,HZ as ge,EL as gf,rce as gg,N6 as gh,O_ as gi,Fh as gj,Dy as gk,Yw as gl,i$ as gm,Hue as gn,Ihe as go,Uhe as gp,q_ as gq,e8 as gr,vX as gs,_X as gt,Zh as gu,id as gv,Jle as gw,UX as gx,Pa as gy,X0 as gz,nA as h,q5 as h$,Oo as h0,J3 as h1,Cx as h2,bg as h3,cq as h4,Vue as h5,tce as h6,RA as h7,SW as h8,FA as h9,Io as hA,EM as hB,que as hC,Yue as hD,E as hE,_9 as hF,vB as hG,Cg as hH,Ba as hI,YW as hJ,Cue as hK,gX as hL,Wce as hM,e9 as hN,G9 as hO,Zx as hP,jP as hQ,zP as hR,at as hS,sde as hT,nP as hU,yce as hV,gce as hW,ug as hX,E4 as hY,O4 as hZ,Yle as h_,Pue as ha,JW as hb,RW as hc,AA as hd,Q1 as he,MW as hf,$ue as hg,Y5 as hh,Pd as hi,Gh as hj,H9 as hk,Oue as hl,IW as hm,bO as hn,m9 as ho,vO as hp,EX as hq,jce as hr,Wi as hs,zW as ht,SF as hu,B_ as hv,H_ as hw,MF as hx,Mg as hy,$g as hz,l3 as i,hce as i$,Fue as i0,qa as i1,wG as i2,Ohe as i3,Phe as i4,Eue as i5,hh as i6,rde as i7,jA as i8,iY as i9,X8 as iA,NA as iB,x9 as iC,Rm as iD,Aue as iE,d_ as iF,p_ as iG,ace as iH,T6 as iI,R_ as iJ,QN as iK,tH as iL,ade as iM,li as iN,zJ as iO,$h as iP,Qv as iQ,kA as iR,fw as iS,Wq as iT,Uq as iU,zq as iV,uS as iW,CP as iX,io as iY,dF as iZ,QC as i_,nm as ia,Qm as ib,Zle as ic,UW as id,iB as ie,kW as ig,tB as ih,sB as ii,PX as ij,_F as ik,rC as il,XW as im,EW as io,kF as ip,Ym as iq,OW as ir,CW as is,PW as it,CA as iu,n9 as iv,er as iw,kM as ix,DW as iy,DA as iz,So as j,C9 as j$,SP as j0,Z_ as j1,fg as j2,GB as j3,ff as j4,Ece as j5,oue as j6,E9 as j7,i9 as j8,s9 as j9,e4 as jA,Zw as jB,Lhe as jC,Che as jD,m_ as jE,Fl as jF,Nue as jG,Uue as jH,PM as jI,aJ as jJ,iJ as jK,kue as jL,Nw as jM,nl as jN,$ce as jO,Q3 as jP,A6 as jQ,dn as jR,ihe as jS,qhe as jT,Yhe as jU,Zhe as jV,vP as jW,uq as jX,Rhe as jY,C_ as jZ,g4 as j_,K8 as ja,A9 as jb,C8 as jc,khe as jd,gd as je,rv as jf,Bq as jg,hC as jh,Uce as ji,tZ as jj,TN as jk,a8 as jl,Dce as jm,JB as jn,E3 as jo,yg as jp,Vh as jq,Ri as jr,g8 as js,y8 as jt,Mce as ju,Hce as jv,ice as jw,_i as jx,IH as jy,LH as jz,Eo as k,O9 as k0,LW as k1,P9 as k2,B3 as k3,a3 as k4,_ce as k5,UP as k6,Nx as k7,nO as k8,Ice as k9,S9 as kA,f9 as kB,g9 as kC,o3 as kD,qX as kE,YX as kF,eB as kG,j6 as kH,Gle as kI,Nhe as kJ,Fhe as kK,Y9 as kL,q9 as kM,GZ as kN,H5 as kO,jhe as kP,Zue as kQ,Jue as kR,ehe as ka,l9 as kb,ku as kc,Que as kd,IA as ke,pde as kf,wce as kg,_ as kh,Nce as ki,due as kj,mue as kk,hue as kl,yue as km,uue as kn,Ble as ko,Dhe as kp,Whe as kq,nx as kr,Yce as ks,b4 as kt,pce as ku,Cce as kv,Qle as kw,ece as kx,Kle as ky,M6 as kz,v3 as l,qle as m,B as n,lH as o,fue as p,ud as q,lce as r,V as s,gT as t,Jce as u,fd as v,_J as w,f2 as x,my as y,Jg as z};
